import{R as M,r as t,B as k,j as e,c as y,C as N,S as R,T as H,e as F}from"./index-DGvpjgWm.js";import{L as G}from"./Layout-kbi2dNGL.js";import{P as D}from"./PageName-FtGNY4ev.js";import{d as A}from"./MoreHoriz-Cf-2Etv1.js";import{M as $,B as z,F as W}from"./Modal-DxRN-owh.js";import{T as w}from"./TextField-BGYf6AZQ.js";import{B as T}from"./Button-D8VVO348.js";import{L as Q,l as v}from"./LinearProgress-DxwqnQ2h.js";import{I as U}from"./Input-Eg4Yuw_G.js";import{P as _}from"./Paper-K36vHTxn.js";import{T as q}from"./TableContainer-BgATlgLf.js";import{T as J,a as L,b as i,c as K}from"./TableRow-DhcfXF1c.js";import{T as O}from"./TableHead-D4fHex_W.js";import{T as V}from"./Tooltip-BTVYJWJP.js";import{S as X}from"./Stack-DtPXufcT.js";import{I as Y}from"./IconButton-pTgfu9-f.js";import{M as Z}from"./Menu-CxNv4S-u.js";import{M as ee}from"./MenuItem-C60i-Lzy.js";import{G as re}from"./Grid-BGwRTvts.js";import"./FolderCopy-fAMEYysm.js";import"./getThemeProps-DV--MwOD.js";import"./Typography-DriLene-.js";import"./createSvgIcon-DOM3wMaB.js";import"./GlobalStyles-C1DXwv9-.js";import"./listItemIconClasses-hJOZkGUs.js";import"./useTheme-CPtJ_AT7.js";import"./ChevronRight-Bpz3WVJm.js";import"./PeopleAlt-DRk0_XzN.js";import"./CalendarMonth-gj1hcJ90.js";import"./Style-BhRVOdmN.js";import"./colorManipulator-BuMbTll3.js";import"./ExitToApp-Drr138pi.js";import"./Toolbar-BD1CLpQT.js";import"./FormControl-CbQkaRoK.js";import"./utils-CSmApv3b.js";import"./Select-CQTrSYRN.js";import"./Popper-D89ibtHq.js";import"./Grow-CTPeHix_.js";import"./useThemeProps-BXFTq4Gc.js";const ae=({open:a,close:n,student:s})=>{const[b,{data:x,isSuccess:c,isLoading:h,error:d}]=M(),[m,p]=t.useState(""),[f,l]=t.useState(""),g=o=>{o.preventDefault();const j={nis:m,name:f};b({id:s.id,body:j})};return t.useEffect(()=>{c&&(k.success(x.message),n()),d&&k.error(d.data.message)},[c,x,d]),t.useEffect(()=>{s&&(p(s.nis),l(s.name))},[s]),e.jsx($,{open:a,onClose:n,closeAfterTransition:!0,slots:{backdrop:z},slotProps:{backdrop:{timeout:500}},children:e.jsx(W,{in:a,children:e.jsx(y,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{className:"form-class",onSubmit:g,children:[e.jsx(w,{fullWidth:!0,label:"NIS",placeholder:"NIS",value:m||"",onChange:o=>p(o.target.value)}),e.jsx(w,{fullWidth:!0,label:"Nama Lengkap",placeholder:"Nama Lengkap",value:f||"",onChange:o=>l(o.target.value)}),e.jsxs(y,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(T,{variant:"outlined",color:"error",onClick:n,children:"batal"}),e.jsx(T,{variant:"contained",color:"success",type:"submit",children:h?e.jsx(N,{size:20,color:"inherit"}):"update"})]})]})})})})},te=R(Q)(({theme:a})=>({height:10,borderRadius:5,[`&.${v.colorPrimary}`]:{backgroundColor:a.palette.grey[200],...a.applyStyles("dark",{backgroundColor:a.palette.grey[800]})},[`& .${v.bar}`]:{borderRadius:5,backgroundColor:"#1a90ff",...a.applyStyles("dark",{backgroundColor:"#308fe8"})}})),oe=[{label:"No",width:40},{label:"NIS",width:100},{label:"Nama",width:170},{label:"Satuan",width:80},{label:"Database",width:80},{label:"Aksi",width:100}],se=({students:a,loading:n})=>{const[s,{data:b,isLoading:x}]=H(),[c,h]=t.useState(null),[d,m]=t.useState(!1),[p,f]=t.useState(""),l=!!c,g=(r,u)=>{h(r.currentTarget),f(u)},o=()=>{h(null)},j=()=>{p&&(m(!0),s(p),o())},[C,P]=t.useState(""),B=r=>r.name.toLowerCase().includes(C.toLowerCase()),S=a==null?void 0:a.filter(B),I=r=>{P(r.target.value)};return e.jsxs(t.Fragment,{children:[e.jsx(y,{sx:{p:1,boxShadow:2,bgcolor:"white",borderRadius:1,display:"flex",justifyContent:"space-between",flexDirection:{xs:"column-reverse",md:"row"},gap:1},children:e.jsx(U,{placeholder:"Search student",value:C,onChange:I})}),e.jsx(_,{children:e.jsx(q,{sx:{height:{xs:500,md:530,lg:700},overflow:"auto"},children:e.jsxs(J,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(O,{children:e.jsx(L,{children:oe.map((r,u)=>e.jsx(i,{align:"center",sx:{width:r.width},children:r.label},u))})}),e.jsx(K,{children:S==null?void 0:S.map((r,u)=>e.jsxs(L,{children:[e.jsx(i,{align:"center",children:u+1}),e.jsx(i,{align:"center",children:r.nis}),e.jsx(i,{align:"left",children:r.name}),e.jsx(i,{align:"center",children:r.homebase}),e.jsx(i,{align:"center",children:e.jsx(V,{title:`${r.percentage}%`,placement:"top-end",children:e.jsx(X,{sx:{flexGrow:1},children:e.jsx(te,{variant:"determinate",value:Number(r.percentage)})})})}),e.jsx(i,{align:"center",children:e.jsx(Y,{color:"primary",id:"basic-button","aria-controls":l?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":l?"true":void 0,onClick:E=>g(E,r.id),children:x?e.jsx(N,{size:20,color:"inherit"}):e.jsx(A,{})})})]},r.id))})]})})}),e.jsx(Z,{id:"basic-menu",anchorEl:c,open:l,onClose:o,MenuListProps:{"aria-labelledby":"basic-button"},children:e.jsx(ee,{onClick:j,children:"Edit"})}),e.jsx(ae,{open:d,close:()=>m(!1),student:b})]})},_e=()=>{const{data:a,isLoading:n}=F();return e.jsxs(G,{children:[e.jsx(D,{title:"Students"}),e.jsx(re,{container:!0,sx:{minHeight:"85vh",display:"flex",flexDirection:"column",gap:1},children:e.jsx(se,{students:a,loading:n})})]})};export{_e as default};
