import{b as U,G as R,U as O,r as s,B as h,j as e,c as f,C as B,V,W as X,X as Y,Y as Z,Z as J,a as K}from"./index-DGvpjgWm.js";import{L as ee}from"./Layout-CYQNl8g6.js";import{P as se}from"./PageName-FtGNY4ev.js";import{d as te}from"./MoreHoriz-Cf-2Etv1.js";import{d as re,a as ae}from"./FolderDelete-CieqdwqK.js";import{M as F,F as H}from"./Modal-DxRN-owh.js";import{F as W}from"./FormControl-CbQkaRoK.js";import{I as _,T as q}from"./TextField-BGYf6AZQ.js";import{S as A}from"./Select-CQTrSYRN.js";import{M as I}from"./MenuItem-C60i-Lzy.js";import{B as b}from"./Button-D8VVO348.js";import{T as ne}from"./Typography-DriLene-.js";import{I as ie}from"./Input-Eg4Yuw_G.js";import{P as le}from"./Paper-K36vHTxn.js";import{T as oe}from"./TableContainer-BgATlgLf.js";import{T as ce,a as P,b as T,c as de}from"./TableRow-DhcfXF1c.js";import{T as ue}from"./TableHead-D4fHex_W.js";import{I as he}from"./IconButton-pTgfu9-f.js";import{M as fe}from"./Menu-CxNv4S-u.js";import{G as xe}from"./Grid-BGwRTvts.js";import"./FolderCopy-fAMEYysm.js";import"./getThemeProps-DV--MwOD.js";import"./createSvgIcon-DOM3wMaB.js";import"./GlobalStyles-C1DXwv9-.js";import"./listItemIconClasses-hJOZkGUs.js";import"./useTheme-CPtJ_AT7.js";import"./ChevronRight-Bpz3WVJm.js";import"./Storage-BWAOlbSG.js";import"./CalendarMonth-gj1hcJ90.js";import"./Style-BhRVOdmN.js";import"./colorManipulator-BuMbTll3.js";import"./ExitToApp-Drr138pi.js";import"./Toolbar-BD1CLpQT.js";import"./utils-CSmApv3b.js";import"./Grow-CTPeHix_.js";const me=({open:o,close:i})=>{const{user:r}=U(t=>t.authentication),{data:l,isLoading:x}=R(),[E,{data:c,isLoading:d,isSuccess:C,error:u,reset:v}]=O(),[m,M]=s.useState(""),[p,y]=s.useState(!1),[j,S]=s.useState(""),[G,g]=s.useState(""),[z,Q]=s.useState(""),N=t=>{if(t.preventDefault(),/[/\-]/.test(z)){h.error("Quiz name should not contain '/' or '-'");return}const a={teacherId:r==null?void 0:r.id,gradeId:m,quizName:z,shuffle:p,mc:j,essay:G};E(a)};s.useEffect(()=>{C&&(h.success(c.message),M(""),y(!1),S(""),g(""),Q(""),i(),v()),u&&(h.error(u.data.message),v())},[c,C,u]);const L=()=>{y(!1),Q(""),S(""),g(""),M(""),i()};return e.jsx(F,{open:o,onClose:i,closeAfterTransition:!0,children:e.jsx(H,{in:o,children:e.jsx(f,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{className:"form-quiz",onSubmit:N,children:[e.jsxs(W,{fullWidth:!0,children:[e.jsx(_,{children:"--Grade--"}),e.jsx(A,{value:m,onChange:t=>M(t.target.value),required:!0,label:"--Grade--",children:l==null?void 0:l.map(t=>e.jsx(I,{value:t.id,children:t.grade},t.id))})]}),e.jsxs(W,{fullWidth:!0,children:[e.jsx(_,{children:"--Shuffle--"}),e.jsxs(A,{value:p,onChange:t=>y(t.target.value),required:!0,label:"--Grade--",children:[e.jsx(I,{value:!0,children:"yes"}),e.jsx(I,{value:!1,children:"No"})]})]}),e.jsx(q,{fullWidth:!0,required:!0,label:"Quiz Name",placeholder:"Quiz Name",value:z,onChange:t=>Q(t.target.value)}),e.jsxs(f,{sx:{display:"flex",gap:1},children:[e.jsx(q,{fullWidth:!0,required:!0,type:"number",label:"MC",placeholder:"eg: 80",value:j,onChange:t=>S(t.target.value)}),e.jsx(q,{fullWidth:!0,required:!0,type:"number",label:"Essay",placeholder:"eg: 20",value:G,onChange:t=>g(t.target.value)})]}),e.jsxs(f,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(b,{variant:"outlined",color:"error",onClick:L,children:"cancel"}),e.jsx(b,{variant:"contained",color:"success",type:"submit",children:x||d?e.jsx(B,{size:20,color:"inherit"}):"add"})]})]})})})})},pe=({open:o,close:i})=>{const[r,{data:l,isSuccess:x,isLoading:E,error:c,reset:d}]=V(),C=()=>r();return s.useEffect(()=>{x&&(h.success(l.message),i(),d()),c&&h.error(c.data.message)},[l,x,c]),e.jsx(F,{open:o,onClose:i,closeAfterTransition:!0,children:e.jsx(H,{in:o,children:e.jsxs(f,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:[e.jsx(ne,{align:"center",children:"Are you sure you want to delete all quizzes?"}),e.jsxs(f,{sx:{display:"flex",gap:1,justifyContent:"flex-end",mt:1},children:[e.jsx(b,{variant:"contained",color:"error",onClick:i,children:"cancel"}),e.jsx(b,{variant:"outlined",color:"error",onClick:C,children:E?e.jsx(B,{size:20,color:"inherit"}):"sure"})]})]})})})},je=()=>{const[o,i]=s.useState(!1),[r,l]=s.useState(!1);return e.jsxs(f,{sx:{display:"flex",justifyContent:"end",gap:1},children:[e.jsx(b,{variant:"contained",color:"success",startIcon:e.jsx(re,{}),onClick:()=>l(!0),sx:{width:120},children:"add"}),e.jsx(b,{startIcon:e.jsx(ae,{}),variant:"contained",color:"error",onClick:()=>i(!0),sx:{width:120},children:"Delete"}),e.jsx(me,{open:r,close:()=>l(!1)}),e.jsx(pe,{open:o,close:()=>i(!1)})]})},ge=({open:o,close:i,quiz:r})=>{const{data:l,isLoading:x}=R(),[E,{data:c,isSuccess:d,isLoading:C,error:u,reset:v}]=X(),[m,M]=s.useState(""),[p,y]=s.useState(""),[j,S]=s.useState(!1),[G,g]=s.useState(""),[z,Q]=s.useState(""),[N,L]=s.useState(""),t=a=>{if(a.preventDefault(),/[/\-]/.test(N)){h.error("Quiz name should not contain '/' or '-'");return}const k={teacherId:m,gradeId:p,quizName:N,shuffle:j,mc:G,essay:z};E({id:r.id,body:k})};return s.useEffect(()=>{d&&(h.success(c.message),i(),v()),u&&(h.error(u.data.message),v())},[c,d,u]),s.useEffect(()=>{r&&(M(r.teacher_id),y(r.grade_id),S(r.shuffle),g(r.mc_weight),Q(r.essay_weight),L(r.quiz_name))},[r]),e.jsx(F,{open:o,onClose:i,closeAfterTransition:!0,children:e.jsx(H,{in:o,children:e.jsx(f,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{className:"form-quiz",onSubmit:t,children:[e.jsxs(W,{fullWidth:!0,children:[e.jsx(_,{children:"--Grade--"}),e.jsx(A,{value:p||"",onChange:a=>y(a.target.value),required:!0,label:"--Grade--",children:l==null?void 0:l.map(a=>e.jsx(I,{value:a.id,children:a.grade},a.id))})]}),e.jsxs(W,{fullWidth:!0,children:[e.jsx(_,{children:"--Shuffle--"}),e.jsxs(A,{value:j,onChange:a=>S(a.target.value),required:!0,label:"--Grade--",children:[e.jsx(I,{value:!0,children:"yes"}),e.jsx(I,{value:!1,children:"No"})]})]}),e.jsx(q,{fullWidth:!0,required:!0,label:"Quiz Name",placeholder:"Quiz Name",value:N||"",onChange:a=>L(a.target.value)}),e.jsxs(f,{sx:{display:"flex",gap:1},children:[e.jsx(q,{fullWidth:!0,required:!0,type:"number",label:"MC",placeholder:"eg: 80",value:G||"",onChange:a=>g(a.target.value)}),e.jsx(q,{fullWidth:!0,required:!0,type:"number",label:"Essay",placeholder:"eg: 20",value:z||"",onChange:a=>Q(a.target.value)})]}),e.jsxs(f,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(b,{variant:"outlined",color:"error",onClick:i,children:"cancel"}),e.jsx(b,{variant:"contained",color:"success",type:"submit",children:x||C?e.jsx(B,{size:20,color:"inherit"}):"update"})]})]})})})})},be=[{label:"No",width:50},{label:"Bank",width:170},{label:"Grade",width:70},{label:"MC",width:70},{label:"Essay",width:70},{label:"Questions",width:70},{label:"Actions",width:170}],Ce=()=>{const{data:o}=Y(),[i,{data:r}]=Z(),[l,{data:x,isLoading:E,isSuccess:c,error:d,reset:C}]=J(),[u,v]=s.useState(null),[m,M]=s.useState(""),p=!!u,y=(n,w)=>{v(n.currentTarget),M(w)},j=()=>{v(null)},S=K(),[G,g]=s.useState(!1),z=(n,w)=>{const D=n.replace(/\s+/g,"-");S(`/teacher/quizzes/${D}/${w}`)},Q=()=>{m&&(g(!0),i(m),j())},N=()=>{m&&(l(m),j())};s.useEffect(()=>{c&&(h.success(x.message),C()),d&&h.error(d.data.message)},[x,c,d]);const[L,t]=s.useState(""),a=n=>n.quiz_name.toLowerCase().includes(L.toLowerCase()),k=o==null?void 0:o.filter(a),$=n=>{t(n.target.value)};return e.jsxs(s.Fragment,{children:[e.jsxs(f,{sx:{p:1,boxShadow:2,bgcolor:"white",borderRadius:1,display:"flex",justifyContent:"space-between",flexDirection:{xs:"column-reverse",md:"row"},gap:2},children:[e.jsx(ie,{placeholder:"Cari Bank Soal",value:L,onChange:$}),e.jsx(je,{})]}),e.jsx(le,{children:e.jsx(oe,{children:e.jsxs(ce,{children:[e.jsx(ue,{children:e.jsx(P,{children:be.map((n,w)=>e.jsx(T,{align:"center",sx:{width:n.width},children:n.label},w))})}),e.jsx(de,{children:k==null?void 0:k.map((n,w)=>e.jsxs(P,{children:[e.jsx(T,{align:"center",children:w+1}),e.jsx(T,{align:"center",children:n.quiz_name}),e.jsx(T,{align:"center",children:n.grade}),e.jsx(T,{align:"center",children:n.mc}),e.jsx(T,{align:"center",children:n.essay}),e.jsx(T,{align:"center",children:e.jsx(b,{variant:"contained",color:"success",onClick:()=>z(n.quiz_name,n.id),children:"Add"})}),e.jsx(T,{align:"center",children:e.jsx(he,{id:"basic-button",color:"primary","aria-controls":p?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":p?"true":void 0,onClick:D=>y(D,n.id),children:E?e.jsx(B,{size:20}):e.jsx(te,{})})})]},w))})]})})}),e.jsx(ge,{open:G,close:()=>g(!1),quiz:r}),e.jsxs(fe,{id:"basic-menu",anchorEl:u,open:p,onClose:j,MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsx(I,{onClick:()=>Q(),children:"Edit"}),e.jsx(I,{onClick:N,children:"Delete"})]})]})},ts=()=>e.jsxs(ee,{children:[e.jsx(se,{title:"Quizzes"}),e.jsx(xe,{container:!0,sx:{minHeight:"85vh",display:"flex",flexDirection:"column",gap:1},children:e.jsx(Ce,{})})]});export{ts as default};
