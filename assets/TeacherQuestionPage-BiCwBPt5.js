import{M as I,_ as F,r as h,B as b,j as e,c as g,C as S,$ as H,a as Q,a0 as P,a1 as R,a2 as D}from"./index-DGvpjgWm.js";import{L as B}from"./Layout-CYQNl8g6.js";import{P as U}from"./PageName-FtGNY4ev.js";import{d as W,a as G}from"./FolderDelete-CieqdwqK.js";import{d as K,a as J}from"./InsertDriveFileOutlined-D63ikZex.js";import{M as L,F as A}from"./Modal-DxRN-owh.js";import{T as N}from"./Typography-DriLene-.js";import{B as m}from"./Button-D8VVO348.js";import{r as O,u as V}from"./xlsx-DT8pmw08.js";import{I as X}from"./Input-Eg4Yuw_G.js";import{d as M,a as T}from"./PlaylistRemove-DLvztMo5.js";import{R as Y}from"./bundle-D98oBTwj.js";/* empty css               */import{G as v}from"./Grid-BGwRTvts.js";import{T as z}from"./Tooltip-BTVYJWJP.js";import{I as q}from"./IconButton-pTgfu9-f.js";import{D as Z}from"./FolderCopy-fAMEYysm.js";import"./ChevronRight-Bpz3WVJm.js";import"./createSvgIcon-DOM3wMaB.js";import"./Storage-BWAOlbSG.js";import"./CalendarMonth-gj1hcJ90.js";import"./Style-BhRVOdmN.js";import"./colorManipulator-BuMbTll3.js";import"./ExitToApp-Drr138pi.js";import"./useTheme-CPtJ_AT7.js";import"./Toolbar-BD1CLpQT.js";import"./listItemIconClasses-hJOZkGUs.js";import"./utils-CSmApv3b.js";import"./GlobalStyles-C1DXwv9-.js";import"./Popper-D89ibtHq.js";import"./Grow-CTPeHix_.js";import"./getThemeProps-DV--MwOD.js";import"./Paper-K36vHTxn.js";const ee=({open:i,close:t})=>{const n=I(),{quizId:u}=n,[x,{data:l,isSuccess:c,isLoading:d,error:r,reset:C}]=F(),o=()=>x(u);return h.useEffect(()=>{c&&(b.success(l.message),t(),C()),r&&b.error(r.data.message)},[l,c,r]),e.jsx(L,{open:i,onClose:t,closeAfterTransition:!0,children:e.jsx(A,{in:i,children:e.jsxs(g,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:[e.jsx(N,{align:"center",children:"Are you sure you want to delete all question?"}),e.jsxs(g,{sx:{display:"flex",gap:1,justifyContent:"flex-end",mt:2},children:[e.jsx(m,{variant:"contained",color:"error",onClick:t,children:"cancel"}),e.jsx(m,{variant:"outlined",color:"error",onClick:o,children:d?e.jsx(S,{size:24,color:"inherit"}):"sure"})]})]})})})},se=({open:i,close:t})=>{const n=I(),{quizId:u}=n,[x,l]=h.useState(null),[c,{data:d,isSuccess:r,isLoading:C,error:o,reset:a}]=H(),p=f=>{l(f.target.files[0])},k=()=>{if(x){const f=new FileReader;f.onload=s=>{const y=new Uint8Array(s.target.result),w=O(y,{type:"array"}),j=w.SheetNames[0],$=w.Sheets[j],E={data:V.sheet_to_json($,{header:1,range:1})};c({id:u,body:E})},f.readAsArrayBuffer(x)}};return h.useEffect(()=>{r&&(b.success(d.message),t(),a()),o&&(b.error(o.data.message),a(),console.log(o))},[d,r,o]),e.jsx(L,{open:i,onClose:t,closeAfterTransition:!0,children:e.jsx(A,{in:i,children:e.jsx(g,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"#ffff",boxShadow:24,p:2,display:"flex",alignContent:"center",justifyContent:"center"},children:e.jsxs(g,{sx:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"10px"},children:[e.jsx(X,{required:!0,fullWidth:!0,type:"file",placeholder:"Upload file here",onChange:p}),e.jsxs(g,{sx:{display:"flex",justifyContent:"end",width:"100%",gap:1},children:[e.jsx(m,{variant:"contained",color:"error",onClick:t,children:"cancel"}),e.jsx(m,{variant:"contained",color:"success",onClick:k,children:C?e.jsx(S,{size:20,color:"inherit"}):"upload"})]})]})})})})},te=()=>{var r;const i=Q(),t=I(),[n,u]=h.useState(!1);h.useState(!1);const[x,l]=h.useState(!1),c=()=>{window.open("/soal_template.xlsx","_blank")},d=()=>i(`/teacher/quizzes/add/${t.quizname}/${t.quizId}`);return e.jsxs(g,{sx:{display:"flex",justifyContent:"space-between",gap:1,flexWrap:"wrap",bgcolor:"white",p:1,borderRadius:1,boxShadow:2},children:[e.jsx(N,{sx:{alignContent:"center",fontWeight:"bold"},children:(r=t.quizname)==null?void 0:r.replaceAll("_"," ")}),e.jsxs(g,{sx:{display:"flex",gap:1},children:[e.jsx(m,{variant:"contained",color:"success",startIcon:e.jsx(W,{}),onClick:d,sx:{width:120},children:"add"}),e.jsx(m,{startIcon:e.jsx(K,{}),variant:"contained",color:"secondary",onClick:()=>l(!0),sx:{width:120},children:"Upload"}),e.jsx(m,{startIcon:e.jsx(J,{}),variant:"contained",color:"warning",sx:{width:120},onClick:c,children:"Template"}),e.jsx(m,{startIcon:e.jsx(G,{}),variant:"contained",color:"error",onClick:()=>u(!0),sx:{width:120},children:"Delete"})]}),e.jsx(ee,{open:n,close:()=>u(!1)}),e.jsx(se,{open:x,close:()=>l(!1)})]})},_=i=>({__html:i}),re=()=>{const i=Q(),t=I(),{quizId:n,quizname:u}=t,[x,{data:l,isSuccess:c,isLoading:d,error:r,reset:C}]=P(),{data:o}=R(n,{skip:!n}),a=o==null?void 0:o.filter(s=>s.type===1),p=o==null?void 0:o.filter(s=>s.type===2),k=s=>{i(`/teacher/quizzes/edit/${u}/${n}/question/${s}`)},f=s=>x({id:s,quizId:n});return h.useEffect(()=>{c&&(b.success(l.message),C()),r&&b.error(r.data.message)},[l,c,r]),e.jsxs(v,{container:!0,sx:{bgcolor:"white",borderRadius:1,boxShadow:2,maxHeight:{xs:500,md:530,lg:630},p:1,overflow:"auto"},children:[e.jsxs(v,{item:!0,xs:12,md:12,children:[e.jsx(N,{variant:"body2",fontWeight:"bold",children:`Multiple Choises ${a==null?void 0:a.length}`}),a==null?void 0:a.map((s,y)=>{var w;return e.jsxs(h.Fragment,{children:[e.jsxs("div",{className:"quiz-layout",children:[e.jsxs("div",{className:"number",children:[y+1,"."]}),e.jsxs("div",{className:"quiz-box",children:[e.jsx("article",{dangerouslySetInnerHTML:_(s.question)}),s.audio&&e.jsx(Y,{src:s.audio,controls:!0}),e.jsx("div",{className:"choices",children:(w=s.choices)==null?void 0:w.map((j,$)=>j.text!==null&&e.jsxs("div",{className:"answer",children:[e.jsxs("p",{className:j.value===s.key?"bold-text":"normal-text",children:[j.value,"."]}),e.jsx("p",{dangerouslySetInnerHTML:_(j.text),className:j.value===s.key?"bold-text":"normal-text"})]},$))}),e.jsx("p",{children:`Key: ${s.key}`}),e.jsx("p",{children:`Score: ${s.score}`})]}),e.jsxs("div",{className:"action",children:[e.jsx(z,{title:"Edit",children:e.jsx(q,{onClick:()=>k(s.id),children:e.jsx(M,{sx:{color:D[800]}})})}),e.jsx(z,{title:"Delete",children:e.jsx(q,{onClick:()=>f(s.id),color:"error",children:d?e.jsx(S,{size:24}):e.jsx(T,{})})})]})]}),e.jsx(Z,{})]},s.id)})]}),e.jsxs(v,{item:!0,xs:12,md:12,sx:{pt:1},children:[e.jsx(N,{variant:"body2",fontWeight:"bold",children:`Multiple Essay ${p==null?void 0:p.length}`}),p==null?void 0:p.map((s,y)=>e.jsxs("div",{className:"quiz-layout",children:[e.jsx("div",{className:"number",children:(a==null?void 0:a.length)+y+1}),e.jsx("div",{className:"quiz-box",children:e.jsx("article",{dangerouslySetInnerHTML:_(s.question)})}),e.jsxs("div",{className:"action",children:[e.jsx(z,{title:"Edit",children:e.jsx(q,{onClick:()=>k(s.id),children:e.jsx(M,{sx:{color:D[800]}})})}),e.jsx(z,{title:"Delete",children:e.jsx(q,{onClick:()=>f(s.id),color:"error",children:d?e.jsx(S,{size:24}):e.jsx(T,{})})})]})]},y))]})]})},Ee=()=>e.jsxs(B,{children:[e.jsx(U,{title:"Quiz Name"}),e.jsxs(v,{container:!0,sx:{minHeight:"85vh",display:"flex",flexDirection:"column",gap:2},children:[e.jsx(v,{item:!0,xs:12,md:12,children:e.jsx(te,{})}),e.jsx(v,{item:!0,xs:12,md:12,children:e.jsx(re,{})})]})]});export{Ee as default};
