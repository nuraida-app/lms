import{L as R,M as K,r as t,B as j,j as e,c as S,C as G,N as V,O as X,a as Y,n as Z,P as ee,Q as se}from"./index-DjgEXlBM.js";import{P as te}from"./PageName-ZPCS438x.js";import{L as ae}from"./Layout-BRQ_XQ2b.js";import{d as re,a as oe}from"./FolderDelete---4wtr-M.js";/* empty css               */import{M as N,F as A}from"./Modal-DCAalMQR.js";import{F}from"./FormControl-TopU_Zco.js";import{I as _,T as M}from"./TextField-CYEQKP_m.js";import{S as z,M as le}from"./Select-C4xHsIAt.js";import{M as I}from"./MenuItem-AkT7IuJC.js";import{B as C}from"./Button-FzYR9QjW.js";import{T as ne}from"./Typography-Ck8ZmvYm.js";import{d as ie}from"./MoreHoriz-B7rLeTAL.js";import{P as de}from"./Paper-0_Nxrl9K.js";import{T as ce}from"./TableContainer-ywpNEKl8.js";import{a as ue,b as xe,c as P,T as p}from"./TableRow-9p40iQCm.js";import{T as he}from"./TableBody-Dl-9RlEw.js";import{I as me}from"./IconButton-DVAIich5.js";import{G as L}from"./Grid-Cm2mtght.js";import"./ChevronRight-JRIqjZRu.js";import"./createSvgIcon-DbdgCAn1.js";import"./GlobalStyles-naRZnfmu.js";import"./listItemIconClasses-8sYbMhEm.js";import"./useTheme-BUXj7LXp.js";import"./ListItemText-sHcdjvhz.js";import"./PeopleAlt-DJyQ-vYi.js";import"./CalendarMonth-ZeFlFCc4.js";import"./Style-COl1V7Ra.js";import"./utils-CGVmn-r6.js";import"./Input-Djdk2BZh.js";import"./Grow-C7cMHxnE.js";const fe=({open:l,close:a})=>{const{data:s}=R(),[n,{data:c,isSuccess:u,isLoading:x,error:i,reset:g}]=K(),[y,f]=t.useState(""),[b,h]=t.useState(""),[v,m]=t.useState(""),T=r=>{r.preventDefault(),n({gradeId:y,code:b,name:v})};return t.useEffect(()=>{u&&(j.success(c.message),f(""),h(""),m(""),g(),a()),i&&j.error(i.data.message)},[c,u,i]),e.jsx(N,{open:l,onClose:a,closeAfterTransition:!0,children:e.jsx(A,{in:l,children:e.jsx(S,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{className:"form-class",onSubmit:T,children:[e.jsxs(F,{children:[e.jsx(_,{children:"--Grade--"}),e.jsx(z,{required:!0,label:"--Grade--",value:y,onChange:r=>f(r.target.value),children:s==null?void 0:s.map(r=>e.jsx(I,{value:r.id,children:r.grade},r.id))})]}),e.jsx(M,{fullWidth:!0,label:"Class code",placeholder:"Must be NUMBER",value:b,onChange:r=>h(r.target.value)}),e.jsx(M,{fullWidth:!0,label:"Class",placeholder:"Class",value:v,onChange:r=>m(r.target.value)}),e.jsxs(S,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(C,{variant:"outlined",color:"error",onClick:a,children:"cancel"}),e.jsx(C,{variant:"contained",color:"success",type:"submit",children:x?e.jsx(G,{size:20,color:"inherit"}):"add"})]})]})})})})},pe=({open:l,close:a})=>{const[s,{data:n,isSuccess:c,isLoading:u,error:x}]=V(),i=()=>s();return t.useEffect(()=>{c&&(j.success(n.message),a()),x&&j.error(x.data.message)},[c,n,x]),e.jsx(N,{open:l,onClose:a,closeAfterTransition:!0,children:e.jsx(A,{in:l,children:e.jsxs(S,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:[e.jsx(ne,{align:"center",children:"Are you sure you want to delete all classes?"}),e.jsxs(S,{sx:{display:"flex",gap:2,justifyContent:"flex-end",mt:2},children:[e.jsx(C,{variant:"contained",color:"error",onClick:a,children:"cancel"}),e.jsx(C,{variant:"outlined",color:"error",onClick:i,children:u?e.jsx(G,{size:20,color:"inherit"}):"sure"})]})]})})})},je=()=>{const[l,a]=t.useState(!1),[s,n]=t.useState(!1);return e.jsxs(S,{sx:{display:"flex",justifyContent:"end",gap:1,p:1,boxShadow:2,bgcolor:"white",borderRadius:1},children:[e.jsx(C,{variant:"contained",color:"success",startIcon:e.jsx(re,{}),onClick:()=>n(!0),sx:{width:120},children:"add"}),e.jsx(C,{startIcon:e.jsx(oe,{}),variant:"contained",color:"error",onClick:()=>a(!0),sx:{width:120},children:"Delete"}),e.jsx(fe,{open:s,close:()=>n(!1)}),e.jsx(pe,{open:l,close:()=>a(!1)})]})},Ce=({open:l,close:a,data:s})=>{const{data:n}=R(),[c,{data:u,isLoading:x,isSuccess:i,error:g,reset:y}]=X(),[f,b]=t.useState(""),[h,v]=t.useState(""),[m,T]=t.useState(""),r=o=>{o.preventDefault();const H={gradeId:f,code:h,name:m};c({id:s==null?void 0:s.id,body:H})};return t.useEffect(()=>{i&&(j.success(u.message),a(),y()),g&&j.error(g.data.message)},[i,u,g]),t.useEffect(()=>{s&&(b(s==null?void 0:s.grade_id),v(s==null?void 0:s.code),T(s==null?void 0:s.name))},[s]),e.jsx(N,{open:l,onClose:a,closeAfterTransition:!0,children:e.jsx(A,{in:l,children:e.jsx(S,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{className:"form-class",onSubmit:r,children:[e.jsxs(F,{children:[e.jsx(_,{children:"--Grade--"}),e.jsx(z,{required:!0,label:"--Grade--",value:f||"",onChange:o=>b(o.target.value),children:n==null?void 0:n.map(o=>e.jsx(I,{value:o.id,children:o.grade},o.id))})]}),e.jsx(M,{fullWidth:!0,label:"Code",placeholder:"Code",value:h||"",onChange:o=>v(o.target.value)}),e.jsx(M,{fullWidth:!0,label:"Name",placeholder:"Name",value:m||"",onChange:o=>T(o.target.value)}),e.jsxs(S,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(C,{variant:"outlined",color:"error",onClick:a,children:"cancel"}),e.jsx(C,{variant:"contained",color:"success",type:"submit",children:x?e.jsx(G,{size:20,color:"inherit"}):"add"})]})]})})})})},ge=[{label:"No",width:40},{label:"Homebase",width:100},{label:"Grade",width:100},{label:"Code",width:40},{label:"Class",width:100},{label:"Students",width:50},{label:"Actions",width:50}],be=()=>{const[l,a]=t.useState(null),s=!!l,[n,c]=t.useState(""),[u,x]=t.useState(""),[i,g]=t.useState(""),[y,f]=t.useState(!1),b=(d,w,E,J)=>{a(d.currentTarget),g(w),c(J),x(E)},h=()=>{a(null)},v=Y(),{data:m,isLoading:T}=Z(),[r,{data:o,isLoading:H}]=ee(),[W,{data:B,isLoading:$,isSuccess:D,error:k,reset:Q}]=se(),U=()=>v(`/admin/classes/grade/${u}/class-code/${n}/add-students`),q=()=>{i&&(r(i),f(!0),h())},O=()=>{i&&(W(i),h())};return t.useEffect(()=>{D&&(j.success(B.message),Q()),k&&j.error(k.data.message)},[D,B,k]),e.jsx(de,{children:e.jsxs(ce,{sx:{height:{xs:500,md:530,xl:630},overflow:"auto"},children:[e.jsxs(ue,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(xe,{children:e.jsx(P,{children:ge.map((d,w)=>e.jsx(p,{align:"center",sx:{width:d.width},children:d.label},w))})}),e.jsx(he,{children:m==null?void 0:m.map((d,w)=>e.jsxs(P,{children:[e.jsx(p,{align:"center",children:w+1}),e.jsx(p,{align:"center",children:d.homebase}),e.jsx(p,{align:"center",children:d.grade}),e.jsx(p,{align:"center",children:d.code}),e.jsx(p,{align:"center",children:d.name}),e.jsx(p,{align:"center",children:d.students}),e.jsx(p,{align:"center",children:e.jsx(me,{onClick:E=>b(E,d.id,d.grade_id,d.code),children:$?e.jsx(G,{size:14}):e.jsx(ie,{})})})]},w))})]}),e.jsxs(le,{id:"basic-menu",anchorEl:l,open:s,onClose:h,MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsx(I,{onClick:U,children:"Add Students"}),e.jsx(I,{onClick:q,children:"Edit"}),e.jsx(I,{onClick:O,children:"Delete"})]}),e.jsx(Ce,{open:y,close:()=>f(!1),data:o})]})})},Ye=()=>e.jsxs(ae,{children:[e.jsx(te,{title:"Classes"}),e.jsxs(L,{container:!0,sx:{minHeight:"85vh",display:"flex",flexDirection:"column",gap:2},children:[e.jsx(L,{item:!0,xs:12,md:12,children:e.jsx(je,{})}),e.jsx(L,{item:!0,xs:12,md:12,children:e.jsx(be,{})})]})]});export{Ye as default};
