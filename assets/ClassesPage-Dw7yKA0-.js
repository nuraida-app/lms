import{G as R,H as O,r as t,B as j,j as e,c as S,C as M,I as V,J as X,a as Y,f as Z,K as ee,L as se}from"./index-DIsnH_Xf.js";import{P as te}from"./PageName-CpY048DR.js";import{L as ae}from"./Layout-IEtBPvWE.js";import{d as re,a as oe}from"./FolderDelete-C0C3IsIz.js";/* empty css               */import{M as A,F as H}from"./Modal-D80yxPyo.js";import{F}from"./FormControl-B-R9P-Ww.js";import{I as _,T as G}from"./TextField-B-t6DXr_.js";import{S as z}from"./Select-D9XimaUz.js";import{M as I}from"./MenuItem-CcvLpfhi.js";import{B as C}from"./Button-B7ffD2a8.js";import{T as le}from"./Typography-BA3Sygrx.js";import{d as ne}from"./MoreHoriz-Cu_p-hZD.js";import{P as ie}from"./Paper-Cux33Jjz.js";import{T as de}from"./TableContainer-BHuaUBRM.js";import{T as ce,a as ue,b as P,c as p,d as xe}from"./TableRow-PFvMlieY.js";import{I as he}from"./IconButton-B5Esn2cm.js";import{M as me}from"./Menu-DLhG4VV7.js";import{G as L}from"./Grid-DGGoNAVF.js";import"./FolderCopy-B8qhQldI.js";import"./getThemeProps-DvYUzjFl.js";import"./createSvgIcon-Wm_MOYli.js";import"./GlobalStyles-YGyYwcXu.js";import"./listItemIconClasses-BinbQng3.js";import"./useTheme-BZgM83zG.js";import"./ChevronRight-B7sBRn01.js";import"./PeopleAlt-BSyRoO6G.js";import"./CalendarMonth-Dq7grY8y.js";import"./Style-xw6W94kL.js";import"./ExitToApp-B9qPmLkr.js";import"./Toolbar-BM5Zh9fB.js";import"./utils-CTc4hCOr.js";import"./Input-DlM2f4TJ.js";import"./Grow-B6ooTGOG.js";const fe=({open:l,close:a})=>{const{data:s}=R(),[n,{data:c,isSuccess:u,isLoading:x,error:i,reset:g}]=O(),[y,f]=t.useState(""),[b,h]=t.useState(""),[v,m]=t.useState(""),T=r=>{r.preventDefault(),n({gradeId:y,code:b,name:v})};return t.useEffect(()=>{u&&(j.success(c.message),f(""),h(""),m(""),g(),a()),i&&j.error(i.data.message)},[c,u,i]),e.jsx(A,{open:l,onClose:a,closeAfterTransition:!0,children:e.jsx(H,{in:l,children:e.jsx(S,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{className:"form-class",onSubmit:T,children:[e.jsxs(F,{children:[e.jsx(_,{children:"--Grade--"}),e.jsx(z,{required:!0,label:"--Grade--",value:y,onChange:r=>f(r.target.value),children:s==null?void 0:s.map(r=>e.jsx(I,{value:r.id,children:r.grade},r.id))})]}),e.jsx(G,{fullWidth:!0,label:"Class code",placeholder:"Must be NUMBER",value:b,onChange:r=>h(r.target.value)}),e.jsx(G,{fullWidth:!0,label:"Class",placeholder:"Class",value:v,onChange:r=>m(r.target.value)}),e.jsxs(S,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(C,{variant:"outlined",color:"error",onClick:a,children:"cancel"}),e.jsx(C,{variant:"contained",color:"success",type:"submit",children:x?e.jsx(M,{size:20,color:"inherit"}):"add"})]})]})})})})},pe=({open:l,close:a})=>{const[s,{data:n,isSuccess:c,isLoading:u,error:x}]=V(),i=()=>s();return t.useEffect(()=>{c&&(j.success(n.message),a()),x&&j.error(x.data.message)},[c,n,x]),e.jsx(A,{open:l,onClose:a,closeAfterTransition:!0,children:e.jsx(H,{in:l,children:e.jsxs(S,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:[e.jsx(le,{align:"center",children:"Are you sure you want to delete all classes?"}),e.jsxs(S,{sx:{display:"flex",gap:2,justifyContent:"flex-end",mt:2},children:[e.jsx(C,{variant:"contained",color:"error",onClick:a,children:"cancel"}),e.jsx(C,{variant:"outlined",color:"error",onClick:i,children:u?e.jsx(M,{size:20,color:"inherit"}):"sure"})]})]})})})},je=()=>{const[l,a]=t.useState(!1),[s,n]=t.useState(!1);return e.jsxs(S,{sx:{display:"flex",justifyContent:"end",gap:1,p:1,boxShadow:2,bgcolor:"white",borderRadius:1},children:[e.jsx(C,{variant:"contained",color:"success",startIcon:e.jsx(re,{}),onClick:()=>n(!0),sx:{width:120},children:"add"}),e.jsx(C,{startIcon:e.jsx(oe,{}),variant:"contained",color:"error",onClick:()=>a(!0),sx:{width:120},children:"Delete"}),e.jsx(fe,{open:s,close:()=>n(!1)}),e.jsx(pe,{open:l,close:()=>a(!1)})]})},Ce=({open:l,close:a,data:s})=>{const{data:n}=R(),[c,{data:u,isLoading:x,isSuccess:i,error:g,reset:y}]=X(),[f,b]=t.useState(""),[h,v]=t.useState(""),[m,T]=t.useState(""),r=o=>{o.preventDefault();const N={gradeId:f,code:h,name:m};c({id:s==null?void 0:s.id,body:N})};return t.useEffect(()=>{i&&(j.success(u.message),a(),y()),g&&j.error(g.data.message)},[i,u,g]),t.useEffect(()=>{s&&(b(s==null?void 0:s.grade_id),v(s==null?void 0:s.code),T(s==null?void 0:s.name))},[s]),e.jsx(A,{open:l,onClose:a,closeAfterTransition:!0,children:e.jsx(H,{in:l,children:e.jsx(S,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{className:"form-class",onSubmit:r,children:[e.jsxs(F,{children:[e.jsx(_,{children:"--Grade--"}),e.jsx(z,{required:!0,label:"--Grade--",value:f||"",onChange:o=>b(o.target.value),children:n==null?void 0:n.map(o=>e.jsx(I,{value:o.id,children:o.grade},o.id))})]}),e.jsx(G,{fullWidth:!0,label:"Code",placeholder:"Code",value:h||"",onChange:o=>v(o.target.value)}),e.jsx(G,{fullWidth:!0,label:"Name",placeholder:"Name",value:m||"",onChange:o=>T(o.target.value)}),e.jsxs(S,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(C,{variant:"outlined",color:"error",onClick:a,children:"cancel"}),e.jsx(C,{variant:"contained",color:"success",type:"submit",children:x?e.jsx(M,{size:20,color:"inherit"}):"add"})]})]})})})})},ge=[{label:"No",width:40},{label:"Homebase",width:100},{label:"Grade",width:100},{label:"Code",width:40},{label:"Class",width:100},{label:"Students",width:50},{label:"Actions",width:50}],be=()=>{const[l,a]=t.useState(null),s=!!l,[n,c]=t.useState(""),[u,x]=t.useState(""),[i,g]=t.useState(""),[y,f]=t.useState(!1),b=(d,w,E,K)=>{a(d.currentTarget),g(w),c(K),x(E)},h=()=>{a(null)},v=Y(),{data:m,isLoading:T}=Z(),[r,{data:o,isLoading:N}]=ee(),[W,{data:B,isLoading:$,isSuccess:D,error:k,reset:U}]=se(),q=()=>v(`/admin/classes/grade/${u}/class-code/${n}/add-students`),Q=()=>{i&&(r(i),f(!0),h())},J=()=>{i&&(W(i),h())};return t.useEffect(()=>{D&&(j.success(B.message),U()),k&&j.error(k.data.message)},[D,B,k]),e.jsx(ie,{children:e.jsxs(de,{sx:{height:{xs:500,md:530,xl:630},overflow:"auto"},children:[e.jsxs(ce,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(ue,{children:e.jsx(P,{children:ge.map((d,w)=>e.jsx(p,{align:"center",sx:{width:d.width},children:d.label},w))})}),e.jsx(xe,{children:m==null?void 0:m.map((d,w)=>e.jsxs(P,{children:[e.jsx(p,{align:"center",children:w+1}),e.jsx(p,{align:"center",children:d.homebase}),e.jsx(p,{align:"center",children:d.grade}),e.jsx(p,{align:"center",children:d.code}),e.jsx(p,{align:"center",children:d.name}),e.jsx(p,{align:"center",children:d.students}),e.jsx(p,{align:"center",children:e.jsx(he,{onClick:E=>b(E,d.id,d.grade_id,d.code),children:$?e.jsx(M,{size:14}):e.jsx(ne,{})})})]},w))})]}),e.jsxs(me,{id:"basic-menu",anchorEl:l,open:s,onClose:h,MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsx(I,{onClick:q,children:"Add Students"}),e.jsx(I,{onClick:Q,children:"Edit"}),e.jsx(I,{onClick:J,children:"Delete"})]}),e.jsx(Ce,{open:y,close:()=>f(!1),data:o})]})})},ss=()=>e.jsxs(ae,{children:[e.jsx(te,{title:"Classes"}),e.jsxs(L,{container:!0,sx:{minHeight:"85vh",display:"flex",flexDirection:"column",gap:2},children:[e.jsx(L,{item:!0,xs:12,md:12,children:e.jsx(je,{})}),e.jsx(L,{item:!0,xs:12,md:12,children:e.jsx(be,{})})]})]});export{ss as default};
