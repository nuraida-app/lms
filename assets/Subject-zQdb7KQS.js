import{j as e,i as A,M as F,bw as Z,bx as ee,f as se,r as i,B as b,c as l,C as k,by as te,aE as ae,bz as re,bA as oe,bB as ne,bC as le,bD as ie,aF as ce,bE as de}from"./index-CFaoof_u.js";import{L as ue}from"./Layout-Bqv_hLY4.js";import{c as O,r as R}from"./createSvgIcon-B-QSSRwX.js";import{M as P,F as E}from"./Modal-DyYFvg8Q.js";import{T as _}from"./TextField-Bwa8w5Hb.js";import{F as pe}from"./FormControl-BZs5yOMZ.js";import{F as xe,a as he}from"./FormGroup-BLCmNq4K.js";import{C as me}from"./Checkbox-BI3krFfn.js";import{B as m}from"./Button-Cyjt7KvH.js";import{d as fe,a as je,b as ve}from"./YouTube-CIiHaUuV.js";import{I as M}from"./IconButton-Ct6-YGlN.js";import{e as be}from"./FolderCopy-CjBaZnBq.js";import{c as U}from"./ExitToApp-DeUhQ-c4.js";import{G as W}from"./Grow-BAheIvG1.js";import{P as Y}from"./Paper-Bl3aGdsR.js";import{T as ge}from"./Typography-DcAKAVhU.js";import"./ChevronRight-C8kya78d.js";import"./Storage-Dbt0rUdq.js";import"./CalendarMonth-BVnK-sJQ.js";import"./Style-DKwaH2QS.js";import"./colorManipulator-CQUMc1c4.js";import"./useTheme-DOzr14v8.js";import"./Toolbar-Bw3Yww6Z.js";import"./listItemIconClasses-C0Z8a7TX.js";import"./utils-d7k_POnt.js";import"./Select-B725NlmR.js";import"./Menu-DTz7dFrX.js";import"./Input-N1-PClMB.js";import"./GlobalStyles-BwsLZ7JT.js";import"./Stack-i3asCM13.js";import"./useThemeProps-rOFnVk4r.js";import"./getThemeProps-BtYJU1E8.js";import"./SwitchBase-DvDHlI7D.js";const Ce=O(e.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"AddOutlined"),ye=O([e.jsx("path",{d:"M19 5v14H5V5zm0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"},"0"),e.jsx("path",{d:"M14 17H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"},"1")],"ArticleOutlined"),ze=O(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"CloseOutlined"),Se=O(e.jsx("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92zM17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94z"}),"EditOutlined"),Ie=O(e.jsx("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5"}),"InsertLinkOutlined"),Q=O(e.jsx("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 14H8V4h12zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm12 6V9c0-.55-.45-1-1-1h-2v5h2c.55 0 1-.45 1-1m-2-3h1v3h-1zm4 2h1v-1h-1V9h1V8h-2v5h1zm-8 0h1c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1H9v5h1zm0-2h1v1h-1z"}),"PictureAsPdfOutlined"),q=O(e.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save");var $={},ke=A;Object.defineProperty($,"__esModule",{value:!0});var L=$.default=void 0,_e=ke(R()),Oe=e;L=$.default=(0,_e.default)((0,Oe.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"AddOutlined");var G={},Te=A;Object.defineProperty(G,"__esModule",{value:!0});var H=G.default=void 0,we=Te(R()),Me=e;H=G.default=(0,we.default)((0,Me.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"CloseOutlined");const J=({open:s,close:x,id:r})=>{const f=F().code,[h,{data:n,isSuccess:p,isLoading:C,error:j,reset:y}]=Z(),{data:t}=ee(r,{skip:!r}),{data:d}=se(),[o,u]=i.useState(""),[S,I]=i.useState(""),[a,g]=i.useState([]),T=(v,w)=>{v.target.checked?g(D=>[...D,w]):g(D=>D.filter(X=>X!==w))},V=v=>{if(v.preventDefault(),!o){b.error("Please enter chapter title");return}if(!a){b.error("Please select classes");return}h({id:r||null,code:f,title:o,selectedClasses:a,goal:S})};i.useEffect(()=>{p&&(b.success(n.message),y(),u(""),I(""),g([]),x(),window.location.reload()),j&&(b.error(j.data.message),y())},[n,p,j]),i.useEffect(()=>{t&&(u(t.title),I(t.goal),g(t==null?void 0:t.class_code))},[t]);const z=()=>{u(""),I(""),g([]),x()};return e.jsx(P,{open:s,onClose:z,closeAfterTransition:!0,children:e.jsx(E,{in:s,children:e.jsx(l,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{style:{display:"flex",flexDirection:"column",gap:"1rem"},onSubmit:V,children:[e.jsx(_,{fullWidth:!0,label:"Nama Bab",placeholder:"Nama Bab",InputLabelProps:{shrink:!0},value:o||"",onChange:v=>u(v.target.value)}),e.jsx(_,{fullWidth:!0,multiline:!0,rows:4,label:"Tujuan Pembelajaran",placeholder:"Tujuan Pembelajaran",InputLabelProps:{shrink:!0},sx:{my:1},value:S||"",onChange:v=>I(v.target.value)}),e.jsx(pe,{component:"fieldset",children:e.jsx(xe,{row:!0,children:d==null?void 0:d.map(v=>e.jsx(he,{control:e.jsx(me,{checked:a==null?void 0:a.includes(v.code),onChange:w=>T(w,v.code)}),label:v.name},v.id))})}),e.jsxs(l,{align:"end",children:[e.jsx(m,{startIcon:e.jsx(H,{}),variant:"contained",color:"error",onClick:z,sx:{mr:1},children:"tutup"}),e.jsx(m,{startIcon:e.jsx(L,{}),variant:"contained",color:"success",type:"submit",children:C?e.jsx(k,{size:24}):"simpan"})]})]})})})})};var B={},Le=A;Object.defineProperty(B,"__esModule",{value:!0});var K=B.default=void 0,He=Le(R()),Pe=e;K=B.default=(0,He.default)((0,Pe.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92zM17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94z"}),"EditOutlined");const Ee=({file:s})=>{const[x,{data:r,isSuccess:c,isLoading:f,error:h,reset:n}]=te();return i.useEffect(()=>{c&&(b.success(r.message),n()),h&&(b.error(h.data.message),n())},[r,c,h]),e.jsxs(l,{sx:{p:1,mx:8,borderRadius:1,boxShadow:4,my:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(m,{size:"small",startIcon:s.type_file==="pdf"?e.jsx(fe,{}):s.type_file==="doc"?e.jsx(je,{}):e.jsx(ve,{}),variant:"contained",color:s.type_file==="pdf"?"warning":s.type_file==="doc"?"primary":"error",children:s.title}),e.jsx(M,{color:"error",onClick:()=>x(s.id),children:f?e.jsx(k,{size:24}):e.jsx(H,{})})]})},Fe=({data:s,number:x})=>{const{code:r}=F(),{data:c}=ae(s.id,{skip:!s.id}),[f,{isLoading:h}]=re(),[n,{isLoading:p,isSuccess:C,error:j,reset:y}]=oe(),[t,d]=i.useState({open:!1,fileOpen:!1,urlOpen:!1}),[o,u]=i.useState({file:null,type:"",title:"",url:""}),S=(a,g)=>{const T=a.target.files[0];u({...o,file:T,type:g})},I=()=>{const{file:a,type:g,title:T,url:V}=o,z=new FormData;z.append("file",a),z.append("type",g),z.append("title",T),z.append("subject_code",r),z.append("topic_id",s.id),z.append("url",V),n(z)};return i.useEffect(()=>{C&&(b.success("File uploaded successfully"),y(),u({file:null,type:"",title:"",url:""}),d({...t,fileOpen:!1,urlOpen:!1})),j&&b.error("Error uploading file")},[C,j]),e.jsxs(l,{sx:{my:1,mx:8,borderRadius:1,p:1,boxShadow:4},children:[e.jsxs(l,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(be,{children:x}),e.jsx(U,{primary:s.title,secondary:s.goal,sx:{width:"70%"}}),e.jsxs("div",{children:[e.jsx(M,{color:"warning",children:e.jsx(Se,{})}),e.jsx(M,{color:"error",onClick:()=>f(s.id),children:h?e.jsx(k,{size:24}):e.jsx(ze,{})})]})]}),e.jsxs(l,{sx:{mx:6,mt:1,display:"flex",gap:2},children:[e.jsx(m,{startIcon:e.jsx(Ce,{}),size:"small",variant:"outlined",color:"success",onClick:()=>d({...t,open:!t.open}),children:"tambah file"}),e.jsxs(l,{sx:{display:"flex",gap:2,width:"50%"},children:[e.jsx(W,{in:t.open,children:e.jsx(m,{size:"small",variant:"contained",color:"error",startIcon:e.jsx(Q,{}),onClick:()=>d({...t,fileOpen:!0}),children:"Pdf / doc"})}),e.jsx(W,{in:t.open,children:e.jsx(m,{size:"small",variant:"contained",color:"warning",startIcon:e.jsx(Ie,{}),onClick:()=>d({...t,urlOpen:!0}),children:"url"})})]})]}),c&&c.map(a=>e.jsx(Ee,{file:a},a.id)),e.jsx(P,{open:t.fileOpen,onClose:()=>d({...t,fileOpen:!1}),closeAfterTransition:!0,children:e.jsx(E,{in:t.fileOpen,children:e.jsxs(l,{sx:N,children:[e.jsx(_,{label:"Title",fullWidth:!0,size:"small",sx:{mb:1},value:o.title,onChange:a=>u({...o,title:a.target.value})}),e.jsxs(m,{component:"label",variant:"contained",color:"error",startIcon:e.jsx(Q,{}),sx:{mr:1},children:["Pdf",e.jsx("input",{type:"file",hidden:!0,accept:".pdf",onChange:a=>S(a,"pdf")})]}),e.jsxs(m,{component:"label",variant:"contained",color:"primary",startIcon:e.jsx(ye,{}),children:["doc",e.jsx("input",{type:"file",hidden:!0,accept:".doc,.docx",onChange:a=>S(a,"doc")})]}),e.jsx(l,{sx:{display:"flex",justifyContent:"end"},children:e.jsx(m,{variant:"contained",color:"success",size:"small",startIcon:e.jsx(q,{}),onClick:I,disabled:p,children:p?e.jsx(k,{size:24}):"Save"})})]})})}),e.jsx(P,{open:t.urlOpen,onClose:()=>d({...t,urlOpen:!1}),closeAfterTransition:!0,children:e.jsx(E,{in:t.urlOpen,children:e.jsxs(l,{sx:N,children:[e.jsx(_,{label:"Title",fullWidth:!0,size:"small",sx:{mb:2},value:o.title,onChange:a=>u({...o,title:a.target.value})}),e.jsx(_,{label:"Link YouTube",fullWidth:!0,size:"small",sx:{mb:2},value:o.url,onChange:a=>u({...o,url:a.target.value})}),e.jsx(l,{sx:{display:"flex",justifyContent:"end"},children:e.jsx(m,{variant:"contained",color:"success",size:"small",startIcon:e.jsx(q,{}),onClick:I,disabled:p,children:p?e.jsx(k,{size:24}):"Save"})})]})})})]})},N={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#fff",boxShadow:24,p:2,borderRadius:"5px"},Ve=({open:s,close:x,id:r,chapter_id:c})=>{const f=F(),[h,{data:n,isSuccess:p,isLoading:C,error:j,reset:y}]=ne(),{data:t}=le(r,{skip:!r}),[d,o]=i.useState(""),[u,S]=i.useState(""),I=a=>{a.preventDefault();const g={id:r||null,chapter_id:c,title:d,goal:u,subject_code:f.code};h(g)};return i.useEffect(()=>{p&&(b.success(n.message),y(),o(""),S(""),x(),window.location.reload()),j&&(b.error(j.data.message),y())},[n,p,j]),i.useEffect(()=>{t&&(o(t.title),S(t.goal))},[t]),e.jsx(P,{open:s,onClose:x,closeAfterTransition:!0,children:e.jsx(E,{in:s,children:e.jsx(l,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{onSubmit:I,children:[e.jsx(_,{fullWidth:!0,label:"Nama Topik",placeholder:"Nama Topik",InputLabelProps:{shrink:!0},sx:{my:1},value:d||"",onChange:a=>o(a.target.value)}),e.jsx(_,{fullWidth:!0,multiline:!0,rows:4,label:"Capaian Pembelajaran",placeholder:"Capaian Pembelajaran",InputLabelProps:{shrink:!0},sx:{my:1},value:u||"",onChange:a=>S(a.target.value)}),e.jsxs(l,{align:"end",children:[e.jsx(m,{startIcon:e.jsx(H,{}),variant:"contained",color:"error",onClick:x,sx:{mr:1},children:"tutup"}),e.jsx(m,{startIcon:e.jsx(L,{}),variant:"contained",color:"success",type:"submit",children:C?e.jsx(k,{size:24}):"simpan"})]})]})})})})},De=({data:s,number:x})=>{const[r,{data:c,isSuccess:f,isLoading:h,error:n,reset:p}]=ie(),{data:C}=ce(s.id,{skip:!s.id}),[j,y]=i.useState(!1),[t,d]=i.useState(!1);return i.useEffect(()=>{f&&(b.success(c.message),p()),n&&(b.error(n.data.message),p())},[c,f,n]),e.jsxs(Y,{sx:{my:2,p:1},children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(U,{primary:`Bab ${x}: ${s.title}`,secondary:s.goal,sx:{width:"75%"}}),e.jsxs(l,{children:[e.jsx(M,{color:"warning",onClick:()=>y(!0),children:e.jsx(K,{})}),e.jsx(M,{color:"error",onClick:()=>r(s.id),children:h?e.jsx(k,{size:24}):e.jsx(H,{})})]})]}),C==null?void 0:C.map((o,u)=>e.jsx(Fe,{data:o,number:u+1},u)),e.jsx(l,{alignSelf:"flex-start",sx:{mx:8,mt:1},children:e.jsx(m,{startIcon:e.jsx(L,{}),variant:"contained",color:"success",onClick:()=>d(!0),size:"small",children:"Topik"})}),e.jsx(Ve,{open:t,close:()=>d(!1),chapter_id:s.id}),e.jsx(J,{open:j,close:()=>y(!1),id:s.id})]})},vs=()=>{const s=F(),x=s.name.replace(/-/g," "),r=s.code,{data:c}=de(r,{skip:!r}),[f,h]=i.useState(!1);return e.jsxs(ue,{children:[e.jsx(Y,{sx:{p:1},children:e.jsx(ge,{variant:"h6",fontWeight:"bold",children:x})}),e.jsx(l,{alignSelf:"flex-start",sx:{my:1},children:e.jsx(m,{startIcon:e.jsx(L,{}),variant:"contained",color:"success",onClick:()=>h(!0),children:"Bab"})}),c&&(c==null?void 0:c.map((n,p)=>e.jsx(De,{data:n,number:p+1},n.id))),e.jsx(J,{open:f,close:()=>h(!1)})]})};export{vs as default};
