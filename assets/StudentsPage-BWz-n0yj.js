import{V as R,r as a,B as g,j as e,c as y,C as M,W as A,X as W,m as z}from"./index-B4oIbNwU.js";import{L as Q}from"./Layout-Bk9NO0Um.js";import{P as U}from"./PageName-CEARqxte.js";import{d as V}from"./MoreHoriz-e4RIS7qv.js";import"./iziToast-KyQRhfSZ.js";import{M as X,B as _,F as q}from"./Modal-yF_fLTpP.js";import{T as k}from"./TextField-dmVyW8fb.js";import{B}from"./Button-CGa4e0l9.js";import{I as J}from"./Input-Dj5u-xDW.js";import{P as K}from"./Paper-WBrkj_xq.js";import{T as O}from"./TableContainer-KSHk1eic.js";import{a as Y,b as Z,c as E,T as n}from"./TableRow-2MDI8QSh.js";import{T as $}from"./TableBody-C-AJ6jTb.js";import{I as ee}from"./IconButton-DKYpUzhK.js";import{M as te}from"./Select-OZq0aL4k.js";import{M as I}from"./MenuItem-B9UCUkSn.js";import{G as se}from"./Grid-DRYlEhgI.js";import"./ChevronRight-CvyNzzqS.js";import"./createSvgIcon-BZOpo86E.js";import"./Typography-DLQ9NUQX.js";import"./PeopleAlt-BXWzt5_l.js";import"./CalendarMonth-Cs-Lek6-.js";import"./Style-BHIr2vnK.js";import"./useTheme-C3ddHqAM.js";import"./ListItemText-snJx1fDo.js";import"./GlobalStyles-Ddd3Vltf.js";import"./listItemIconClasses-DYp5XrKx.js";import"./FormControl-DhE90yLw.js";import"./utils-CoNKf_2-.js";import"./Grow-BiPl52xs.js";const ae=({open:r,close:i,student:o})=>{const[h,{data:x,isSuccess:l,isLoading:c,error:d}]=R(),[f,m]=a.useState(""),[u,b]=a.useState(""),j=s=>{s.preventDefault();const S={nis:f,name:u};h({id:o.id,body:S})};return a.useEffect(()=>{l&&(g.success(x.message),i()),d&&g.error(d.data.message)},[l,x,d]),a.useEffect(()=>{o&&(m(o.nis),b(o.name))},[o]),e.jsx(X,{open:r,onClose:i,closeAfterTransition:!0,slots:{backdrop:_},slotProps:{backdrop:{timeout:500}},children:e.jsx(q,{in:r,children:e.jsx(y,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{className:"form-class",onSubmit:j,children:[e.jsx(k,{fullWidth:!0,label:"NIS",placeholder:"NIS",value:f||"",onChange:s=>m(s.target.value)}),e.jsx(k,{fullWidth:!0,label:"Full name",placeholder:"Full name",value:u||"",onChange:s=>b(s.target.value)}),e.jsxs(y,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(B,{variant:"outlined",color:"error",onClick:i,children:"batal"}),e.jsx(B,{variant:"contained",color:"success",type:"submit",children:c?e.jsx(M,{size:20,color:"inherit"}):"update"})]})]})})})})},re=[{label:"No",width:40},{label:"NIS",width:100},{label:"Name",width:170},{label:"Homebase",width:80},{label:"Actions",width:100}],oe=({students:r,loading:i})=>{const[o,{data:h,isLoading:x,isSuccess:l,error:c}]=A(),[d,{data:f}]=W(),[m,u]=a.useState(null),[b,j]=a.useState(!1),[s,S]=a.useState(""),C=!!m,N=(t,p)=>{u(t.currentTarget),S(p)},w=()=>{u(null)},H=()=>{s&&(w(),o(s))},L=()=>{s&&(j(!0),d(s),w())};a.useEffect(()=>{l&&g.success(h.message),c&&g.error(c.data.message)},[h,l,c]);const[v,P]=a.useState(""),F=t=>t.name.toLowerCase().includes(v.toLowerCase()),T=r==null?void 0:r.filter(F),D=t=>{P(t.target.value)};return e.jsxs(a.Fragment,{children:[e.jsx(y,{sx:{p:1,boxShadow:2,bgcolor:"white",borderRadius:1,display:"flex",justifyContent:"space-between",flexDirection:{xs:"column-reverse",md:"row"},gap:1},children:e.jsx(J,{placeholder:"Search student",value:v,onChange:D})}),e.jsx(K,{children:e.jsx(O,{sx:{height:{xs:500,md:530,lg:630},overflow:"auto"},children:e.jsxs(Y,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(Z,{children:e.jsx(E,{children:re.map((t,p)=>e.jsx(n,{align:"center",sx:{width:t.width},children:t.label},p))})}),e.jsx($,{children:T==null?void 0:T.map((t,p)=>e.jsxs(E,{children:[e.jsx(n,{align:"center",children:p+1}),e.jsx(n,{align:"center",children:t.nis}),e.jsx(n,{align:"left",children:t.name}),e.jsx(n,{align:"center",children:t.homebase}),e.jsx(n,{align:"center",children:e.jsx(ee,{color:"primary",id:"basic-button","aria-controls":C?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":C?"true":void 0,onClick:G=>N(G,t.id),children:x?e.jsx(M,{size:20,color:"inherit"}):e.jsx(V,{})})})]},t.id))})]})})}),e.jsxs(te,{id:"basic-menu",anchorEl:m,open:C,onClose:w,MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsx(I,{onClick:L,children:"Edit"}),e.jsx(I,{onClick:H,children:"Delete"})]}),e.jsx(ae,{open:b,close:()=>j(!1),student:f})]})},De=()=>{const{data:r,isLoading:i}=z();return e.jsxs(Q,{children:[e.jsx(U,{title:"Students"}),e.jsx(se,{container:!0,sx:{minHeight:"85vh",display:"flex",flexDirection:"column",gap:1},children:e.jsx(oe,{students:r,loading:i})})]})};export{De as default};
