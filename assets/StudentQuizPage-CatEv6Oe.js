import{ap as A,aq as S,S as j,r as n,ar as b,as as N,at as h,j as o,au as x,av as D,a as X,aw as Z,B as u,c as w,C as ee,b as se,am as oe,ax as te}from"./index-DGvpjgWm.js";import{L as re}from"./Layout-CdiosTv8.js";import{P as ne}from"./PageName-FtGNY4ev.js";/* empty css               */import{P as $}from"./Paper-K36vHTxn.js";import{B as ie,T as g}from"./Typography-DriLene-.js";import{M as ce,F as ae}from"./Modal-DxRN-owh.js";import{I as T}from"./Input-Eg4Yuw_G.js";import{B as le}from"./Button-D8VVO348.js";import"./FolderCopy-fAMEYysm.js";import"./getThemeProps-DV--MwOD.js";import"./createSvgIcon-DOM3wMaB.js";import"./GlobalStyles-C1DXwv9-.js";import"./listItemIconClasses-hJOZkGUs.js";import"./useTheme-CPtJ_AT7.js";import"./ChevronRight-Bpz3WVJm.js";import"./Storage-BWAOlbSG.js";import"./ExitToApp-Drr138pi.js";import"./Toolbar-BD1CLpQT.js";import"./IconButton-pTgfu9-f.js";import"./utils-CSmApv3b.js";function ue(e){return A("MuiCard",e)}S("MuiCard",["root"]);const me=["className","raised"],pe=e=>{const{classes:s}=e;return D({root:["root"]},ue,s)},fe=j($,{name:"MuiCard",slot:"Root",overridesResolver:(e,s)=>s.root})(()=>({overflow:"hidden"})),he=n.forwardRef(function(s,t){const r=b({props:s,name:"MuiCard"}),{className:l,raised:c=!1}=r,m=N(r,me),a=h({},r,{raised:c}),i=pe(a);return o.jsx(fe,h({className:x(i.root,l),elevation:c?8:void 0,ref:t,ownerState:a},m))});function de(e){return A("MuiCardActionArea",e)}const y=S("MuiCardActionArea",["root","focusVisible","focusHighlight"]),Ce=["children","className","focusVisibleClassName"],ge=e=>{const{classes:s}=e;return D({root:["root"],focusHighlight:["focusHighlight"]},de,s)},xe=j(ie,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(e,s)=>s.root})(({theme:e})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${y.focusHighlight}`]:{opacity:(e.vars||e).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${y.focusVisible} .${y.focusHighlight}`]:{opacity:(e.vars||e).palette.action.focusOpacity}})),je=j("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(e,s)=>s.focusHighlight})(({theme:e})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:e.transitions.create("opacity",{duration:e.transitions.duration.short})})),ve=n.forwardRef(function(s,t){const r=b({props:s,name:"MuiCardActionArea"}),{children:l,className:c,focusVisibleClassName:m}=r,a=N(r,Ce),i=r,f=ge(i);return o.jsxs(xe,h({className:x(f.root,c),focusVisibleClassName:x(m,f.focusVisible),ref:t,ownerState:i},a,{children:[l,o.jsx(je,{className:f.focusHighlight,ownerState:i})]}))});function ye(e){return A("MuiCardContent",e)}S("MuiCardContent",["root"]);const we=["className","component"],Ae=e=>{const{classes:s}=e;return D({root:["root"]},ye,s)},Se=j("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,s)=>s.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),be=n.forwardRef(function(s,t){const r=b({props:s,name:"MuiCardContent"}),{className:l,component:c="div"}=r,m=N(r,we),a=h({},r,{component:c}),i=Ae(a);return o.jsx(Se,h({as:c,className:x(i.root,l),ownerState:a,ref:t},m))}),U=e=>{try{const s=new Date(e);return new Intl.DateTimeFormat("en-EN",{weekday:"short",day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"numeric"}).format(s)}catch{return console.error("Invalid date string:",e),"Invalid date"}},Ne=({data:e,user:s,log:t})=>{const r=X(),[l,{data:c,isLoading:m,isSuccess:a,error:i,reset:f}]=Z(),[k,M]=n.useState(!1),[_,q]=n.useState(!1),[R,z]=n.useState(""),[B,I]=n.useState(!1),[F,E]=n.useState(""),[H,P]=n.useState(""),[L,Q]=n.useState(""),[d,V]=n.useState(""),G=(p,C,v,K,Y,J)=>{M(!0),q(p),I(C),E(v),P(K),Q(Y),V(J)},O=p=>{if(p.preventDefault(),R!==_)return u.error("Token tidak sama");if(!B)return u.error("Ujian tidak aktif");const C=new Date;if(C<new Date(F))return u.error("Ujian belum dimulai");if(C>new Date(H))return u.error("Ujian telah selesai");if(t&&t.isDone&&t.quiz_id===d)return u.error("Anda sudah mengikuti ujian ini");if(t&&t.isActive&&t.quiz_id===d)return u.error("Anda sudah mengerjakan ujian ini");const v={quizId:d,nis:s.nis};l(v)},W=()=>{M(!1),z("")};return n.useEffect(()=>{if(a){u.success(c.message);const p=L.replace(/\s+/g,"-");r(`/student/exam/${p}/${d}/${F}/${H}`),f(),localStorage.removeItem("questions")}i&&(u.error(i.data.message),f())},[a,c,i]),o.jsxs(n.Fragment,{children:[o.jsx(he,{sx:{width:260,bgcolor:new Date(e==null?void 0:e.start)>new Date?"#015AFF":new Date(e==null?void 0:e.end)<new Date?"#FF1414":"#37FF21",color:new Date(e==null?void 0:e.start)>new Date?"#F7F7F7":new Date(e==null?void 0:e.end)<new Date?"#0C0C0C":"#000000"},children:o.jsx(ve,{onClick:()=>G(e==null?void 0:e.token,e==null?void 0:e.status,e==null?void 0:e.start,e==null?void 0:e.end,e==null?void 0:e.quiz,e==null?void 0:e.quiz_id),children:o.jsxs(be,{children:[o.jsx(g,{fontSize:16,children:e==null?void 0:e.quiz}),o.jsx(g,{fontSize:12,fontStyle:"italic",children:e==null?void 0:e.teacher}),o.jsxs(g,{fontSize:12,sx:{mt:1},children:["Start: ",U(e==null?void 0:e.start)]}),o.jsxs(g,{fontSize:12,children:["End: ",U(e==null?void 0:e.end)]})]})})}),o.jsx(ce,{open:k,onClose:W,closeAfterTransition:!0,children:o.jsx(ae,{in:k,children:o.jsx(w,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:o.jsxs("form",{onSubmit:O,className:"form-confirm",children:[o.jsx(T,{placeholder:"TOKEN",value:R,onChange:p=>z(p.target.value)}),o.jsx(le,{type:"submit",variant:"contained",color:"error",children:m?o.jsx(ee,{size:20,color:"inherit"}):"submit"})]})})})})]})},We=()=>{const{user:e}=se(r=>r.authentication),{data:s}=oe(e==null?void 0:e.grade_id,{skip:!(e!=null&&e.grade_id)}),{data:t}=te(e==null?void 0:e.nis,{skip:!(e!=null&&e.nis)});return o.jsxs(re,{children:[o.jsx(ne,{title:"Ujian"}),o.jsxs(w,{sx:{height:"82vh",display:"flex",flexDirection:"column",gap:1},children:[o.jsx($,{sx:{p:1},children:o.jsx(T,{placeholder:"Cari Ujian"})}),o.jsx(w,{sx:{display:"flex",flexWrap:"wrap",gap:1,maxHeight:520,overflow:"auto",alignItems:"start",overflowY:"auto"},children:s==null?void 0:s.map((r,l)=>o.jsx(Ne,{data:r,user:e,log:t},l))})]})]})};export{We as default};
