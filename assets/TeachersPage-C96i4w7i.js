import{p as O,A as V,r as t,B as v,j as e,c as b,C as E,D as Z,E as ee,n as se,F as te,i as ae,o as re,G as oe,H as ne}from"./index-DjgEXlBM.js";import{L as le}from"./Layout-BRQ_XQ2b.js";import{P as ie}from"./PageName-ZPCS438x.js";import"./iziToast-CdUb-IAu.js";import{d as ce}from"./MoreHoriz-B7rLeTAL.js";import{d as de,a as ue}from"./FolderDelete---4wtr-M.js";import{d as xe,a as me}from"./InsertDriveFileOutlined-SD1f0W60.js";import{M as R,F as B}from"./Modal-DCAalMQR.js";import{T as P,I as M}from"./TextField-CYEQKP_m.js";import{F}from"./FormControl-TopU_Zco.js";import{S as H,M as he}from"./Select-C4xHsIAt.js";import{M as N}from"./MenuItem-AkT7IuJC.js";import{B as p}from"./Button-FzYR9QjW.js";import{T as fe}from"./Typography-Ck8ZmvYm.js";import{r as pe,u as je}from"./xlsx-DT8pmw08.js";import{I as X}from"./Input-Djdk2BZh.js";import{r as be}from"./createSvgIcon-DbdgCAn1.js";import{d as W}from"./Remove-C0GelQVB.js";import{S as ge}from"./Style-COl1V7Ra.js";import{P as Ce}from"./Paper-0_Nxrl9K.js";import{T as ve}from"./TableContainer-ywpNEKl8.js";import{a as Se,b as we,c as $,T}from"./TableRow-9p40iQCm.js";import{T as Te}from"./TableBody-Dl-9RlEw.js";import{I as A}from"./IconButton-DVAIich5.js";import{G as Q}from"./Grid-Cm2mtght.js";import"./ChevronRight-JRIqjZRu.js";import"./PeopleAlt-DJyQ-vYi.js";import"./CalendarMonth-ZeFlFCc4.js";import"./useTheme-BUXj7LXp.js";import"./ListItemText-sHcdjvhz.js";import"./GlobalStyles-naRZnfmu.js";import"./listItemIconClasses-8sYbMhEm.js";import"./utils-CGVmn-r6.js";import"./Grow-C7cMHxnE.js";const ye=({open:i,close:a})=>{const{data:s}=O(),[o,{data:c,isLoading:u,isSuccess:d,error:x,reset:g}]=V(),[h,S]=t.useState(""),[f,j]=t.useState(""),[w,m]=t.useState([]),C=n=>{n.preventDefault(),o({nip:h,name:f,subjectIds:w})};return t.useEffect(()=>{d&&(v.success(c.message),j(""),S(""),m([]),a(),g()),x&&v.error(x.data.message)},[d,c,x]),e.jsx(R,{open:i,onClose:a,closeAfterTransition:!0,children:e.jsx(B,{in:i,children:e.jsx(b,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{className:"form-teacher",onSubmit:C,children:[e.jsx(P,{fullWidth:!0,type:"text",label:"NIP",placeholder:"NIP",value:h,onChange:n=>S(n.target.value)}),e.jsx(P,{fullWidth:!0,label:"Full Name",placeholder:"Full Name",value:f,onChange:n=>j(n.target.value)}),e.jsxs(F,{children:[e.jsx(M,{children:"--Subjects--"}),e.jsx(H,{required:!0,label:"--Subjects--",multiple:!0,value:w,onChange:n=>m(n.target.value),children:s==null?void 0:s.map((n,y)=>e.jsx(N,{value:n.code,children:n.name},y))})]}),e.jsxs(b,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(p,{variant:"outlined",color:"error",onClick:a,children:"cancel"}),e.jsx(p,{variant:"contained",color:"success",type:"submit",children:u?e.jsx(E,{size:20,color:"inherit"}):"Add"})]})]})})})})},ke=({open:i,close:a})=>{const[s,{data:o,isSuccess:c,isLoading:u,error:d}]=Z(),x=()=>s();return t.useEffect(()=>{c&&(v.success(o.message),a()),d&&v.error(d.data.message)},[o,c,d]),e.jsx(R,{open:i,onClose:a,closeAfterTransition:!0,children:e.jsx(B,{in:i,children:e.jsxs(b,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:[e.jsx(fe,{align:"center",children:"Are you sure you want to delete all teachers?"}),e.jsxs(b,{sx:{display:"flex",gap:2,justifyContent:"flex-end",mt:2},children:[e.jsx(p,{variant:"contained",color:"error",onClick:a,children:"cancel"}),e.jsx(p,{variant:"outlined",color:"error",onClick:x,children:u?e.jsx(E,{size:20,color:"inherit"}):"sure"})]})]})})})},Ie=({open:i,close:a})=>{const[s,{data:o,isSuccess:c,error:u,isLoading:d}]=ee(),[x,g]=t.useState(null),h=f=>{g(f.target.files[0])},S=()=>{if(x){const f=new FileReader;f.onload=j=>{const w=new Uint8Array(j.target.result),m=pe(w,{type:"array"}),C=m.SheetNames[0],n=m.Sheets[C],k={data:je.sheet_to_json(n,{header:1,range:1})};s(k)},f.readAsArrayBuffer(x)}};return t.useEffect(()=>{c&&(v.success(o.message),g(null),a(),window.location.reload()),u&&v.error(u.data.message)},[c,o,u]),e.jsx(R,{open:i,onClose:a,closeAfterTransition:!0,children:e.jsx(B,{in:i,children:e.jsx(b,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs(b,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:1},children:[e.jsx(X,{required:!0,fullWidth:!0,type:"file",placeholder:"Upload file here",onChange:h}),e.jsxs(b,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(p,{variant:"outlined",color:"error",onClick:a,children:"cancel"}),e.jsx(p,{variant:"contained",color:"success",onClick:S,children:d?e.jsx(E,{size:20,color:"inherit"}):"upload"})]})]})})})})},Ne=()=>{const[i,a]=t.useState(!1),[s,o]=t.useState(!1),[c,u]=t.useState(!1),d=()=>{open("/guru_template.xlsx","_blank")};return e.jsxs(b,{sx:{display:"flex",justifyContent:{xs:"start",md:"end"},gap:1,flexWrap:"wrap"},children:[e.jsx(p,{variant:"contained",color:"success",startIcon:e.jsx(de,{}),onClick:()=>o(!0),sx:{width:120},children:"add"}),e.jsx(p,{startIcon:e.jsx(xe,{}),variant:"contained",color:"secondary",onClick:()=>u(!0),sx:{width:120},children:"Upload"}),e.jsx(p,{startIcon:e.jsx(me,{}),variant:"contained",color:"warning",onClick:d,sx:{width:120},children:"Template"}),e.jsx(p,{startIcon:e.jsx(ue,{}),variant:"contained",color:"error",onClick:()=>a(!0),sx:{width:120},children:"Delete"}),e.jsx(ye,{open:s,close:()=>o(!1)}),e.jsx(Ie,{open:c,close:()=>u(!1)}),e.jsx(ke,{open:i,close:()=>a(!1)})]})},_e=({open:i,close:a,teacher:s})=>{const{data:o}=O(),{data:c}=se(),[u,{data:d,isSuccess:x,isLoading:g,error:h,reset:S}]=te(),[f,j]=t.useState(""),[w,m]=t.useState(""),[C,n]=t.useState(2),[y,k]=t.useState(0),[L,_]=t.useState([]),q=r=>{r.preventDefault();const I={nip:f,name:w,homeroom:C,classCode:y,subjectIds:L};u({id:s==null?void 0:s.id,body:I})};return t.useEffect(()=>{x&&(v.success(d.message),j(""),m(""),n(""),k(""),_([]),a(),S()),h&&(v.error(h.data.message),S())},[d,x,h]),t.useEffect(()=>{s&&(j(s==null?void 0:s.nip),m(s==null?void 0:s.name),_(s==null?void 0:s.subject_code),n(s==null?void 0:s.homeroom),k(s==null?void 0:s.class_code))},[s]),e.jsx(R,{open:i,onClose:a,closeAfterTransition:!0,children:e.jsx(B,{in:i,children:e.jsx(b,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{className:"form-teacher",onSubmit:q,children:[e.jsx(P,{fullWidth:!0,type:"text",label:"NIP",placeholder:"NIP",value:f||"",onChange:r=>j(r.target.value)}),e.jsx(P,{fullWidth:!0,label:"Nama Lengkap",placeholder:"Nama Lengkap",value:w||"",onChange:r=>m(r.target.value)}),e.jsxs(F,{children:[e.jsx(M,{children:"--Subjects--"}),e.jsx(H,{required:!0,label:"--Subjects--",multiple:!0,value:L||[],onChange:r=>_(r.target.value),children:o==null?void 0:o.map((r,I)=>e.jsx(N,{value:r.code,children:r.name},I))})]}),e.jsxs(F,{children:[e.jsx(M,{children:"--Homeroom--"}),e.jsxs(H,{label:"--Homeroom--",value:C,onChange:r=>n(r.target.value),children:[e.jsx(N,{value:1,children:"Yes"}),e.jsx(N,{value:2,children:"No"})]})]}),C===1&&e.jsxs(F,{children:[e.jsx(M,{children:"--Class--"}),e.jsx(H,{required:!0,label:"--Class--",value:y||"",onChange:r=>k(r.target.value),children:c==null?void 0:c.map(r=>e.jsx(N,{value:r.code,children:r.name},r.id))})]}),e.jsxs(b,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(p,{variant:"outlined",color:"error",onClick:a,children:"cancel"}),e.jsx(p,{variant:"contained",color:"success",type:"submit",children:g?e.jsx(E,{size:20,color:"inherit"}):"Edit"})]})]})})})})};var U={},De=ae;Object.defineProperty(U,"__esModule",{value:!0});var Y=U.default=void 0,Ee=De(be()),Le=e;Y=U.default=(0,Ee.default)((0,Le.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");const Ae=[{label:"No",width:60},{label:"Homebase",width:90},{label:"NIP",width:90},{label:"Name",width:170},{label:"Subjects",width:170},{label:"Homeroom",width:50},{label:"Class",width:50},{label:"Actions",width:50}],Me=()=>{const[i,a]=t.useState(null),s=!!i,[o,c]=t.useState(""),[u,d]=t.useState(!1),x=(l,D)=>{a(l.currentTarget),c(D)},g=()=>{a(null)},{data:h,isLoading:S}=re(),[f,{data:j,isLoading:w,error:m,isSuccess:C}]=oe(),[n,{data:y}]=ne(),k=()=>{o&&(g(),d(!0),n(o))},L=()=>{o&&(f(o),g())};t.useEffect(()=>{C&&v.success(j.message),m&&v.error(m.data.message)},[C,j,m]);const[_,q]=t.useState(""),r=l=>l.name.toLowerCase().includes(_.toLowerCase()),I=h==null?void 0:h.filter(r),J=l=>{q(l.target.value)};return e.jsxs(t.Fragment,{children:[e.jsxs(b,{sx:{p:1,mb:1,boxShadow:2,bgcolor:"white",borderRadius:1,display:"flex",justifyContent:"space-between",flexDirection:{xs:"column-reverse",md:"row"},gap:2},children:[e.jsx(X,{placeholder:"Search Subject",value:_,onChange:J}),e.jsx(Ne,{})]}),S?e.jsx(ge,{variant:"rounded",height:530}):e.jsxs(Ce,{sx:{width:"100%",overflowX:"auto"},children:[e.jsx(ve,{sx:{height:{xs:500,md:530,xl:638},overflow:"auto"},children:e.jsxs(Se,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(we,{children:e.jsx($,{children:Ae.map((l,D)=>e.jsx(T,{align:"center",sx:{width:l.width},children:l.label},D))})}),e.jsx(Te,{children:I==null?void 0:I.map((l,D)=>{var z;return e.jsxs($,{children:[e.jsx(T,{align:"center",children:D+1}),e.jsx(T,{align:"center",children:l.homebase_name}),e.jsx(T,{align:"center",children:l.nip}),e.jsx(T,{children:l.name}),e.jsx(T,{children:(z=l.subjects)==null?void 0:z.map((G,K)=>e.jsx("p",{children:G.subject},K))}),e.jsx(T,{align:"center",children:l.homeroom===1?e.jsx(A,{color:"success",children:e.jsx(Y,{})}):e.jsx(A,{color:"error",children:e.jsx(W,{})})}),e.jsx(T,{align:"center",children:l.class?e.jsx("p",{children:l.class}):e.jsx(A,{color:"error",children:e.jsx(W,{})})}),e.jsx(T,{align:"center",children:e.jsx(A,{color:"primary",id:"basic-button","aria-controls":s?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":s?"true":void 0,onClick:G=>x(G,l.id),children:w?e.jsx(E,{size:20}):e.jsx(ce,{})})})]},D)})})]})}),e.jsxs(he,{id:"basic-menu",anchorEl:i,open:s,onClose:g,MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsx(N,{onClick:k,children:"Edit"}),e.jsx(N,{onClick:L,children:"Delete"})]})]}),e.jsx(_e,{open:u,close:()=>d(!1),teacher:y})]})},fs=()=>e.jsxs(le,{children:[e.jsx(ie,{title:"Teachers"}),e.jsx(Q,{container:!0,sx:{minHeight:"80vh",display:"flex",flexDirection:"column",gap:2},children:e.jsx(Q,{item:!0,xs:12,md:12,children:e.jsx(Me,{})})})]});export{fs as default};
