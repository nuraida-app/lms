import{g as $,G as U,T as O,r as a,B as m,j as e,c as p,C as B,U as V,V as X,W as Y,X as J,Y as K,a as Z}from"./index-DIsnH_Xf.js";import{L as ee}from"./Layout-IEtBPvWE.js";import{P as se}from"./PageName-CpY048DR.js";import{d as ae}from"./MoreHoriz-Cu_p-hZD.js";import{d as te,a as re}from"./FolderDelete-C0C3IsIz.js";import{M as H,F as P}from"./Modal-D80yxPyo.js";import{F as k}from"./FormControl-B-R9P-Ww.js";import{I as A,T as _}from"./TextField-B-t6DXr_.js";import{S as D}from"./Select-D9XimaUz.js";import{M as f}from"./MenuItem-CcvLpfhi.js";import{B as C}from"./Button-B7ffD2a8.js";import{T as le}from"./Typography-BA3Sygrx.js";import{I as ne}from"./Input-DlM2f4TJ.js";import{P as ie}from"./Paper-Cux33Jjz.js";import{T as oe}from"./TableContainer-BHuaUBRM.js";import{T as de,a as ce,b as R,c as v,d as ue}from"./TableRow-PFvMlieY.js";import{I as he}from"./IconButton-B5Esn2cm.js";import{M as xe}from"./Menu-DLhG4VV7.js";import{G as fe}from"./Grid-DGGoNAVF.js";import"./FolderCopy-B8qhQldI.js";import"./getThemeProps-DvYUzjFl.js";import"./createSvgIcon-Wm_MOYli.js";import"./GlobalStyles-YGyYwcXu.js";import"./listItemIconClasses-BinbQng3.js";import"./useTheme-BZgM83zG.js";import"./ChevronRight-B7sBRn01.js";import"./PeopleAlt-BSyRoO6G.js";import"./CalendarMonth-Dq7grY8y.js";import"./Style-xw6W94kL.js";import"./ExitToApp-B9qPmLkr.js";import"./Toolbar-BM5Zh9fB.js";import"./utils-CTc4hCOr.js";import"./Grow-B6ooTGOG.js";const me=({open:n,close:l})=>{const{data:r,isLoading:i}=$(),{data:o,isLoading:j}=U(),[c,{data:u,isLoading:y,isSuccess:S,error:z,reset:d}]=O(),[E,h]=a.useState(""),[G,x]=a.useState(""),[M,Q]=a.useState(!1),[T,w]=a.useState(""),[N,I]=a.useState(""),[g,b]=a.useState(""),W=s=>{if(s.preventDefault(),/[/\-]/.test(g)){m.error("Quiz name should not contain '/' or '-'");return}c({teacherId:E,gradeId:G,quizName:g,shuffle:M,mc:T,essay:N})};a.useEffect(()=>{S&&(m.success(u.message),h(""),x(""),Q(!1),w(""),I(""),b(""),l(),d()),z&&(m.error(z.data.message),d())},[u,S,z]);const q=()=>{h(""),Q(!1),b(""),w(""),I(""),x(""),l()};return e.jsx(H,{open:n,onClose:l,closeAfterTransition:!0,children:e.jsx(P,{in:n,children:e.jsx(p,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{className:"form-quiz",onSubmit:W,children:[e.jsxs(k,{fullWidth:!0,children:[e.jsx(A,{children:"--Teacher--"}),e.jsx(D,{value:E,onChange:s=>h(s.target.value),required:!0,label:"--Teacher--",children:r==null?void 0:r.map(s=>e.jsx(f,{value:s.id,children:s.name},s.id))})]}),e.jsxs(k,{fullWidth:!0,children:[e.jsx(A,{children:"--Grade--"}),e.jsx(D,{value:G,onChange:s=>x(s.target.value),required:!0,label:"--Grade--",children:o==null?void 0:o.map(s=>e.jsx(f,{value:s.id,children:s.grade},s.id))})]}),e.jsxs(k,{fullWidth:!0,children:[e.jsx(A,{children:"--Shuffle--"}),e.jsxs(D,{value:M,onChange:s=>Q(s.target.value),required:!0,label:"--Grade--",children:[e.jsx(f,{value:!0,children:"yes"}),e.jsx(f,{value:!1,children:"No"})]})]}),e.jsx(_,{fullWidth:!0,required:!0,label:"Quiz Name",placeholder:"Quiz Name",value:g,onChange:s=>b(s.target.value)}),e.jsxs(p,{sx:{display:"flex",gap:1},children:[e.jsx(_,{fullWidth:!0,required:!0,type:"number",label:"MC",placeholder:"eg: 80",value:T,onChange:s=>w(s.target.value)}),e.jsx(_,{fullWidth:!0,required:!0,type:"number",label:"Essay",placeholder:"eg: 20",value:N,onChange:s=>I(s.target.value)})]}),e.jsxs(p,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(C,{variant:"outlined",color:"error",onClick:q,children:"cancel"}),e.jsx(C,{variant:"contained",color:"success",type:"submit",children:i||j||y?e.jsx(B,{size:20,color:"inherit"}):"add"})]})]})})})})},pe=({open:n,close:l})=>{const[r,{data:i,isSuccess:o,isLoading:j,error:c,reset:u}]=V(),y=()=>r();return a.useEffect(()=>{o&&(m.success(i.message),l(),u()),c&&m.error(c.data.message)},[i,o,c]),e.jsx(H,{open:n,onClose:l,closeAfterTransition:!0,children:e.jsx(P,{in:n,children:e.jsxs(p,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:[e.jsx(le,{align:"center",children:"Are you sure you want to delete all quizzes?"}),e.jsxs(p,{sx:{display:"flex",gap:1,justifyContent:"flex-end",mt:1},children:[e.jsx(C,{variant:"contained",color:"error",onClick:l,children:"cancel"}),e.jsx(C,{variant:"outlined",color:"error",onClick:y,children:j?e.jsx(B,{size:20,color:"inherit"}):"sure"})]})]})})})},je=()=>{const[n,l]=a.useState(!1),[r,i]=a.useState(!1);return e.jsxs(p,{sx:{display:"flex",justifyContent:"end",gap:1},children:[e.jsx(C,{variant:"contained",color:"success",startIcon:e.jsx(te,{}),onClick:()=>i(!0),sx:{width:120},children:"add"}),e.jsx(C,{startIcon:e.jsx(re,{}),variant:"contained",color:"error",onClick:()=>l(!0),sx:{width:120},children:"Delete"}),e.jsx(me,{open:r,close:()=>i(!1)}),e.jsx(pe,{open:n,close:()=>l(!1)})]})},ge=({open:n,close:l,quiz:r})=>{const{data:i,isLoading:o}=$(),{data:j,isLoading:c}=U(),[u,{data:y,isSuccess:S,isLoading:z,error:d,reset:E}]=X(),[h,G]=a.useState(""),[x,M]=a.useState(""),[Q,T]=a.useState(!1),[w,N]=a.useState(""),[I,g]=a.useState(""),[b,W]=a.useState(""),q=s=>{if(s.preventDefault(),/[/\-]/.test(b)){m.error("Quiz name should not contain '/' or '-'");return}const t={teacherId:h,gradeId:x,quizName:b,shuffle:Q,mc:w,essay:I};u({id:r.id,body:t})};return a.useEffect(()=>{S&&(m.success(y.message),l(),E()),d&&(m.error(d.data.message),E())},[y,S,d]),a.useEffect(()=>{r&&(G(r.teacher_id),M(r.grade_id),T(r.shuffle),N(r.mc_weight),g(r.essay_weight),W(r.quiz_name))},[r]),e.jsx(H,{open:n,onClose:l,closeAfterTransition:!0,children:e.jsx(P,{in:n,children:e.jsx(p,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{className:"form-quiz",onSubmit:q,children:[e.jsxs(k,{fullWidth:!0,children:[e.jsx(A,{children:"--Teacher--"}),e.jsx(D,{value:h||"",onChange:s=>G(s.target.value),required:!0,label:"--Teacher--",children:i==null?void 0:i.map(s=>e.jsx(f,{value:s.id,children:s.name},s.id))})]}),e.jsxs(k,{fullWidth:!0,children:[e.jsx(A,{children:"--Grade--"}),e.jsx(D,{value:x||"",onChange:s=>M(s.target.value),required:!0,label:"--Grade--",children:j==null?void 0:j.map(s=>e.jsx(f,{value:s.id,children:s.grade},s.id))})]}),e.jsxs(k,{fullWidth:!0,children:[e.jsx(A,{children:"--Shuffle--"}),e.jsxs(D,{value:Q,onChange:s=>T(s.target.value),required:!0,label:"--Grade--",children:[e.jsx(f,{value:!0,children:"yes"}),e.jsx(f,{value:!1,children:"No"})]})]}),e.jsx(_,{fullWidth:!0,required:!0,label:"Quiz Name",placeholder:"Quiz Name",value:b||"",onChange:s=>W(s.target.value)}),e.jsxs(p,{sx:{display:"flex",gap:1},children:[e.jsx(_,{fullWidth:!0,required:!0,type:"number",label:"MC",placeholder:"eg: 80",value:w||"",onChange:s=>N(s.target.value)}),e.jsx(_,{fullWidth:!0,required:!0,type:"number",label:"Essay",placeholder:"eg: 20",value:I||"",onChange:s=>g(s.target.value)})]}),e.jsxs(p,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(C,{variant:"outlined",color:"error",onClick:l,children:"cancel"}),e.jsx(C,{variant:"contained",color:"success",type:"submit",children:o||c||z?e.jsx(B,{size:20,color:"inherit"}):"update"})]})]})})})})},be=[{label:"No",width:50},{label:"Teacher",width:170},{label:"Bank",width:170},{label:"Grade",width:70},{label:"MC",width:70},{label:"Essay",width:70},{label:"Questions",width:70},{label:"Actions",width:170}],ve=()=>{const{data:n}=Y(),[l,{data:r}]=J(),[i,{data:o,isLoading:j,isSuccess:c,error:u,reset:y}]=K(),[S,z]=a.useState(null),[d,E]=a.useState(""),h=!!S,G=(t,L)=>{z(t.currentTarget),E(L)},x=()=>{z(null)},M=Z(),[Q,T]=a.useState(!1),w=(t,L)=>{const F=t.replace(/\s+/g,"-");M(`/admin/quizzes/${F}/${L}`)},N=()=>{d&&(T(!0),l(d),x())},I=()=>{d&&(i(d),x())};a.useEffect(()=>{c&&(m.success(o.message),y()),u&&m.error(u.data.message)},[o,c,u]);const[g,b]=a.useState(""),W=t=>t.teacher.toLowerCase().includes(g.toLowerCase()),q=n==null?void 0:n.filter(W),s=t=>{b(t.target.value)};return e.jsxs(a.Fragment,{children:[e.jsxs(p,{sx:{p:1,boxShadow:2,bgcolor:"white",borderRadius:1,display:"flex",justifyContent:"space-between",flexDirection:{xs:"column-reverse",md:"row"},gap:2},children:[e.jsx(ne,{placeholder:"Search Teacher",value:g,onChange:s}),e.jsx(je,{})]}),e.jsx(ie,{children:e.jsx(oe,{children:e.jsxs(de,{children:[e.jsx(ce,{children:e.jsx(R,{children:be.map((t,L)=>e.jsx(v,{align:"center",sx:{width:t.width},children:t.label},L))})}),e.jsx(ue,{children:q==null?void 0:q.map((t,L)=>e.jsxs(R,{children:[e.jsx(v,{align:"center",children:L+1}),e.jsx(v,{align:"left",children:t.teacher}),e.jsx(v,{align:"center",children:t.quiz_name}),e.jsx(v,{align:"center",children:t.grade}),e.jsx(v,{align:"center",children:t.mc}),e.jsx(v,{align:"center",children:t.essay}),e.jsx(v,{align:"center",children:e.jsx(C,{variant:"contained",color:"success",onClick:()=>w(t.quiz_name,t.id),children:"Add"})}),e.jsx(v,{align:"center",children:e.jsx(he,{id:"basic-button",color:"primary","aria-controls":h?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":h?"true":void 0,onClick:F=>G(F,t.id),children:j?e.jsx(B,{size:20}):e.jsx(ae,{})})})]},L))})]})})}),e.jsx(ge,{open:Q,close:()=>T(!1),quiz:r}),e.jsxs(xe,{id:"basic-menu",anchorEl:S,open:h,onClose:x,MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsx(f,{onClick:()=>N(),children:"Edit"}),e.jsx(f,{onClick:I,children:"Delete"})]})]})},es=()=>e.jsxs(ee,{children:[e.jsx(se,{title:"Quizzes"}),e.jsx(fe,{container:!0,sx:{minHeight:"85vh",display:"flex",flexDirection:"column",gap:2},children:e.jsx(ve,{})})]});export{es as default};
