import{D as P,E as K,r as t,B as j,j as e,c as S,C as E,F as V,G as X,a as Y,f as Z,H as ee,I as se}from"./index-DVVZMFAy.js";import{P as te}from"./PageName-CVqv3dsE.js";import{L as re}from"./Layout-D97RgaFn.js";import{d as ae,a as oe}from"./FolderDelete-Bpv3yS2n.js";/* empty css               */import{M as A,F as H}from"./Modal-Cpz68z0j.js";import{F as R}from"./FormControl-05Kwk5ud.js";import{I as _,T as G}from"./TextField-BM3TvEiH.js";import{S as z}from"./Select-CqYv7x9e.js";import{M as I}from"./MenuItem-CdboovXi.js";import{B as C}from"./Button-CYCXCPze.js";import{T as le}from"./Typography-CI31gJNE.js";import{d as ne}from"./MoreHoriz-Cxtt6mhs.js";import{P as ie}from"./Paper-CojZdgXz.js";import{T as de}from"./TableContainer-NtLmG29M.js";import{T as ce,a as ue,b as F,c as p}from"./TableRow-3lfkq1cl.js";import{T as xe}from"./TableBody-CwUpeEIY.js";import{I as me}from"./IconButton-D0bPhnJn.js";import{M as he}from"./Menu-BtGv6fLg.js";import{G as L}from"./Grid-Byh82s5p.js";import"./getThemeProps-D_yIhtQB.js";import"./createSvgIcon-BBYY8FNJ.js";import"./GlobalStyles-D9JB72R9.js";import"./listItemIconClasses-CWPOSp7D.js";import"./useTheme-CmsqvUfX.js";import"./ExitToApp-CrF1bS-w.js";import"./ChevronRight-CoZk7gnx.js";import"./PeopleAlt-odce-XfD.js";import"./CalendarMonth-D2YtUPcA.js";import"./Style-DpYiakdT.js";import"./Toolbar-DSj10l_W.js";import"./utils-DWTovDIY.js";import"./Input-DKQUFpGi.js";import"./Grow-BLVuUMNW.js";const fe=({open:l,close:r})=>{const{data:s}=P(),[n,{data:c,isSuccess:u,isLoading:x,error:i,reset:g}]=K(),[y,f]=t.useState(""),[b,m]=t.useState(""),[v,h]=t.useState(""),T=a=>{a.preventDefault(),n({gradeId:y,code:b,name:v})};return t.useEffect(()=>{u&&(j.success(c.message),f(""),m(""),h(""),g(),r()),i&&j.error(i.data.message)},[c,u,i]),e.jsx(A,{open:l,onClose:r,closeAfterTransition:!0,children:e.jsx(H,{in:l,children:e.jsx(S,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{className:"form-class",onSubmit:T,children:[e.jsxs(R,{children:[e.jsx(_,{children:"--Grade--"}),e.jsx(z,{required:!0,label:"--Grade--",value:y,onChange:a=>f(a.target.value),children:s==null?void 0:s.map(a=>e.jsx(I,{value:a.id,children:a.grade},a.id))})]}),e.jsx(G,{fullWidth:!0,label:"Class code",placeholder:"Must be NUMBER",value:b,onChange:a=>m(a.target.value)}),e.jsx(G,{fullWidth:!0,label:"Class",placeholder:"Class",value:v,onChange:a=>h(a.target.value)}),e.jsxs(S,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(C,{variant:"outlined",color:"error",onClick:r,children:"cancel"}),e.jsx(C,{variant:"contained",color:"success",type:"submit",children:x?e.jsx(E,{size:20,color:"inherit"}):"add"})]})]})})})})},pe=({open:l,close:r})=>{const[s,{data:n,isSuccess:c,isLoading:u,error:x}]=V(),i=()=>s();return t.useEffect(()=>{c&&(j.success(n.message),r()),x&&j.error(x.data.message)},[c,n,x]),e.jsx(A,{open:l,onClose:r,closeAfterTransition:!0,children:e.jsx(H,{in:l,children:e.jsxs(S,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:[e.jsx(le,{align:"center",children:"Are you sure you want to delete all classes?"}),e.jsxs(S,{sx:{display:"flex",gap:2,justifyContent:"flex-end",mt:2},children:[e.jsx(C,{variant:"contained",color:"error",onClick:r,children:"cancel"}),e.jsx(C,{variant:"outlined",color:"error",onClick:i,children:u?e.jsx(E,{size:20,color:"inherit"}):"sure"})]})]})})})},je=()=>{const[l,r]=t.useState(!1),[s,n]=t.useState(!1);return e.jsxs(S,{sx:{display:"flex",justifyContent:"end",gap:1,p:1,boxShadow:2,bgcolor:"white",borderRadius:1},children:[e.jsx(C,{variant:"contained",color:"success",startIcon:e.jsx(ae,{}),onClick:()=>n(!0),sx:{width:120},children:"add"}),e.jsx(C,{startIcon:e.jsx(oe,{}),variant:"contained",color:"error",onClick:()=>r(!0),sx:{width:120},children:"Delete"}),e.jsx(fe,{open:s,close:()=>n(!1)}),e.jsx(pe,{open:l,close:()=>r(!1)})]})},Ce=({open:l,close:r,data:s})=>{const{data:n}=P(),[c,{data:u,isLoading:x,isSuccess:i,error:g,reset:y}]=X(),[f,b]=t.useState(""),[m,v]=t.useState(""),[h,T]=t.useState(""),a=o=>{o.preventDefault();const N={gradeId:f,code:m,name:h};c({id:s==null?void 0:s.id,body:N})};return t.useEffect(()=>{i&&(j.success(u.message),r(),y()),g&&j.error(g.data.message)},[i,u,g]),t.useEffect(()=>{s&&(b(s==null?void 0:s.grade_id),v(s==null?void 0:s.code),T(s==null?void 0:s.name))},[s]),e.jsx(A,{open:l,onClose:r,closeAfterTransition:!0,children:e.jsx(H,{in:l,children:e.jsx(S,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{className:"form-class",onSubmit:a,children:[e.jsxs(R,{children:[e.jsx(_,{children:"--Grade--"}),e.jsx(z,{required:!0,label:"--Grade--",value:f||"",onChange:o=>b(o.target.value),children:n==null?void 0:n.map(o=>e.jsx(I,{value:o.id,children:o.grade},o.id))})]}),e.jsx(G,{fullWidth:!0,label:"Code",placeholder:"Code",value:m||"",onChange:o=>v(o.target.value)}),e.jsx(G,{fullWidth:!0,label:"Name",placeholder:"Name",value:h||"",onChange:o=>T(o.target.value)}),e.jsxs(S,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(C,{variant:"outlined",color:"error",onClick:r,children:"cancel"}),e.jsx(C,{variant:"contained",color:"success",type:"submit",children:x?e.jsx(E,{size:20,color:"inherit"}):"add"})]})]})})})})},ge=[{label:"No",width:40},{label:"Homebase",width:100},{label:"Grade",width:100},{label:"Code",width:40},{label:"Class",width:100},{label:"Students",width:50},{label:"Actions",width:50}],be=()=>{const[l,r]=t.useState(null),s=!!l,[n,c]=t.useState(""),[u,x]=t.useState(""),[i,g]=t.useState(""),[y,f]=t.useState(!1),b=(d,w,k,J)=>{r(d.currentTarget),g(w),c(J),x(k)},m=()=>{r(null)},v=Y(),{data:h,isLoading:T}=Z(),[a,{data:o,isLoading:N}]=ee(),[W,{data:D,isLoading:$,isSuccess:B,error:M,reset:U}]=se(),q=()=>v(`/admin/classes/grade/${u}/class-code/${n}/add-students`),Q=()=>{i&&(a(i),f(!0),m())},O=()=>{i&&(W(i),m())};return t.useEffect(()=>{B&&(j.success(D.message),U()),M&&j.error(M.data.message)},[B,D,M]),e.jsx(ie,{children:e.jsxs(de,{sx:{height:{xs:500,md:530,xl:630},overflow:"auto"},children:[e.jsxs(ce,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(ue,{children:e.jsx(F,{children:ge.map((d,w)=>e.jsx(p,{align:"center",sx:{width:d.width},children:d.label},w))})}),e.jsx(xe,{children:h==null?void 0:h.map((d,w)=>e.jsxs(F,{children:[e.jsx(p,{align:"center",children:w+1}),e.jsx(p,{align:"center",children:d.homebase}),e.jsx(p,{align:"center",children:d.grade}),e.jsx(p,{align:"center",children:d.code}),e.jsx(p,{align:"center",children:d.name}),e.jsx(p,{align:"center",children:d.students}),e.jsx(p,{align:"center",children:e.jsx(me,{onClick:k=>b(k,d.id,d.grade_id,d.code),children:$?e.jsx(E,{size:14}):e.jsx(ne,{})})})]},w))})]}),e.jsxs(he,{id:"basic-menu",anchorEl:l,open:s,onClose:m,MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsx(I,{onClick:q,children:"Add Students"}),e.jsx(I,{onClick:Q,children:"Edit"}),e.jsx(I,{onClick:O,children:"Delete"})]}),e.jsx(Ce,{open:y,close:()=>f(!1),data:o})]})})},ss=()=>e.jsxs(re,{children:[e.jsx(te,{title:"Classes"}),e.jsxs(L,{container:!0,sx:{minHeight:"85vh",display:"flex",flexDirection:"column",gap:2},children:[e.jsx(L,{item:!0,xs:12,md:12,children:e.jsx(je,{})}),e.jsx(L,{item:!0,xs:12,md:12,children:e.jsx(be,{})})]})]});export{ss as default};
