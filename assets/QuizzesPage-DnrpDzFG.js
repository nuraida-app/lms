import{g as U,G as $,U as O,r as a,B as m,j as e,c as p,C as H,V,W as X,X as Y,Y as Z,Z as J,a as K}from"./index-CFaoof_u.js";import{L as ee}from"./Layout-Dfh5fQSZ.js";import{P as se}from"./PageName-TTa6Mdmj.js";import{d as ae}from"./MoreHoriz-B93EL_xY.js";import{d as te,a as re}from"./FolderDelete-u7Diu4BM.js";import{M as F,F as D}from"./Modal-DyYFvg8Q.js";import{F as N}from"./FormControl-BZs5yOMZ.js";import{I as A,T as W}from"./TextField-Bwa8w5Hb.js";import{S as _}from"./Select-B725NlmR.js";import{M as f}from"./MenuItem-Dr0WxY7w.js";import{B as C}from"./Button-Cyjt7KvH.js";import{T as ne}from"./Typography-DcAKAVhU.js";import{I as ie}from"./Input-N1-PClMB.js";import{P as le}from"./Paper-Bl3aGdsR.js";import{T as oe}from"./TableContainer-CQXXPgDy.js";import{T as de,a as R,b as v,c as ue}from"./TableRow-C-D4jw9R.js";import{T as ce}from"./TableHead-BiWXZUfo.js";import{I as he}from"./IconButton-Ct6-YGlN.js";import{M as xe}from"./Menu-DTz7dFrX.js";import{G as fe}from"./Grid-ClV3Ec1o.js";import"./FolderCopy-CjBaZnBq.js";import"./getThemeProps-BtYJU1E8.js";import"./createSvgIcon-B-QSSRwX.js";import"./GlobalStyles-BwsLZ7JT.js";import"./listItemIconClasses-C0Z8a7TX.js";import"./useTheme-DOzr14v8.js";import"./ChevronRight-C8kya78d.js";import"./PeopleAlt-CzyUmb99.js";import"./CalendarMonth-BVnK-sJQ.js";import"./Style-DKwaH2QS.js";import"./colorManipulator-CQUMc1c4.js";import"./ExitToApp-DeUhQ-c4.js";import"./Toolbar-Bw3Yww6Z.js";import"./utils-d7k_POnt.js";import"./Grow-BAheIvG1.js";const me=({open:i,close:n})=>{const{data:r,isLoading:l}=U(),{data:o,isLoading:j}=$(),[u,{data:c,isLoading:y,isSuccess:S,error:z,reset:d}]=O(),[Q,h]=a.useState(""),[G,x]=a.useState(""),[E,T]=a.useState(!1),[k,w]=a.useState(""),[P,I]=a.useState(""),[g,b]=a.useState(""),M=s=>{if(s.preventDefault(),/[/\-]/.test(g)){m.error("Quiz name should not contain '/' or '-'");return}u({teacherId:Q,gradeId:G,quizName:g,shuffle:E,mc:k,essay:P})};a.useEffect(()=>{S&&(m.success(c.message),h(""),x(""),T(!1),w(""),I(""),b(""),n(),d()),z&&(m.error(z.data.message),d())},[c,S,z]);const q=()=>{h(""),T(!1),b(""),w(""),I(""),x(""),n()};return e.jsx(F,{open:i,onClose:n,closeAfterTransition:!0,children:e.jsx(D,{in:i,children:e.jsx(p,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{className:"form-quiz",onSubmit:M,children:[e.jsxs(N,{fullWidth:!0,children:[e.jsx(A,{children:"--Guru--"}),e.jsx(_,{value:Q,onChange:s=>h(s.target.value),required:!0,label:"--Guru--",children:r==null?void 0:r.map(s=>e.jsx(f,{value:s.id,children:s.name},s.id))})]}),e.jsxs(N,{fullWidth:!0,children:[e.jsx(A,{children:"--Tingkat--"}),e.jsx(_,{value:G,onChange:s=>x(s.target.value),required:!0,label:"--Tingkat--",children:o==null?void 0:o.map(s=>e.jsx(f,{value:s.id,children:s.grade},s.id))})]}),e.jsxs(N,{fullWidth:!0,children:[e.jsx(A,{children:"--Acak--"}),e.jsxs(_,{value:E,onChange:s=>T(s.target.value),required:!0,label:"--Acak--",children:[e.jsx(f,{value:!0,children:"ya"}),e.jsx(f,{value:!1,children:"Tidak"})]})]}),e.jsx(W,{fullWidth:!0,required:!0,label:"Nama Ujian",placeholder:"Nama Ujian",value:g,onChange:s=>b(s.target.value),InputLabelProps:{shrink:!0}}),e.jsxs(p,{sx:{display:"flex",gap:1},children:[e.jsx(W,{fullWidth:!0,required:!0,type:"number",label:"PG",placeholder:"eg: 80",value:k,onChange:s=>w(s.target.value),InputLabelProps:{shrink:!0}}),e.jsx(W,{fullWidth:!0,required:!0,type:"number",label:"Essay",placeholder:"eg: 20",value:P,onChange:s=>I(s.target.value),InputLabelProps:{shrink:!0}})]}),e.jsxs(p,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(C,{variant:"outlined",color:"error",onClick:q,children:"tutup"}),e.jsx(C,{variant:"contained",color:"success",type:"submit",children:l||j||y?e.jsx(H,{size:20,color:"inherit"}):"add"})]})]})})})})},pe=({open:i,close:n})=>{const[r,{data:l,isSuccess:o,isLoading:j,error:u,reset:c}]=V(),y=()=>r();return a.useEffect(()=>{o&&(m.success(l.message),n(),c()),u&&m.error(u.data.message)},[l,o,u]),e.jsx(F,{open:i,onClose:n,closeAfterTransition:!0,children:e.jsx(D,{in:i,children:e.jsxs(p,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:[e.jsx(ne,{align:"center",children:"Are you sure you want to delete all quizzes?"}),e.jsxs(p,{sx:{display:"flex",gap:1,justifyContent:"flex-end",mt:1},children:[e.jsx(C,{variant:"contained",color:"error",onClick:n,children:"cancel"}),e.jsx(C,{variant:"outlined",color:"error",onClick:y,children:j?e.jsx(H,{size:20,color:"inherit"}):"sure"})]})]})})})},je=()=>{const[i,n]=a.useState(!1),[r,l]=a.useState(!1);return e.jsxs(p,{sx:{display:"flex",justifyContent:"end",gap:1},children:[e.jsx(C,{variant:"contained",color:"success",startIcon:e.jsx(te,{}),onClick:()=>l(!0),sx:{width:120},children:"Tambah"}),e.jsx(C,{startIcon:e.jsx(re,{}),variant:"contained",color:"error",onClick:()=>n(!0),sx:{width:120},children:"Hapus"}),e.jsx(me,{open:r,close:()=>l(!1)}),e.jsx(pe,{open:i,close:()=>n(!1)})]})},ge=({open:i,close:n,quiz:r})=>{const{data:l,isLoading:o}=U(),{data:j,isLoading:u}=$(),[c,{data:y,isSuccess:S,isLoading:z,error:d,reset:Q}]=X(),[h,G]=a.useState(""),[x,E]=a.useState(""),[T,k]=a.useState(!1),[w,P]=a.useState(""),[I,g]=a.useState(""),[b,M]=a.useState(""),q=s=>{if(s.preventDefault(),/[/\-]/.test(b)){m.error("Quiz name should not contain '/' or '-'");return}const t={teacherId:h,gradeId:x,quizName:b,shuffle:T,mc:w,essay:I};c({id:r.id,body:t})};return a.useEffect(()=>{S&&(m.success(y.message),n(),Q()),d&&(m.error(d.data.message),Q())},[y,S,d]),a.useEffect(()=>{r&&(G(r.teacher_id),E(r.grade_id),k(r.shuffle),P(r.mc_weight),g(r.essay_weight),M(r.quiz_name))},[r]),e.jsx(F,{open:i,onClose:n,closeAfterTransition:!0,children:e.jsx(D,{in:i,children:e.jsx(p,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{className:"form-quiz",onSubmit:q,children:[e.jsxs(N,{fullWidth:!0,children:[e.jsx(A,{children:"--Guru--"}),e.jsx(_,{value:h||"",onChange:s=>G(s.target.value),required:!0,label:"--Guru--",children:l==null?void 0:l.map(s=>e.jsx(f,{value:s.id,children:s.name},s.id))})]}),e.jsxs(N,{fullWidth:!0,children:[e.jsx(A,{children:"--Tingkat--"}),e.jsx(_,{value:x||"",onChange:s=>E(s.target.value),required:!0,label:"--Tingkat--",children:j==null?void 0:j.map(s=>e.jsx(f,{value:s.id,children:s.grade},s.id))})]}),e.jsxs(N,{fullWidth:!0,children:[e.jsx(A,{children:"--Acak--"}),e.jsxs(_,{value:T,onChange:s=>k(s.target.value),required:!0,label:"--Acak--",children:[e.jsx(f,{value:!0,children:"ya"}),e.jsx(f,{value:!1,children:"Tidak"})]})]}),e.jsx(W,{fullWidth:!0,required:!0,label:"Nama Ujian",placeholder:"Nama Ujian",value:b||"",onChange:s=>M(s.target.value),InputLabelProps:{shrink:!0}}),e.jsxs(p,{sx:{display:"flex",gap:1},children:[e.jsx(W,{fullWidth:!0,required:!0,type:"number",label:"PG",placeholder:"eg: 80",value:w||"",onChange:s=>P(s.target.value),InputLabelProps:{shrink:!0}}),e.jsx(W,{fullWidth:!0,required:!0,type:"number",label:"Essay",placeholder:"eg: 20",value:I||"",onChange:s=>g(s.target.value),InputLabelProps:{shrink:!0}})]}),e.jsxs(p,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(C,{variant:"outlined",color:"error",onClick:n,children:"tutup"}),e.jsx(C,{variant:"contained",color:"success",type:"submit",children:o||u||z?e.jsx(H,{size:20,color:"inherit"}):"update"})]})]})})})})},be=[{label:"No",width:50},{label:"Guru",width:170},{label:"Bank Soal",width:170},{label:"Tingkat",width:70},{label:"PG",width:70},{label:"Essay",width:70},{label:"Pertanyaan",width:70},{label:"Aksi",width:170}],ve=()=>{const{data:i}=Y(),[n,{data:r}]=Z(),[l,{data:o,isLoading:j,isSuccess:u,error:c,reset:y}]=J(),[S,z]=a.useState(null),[d,Q]=a.useState(""),h=!!S,G=(t,L)=>{z(t.currentTarget),Q(L)},x=()=>{z(null)},E=K(),[T,k]=a.useState(!1),w=(t,L)=>{const B=t.replace(/\s+/g,"-");E(`/admin/quizzes/${B}/${L}`)},P=()=>{d&&(k(!0),n(d),x())},I=()=>{d&&(l(d),x())};a.useEffect(()=>{u&&(m.success(o.message),y()),c&&m.error(c.data.message)},[o,u,c]);const[g,b]=a.useState(""),M=t=>t.teacher.toLowerCase().includes(g.toLowerCase()),q=i==null?void 0:i.filter(M),s=t=>{b(t.target.value)};return e.jsxs(a.Fragment,{children:[e.jsxs(p,{sx:{p:1,boxShadow:2,bgcolor:"white",borderRadius:1,display:"flex",justifyContent:"space-between",flexDirection:{xs:"column-reverse",md:"row"},gap:2},children:[e.jsx(ie,{placeholder:"Cari Guru",value:g,onChange:s}),e.jsx(je,{})]}),e.jsx(le,{children:e.jsx(oe,{children:e.jsxs(de,{children:[e.jsx(ce,{children:e.jsx(R,{children:be.map((t,L)=>e.jsx(v,{align:"center",sx:{width:t.width},children:t.label},L))})}),e.jsx(ue,{children:q==null?void 0:q.map((t,L)=>e.jsxs(R,{children:[e.jsx(v,{align:"center",children:L+1}),e.jsx(v,{align:"left",children:t.teacher}),e.jsx(v,{align:"left",children:t.quiz_name}),e.jsx(v,{align:"center",children:t.grade}),e.jsx(v,{align:"center",children:t.mc}),e.jsx(v,{align:"center",children:t.essay}),e.jsx(v,{align:"center",children:e.jsx(C,{variant:"contained",color:"success",onClick:()=>w(t.quiz_name,t.id),children:"tambah"})}),e.jsx(v,{align:"center",children:e.jsx(he,{id:"basic-button",color:"primary","aria-controls":h?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":h?"true":void 0,onClick:B=>G(B,t.id),children:j?e.jsx(H,{size:20}):e.jsx(ae,{})})})]},L))})]})})}),e.jsx(ge,{open:T,close:()=>k(!1),quiz:r}),e.jsxs(xe,{id:"basic-menu",anchorEl:S,open:h,onClose:x,MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsx(f,{onClick:()=>P(),children:"Edit"}),e.jsx(f,{onClick:I,children:"Hapus"})]})]})},as=()=>e.jsxs(ee,{children:[e.jsx(se,{title:"Quizzes"}),e.jsx(fe,{container:!0,sx:{minHeight:"85vh",display:"flex",flexDirection:"column",gap:2},children:e.jsx(ve,{})})]});export{as as default};
