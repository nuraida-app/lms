import{a as O,M as W,r as i,a4 as K,a5 as V,B as R,j as e,c as y,C as _}from"./index-zx9QfZoY.js";import{P as J}from"./PageName-jjQDIWWV.js";import{L as X}from"./Layout-CrlGJOeK.js";import"./Editor-DqgIhDN_.js";import{R as Y}from"./bundle-B_2iJp6j.js";import{C as L}from"./CustomEditor-DZJIR0YH.js";import{G as Z}from"./Grid-BCizA4LM.js";import{F as k}from"./FormControl-C4c9a5nH.js";import{I as z,T as ee}from"./TextField-BJwxyke2.js";import{S as Q}from"./Select-SvZ_7dw1.js";import{M as r}from"./MenuItem-CRwodlBl.js";import{B as I}from"./Button-DXlUDVsQ.js";import"./FolderCopy-C5Wgay4i.js";import"./getThemeProps-CgUQ_SlC.js";import"./Typography-BbVuTYIM.js";import"./Paper-DOpa6jtL.js";import"./createSvgIcon-ejoD_ev4.js";import"./Modal-D9QrkZCY.js";import"./useTheme-D7Zdti-D.js";import"./GlobalStyles-CYc0cWWR.js";import"./listItemIconClasses-2n8eT5dP.js";import"./ChevronRight-DD6-zMVG.js";import"./PeopleAlt-tYum5u-5.js";import"./CalendarMonth-DsKu-ARM.js";import"./Style-Z1RiwaPN.js";import"./colorManipulator-DVYWUa-M.js";import"./ExitToApp-CQL913Gf.js";import"./Toolbar-BcTO8NSz.js";import"./IconButton-B86WcClk.js";import"./quill.snow-B-SaWkB5.js";import"./Editor-DZytryH_.js";import"./utils-BeOBfU0K.js";import"./Input-BOlgPoNw.js";import"./Menu-CYSo7JTe.js";import"./Grow-HGwcTEBV.js";const Ue=()=>{const C=O(),U=W(),b=i.useRef(null),{questionId:l,quizname:v,quizId:n}=U,{data:s,isLoading:M}=K(l,{skip:!l}),[P,{data:S,isLoading:T,isSuccess:A,error:u,reset:d}]=V(),[c,p]=i.useState(1),[E,m]=i.useState(""),[a,h]=i.useState({choiceA:"",choiceB:"",choiceC:"",choiceD:"",choiceE:""}),[w,x]=i.useState(""),[D,f]=i.useState(""),[q,B]=i.useState(null),[j,g]=i.useState(""),F=o=>t=>{h(H=>({...H,[o]:t}))},G=()=>b.current.click(),N=o=>{const t=o.target.files[0];B(t),g(URL.createObjectURL(t))},$=o=>{o.preventDefault();const t=new FormData;t.append("type",c),t.append("quiz_id",n),t.append("question",E),t.append("a",a.choiceA||""),t.append("b",a.choiceB||""),t.append("c",a.choiceC||""),t.append("d",a.choiceD||""),t.append("e",a.choiceE||""),t.append("key",D||""),t.append("score",w||0),q&&t.append("audio",q),P({id:l,body:t,quizId:n})};return i.useEffect(()=>{A&&(R.success(S.message),p(1),m(""),h({choiceA:"",choiceB:"",choiceC:"",choiceD:"",choiceE:""}),x(""),f(""),B(null),g(""),d(),C(`/admin/quizzes/${v}/${n}`)),u&&(R.error(u.data.message),d())},[S,A,u,d,C,n,v]),i.useEffect(()=>{s&&(p(s.type),m(s.question),g(s.audio),h({choiceA:s.a,choiceB:s.b,choiceC:s.c,choiceD:s.d,choiceE:s.e}),x(s.score),f(s.key))},[s]),e.jsxs(X,{children:[e.jsx(J,{title:"Edit Question"}),e.jsx(Z,{container:!0,sx:{minHeight:"85vh",display:"flex",flexDirection:"column",gap:2},children:e.jsxs("form",{className:"form-question",onSubmit:$,children:[e.jsxs(k,{fullWidth:!0,sx:{bgcolor:"white",boxShadow:2,borderRadius:1},children:[e.jsx(z,{children:"--Quiz Type--"}),e.jsxs(Q,{label:"--Quiz Type--",value:c,onChange:o=>p(o.target.value),children:[e.jsx(r,{value:1,children:"Multiple Choice"}),e.jsx(r,{value:2,children:"Essay"})]})]}),e.jsx(L,{placeholder:"Write your question here",value:E,onChange:o=>m(o)}),e.jsxs(y,{sx:{display:"flex",alignItems:"center",justifyContent:j?"space-between":"end"},children:[j&&e.jsx(Y,{src:j,controls:!0}),e.jsx(I,{variant:"contained",color:"success",onClick:G,children:"audio"}),e.jsx("input",{ref:b,onChange:N,type:"file",accept:"audio/*",style:{display:"none"}})]}),c===1&&Object.keys(a).map((o,t)=>e.jsx(L,{placeholder:`Choice ${o.charAt(o.length-1)}`,value:a[o],onChange:F(o)},t)),e.jsxs(y,{sx:{display:"flex",alignItems:"center",p:1,bgcolor:"white",borderRadius:1,boxShadow:2,justifyContent:c===1?"space-between":"end"},children:[c===1&&e.jsxs(y,{sx:{display:"flex",gap:2},children:[e.jsxs(k,{sx:{bgcolor:"white",boxShadow:2,borderRadius:1,width:300},children:[e.jsx(z,{children:"--Correct Answer--"}),e.jsxs(Q,{label:"--Correct Answer--",value:D,onChange:o=>f(o.target.value),children:[e.jsx(r,{value:"A",children:"A"}),e.jsx(r,{value:"B",children:"B"}),e.jsx(r,{value:"C",children:"C"}),e.jsx(r,{value:"D",children:"D"}),e.jsx(r,{value:"E",children:"E"})]})]}),e.jsx(ee,{sx:{ml:2},required:!0,label:"Score",type:"number",value:w,onChange:o=>x(o.target.value)})]}),e.jsx(I,{variant:"contained",color:"success",type:"submit",children:M||T?e.jsx(_,{size:24,color:"inherit"}):"Update"})]})]})})]})};export{Ue as default};
