import{r as x,g as ce,f as he,s as oe,e as p,ax as $e,h as Me,_ as q,j as t,k as me,av as O,l as pe,aC as e,aV as Be,aW as ze,aX as We,aY as Oe,B as w,c as ne,C as H,aZ as Ie,a_ as we,a$ as Ne,b0 as Ee,b1 as Se,Q as Ae,b2 as Le,b3 as qe}from"./index-B4oIbNwU.js";import{L as Ge}from"./Layout-Ce3KKoj1.js";import{u as He,P as Ve}from"./PageName-CEARqxte.js";import{P as Qe,h as te,e as U,k as se,G as ie,f as fe,o as Ye,p as Ue,g as K,s as Ke,u as Je,a as le,b as Xe,v as de,j as Ze,I as G,J as et,K as be,N as tt,O as ge,Q as at,R as rt,d as I,L as J,A as X}from"./useMobilePicker-DCGCHC45.js";import{P as A}from"./Paper-WBrkj_xq.js";import{G as W}from"./Grid-DRYlEhgI.js";import{T as y,I as V}from"./TextField-dmVyW8fb.js";import{T as ot}from"./Typography-DLQ9NUQX.js";import{u as nt,r as xe}from"./Modal-yF_fLTpP.js";import{F as Q}from"./FormControl-DhE90yLw.js";import{S as Y}from"./Select-OZq0aL4k.js";import{M as L}from"./MenuItem-B9UCUkSn.js";import{a as st,b as it,B as S}from"./Button-CGa4e0l9.js";import{d as _e}from"./Remove-CqD0y5OB.js";import{T as ve}from"./TableContainer-KSHk1eic.js";import{a as ye,b as je,c as Z,T as N}from"./TableRow-2MDI8QSh.js";import{T as De}from"./TableBody-C-AJ6jTb.js";import{I as Pe}from"./IconButton-DKYpUzhK.js";import"./ChevronRight-CvyNzzqS.js";import"./createSvgIcon-BZOpo86E.js";import"./CalendarMonth-Cs-Lek6-.js";import"./Style-BHIr2vnK.js";import"./useTheme-C3ddHqAM.js";import"./ListItemText-snJx1fDo.js";import"./GlobalStyles-Ddd3Vltf.js";import"./listItemIconClasses-DYp5XrKx.js";import"./InputAdornment-qk0bqrR-.js";import"./utils-CoNKf_2-.js";import"./Popper-gua1FSa-.js";import"./Grow-BiPl52xs.js";import"./useThemeProps-BnkirKYH.js";import"./Input-Dj5u-xDW.js";function lt(r){return x.Children.toArray(r).filter(a=>x.isValidElement(a))}function dt(r){return he("MuiButtonGroup",r)}const R=ce("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),ut=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],ct=(r,a)=>{const{ownerState:s}=r;return[{[`& .${R.grouped}`]:a.grouped},{[`& .${R.grouped}`]:a[`grouped${O(s.orientation)}`]},{[`& .${R.grouped}`]:a[`grouped${O(s.variant)}`]},{[`& .${R.grouped}`]:a[`grouped${O(s.variant)}${O(s.orientation)}`]},{[`& .${R.grouped}`]:a[`grouped${O(s.variant)}${O(s.color)}`]},{[`& .${R.firstButton}`]:a.firstButton},{[`& .${R.lastButton}`]:a.lastButton},{[`& .${R.middleButton}`]:a.middleButton},a.root,a[s.variant],s.disableElevation===!0&&a.disableElevation,s.fullWidth&&a.fullWidth,s.orientation==="vertical"&&a.vertical]},ht=r=>{const{classes:a,color:s,disabled:d,disableElevation:c,fullWidth:u,orientation:h,variant:n}=r,o={root:["root",n,h==="vertical"&&"vertical",u&&"fullWidth",c&&"disableElevation"],grouped:["grouped",`grouped${O(h)}`,`grouped${O(n)}`,`grouped${O(n)}${O(h)}`,`grouped${O(n)}${O(s)}`,d&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return pe(o,dt,a)},mt=oe("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:ct})(({theme:r,ownerState:a})=>p({display:"inline-flex",borderRadius:(r.vars||r).shape.borderRadius},a.variant==="contained"&&{boxShadow:(r.vars||r).shadows[2]},a.disableElevation&&{boxShadow:"none"},a.fullWidth&&{width:"100%"},a.orientation==="vertical"&&{flexDirection:"column"},{[`& .${R.grouped}`]:p({minWidth:40,"&:hover":p({},a.variant==="contained"&&{boxShadow:"none"})},a.variant==="contained"&&{boxShadow:"none"}),[`& .${R.firstButton},& .${R.middleButton}`]:p({},a.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},a.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},a.variant==="text"&&a.orientation==="horizontal"&&{borderRight:r.vars?`1px solid rgba(${r.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${r.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${R.disabled}`]:{borderRight:`1px solid ${(r.vars||r).palette.action.disabled}`}},a.variant==="text"&&a.orientation==="vertical"&&{borderBottom:r.vars?`1px solid rgba(${r.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${r.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${R.disabled}`]:{borderBottom:`1px solid ${(r.vars||r).palette.action.disabled}`}},a.variant==="text"&&a.color!=="inherit"&&{borderColor:r.vars?`rgba(${r.vars.palette[a.color].mainChannel} / 0.5)`:$e(r.palette[a.color].main,.5)},a.variant==="outlined"&&a.orientation==="horizontal"&&{borderRightColor:"transparent"},a.variant==="outlined"&&a.orientation==="vertical"&&{borderBottomColor:"transparent"},a.variant==="contained"&&a.orientation==="horizontal"&&{borderRight:`1px solid ${(r.vars||r).palette.grey[400]}`,[`&.${R.disabled}`]:{borderRight:`1px solid ${(r.vars||r).palette.action.disabled}`}},a.variant==="contained"&&a.orientation==="vertical"&&{borderBottom:`1px solid ${(r.vars||r).palette.grey[400]}`,[`&.${R.disabled}`]:{borderBottom:`1px solid ${(r.vars||r).palette.action.disabled}`}},a.variant==="contained"&&a.color!=="inherit"&&{borderColor:(r.vars||r).palette[a.color].dark},{"&:hover":p({},a.variant==="outlined"&&a.orientation==="horizontal"&&{borderRightColor:"currentColor"},a.variant==="outlined"&&a.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${R.lastButton},& .${R.middleButton}`]:p({},a.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},a.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},a.variant==="outlined"&&a.orientation==="horizontal"&&{marginLeft:-1},a.variant==="outlined"&&a.orientation==="vertical"&&{marginTop:-1})})),pt=x.forwardRef(function(a,s){const d=Me({props:a,name:"MuiButtonGroup"}),{children:c,className:u,color:h="primary",component:n="div",disabled:o=!1,disableElevation:l=!1,disableFocusRipple:P=!1,disableRipple:f=!1,fullWidth:j=!1,orientation:D="horizontal",size:m="medium",variant:b="outlined"}=d,C=q(d,ut),F=p({},d,{color:h,component:n,disabled:o,disableElevation:l,disableFocusRipple:P,disableRipple:f,fullWidth:j,orientation:D,size:m,variant:b}),T=ht(F),g=x.useMemo(()=>({className:T.grouped,color:h,disabled:o,disableElevation:l,disableFocusRipple:P,disableRipple:f,fullWidth:j,size:m,variant:b}),[h,o,l,P,f,j,m,b,T.grouped]),_=lt(c),i=_.length,k=M=>{const v=M===0,B=M===i-1;return v&&B?"":v?T.firstButton:B?T.lastButton:T.middleButton};return t.jsx(mt,p({as:n,role:"group",className:me(T.root,u),ref:s,ownerState:F},C,{children:t.jsx(st.Provider,{value:g,children:_.map((M,v)=>t.jsx(it.Provider,{value:k(v),children:M},v))})}))});function ft(r){return he("MuiDatePickerToolbar",r)}ce("MuiDatePickerToolbar",["root","title"]);const bt=["value","isLandscape","onChange","toolbarFormat","toolbarPlaceholder","views","className"],gt=r=>{const{classes:a}=r;return pe({root:["root"],title:["title"]},ft,a)},xt=oe(Qe,{name:"MuiDatePickerToolbar",slot:"Root",overridesResolver:(r,a)=>a.root})({}),_t=oe(ot,{name:"MuiDatePickerToolbar",slot:"Title",overridesResolver:(r,a)=>a.title})(({ownerState:r})=>p({},r.isLandscape&&{margin:"auto 16px auto auto"})),vt=x.forwardRef(function(a,s){const d=te({props:a,name:"MuiDatePickerToolbar"}),{value:c,isLandscape:u,toolbarFormat:h,toolbarPlaceholder:n="––",views:o,className:l}=d,P=q(d,bt),f=U(),j=se(),D=gt(d),m=x.useMemo(()=>{if(!c)return n;const C=ie(f,{format:h,views:o},!0);return f.formatByString(c,C)},[c,h,n,f,o]),b=d;return t.jsx(xt,p({ref:s,toolbarTitle:j.datePickerToolbarTitle,isLandscape:u,className:me(D.root,l)},P,{children:t.jsx(_t,{variant:"h4",align:u?"left":"center",ownerState:b,className:D.title,children:m})}))});function Ce(r,a){var s,d,c,u;const h=U(),n=fe(),o=te({props:r,name:a}),l=x.useMemo(()=>{var f;return((f=o.localeText)==null?void 0:f.toolbarTitle)==null?o.localeText:p({},o.localeText,{datePickerToolbarTitle:o.localeText.toolbarTitle})},[o.localeText]),P=(s=o.slots)!=null?s:Ye(o.components);return p({},o,{localeText:l},Ue({views:o.views,openTo:o.openTo,defaultViews:["year","day"],defaultOpenTo:"day"}),{disableFuture:(d=o.disableFuture)!=null?d:!1,disablePast:(c=o.disablePast)!=null?c:!1,minDate:K(h,o.minDate,n.minDate),maxDate:K(h,o.maxDate,n.maxDate),slots:p({toolbar:vt},P),slotProps:(u=o.slotProps)!=null?u:o.componentsProps})}const yt=r=>{var a,s,d;const c=U(),u=fe();return p({},r,{disablePast:(a=r.disablePast)!=null?a:!1,disableFuture:(s=r.disableFuture)!=null?s:!1,format:(d=r.format)!=null?d:c.formats.keyboardDate,minDate:K(c,r.minDate,u.minDate),maxDate:K(c,r.maxDate,u.maxDate)})},jt=({props:r,inputRef:a})=>{const s=yt(r),{forwardedProps:d,internalProps:c}=Ke(s,"date");return Je({inputRef:a,forwardedProps:d,internalProps:c,valueManager:le,fieldValueManager:Xe,validator:de,valueType:"date"})},Dt=["components","componentsProps","slots","slotProps","InputProps","inputProps"],Pt=["inputRef"],Ct=["ref","onPaste","onKeyDown","inputMode","readOnly","clearable","onClear"],Te=x.forwardRef(function(a,s){var d,c,u;const h=te({props:a,name:"MuiDateField"}),{components:n,componentsProps:o,slots:l,slotProps:P,InputProps:f,inputProps:j}=h,D=q(h,Dt),m=h,b=(d=(c=l==null?void 0:l.textField)!=null?c:n==null?void 0:n.TextField)!=null?d:y,C=nt({elementType:b,externalSlotProps:(u=P==null?void 0:P.textField)!=null?u:o==null?void 0:o.textField,externalForwardedProps:D,ownerState:m}),{inputRef:F}=C,T=q(C,Pt);T.inputProps=p({},j,T.inputProps),T.InputProps=p({},f,T.InputProps);const g=jt({props:T,inputRef:F}),{ref:_,onPaste:i,onKeyDown:k,inputMode:M,readOnly:v,clearable:B,onClear:z}=g,$=q(g,Ct),{InputProps:E,fieldProps:Fe}=Ze({onClear:z,clearable:B,fieldProps:$,InputProps:$.InputProps,slots:l,slotProps:P,components:n,componentsProps:o});return t.jsx(b,p({ref:s},Fe,{InputProps:p({},E,{readOnly:v}),inputProps:p({},$.inputProps,{inputMode:M,onPaste:i,onKeyDown:k,ref:_})}))}),ke=x.forwardRef(function(a,s){var d,c,u,h;const n=se(),o=U(),l=Ce(a,"MuiDesktopDatePicker"),P=p({day:G,month:G,year:G},l.viewRenderers),f=p({},l,{viewRenderers:P,format:ie(o,l,!1),yearsPerRow:(d=l.yearsPerRow)!=null?d:4,slots:p({openPickerIcon:et,field:Te},l.slots),slotProps:p({},l.slotProps,{field:D=>{var m;return p({},xe((m=l.slotProps)==null?void 0:m.field,D),be(l),{ref:s})},toolbar:p({hidden:!0},(c=l.slotProps)==null?void 0:c.toolbar)})}),{renderPicker:j}=tt({props:f,valueManager:le,valueType:"date",getOpenDialogAriaText:(u=(h=f.localeText)==null?void 0:h.openDatePickerDialogue)!=null?u:n.openDatePickerDialogue,validator:de});return j()});ke.propTypes={autoFocus:e.bool,className:e.string,closeOnSelect:e.bool,components:e.object,componentsProps:e.object,dayOfWeekFormatter:e.func,defaultCalendarMonth:e.any,defaultValue:e.any,disabled:e.bool,disableFuture:e.bool,disableHighlightToday:e.bool,disableOpenPicker:e.bool,disablePast:e.bool,displayWeekNumber:e.bool,fixedWeekNumber:e.number,format:e.string,formatDensity:e.oneOf(["dense","spacious"]),inputRef:ge,label:e.node,loading:e.bool,localeText:e.object,maxDate:e.any,minDate:e.any,monthsPerRow:e.oneOf([3,4]),name:e.string,onAccept:e.func,onChange:e.func,onClose:e.func,onError:e.func,onMonthChange:e.func,onOpen:e.func,onSelectedSectionsChange:e.func,onViewChange:e.func,onYearChange:e.func,open:e.bool,openTo:e.oneOf(["day","month","year"]),orientation:e.oneOf(["landscape","portrait"]),readOnly:e.bool,reduceAnimations:e.bool,referenceDate:e.any,renderLoading:e.func,selectedSections:e.oneOfType([e.oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),e.number,e.shape({endIndex:e.number.isRequired,startIndex:e.number.isRequired})]),shouldDisableDate:e.func,shouldDisableMonth:e.func,shouldDisableYear:e.func,showDaysOutsideCurrentMonth:e.bool,slotProps:e.object,slots:e.object,sx:e.oneOfType([e.arrayOf(e.oneOfType([e.func,e.object,e.bool])),e.func,e.object]),timezone:e.string,value:e.any,view:e.oneOf(["day","month","year"]),viewRenderers:e.shape({day:e.func,month:e.func,year:e.func}),views:e.arrayOf(e.oneOf(["day","month","year"]).isRequired),yearsPerRow:e.oneOf([3,4])};const Re=x.forwardRef(function(a,s){var d,c,u;const h=se(),n=U(),o=Ce(a,"MuiMobileDatePicker"),l=p({day:G,month:G,year:G},o.viewRenderers),P=p({},o,{viewRenderers:l,format:ie(n,o,!1),slots:p({field:Te},o.slots),slotProps:p({},o.slotProps,{field:j=>{var D;return p({},xe((D=o.slotProps)==null?void 0:D.field,j),be(o),{ref:s})},toolbar:p({hidden:!1},(d=o.slotProps)==null?void 0:d.toolbar)})}),{renderPicker:f}=at({props:P,valueManager:le,valueType:"date",getOpenDialogAriaText:(c=(u=P.localeText)==null?void 0:u.openDatePickerDialogue)!=null?c:h.openDatePickerDialogue,validator:de});return f()});Re.propTypes={autoFocus:e.bool,className:e.string,closeOnSelect:e.bool,components:e.object,componentsProps:e.object,dayOfWeekFormatter:e.func,defaultCalendarMonth:e.any,defaultValue:e.any,disabled:e.bool,disableFuture:e.bool,disableHighlightToday:e.bool,disableOpenPicker:e.bool,disablePast:e.bool,displayWeekNumber:e.bool,fixedWeekNumber:e.number,format:e.string,formatDensity:e.oneOf(["dense","spacious"]),inputRef:ge,label:e.node,loading:e.bool,localeText:e.object,maxDate:e.any,minDate:e.any,monthsPerRow:e.oneOf([3,4]),name:e.string,onAccept:e.func,onChange:e.func,onClose:e.func,onError:e.func,onMonthChange:e.func,onOpen:e.func,onSelectedSectionsChange:e.func,onViewChange:e.func,onYearChange:e.func,open:e.bool,openTo:e.oneOf(["day","month","year"]),orientation:e.oneOf(["landscape","portrait"]),readOnly:e.bool,reduceAnimations:e.bool,referenceDate:e.any,renderLoading:e.func,selectedSections:e.oneOfType([e.oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),e.number,e.shape({endIndex:e.number.isRequired,startIndex:e.number.isRequired})]),shouldDisableDate:e.func,shouldDisableMonth:e.func,shouldDisableYear:e.func,showDaysOutsideCurrentMonth:e.bool,slotProps:e.object,slots:e.object,sx:e.oneOfType([e.arrayOf(e.oneOfType([e.func,e.object,e.bool])),e.func,e.object]),timezone:e.string,value:e.any,view:e.oneOf(["day","month","year"]),viewRenderers:e.shape({day:e.func,month:e.func,year:e.func}),views:e.arrayOf(e.oneOf(["day","month","year"]).isRequired),yearsPerRow:e.oneOf([3,4])};const Tt=["desktopModeMediaQuery"],ee=x.forwardRef(function(a,s){const d=te({props:a,name:"MuiDatePicker"}),{desktopModeMediaQuery:c=rt}=d,u=q(d,Tt);return He(c,{defaultMatches:!0})?t.jsx(ke,p({ref:s},u)):t.jsx(Re,p({ref:s},u))}),kt=({provinces:r,info:a,name:s,nis:d})=>{const[c,u]=x.useState(""),[h,n]=x.useState(""),[o,l]=x.useState(""),[P,{data:f,isSuccess:j,error:D,isLoading:m,reset:b}]=Be(),{data:C}=ze(c,{skip:!c}),{data:F}=We(h,{skip:!h}),{data:T}=Oe(o,{skip:!o}),[g,_]=x.useState({name:s,nisn:"",nis:d,birth_place:"",birth_date:I(),height:"",weight:"",around_head:"",order_birth:"",siblings:"",province_id:"",province_name:"",regency_id:"",regency_name:"",district_id:"",district_name:"",village_id:"",village_name:"",district:"",address:"",postal_code:""}),i=v=>{const{name:B,value:z}=v.target;if(B==="province_id"){const $=r==null?void 0:r.find(E=>E.id===z);u(z),_({...g,province_id:z,province_name:$?$.name:""})}if(B==="regency_id"){const $=C==null?void 0:C.find(E=>E.id===z);n(z),_({...g,regency_id:z,regency_name:$?$.name:""})}if(B==="district_id"){const $=F==null?void 0:F.find(E=>E.id===z);l(z),_({...g,district_id:z,district_name:$?$.name:""})}if(B==="village_id"){const $=T==null?void 0:T.find(E=>E.id.trim()===z.trim());_({...g,village_id:z,village_name:$?$.name:""})}B!=="province_id"&&B!=="regency_id"&&B!=="district_id"&&B!=="village_id"&&_({...g,[B]:z})},k=v=>{_({...g,birth_date:v})},M=v=>{v.preventDefault(),P(g)};return x.useEffect(()=>{j&&(w.success(f.message),b()),D&&(w.error(D.data.message),b())},[j,D,f]),x.useEffect(()=>{a&&(_({name:a.name,nisn:a.nisn,nis:a.nis,birth_place:a.birth_place,birth_date:a.birth_date?I(a.birth_date):I(),height:a.height,weight:a.weight,around_head:a.around_head,order_birth:a.order_birth,siblings:a.siblings,province_id:a.province_id,province_name:a.province_name,regency_id:a.regency_id,regency_name:a.regency_name,district_id:a.district_id,district_name:a.district_name,village_id:a.village_id.trim(),village_name:a.village_name,address:a.address,postal_code:a.postal_code}),console.log(a.village_id),u(a.province_id),n(a.regency_id),l(a.district_id))},[a]),t.jsx(A,{sx:{width:"100%",p:1},children:t.jsxs("form",{onSubmit:M,children:[t.jsxs(W,{container:!0,children:[t.jsxs(W,{item:!0,xs:12,md:6,sx:{p:1,display:"flex",flexDirection:"column",gap:2},children:[t.jsx(y,{fullWidth:!0,label:"Full Name",size:"small",variant:"standard",name:"name",value:g.name||"",onChange:i,required:!0}),t.jsx(y,{fullWidth:!0,label:"NISN",size:"small",variant:"standard",name:"nisn",value:g.nisn||"",onChange:i,required:!0}),t.jsx(y,{fullWidth:!0,label:"NIS",size:"small",variant:"standard",name:"nis",value:g.nis||"",onChange:i,required:!0}),t.jsx(y,{fullWidth:!0,label:"Birth Place",size:"small",variant:"standard",name:"birth_place",value:g.birth_place||"",onChange:i,required:!0}),t.jsx(J,{dateAdapter:X,children:t.jsx(ee,{label:"Birth Date",value:g.birth_date||"",onChange:k,slotProps:{textField:{fullWidth:!0,variant:"standard"}}})}),t.jsx(y,{fullWidth:!0,type:"number",label:"Order Birth",size:"small",variant:"standard",name:"order_birth",value:g.order_birth,onChange:i,required:!0}),t.jsx(y,{fullWidth:!0,type:"number",label:"Total Siblings",size:"small",variant:"standard",name:"siblings",value:g.siblings||"",onChange:i,required:!0}),t.jsx(y,{fullWidth:!0,type:"number",label:"Height",size:"small",variant:"standard",name:"height",value:g.height||"",onChange:i,required:!0}),t.jsx(y,{fullWidth:!0,type:"number",label:"Weight",size:"small",variant:"standard",name:"weight",value:g.weight||"",onChange:i,required:!0})]}),t.jsxs(W,{item:!0,xs:12,md:6,sx:{p:1,display:"flex",flexDirection:"column",gap:2},children:[t.jsx(y,{fullWidth:!0,type:"number",label:"Around Head",size:"small",variant:"standard",name:"around_head",value:g.around_head||"",onChange:i,required:!0}),t.jsxs(Q,{fullWidth:!0,variant:"standard",children:[t.jsx(V,{children:"--Province--"}),t.jsx(Y,{name:"province_id",value:g.province_id||"",onChange:i,required:!0,children:r==null?void 0:r.map(v=>t.jsx(L,{value:v.id,children:v.name},v.id))})]}),c&&t.jsxs(Q,{fullWidth:!0,variant:"standard",children:[t.jsx(V,{children:"--Regency--"}),t.jsx(Y,{name:"regency_id",value:g.regency_id||"",onChange:i,required:!0,children:C==null?void 0:C.map(v=>t.jsx(L,{value:v.id,children:v.name},v.id))})]}),h&&t.jsxs(Q,{fullWidth:!0,variant:"standard",children:[t.jsx(V,{children:"--District--"}),t.jsx(Y,{name:"district_id",value:g.district_id||"",onChange:i,required:!0,children:F==null?void 0:F.map(v=>t.jsx(L,{value:v.id,children:v.name},v.id))})]}),o&&t.jsxs(Q,{fullWidth:!0,variant:"standard",children:[t.jsx(V,{children:"--Village--"}),t.jsx(Y,{name:"village_id",value:g.village_id||"",onChange:i,required:!0,children:T==null?void 0:T.map(v=>t.jsx(L,{value:v.id.trim(),children:v.name},v.id.trim()))})]}),t.jsx(y,{fullWidth:!0,label:"Address",size:"small",variant:"standard",name:"address",value:g.address||"",onChange:i,required:!0}),t.jsx(y,{fullWidth:!0,label:"Postal Code",size:"small",variant:"standard",name:"postal_code",value:g.postal_code||"",onChange:i,required:!0})]})]}),t.jsx(ne,{sx:{display:"flex",justifyContent:"end"},children:t.jsx(S,{variant:"contained",color:"success",type:"submit",children:m?t.jsx(H,{size:24,color:"inherit"}):"save"})})]})})},Rt=({info:r})=>{const[a,{isSuccess:s,data:d,isLoading:c,error:u,reset:h}]=Ie(),[n,{isSuccess:o,data:l,isLoading:P,error:f,reset:j}]=we(),[D,m]=x.useState((r==null?void 0:r.family_info)||[]),[b,C]=x.useState({family_name:"",family_gender:"",family_birth_date:I()}),F=i=>{const{name:k,value:M}=i.target;C({...b,[k]:M})},T=i=>{C({...b,family_birth_date:i})},g=()=>{const i={family_name:b.family_name,family_gender:b.family_gender,family_birth_date:b.family_birth_date,id:Date.now()},k={nis:r.nis,familyData:[...D,i]};a(k).unwrap().then(()=>{m(M=>[...M,i]),C({family_name:"",family_gender:"",family_birth_date:I()})})},_=i=>{const k={nis:r.nis,familyId:i};n(k).unwrap().then(()=>{m(D.filter(M=>M.id!==i))})};return x.useEffect(()=>{s&&(w.success(d.message),h()),u&&(w.error(u.data.message),h())},[s,u,h,d]),x.useEffect(()=>{o&&(w.success(l.message),j()),f&&(w.error(f.data.message),j())},[o,f,l]),t.jsx(A,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:2,p:1},children:t.jsxs(W,{container:!0,children:[t.jsx(W,{item:!0,xs:12,md:8,sx:{p:1},children:t.jsx(ve,{component:A,sx:{maxHeight:{xs:500,md:450,lg:530},overflow:"auto"},children:t.jsxs(ye,{children:[t.jsx(je,{children:t.jsx(Z,{children:["No","Name","Gender","Birth Date","Action"].map(i=>t.jsx(N,{children:i},i))})}),t.jsx(De,{children:D.map((i,k)=>t.jsxs(Z,{children:[t.jsx(N,{children:k+1}),t.jsx(N,{children:i.family_name}),t.jsx(N,{children:i.family_gender}),t.jsx(N,{children:I(i.family_birth_date).format("DD/MM/YYYY")}),t.jsx(N,{children:t.jsx(Pe,{color:"error",onClick:()=>_(i.id),children:P?t.jsx(H,{size:20,color:"inherit"}):t.jsx(_e,{})})})]},i.id))})]})})}),t.jsx(W,{item:!0,xs:12,md:4,sx:{p:1},children:t.jsxs("form",{style:{display:"flex",flexDirection:"column",gap:"1rem"},onSubmit:i=>{i.preventDefault(),g()},children:[t.jsx(y,{fullWidth:!0,size:"small",variant:"standard",label:"Name",name:"family_name",value:b.family_name,onChange:F,required:!0}),t.jsxs(Q,{required:!0,children:[t.jsx(V,{children:"--Gender--"}),t.jsxs(Y,{label:"--Gender--",name:"family_gender",value:b.family_gender,onChange:F,children:[t.jsx(L,{value:"Male ",children:"Male"}),t.jsx(L,{value:"Female",children:"Female"})]})]}),t.jsx(J,{dateAdapter:X,children:t.jsx(ee,{label:"Birth Date",name:"family_birth_date",value:b.family_birth_date,onChange:T,slotProps:{textField:{fullWidth:!0,variant:"standard"}}})}),t.jsx(S,{fullWidth:!0,variant:"contained",color:"success",type:"submit",children:c?t.jsx(H,{size:20,color:"inherit"}):"Add"})]})})]})})},ae=r=>r!=null&&r.startsWith("0")?`62${r.slice(1)}`:r,re=r=>{const a=r.replace(/[^\d]/g,"");return`Rp ${parseInt(a,10).toLocaleString("id-ID")}`},ue=r=>r.replace(/[^\d]/g,""),Ft=({info:r})=>{const[a,{data:s,isSuccess:d,isLoading:c,error:u,reset:h}]=Ne(),[n,o]=x.useState({father_nik:"",father_name:"",father_birth_place:"",father_birth_date:I(),father_job:"",father_position:"",father_earning:0,father_phone:"",mother_nik:"",mother_name:"",mother_birth_place:"",mother_birth_date:I(),mother_job:"",mother_position:"",mother_earning:0,mother_phone:"",nis:""}),l=m=>{const{name:b,value:C}=m.target;o({...n,[b]:b==="father_phone"||b==="mother_phone"?ae(C):C})},P=m=>{const{name:b,value:C}=m.target;o({...n,[b]:re(C)})},f=m=>{o({...n,father_birth_date:m})},j=m=>{o({...n,mother_birth_date:m})},D=m=>{m.preventDefault();const b={...n,father_earning:ue(n.father_earning),mother_earning:ue(n.mother_earning)};a(b)};return x.useEffect(()=>{d&&(w.success(s.message),h()),u&&(w.error(u.data.message),h())},[d,u,s]),x.useEffect(()=>{r&&o({father_nik:r.father_nik,father_name:r.father_name,father_birth_place:r.father_birth_place,father_birth_date:r.father_birth_date?I(r.father_birth_date):I(),father_job:r.father_job,father_position:r.father_position,father_earning:r.father_earning?re(r.father_earning):0,father_phone:ae(r.father_phone),mother_nik:r.mother_nik,mother_name:r.mother_name,mother_birth_place:r.mother_birth_place,mother_birth_date:r.mother_birth_date?I(r.mother_birth_date):I(),mother_job:r.mother_job,mother_position:r.mother_position,mother_earning:r.mother_earning?re(r.mother_earning):0,mother_phone:ae(r.mother_phone),nis:r.nis})},[r]),t.jsx(A,{sx:{width:"100%",p:1},children:t.jsxs("form",{onSubmit:D,children:[t.jsxs(W,{container:!0,children:[t.jsxs(W,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column",gap:2,p:1},children:[t.jsx(y,{fullWidth:!0,type:"number",label:"Father NIK",size:"small",variant:"standard",name:"father_nik",value:n.father_nik||"",onChange:l}),t.jsx(y,{fullWidth:!0,label:"Father Name",size:"small",variant:"standard",name:"father_name",value:n.father_name||"",onChange:l}),t.jsx(y,{fullWidth:!0,label:"Father Birth Place",size:"small",variant:"standard",name:"father_birth_place",value:n.father_birth_place||"",onChange:l}),t.jsx(J,{dateAdapter:X,children:t.jsx(ee,{label:"Father Birth Date",value:n.father_birth_date,onChange:f,slotProps:{textField:{fullWidth:!0,variant:"standard"}}})}),t.jsx(y,{fullWidth:!0,label:"Father Job",size:"small",variant:"standard",name:"father_job",value:n.father_job||"",onChange:l}),t.jsx(y,{fullWidth:!0,label:"Father Position",size:"small",variant:"standard",name:"father_position",value:n.father_position||"",onChange:l}),t.jsx(y,{fullWidth:!0,label:"Father Earning",size:"small",variant:"standard",name:"father_earning",onChange:P,value:n.father_earning||""}),t.jsx(y,{fullWidth:!0,type:"number",label:"Father Phone",size:"small",variant:"standard",name:"father_phone",onChange:l,value:n.father_phone||""})]}),t.jsxs(W,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column",gap:2,p:1},children:[t.jsx(y,{fullWidth:!0,type:"number",label:"Mohter NIK",size:"small",variant:"standard",name:"mother_nik",value:n.mother_nik||"",onChange:l}),t.jsx(y,{fullWidth:!0,label:"Mother Name",size:"small",variant:"standard",name:"mother_name",value:n.mother_name||"",onChange:l}),t.jsx(y,{fullWidth:!0,label:"Mother Birth Place",size:"small",variant:"standard",name:"mother_birth_place",value:n.mother_birth_place||"",onChange:l}),t.jsx(J,{dateAdapter:X,children:t.jsx(ee,{label:"Mother Birth Date",value:n.mother_birth_date,onChange:j,slotProps:{textField:{fullWidth:!0,variant:"standard"}}})}),t.jsx(y,{fullWidth:!0,label:"Mother Job",size:"small",variant:"standard",name:"mother_job",value:n.mother_job||"",onChange:l}),t.jsx(y,{fullWidth:!0,label:"Mother Position",size:"small",variant:"standard",name:"mother_position",value:n.mother_position||"",onChange:l}),t.jsx(y,{fullWidth:!0,label:"Mother Earning",size:"small",variant:"standard",name:"mother_earning",onChange:P,value:n.mother_earning||""}),t.jsx(y,{fullWidth:!0,type:"number",label:"Mother phone",size:"small",variant:"standard",name:"mother_phone",onChange:l,value:n.mother_phone||""})]})]}),t.jsx(ne,{sx:{display:"flex",justifyContent:"end"},children:t.jsx(S,{variant:"contained",color:"success",type:"submit",children:c?t.jsx(H,{size:20,color:"inherit"}):"save"})})]})})},$t=({info:r})=>{const[a,{data:s,isLoading:d,isSuccess:c,error:u,reset:h}]=Ee(),[n,{isSuccess:o,data:l,isLoading:P,error:f,reset:j}]=Se(),[D,m]=x.useState((r==null?void 0:r.health_records)||[]),[b,C]=x.useState({health_notes:""}),F=_=>{const{name:i,value:k}=_.target;C({...b,[i]:k})},T=()=>{const _={...b,id:Date.now()};m(k=>[...k,_]);const i={nis:r==null?void 0:r.nis,healthData:[...D,_].map(k=>({...k,id:k.id}))};a(i),C({health_notes:""})},g=_=>{const i={nis:r==null?void 0:r.nis,healthId:_};n(i).unwrap().then(()=>{m(D.filter(k=>k.id!==_))})};return x.useEffect(()=>{c&&(w.success(s.message),h()),u&&(w.error(u.data.message),h())},[s,c,u,h]),x.useEffect(()=>{o&&(w.success(l.message),j()),f&&(w.error(f.data.message),j())},[o,f,l]),t.jsx(A,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:2,p:1},children:t.jsxs(W,{container:!0,children:[t.jsx(W,{item:!0,xs:12,md:8,sx:{p:1},children:t.jsx(ve,{component:A,sx:{maxHeight:{xs:500,md:450,lg:530},overflow:"auto"},children:t.jsxs(ye,{children:[t.jsx(je,{children:t.jsx(Z,{children:["No","Note","Actions"].map(_=>t.jsx(N,{children:_},_))})}),t.jsx(De,{children:D.map((_,i)=>t.jsxs(Z,{children:[t.jsx(N,{children:i+1}),t.jsx(N,{children:_.health_notes}),t.jsx(N,{children:t.jsx(Pe,{color:"error",onClick:()=>g(_.id),children:d?t.jsx(H,{size:20,color:"inherit"}):t.jsx(_e,{})})})]},_.id))})]})})}),t.jsx(W,{item:!0,xs:12,md:4,sx:{p:1},children:t.jsxs("form",{style:{display:"flex",flexDirection:"column",gap:"1rem"},onSubmit:_=>{_.preventDefault(),T()},children:[t.jsx(y,{fullWidth:!0,required:!0,size:"small",variant:"standard",label:"Health Notes",name:"health_notes",value:b.health_notes,onChange:F}),t.jsx(S,{fullWidth:!0,variant:"contained",color:"success",type:"submit",children:d?t.jsx(H,{size:20,color:"inherit"}):"Add"})]})})]})})},da=()=>{const[r,a]=x.useState(!0),[s,d]=x.useState(!1),[c,u]=x.useState(!1),[h,n]=x.useState(!1),o=()=>{a(!0),d(!1),u(!1),n(!1)},l=()=>{a(!1),d(!0),u(!1),n(!1)},P=()=>{a(!1),d(!1),u(!0),n(!1)},f=()=>{a(!1),d(!1),u(!1),n(!0)},j=Ae(),{data:D}=Le(),{data:m}=qe(j.nis,{skip:!j.nis});return t.jsxs(Ge,{children:[t.jsx(Ve,{title:"Database"}),t.jsx(W,{container:!0,sx:{minHeight:"85vh",display:"flex",flexDirection:"column"},children:t.jsxs(ne,{sx:{display:"flex",flexDirection:"column",gap:2,justifyContent:"center",alignItems:"center"},children:[t.jsx(A,{children:t.jsxs(pt,{children:[t.jsx(S,{onClick:o,variant:r?"contained":"outlined",color:"primary",children:"student"}),m&&t.jsx(S,{onClick:l,variant:s?"contained":"outlined",color:"primary",children:"parents"}),m&&t.jsx(S,{onClick:P,variant:c?"contained":"outlined",color:"primary",children:"family"}),m&&t.jsx(S,{onClick:f,variant:h?"contained":"outlined",color:"primary",children:"health"})]})}),r&&t.jsx(kt,{provinces:D,info:m,name:j.studentName.replace(/-/g," "),nis:j.nis}),s&&t.jsx(Ft,{info:m}),c&&t.jsx(Rt,{info:m}),h&&t.jsx($t,{info:m})]})})]})};export{da as default};
