import{V as A,r as a,B as g,j as e,c as S,C as v,W,X as z,bm as G}from"./index-B4oIbNwU.js";import{L as Q}from"./Layout-VT7h7Bdy.js";import{d as U}from"./MoreHoriz-e4RIS7qv.js";import{M as V,B as X,F as _}from"./Modal-yF_fLTpP.js";import{T as k}from"./TextField-dmVyW8fb.js";import{B as E}from"./Button-CGa4e0l9.js";import{I as q}from"./Input-Dj5u-xDW.js";import{T as J}from"./TableContainer-KSHk1eic.js";import{a as K,b as O,c as M,T as p}from"./TableRow-2MDI8QSh.js";import{T as Y}from"./TableBody-C-AJ6jTb.js";import{I as Z}from"./IconButton-DKYpUzhK.js";import{M as $}from"./Select-OZq0aL4k.js";import{M as B}from"./MenuItem-B9UCUkSn.js";import{P as ee}from"./Paper-WBrkj_xq.js";import"./createSvgIcon-BZOpo86E.js";import"./Typography-DLQ9NUQX.js";import"./PeopleAlt-BXWzt5_l.js";import"./ListItemText-snJx1fDo.js";import"./Grid-DRYlEhgI.js";import"./useTheme-C3ddHqAM.js";import"./FormControl-DhE90yLw.js";import"./utils-CoNKf_2-.js";import"./GlobalStyles-Ddd3Vltf.js";import"./listItemIconClasses-DYp5XrKx.js";import"./Grow-BiPl52xs.js";const te=({open:r,close:o,student:i})=>{const[h,{data:x,isSuccess:n,isLoading:l,error:c}]=A(),[f,d]=a.useState(""),[u,j]=a.useState(""),b=s=>{s.preventDefault();const C={nis:f,name:u};h({id:i.id,body:C})};return a.useEffect(()=>{n&&(g.success(x.message),o()),c&&g.error(c.data.message)},[n,x,c]),a.useEffect(()=>{i&&(d(i.nis),j(i.name))},[i]),e.jsx(V,{open:r,onClose:o,closeAfterTransition:!0,slots:{backdrop:X},slotProps:{backdrop:{timeout:500}},children:e.jsx(_,{in:r,children:e.jsx(S,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{className:"form-class",onSubmit:b,children:[e.jsx(k,{fullWidth:!0,label:"NIS",placeholder:"NIS",value:f||"",onChange:s=>d(s.target.value)}),e.jsx(k,{fullWidth:!0,label:"Full name",placeholder:"Full name",value:u||"",onChange:s=>j(s.target.value)}),e.jsxs(S,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(E,{variant:"outlined",color:"error",onClick:o,children:"batal"}),e.jsx(E,{variant:"contained",color:"success",type:"submit",children:l?e.jsx(v,{size:20,color:"inherit"}):"update"})]})]})})})})},se=[{label:"No",width:40},{label:"NIS",width:100},{label:"Name",width:170},{label:"Actions",width:100}],ae=({students:r,loading:o})=>{const[i,{data:h,isLoading:x,isSuccess:n,error:l}]=W(),[c,{data:f}]=z(),[d,u]=a.useState(null),[j,b]=a.useState(!1),[s,C]=a.useState(""),w=!!d,L=(t,m)=>{u(t.currentTarget),C(m)},T=()=>{u(null)},N=()=>{s&&(T(),i(s))},F=()=>{s&&(b(!0),c(s),T())};a.useEffect(()=>{n&&g.success(h.message),l&&g.error(l.data.message)},[h,n,l]);const[I,P]=a.useState(""),H=t=>t.name.toLowerCase().includes(I.toLowerCase()),y=r==null?void 0:r.filter(H),D=t=>{P(t.target.value)};return e.jsxs(a.Fragment,{children:[e.jsx(S,{sx:{p:1,boxShadow:2,bgcolor:"white",borderRadius:1,display:"flex",justifyContent:"space-between",flexDirection:{xs:"column-reverse",md:"row"},gap:1},children:e.jsx(q,{placeholder:"Search student",value:I,onChange:D})}),o?e.jsx(S,{sx:{height:"85vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(v,{})}):e.jsx(J,{sx:{height:{xs:500,md:530,lg:630},overflow:"auto"},children:e.jsxs(K,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(O,{children:e.jsx(M,{children:se.map((t,m)=>e.jsx(p,{align:"center",sx:{width:t.width},children:t.label},m))})}),e.jsx(Y,{children:y==null?void 0:y.map((t,m)=>e.jsxs(M,{children:[e.jsx(p,{align:"center",children:m+1}),e.jsx(p,{align:"center",children:t.nis}),e.jsx(p,{align:"left",children:t.name}),e.jsx(p,{align:"center",children:e.jsx(Z,{color:"primary",id:"basic-button","aria-controls":w?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":w?"true":void 0,onClick:R=>L(R,t.id),children:x?e.jsx(v,{size:20,color:"inherit"}):e.jsx(U,{})})})]},t.id))})]})}),e.jsxs($,{id:"basic-menu",anchorEl:d,open:w,onClose:T,MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsx(B,{onClick:F,children:"Edit"}),e.jsx(B,{onClick:N,children:"Delete"})]}),e.jsx(te,{open:j,close:()=>b(!1),student:f})]})},Me=()=>{const{data:r,isLoading:o}=G();return e.jsx(Q,{children:e.jsx(ee,{sx:{p:1},children:e.jsx(ae,{students:r,loading:o})})})};export{Me as default};
