import{G as R,H as O,r as t,B as j,j as e,c as S,C as M,I as V,J as X,a as Y,f as Z,K as ee,L as se}from"./index-CSxfCMfO.js";import{P as te}from"./PageName-EximxSIq.js";import{L as re}from"./Layout-Dajt1dVp.js";import{d as ae,a as oe}from"./FolderDelete-Dx5rzmXs.js";/* empty css               */import{M as A,F as H}from"./Modal-BxMNLGUj.js";import{F}from"./FormControl-DuxQqY0B.js";import{I as _,T as G}from"./TextField-siHAEH0i.js";import{S as z}from"./Select-DP2IIPsQ.js";import{M as I}from"./MenuItem-h-V7nKs-.js";import{B as C}from"./Button-C8egMFNd.js";import{T as le}from"./Typography-CvABrH6u.js";import{d as ne}from"./MoreHoriz-C6H4XRMQ.js";import{P as ie}from"./Paper-1BeYRGVZ.js";import{T as de}from"./TableContainer-CHQDQz7K.js";import{T as ce,a as P,b as p,c as ue}from"./TableRow-W4KJomaA.js";import{T as xe}from"./TableHead-aksBcRt4.js";import{I as me}from"./IconButton-BKERT6y0.js";import{M as he}from"./Menu-SlX1X7p5.js";import{G as L}from"./Grid-DB3tpxkA.js";import"./FolderCopy-B9muDkxL.js";import"./getThemeProps-Bm4LwIY-.js";import"./createSvgIcon-CUdXFR2t.js";import"./GlobalStyles-BxWeaP1-.js";import"./listItemIconClasses-DH5o3P_F.js";import"./useTheme-CrWoQ2Gw.js";import"./ChevronRight-BDbCwA2d.js";import"./PeopleAlt-SgC_nfS6.js";import"./CalendarMonth-mGKmgOTs.js";import"./Style-BK46D0DP.js";import"./ExitToApp-BfJL4ORI.js";import"./Toolbar-0QhF5KIa.js";import"./utils-DhE5sAzO.js";import"./Input-BytLO2YT.js";import"./Grow-2X7iiG1m.js";const fe=({open:l,close:r})=>{const{data:s}=R(),[n,{data:c,isSuccess:u,isLoading:x,error:i,reset:g}]=O(),[y,f]=t.useState(""),[b,m]=t.useState(""),[v,h]=t.useState(""),T=a=>{a.preventDefault(),n({gradeId:y,code:b,name:v})};return t.useEffect(()=>{u&&(j.success(c.message),f(""),m(""),h(""),g(),r()),i&&j.error(i.data.message)},[c,u,i]),e.jsx(A,{open:l,onClose:r,closeAfterTransition:!0,children:e.jsx(H,{in:l,children:e.jsx(S,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{className:"form-class",onSubmit:T,children:[e.jsxs(F,{children:[e.jsx(_,{children:"--Grade--"}),e.jsx(z,{required:!0,label:"--Grade--",value:y,onChange:a=>f(a.target.value),children:s==null?void 0:s.map(a=>e.jsx(I,{value:a.id,children:a.grade},a.id))})]}),e.jsx(G,{fullWidth:!0,label:"Class code",placeholder:"Must be NUMBER",value:b,onChange:a=>m(a.target.value)}),e.jsx(G,{fullWidth:!0,label:"Class",placeholder:"Class",value:v,onChange:a=>h(a.target.value)}),e.jsxs(S,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(C,{variant:"outlined",color:"error",onClick:r,children:"cancel"}),e.jsx(C,{variant:"contained",color:"success",type:"submit",children:x?e.jsx(M,{size:20,color:"inherit"}):"add"})]})]})})})})},pe=({open:l,close:r})=>{const[s,{data:n,isSuccess:c,isLoading:u,error:x}]=V(),i=()=>s();return t.useEffect(()=>{c&&(j.success(n.message),r()),x&&j.error(x.data.message)},[c,n,x]),e.jsx(A,{open:l,onClose:r,closeAfterTransition:!0,children:e.jsx(H,{in:l,children:e.jsxs(S,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:[e.jsx(le,{align:"center",children:"Are you sure you want to delete all classes?"}),e.jsxs(S,{sx:{display:"flex",gap:2,justifyContent:"flex-end",mt:2},children:[e.jsx(C,{variant:"contained",color:"error",onClick:r,children:"cancel"}),e.jsx(C,{variant:"outlined",color:"error",onClick:i,children:u?e.jsx(M,{size:20,color:"inherit"}):"sure"})]})]})})})},je=()=>{const[l,r]=t.useState(!1),[s,n]=t.useState(!1);return e.jsxs(S,{sx:{display:"flex",justifyContent:"end",gap:1,p:1,boxShadow:2,bgcolor:"white",borderRadius:1},children:[e.jsx(C,{variant:"contained",color:"success",startIcon:e.jsx(ae,{}),onClick:()=>n(!0),sx:{width:120},children:"add"}),e.jsx(C,{startIcon:e.jsx(oe,{}),variant:"contained",color:"error",onClick:()=>r(!0),sx:{width:120},children:"Delete"}),e.jsx(fe,{open:s,close:()=>n(!1)}),e.jsx(pe,{open:l,close:()=>r(!1)})]})},Ce=({open:l,close:r,data:s})=>{const{data:n}=R(),[c,{data:u,isLoading:x,isSuccess:i,error:g,reset:y}]=X(),[f,b]=t.useState(""),[m,v]=t.useState(""),[h,T]=t.useState(""),a=o=>{o.preventDefault();const N={gradeId:f,code:m,name:h};c({id:s==null?void 0:s.id,body:N})};return t.useEffect(()=>{i&&(j.success(u.message),r(),y()),g&&j.error(g.data.message)},[i,u,g]),t.useEffect(()=>{s&&(b(s==null?void 0:s.grade_id),v(s==null?void 0:s.code),T(s==null?void 0:s.name))},[s]),e.jsx(A,{open:l,onClose:r,closeAfterTransition:!0,children:e.jsx(H,{in:l,children:e.jsx(S,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{className:"form-class",onSubmit:a,children:[e.jsxs(F,{children:[e.jsx(_,{children:"--Grade--"}),e.jsx(z,{required:!0,label:"--Grade--",value:f||"",onChange:o=>b(o.target.value),children:n==null?void 0:n.map(o=>e.jsx(I,{value:o.id,children:o.grade},o.id))})]}),e.jsx(G,{fullWidth:!0,label:"Code",placeholder:"Code",value:m||"",onChange:o=>v(o.target.value)}),e.jsx(G,{fullWidth:!0,label:"Name",placeholder:"Name",value:h||"",onChange:o=>T(o.target.value)}),e.jsxs(S,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(C,{variant:"outlined",color:"error",onClick:r,children:"cancel"}),e.jsx(C,{variant:"contained",color:"success",type:"submit",children:x?e.jsx(M,{size:20,color:"inherit"}):"add"})]})]})})})})},ge=[{label:"No",width:40},{label:"Homebase",width:100},{label:"Grade",width:100},{label:"Code",width:40},{label:"Class",width:100},{label:"Students",width:50},{label:"Actions",width:50}],be=()=>{const[l,r]=t.useState(null),s=!!l,[n,c]=t.useState(""),[u,x]=t.useState(""),[i,g]=t.useState(""),[y,f]=t.useState(!1),b=(d,w,E,K)=>{r(d.currentTarget),g(w),c(K),x(E)},m=()=>{r(null)},v=Y(),{data:h,isLoading:T}=Z(),[a,{data:o,isLoading:N}]=ee(),[W,{data:B,isLoading:$,isSuccess:D,error:k,reset:U}]=se(),q=()=>v(`/admin/classes/grade/${u}/class-code/${n}/add-students`),Q=()=>{i&&(a(i),f(!0),m())},J=()=>{i&&(W(i),m())};return t.useEffect(()=>{D&&(j.success(B.message),U()),k&&j.error(k.data.message)},[D,B,k]),e.jsx(ie,{children:e.jsxs(de,{sx:{height:{xs:500,md:530,xl:630},overflow:"auto"},children:[e.jsxs(ce,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(xe,{children:e.jsx(P,{children:ge.map((d,w)=>e.jsx(p,{align:"center",sx:{width:d.width},children:d.label},w))})}),e.jsx(ue,{children:h==null?void 0:h.map((d,w)=>e.jsxs(P,{children:[e.jsx(p,{align:"center",children:w+1}),e.jsx(p,{align:"center",children:d.homebase}),e.jsx(p,{align:"center",children:d.grade}),e.jsx(p,{align:"center",children:d.code}),e.jsx(p,{align:"center",children:d.name}),e.jsx(p,{align:"center",children:d.students}),e.jsx(p,{align:"center",children:e.jsx(me,{onClick:E=>b(E,d.id,d.grade_id,d.code),children:$?e.jsx(M,{size:14}):e.jsx(ne,{})})})]},w))})]}),e.jsxs(he,{id:"basic-menu",anchorEl:l,open:s,onClose:m,MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsx(I,{onClick:q,children:"Add Students"}),e.jsx(I,{onClick:Q,children:"Edit"}),e.jsx(I,{onClick:J,children:"Delete"})]}),e.jsx(Ce,{open:y,close:()=>f(!1),data:o})]})})},ts=()=>e.jsxs(re,{children:[e.jsx(te,{title:"Classes"}),e.jsxs(L,{container:!0,sx:{minHeight:"85vh",display:"flex",flexDirection:"column",gap:2},children:[e.jsx(L,{item:!0,xs:12,md:12,children:e.jsx(je,{})}),e.jsx(L,{item:!0,xs:12,md:12,children:e.jsx(be,{})})]})]});export{ts as default};
