import{at as I,aH as de,aI as F,r as n,as as U,j as t,au as V,av as J,ap as A,aj as E,ar as ee,aJ as oe,aq as te,aK as ue,c as M,i as fe,M as ae,aL as pe,aM as me,B,a0 as xe,aN as he,b as ge,aO as ve}from"./index-Cw8L1vs3.js";import{s as Ce}from"./Stack-CaRJc7-X.js";import{u as be}from"./useThemeProps-C3wBgCbR.js";import{a as je,T as H}from"./Typography-DBHcGHhC.js";/* empty css               */import{c as se,a as ye,u as Se,b as Re,r as ke}from"./createSvgIcon-Dv0_A-gv.js";import{E as Ie}from"./Editor-n_g2aCmY.js";import{P as re}from"./Paper-BIksV28D.js";import{B as z}from"./Button-BE2azgd8.js";import{I as Me}from"./IconButton-JNbI7kTA.js";import{G as W}from"./Grid-DTCm-WXh.js";import{F as ze}from"./FormControl-CWqqkO0t.js";import{F as $e,a as Pe}from"./FormGroup-BtNO4cP6.js";import{S as we}from"./SwitchBase-DBD4yWtP.js";import{a as Fe,d as _e}from"./ChevronRight-BT2jkoG5.js";import{M as Ge,F as We}from"./Modal-Oc-HjJ73.js";import"./getThemeProps-CStlso44.js";import"./quill.snow-DN9th5Y8.js";import"./useTheme-D38HHwaQ.js";import"./utils-CkAHfs0S.js";const Ne=["className","component","disableGutters","fixed","maxWidth","classes"],Be=de(),Ee=Ce("div",{name:"MuiContainer",slot:"Root",overridesResolver:(o,e)=>{const{ownerState:a}=o;return[e.root,e[`maxWidth${F(String(a.maxWidth))}`],a.fixed&&e.fixed,a.disableGutters&&e.disableGutters]}}),Te=o=>be({props:o,name:"MuiContainer",defaultTheme:Be}),Le=(o,e)=>{const a=m=>A(e,m),{classes:s,fixed:d,disableGutters:i,maxWidth:r}=o,c={root:["root",r&&`maxWidth${F(String(r))}`,d&&"fixed",i&&"disableGutters"]};return J(c,a,s)};function De(o={}){const{createStyledComponent:e=Ee,useThemeProps:a=Te,componentName:s="MuiContainer"}=o,d=e(({theme:r,ownerState:c})=>I({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!c.disableGutters&&{paddingLeft:r.spacing(2),paddingRight:r.spacing(2),[r.breakpoints.up("sm")]:{paddingLeft:r.spacing(3),paddingRight:r.spacing(3)}}),({theme:r,ownerState:c})=>c.fixed&&Object.keys(r.breakpoints.values).reduce((m,v)=>{const R=v,u=r.breakpoints.values[R];return u!==0&&(m[r.breakpoints.up(R)]={maxWidth:`${u}${r.breakpoints.unit}`}),m},{}),({theme:r,ownerState:c})=>I({},c.maxWidth==="xs"&&{[r.breakpoints.up("xs")]:{maxWidth:Math.max(r.breakpoints.values.xs,444)}},c.maxWidth&&c.maxWidth!=="xs"&&{[r.breakpoints.up(c.maxWidth)]:{maxWidth:`${r.breakpoints.values[c.maxWidth]}${r.breakpoints.unit}`}}));return n.forwardRef(function(c,m){const v=a(c),{className:R,component:u="div",disableGutters:y=!1,fixed:S=!1,maxWidth:x="lg"}=v,C=U(v,Ne),f=I({},v,{component:u,disableGutters:y,fixed:S,maxWidth:x}),b=Le(f,s);return t.jsx(d,I({as:u,ownerState:f,className:V(b.root,R),ref:m},C))})}const Oe=De({createStyledComponent:E("div",{name:"MuiContainer",slot:"Root",overridesResolver:(o,e)=>{const{ownerState:a}=o;return[e.root,e[`maxWidth${F(String(a.maxWidth))}`],a.fixed&&e.fixed,a.disableGutters&&e.disableGutters]}}),useThemeProps:o=>ee({props:o,name:"MuiContainer"})}),Qe=se(t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),He=se(t.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),Ue=E("span",{shouldForwardProp:oe})({position:"relative",display:"flex"}),Ve=E(Qe)({transform:"scale(1)"}),Je=E(He)(({theme:o,ownerState:e})=>I({left:0,position:"absolute",transform:"scale(0)",transition:o.transitions.create("transform",{easing:o.transitions.easing.easeIn,duration:o.transitions.duration.shortest})},e.checked&&{transform:"scale(1)",transition:o.transitions.create("transform",{easing:o.transitions.easing.easeOut,duration:o.transitions.duration.shortest})}));function ne(o){const{checked:e=!1,classes:a={},fontSize:s}=o,d=I({},o,{checked:e});return t.jsxs(Ue,{className:a.root,ownerState:d,children:[t.jsx(Ve,{fontSize:s,className:a.background,ownerState:d}),t.jsx(Je,{fontSize:s,className:a.dot,ownerState:d})]})}const ie=n.createContext(void 0);function Ae(){return n.useContext(ie)}function Ke(o){return A("MuiRadio",o)}const Z=te("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),Ze=["checked","checkedIcon","color","icon","name","onChange","size","className"],Xe=o=>{const{classes:e,color:a,size:s}=o,d={root:["root",`color${F(a)}`,s!=="medium"&&`size${F(s)}`]};return I({},e,J(d,Ke,e))},Ye=E(we,{shouldForwardProp:o=>oe(o)||o==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(o,e)=>{const{ownerState:a}=o;return[e.root,a.size!=="medium"&&e[`size${F(a.size)}`],e[`color${F(a.color)}`]]}})(({theme:o,ownerState:e})=>I({color:(o.vars||o).palette.text.secondary},!e.disableRipple&&{"&:hover":{backgroundColor:o.vars?`rgba(${e.color==="default"?o.vars.palette.action.activeChannel:o.vars.palette[e.color].mainChannel} / ${o.vars.palette.action.hoverOpacity})`:ue(e.color==="default"?o.palette.action.active:o.palette[e.color].main,o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${Z.checked}`]:{color:(o.vars||o).palette[e.color].main}},{[`&.${Z.disabled}`]:{color:(o.vars||o).palette.action.disabled}}));function qe(o,e){return typeof e=="object"&&e!==null?o===e:String(o)===String(e)}const X=t.jsx(ne,{checked:!0}),Y=t.jsx(ne,{}),eo=n.forwardRef(function(e,a){var s,d;const i=ee({props:e,name:"MuiRadio"}),{checked:r,checkedIcon:c=X,color:m="primary",icon:v=Y,name:R,onChange:u,size:y="medium",className:S}=i,x=U(i,Ze),C=I({},i,{color:m,size:y}),f=Xe(C),b=Ae();let l=r;const _=ye(u,b&&b.onChange);let $=R;return b&&(typeof l>"u"&&(l=qe(b.value,i.value)),typeof $>"u"&&($=b.name)),t.jsx(Ye,I({type:"radio",icon:n.cloneElement(v,{fontSize:(s=Y.props.fontSize)!=null?s:y}),checkedIcon:n.cloneElement(c,{fontSize:(d=X.props.fontSize)!=null?d:y}),ownerState:C,classes:f,name:$,checked:l,onChange:_,ref:a,className:V(f.root,S)},x))});function oo(o){return A("MuiRadioGroup",o)}te("MuiRadioGroup",["root","row","error"]);const to=["actions","children","className","defaultValue","name","onChange","value"],ao=o=>{const{classes:e,row:a,error:s}=o;return J({root:["root",a&&"row",s&&"error"]},oo,e)},so=n.forwardRef(function(e,a){const{actions:s,children:d,className:i,defaultValue:r,name:c,onChange:m,value:v}=e,R=U(e,to),u=n.useRef(null),y=ao(e),[S,x]=Se({controlled:v,default:r,name:"RadioGroup"});n.useImperativeHandle(s,()=>({focus:()=>{let l=u.current.querySelector("input:not(:disabled):checked");l||(l=u.current.querySelector("input:not(:disabled)")),l&&l.focus()}}),[]);const C=je(a,u),f=Re(c),b=n.useMemo(()=>({name:f,onChange(l){x(l.target.value),m&&m(l,l.target.value)},value:S}),[f,m,x,S]);return t.jsx(ie.Provider,{value:b,children:t.jsx($e,I({role:"radiogroup",ref:C,className:V(y.root,i)},R,{children:d}))})}),ro=({user:o,quiz:e})=>t.jsx(M,{sx:{height:70,bgcolor:"#4D44B5",boxShadow:4,p:1},children:t.jsxs(Oe,{sx:{height:"100%",display:"flex",alignItems:"center",color:"#FFFFFF",justifyContent:"space-between"},children:[t.jsx(H,{fontWeight:"bold",children:o==null?void 0:o.name}),t.jsx(H,{align:"right",fontSize:12,children:e})]})});var K={},no=fe;Object.defineProperty(K,"__esModule",{value:!0});var ce=K.default=void 0,io=no(ke()),co=t;ce=K.default=(0,io.default)((0,co.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8m0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4z"}),"Sync");const q=o=>({__html:o}),lo=({setOpen:o,question:e,note:a,number:s,refresh:d,answers:i})=>{const r=ae(),c=r.start,m=r.end,[v,R]=n.useState(null),[u,y]=n.useState([]);n.useEffect(()=>{if(a!=null&&a.shuffle){const p=[...(e==null?void 0:e.choices)||[]].sort(()=>Math.random()-.5);y(p)}else y((e==null?void 0:e.choices)||[])},[a,e]),n.useEffect(()=>{const p=new Date(m).getTime(),w=setInterval(()=>{const le=new Date().getTime(),L=p-le;if(L<=0)clearInterval(w),localStorage.removeItem("questions"),window.location.href="https://center.nibs.sch.id/student/exam";else{const D=Math.floor(L%864e5/36e5),O=Math.floor(L%(1e3*60*60)/(1e3*60)),Q=Math.floor(L%(1e3*60)/1e3);R(`${D<10?"0"+D:D}:${O<10?"0"+O:O}:${Q<10?"0"+Q:Q}`)}},1e3);return()=>clearInterval(w)},[c,m]);const[S,x]=n.useState(""),[C,{data:f,isSuccess:b,error:l,reset:_}]=pe(),[$,{data:T,isSuccess:G,error:P}]=me(),j=i==null?void 0:i.find(p=>p.question_id===(e==null?void 0:e.id)),g=p=>{const w={quizId:e==null?void 0:e.quiz_id,questionId:e==null?void 0:e.id,type:e==null?void 0:e.type,mc:p.target.value,poin:e==null?void 0:e.score};C(w)},h=p=>{p.preventDefault();const w={quizId:e==null?void 0:e.quiz_id,questionId:e==null?void 0:e.id,type:e==null?void 0:e.type,essay:S};C(w)},k=()=>{const p={quizId:e==null?void 0:e.quiz_id,questionId:e==null?void 0:e.id};$(p)};n.useEffect(()=>{b&&(B.success(f.message),x(""),_()),l&&(B.error(l.data.message),_())},[f,b,l]),n.useEffect(()=>{G&&B.info(T.message),P&&B.error(P.data.message)},[T,G,P]);const N=()=>{localStorage.removeItem("questions"),d()};return t.jsxs(n.Fragment,{children:[t.jsxs(re,{sx:{p:1,display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[t.jsx(z,{variant:"contained",color:"error",sx:{display:{xs:"none",md:"flex"}},children:s}),t.jsx(z,{variant:"contained",color:"error",sx:{display:{xs:"flex",md:"none"}},onClick:()=>o(!0),children:s}),t.jsxs(M,{sx:{display:"flex",gap:1},children:[t.jsx(z,{variant:"contained",color:"error",children:v}),t.jsx(Me,{color:"error",onClick:N,children:t.jsx(ce,{})})]})]}),t.jsxs(W,{container:!0,sx:{height:{xs:"75vh",md:"67vh"},mb:1,p:1,bgcolor:"white",borderRadius:1,boxShadow:3},children:[t.jsx(W,{item:!0,xs:12,md:8,children:t.jsx(M,{sx:{height:{xs:300,md:410},p:1,overflow:"auto"},children:t.jsx(M,{sx:{minHeight:"100%"},dangerouslySetInnerHTML:q(e==null?void 0:e.question)})})}),t.jsx(W,{item:!0,xs:12,md:4,children:t.jsxs(M,{sx:{height:{xs:250,md:410,lg:450,xl:480},overflow:"auto",p:1,display:"flex",flexDirection:"column",gap:1},children:[(e==null?void 0:e.type)===1&&t.jsx(ze,{sx:{ml:1},children:t.jsx(so,{"aria-labelledby":"demo-controlled-radio-buttons-group",name:"controlled-radio-buttons-group",value:(j==null?void 0:j.mc)||"",onChange:g,children:u.filter(p=>p.text!==null).map((p,w)=>t.jsx(Pe,{control:t.jsx(eo,{}),value:p.value,label:t.jsx(H,{dangerouslySetInnerHTML:q(p.text)})},w))})}),(e==null?void 0:e.type)===2&&t.jsxs("form",{onSubmit:h,children:[t.jsx(Ie,{placeholder:"Write your answer here",value:(j==null?void 0:j.essay)||S,onChange:p=>x(p)}),t.jsx(z,{fullWidth:!0,variant:j!=null&&j.essay?"contained":"outlined",color:"success",type:"submit",sx:{mt:1},children:"Save"})]}),t.jsx(z,{variant:j!=null&&j.doubt?"contained":"outlined",color:"warning",onClick:k,children:"doubt"})]})})]})]})},wo=()=>{const o=ae(),e=o.quizId,a=o.quizname.replace(/-/g," "),{data:s,refetch:d}=xe(e,{skip:!e}),{data:i}=he(e,{skip:!e}),{user:r}=ge(g=>g.authentication),[c,{data:m,isSuccess:v,isLoading:R,error:u}]=ve(),[y,S]=n.useState(!1),[x,C]=n.useState([]),[f,b]=n.useState(1),[l]=n.useState(1);n.useEffect(()=>{const g=localStorage.getItem("questions");if(g){const h=JSON.parse(g);Array.isArray(h.questions)?C(h.questions):C([])}else s&&Array.isArray(s.questions)&&(localStorage.setItem("questions",JSON.stringify(s)),C(s.questions))},[s]);const _=()=>{d(),s&&Array.isArray(s.questions)&&(localStorage.setItem("questions",JSON.stringify(s)),C(s.questions))},$=f*l,T=$-l,G=x==null?void 0:x.slice(T,$),P=(g,h)=>{h>=1&&h<=Math.ceil(x.length/l)&&b(h)},j=()=>{c(e)};return n.useEffect(()=>{v&&(window.location.href="https://center.nibs.sch.id/student/exam",localStorage.removeItem("questions")),u&&B.error(u.message||u.data.message)},[m,v,u]),t.jsxs(M,{sx:{bgcolor:"#EDF3F9",height:"100vh"},children:[t.jsx(ro,{user:r,quiz:a}),t.jsxs(W,{container:!0,children:[t.jsxs(W,{item:!0,xs:12,md:10,sx:{p:1,height:"calc(100vh - 70px)",overflow:"auto"},children:[G==null?void 0:G.map((g,h)=>t.jsx(lo,{setOpen:S,question:g,answers:i,note:s==null?void 0:s.note,number:f,refresh:_},h)),t.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",p:1},children:[t.jsx(z,{startIcon:t.jsx(Fe,{}),variant:"contained",color:"primary",onClick:()=>P(null,f-1),disabled:f===1,children:"Previous"}),f!==Math.ceil(x.length/l)?t.jsx(z,{endIcon:t.jsx(_e,{}),variant:"contained",color:"primary",onClick:()=>P(null,f+1),children:"Next"}):t.jsx(z,{variant:"contained",color:"success",onClick:j,children:"Finish"})]})]}),t.jsx(W,{item:!0,xs:12,md:2,sx:{p:1,display:{xs:"none",md:"flex"},flexDirection:"column",justifyContent:"space-between"},children:t.jsx(M,{sx:{height:"70vh",overflow:"auto"},children:t.jsx(M,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:x.map((g,h)=>{const k=i==null?void 0:i.find(N=>N.question_id===g.id);return t.jsx(z,{variant:"contained",color:k!=null&&k.doubt?"warning":k?"success":"primary",onClick:()=>P(null,h+1),children:h+1},g.id)})})})})]}),t.jsx(Ge,{open:y,onClose:()=>S(!1),closeAfterTransition:!0,children:t.jsx(We,{in:y,children:t.jsx(M,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:350,maxHeight:600,bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px",overflow:"auto"},children:t.jsx(M,{sx:{width:"100%",height:"100%",display:"flex",flexWrap:"wrap",gap:2},children:x.map((g,h)=>{const k=i==null?void 0:i.find(N=>N.question_id===g.id);return t.jsx(z,{variant:"contained",color:k!=null&&k.doubt?"warning":k?"success":"primary",onClick:()=>{P(null,h+1),S(!1)},children:h+1},g.id)})})})})})]})};export{wo as default};
