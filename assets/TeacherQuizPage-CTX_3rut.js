import{b as K,K as R,Z as O,r as s,B as h,j as e,c as f,C as D,$ as U,a0 as Z,a1 as J,a2 as V,a3 as X,a as Y}from"./index-B4oIbNwU.js";import{L as ee}from"./Layout-Ce3KKoj1.js";import{P as se}from"./PageName-CEARqxte.js";import{d as te}from"./MoreHoriz-e4RIS7qv.js";import{d as ae,a as re}from"./FolderDelete-CJHQMYSg.js";import{M as F,F as H}from"./Modal-yF_fLTpP.js";import{F as A}from"./FormControl-DhE90yLw.js";import{I as W,T as q}from"./TextField-dmVyW8fb.js";import{S as _,M as ne}from"./Select-OZq0aL4k.js";import{M as I}from"./MenuItem-B9UCUkSn.js";import{B as b}from"./Button-CGa4e0l9.js";import{T as le}from"./Typography-DLQ9NUQX.js";import{I as ie}from"./Input-Dj5u-xDW.js";import{P as oe}from"./Paper-WBrkj_xq.js";import{T as ce}from"./TableContainer-KSHk1eic.js";import{a as de,b as ue,c as P,T}from"./TableRow-2MDI8QSh.js";import{T as he}from"./TableBody-C-AJ6jTb.js";import{I as fe}from"./IconButton-DKYpUzhK.js";import{G as xe}from"./Grid-DRYlEhgI.js";import"./ChevronRight-CvyNzzqS.js";import"./createSvgIcon-BZOpo86E.js";import"./CalendarMonth-Cs-Lek6-.js";import"./Style-BHIr2vnK.js";import"./useTheme-C3ddHqAM.js";import"./ListItemText-snJx1fDo.js";import"./GlobalStyles-Ddd3Vltf.js";import"./listItemIconClasses-DYp5XrKx.js";import"./utils-CoNKf_2-.js";import"./Grow-BiPl52xs.js";const me=({open:o,close:l})=>{const{user:a}=K(t=>t.authentication),{data:i,isLoading:x}=R(),[E,{data:c,isLoading:d,isSuccess:v,error:u,reset:C}]=O(),[m,M]=s.useState(""),[p,y]=s.useState(!1),[j,S]=s.useState(""),[N,g]=s.useState(""),[z,Q]=s.useState(""),G=t=>{if(t.preventDefault(),/[/\-]/.test(z)){h.error("Quiz name should not contain '/' or '-'");return}const r={teacherId:a==null?void 0:a.id,gradeId:m,quizName:z,shuffle:p,mc:j,essay:N};E(r)};s.useEffect(()=>{v&&(h.success(c.message),M(""),y(!1),S(""),g(""),Q(""),l(),C()),u&&(h.error(u.data.message),C())},[c,v,u]);const L=()=>{y(!1),Q(""),S(""),g(""),M(""),l()};return e.jsx(F,{open:o,onClose:l,closeAfterTransition:!0,children:e.jsx(H,{in:o,children:e.jsx(f,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{className:"form-quiz",onSubmit:G,children:[e.jsxs(A,{fullWidth:!0,children:[e.jsx(W,{children:"--Grade--"}),e.jsx(_,{value:m,onChange:t=>M(t.target.value),required:!0,label:"--Grade--",children:i==null?void 0:i.map(t=>e.jsx(I,{value:t.id,children:t.grade},t.id))})]}),e.jsxs(A,{fullWidth:!0,children:[e.jsx(W,{children:"--Shuffle--"}),e.jsxs(_,{value:p,onChange:t=>y(t.target.value),required:!0,label:"--Grade--",children:[e.jsx(I,{value:!0,children:"yes"}),e.jsx(I,{value:!1,children:"No"})]})]}),e.jsx(q,{fullWidth:!0,required:!0,label:"Quiz Name",placeholder:"Quiz Name",value:z,onChange:t=>Q(t.target.value)}),e.jsxs(f,{sx:{display:"flex",gap:1},children:[e.jsx(q,{fullWidth:!0,required:!0,type:"number",label:"MC",placeholder:"eg: 80",value:j,onChange:t=>S(t.target.value)}),e.jsx(q,{fullWidth:!0,required:!0,type:"number",label:"Essay",placeholder:"eg: 20",value:N,onChange:t=>g(t.target.value)})]}),e.jsxs(f,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(b,{variant:"outlined",color:"error",onClick:L,children:"cancel"}),e.jsx(b,{variant:"contained",color:"success",type:"submit",children:x||d?e.jsx(D,{size:20,color:"inherit"}):"add"})]})]})})})})},pe=({open:o,close:l})=>{const[a,{data:i,isSuccess:x,isLoading:E,error:c,reset:d}]=U(),v=()=>a();return s.useEffect(()=>{x&&(h.success(i.message),l(),d()),c&&h.error(c.data.message)},[i,x,c]),e.jsx(F,{open:o,onClose:l,closeAfterTransition:!0,children:e.jsx(H,{in:o,children:e.jsxs(f,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:[e.jsx(le,{align:"center",children:"Are you sure you want to delete all quizzes?"}),e.jsxs(f,{sx:{display:"flex",gap:1,justifyContent:"flex-end",mt:1},children:[e.jsx(b,{variant:"contained",color:"error",onClick:l,children:"cancel"}),e.jsx(b,{variant:"outlined",color:"error",onClick:v,children:E?e.jsx(D,{size:20,color:"inherit"}):"sure"})]})]})})})},je=()=>{const[o,l]=s.useState(!1),[a,i]=s.useState(!1);return e.jsxs(f,{sx:{display:"flex",justifyContent:"end",gap:1},children:[e.jsx(b,{variant:"contained",color:"success",startIcon:e.jsx(ae,{}),onClick:()=>i(!0),sx:{width:120},children:"add"}),e.jsx(b,{startIcon:e.jsx(re,{}),variant:"contained",color:"error",onClick:()=>l(!0),sx:{width:120},children:"Delete"}),e.jsx(me,{open:a,close:()=>i(!1)}),e.jsx(pe,{open:o,close:()=>l(!1)})]})},ge=({open:o,close:l,quiz:a})=>{const{data:i,isLoading:x}=R(),[E,{data:c,isSuccess:d,isLoading:v,error:u,reset:C}]=Z(),[m,M]=s.useState(""),[p,y]=s.useState(""),[j,S]=s.useState(!1),[N,g]=s.useState(""),[z,Q]=s.useState(""),[G,L]=s.useState(""),t=r=>{if(r.preventDefault(),/[/\-]/.test(G)){h.error("Quiz name should not contain '/' or '-'");return}const k={teacherId:m,gradeId:p,quizName:G,shuffle:j,mc:N,essay:z};E({id:a.id,body:k})};return s.useEffect(()=>{d&&(h.success(c.message),l(),C()),u&&(h.error(u.data.message),C())},[c,d,u]),s.useEffect(()=>{a&&(M(a.teacher_id),y(a.grade_id),S(a.shuffle),g(a.mc_weight),Q(a.essay_weight),L(a.quiz_name))},[a]),e.jsx(F,{open:o,onClose:l,closeAfterTransition:!0,children:e.jsx(H,{in:o,children:e.jsx(f,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{className:"form-quiz",onSubmit:t,children:[e.jsxs(A,{fullWidth:!0,children:[e.jsx(W,{children:"--Grade--"}),e.jsx(_,{value:p||"",onChange:r=>y(r.target.value),required:!0,label:"--Grade--",children:i==null?void 0:i.map(r=>e.jsx(I,{value:r.id,children:r.grade},r.id))})]}),e.jsxs(A,{fullWidth:!0,children:[e.jsx(W,{children:"--Shuffle--"}),e.jsxs(_,{value:j,onChange:r=>S(r.target.value),required:!0,label:"--Grade--",children:[e.jsx(I,{value:!0,children:"yes"}),e.jsx(I,{value:!1,children:"No"})]})]}),e.jsx(q,{fullWidth:!0,required:!0,label:"Quiz Name",placeholder:"Quiz Name",value:G||"",onChange:r=>L(r.target.value)}),e.jsxs(f,{sx:{display:"flex",gap:1},children:[e.jsx(q,{fullWidth:!0,required:!0,type:"number",label:"MC",placeholder:"eg: 80",value:N||"",onChange:r=>g(r.target.value)}),e.jsx(q,{fullWidth:!0,required:!0,type:"number",label:"Essay",placeholder:"eg: 20",value:z||"",onChange:r=>Q(r.target.value)})]}),e.jsxs(f,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(b,{variant:"outlined",color:"error",onClick:l,children:"cancel"}),e.jsx(b,{variant:"contained",color:"success",type:"submit",children:x||v?e.jsx(D,{size:20,color:"inherit"}):"update"})]})]})})})})},be=[{label:"No",width:50},{label:"Bank",width:170},{label:"Grade",width:70},{label:"MC",width:70},{label:"Essay",width:70},{label:"Questions",width:70},{label:"Actions",width:170}],ve=()=>{const{data:o}=J(),[l,{data:a}]=V(),[i,{data:x,isLoading:E,isSuccess:c,error:d,reset:v}]=X(),[u,C]=s.useState(null),[m,M]=s.useState(""),p=!!u,y=(n,w)=>{C(n.currentTarget),M(w)},j=()=>{C(null)},S=Y(),[N,g]=s.useState(!1),z=(n,w)=>{const B=n.replace(/\s+/g,"-");S(`/teacher/quizzes/${B}/${w}`)},Q=()=>{m&&(g(!0),l(m),j())},G=()=>{m&&(i(m),j())};s.useEffect(()=>{c&&(h.success(x.message),v()),d&&h.error(d.data.message)},[x,c,d]);const[L,t]=s.useState(""),r=n=>n.teacher.toLowerCase().includes(L.toLowerCase()),k=o==null?void 0:o.filter(r),$=n=>{t(n.target.value)};return e.jsxs(s.Fragment,{children:[e.jsxs(f,{sx:{p:1,boxShadow:2,bgcolor:"white",borderRadius:1,display:"flex",justifyContent:"space-between",flexDirection:{xs:"column-reverse",md:"row"},gap:2},children:[e.jsx(ie,{placeholder:"Search Teacher",value:L,onChange:$}),e.jsx(je,{})]}),e.jsx(oe,{children:e.jsx(ce,{children:e.jsxs(de,{children:[e.jsx(ue,{children:e.jsx(P,{children:be.map((n,w)=>e.jsx(T,{align:"center",sx:{width:n.width},children:n.label},w))})}),e.jsx(he,{children:k==null?void 0:k.map((n,w)=>e.jsxs(P,{children:[e.jsx(T,{align:"center",children:w+1}),e.jsx(T,{align:"center",children:n.quiz_name}),e.jsx(T,{align:"center",children:n.grade}),e.jsx(T,{align:"center",children:n.mc}),e.jsx(T,{align:"center",children:n.essay}),e.jsx(T,{align:"center",children:e.jsx(b,{variant:"contained",color:"success",onClick:()=>z(n.quiz_name,n.id),children:"Add"})}),e.jsx(T,{align:"center",children:e.jsx(fe,{id:"basic-button",color:"primary","aria-controls":p?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":p?"true":void 0,onClick:B=>y(B,n.id),children:E?e.jsx(D,{size:20}):e.jsx(te,{})})})]},w))})]})})}),e.jsx(ge,{open:N,close:()=>g(!1),quiz:a}),e.jsxs(ne,{id:"basic-menu",anchorEl:u,open:p,onClose:j,MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsx(I,{onClick:()=>Q(),children:"Edit"}),e.jsx(I,{onClick:G,children:"Delete"})]})]})},Je=()=>e.jsxs(ee,{children:[e.jsx(se,{title:"Quizzes"}),e.jsx(xe,{container:!0,sx:{minHeight:"85vh",display:"flex",flexDirection:"column",gap:1},children:e.jsx(ve,{})})]});export{Je as default};
