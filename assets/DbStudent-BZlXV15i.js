import{ap as Pe,aq as Ce,aj as ie,at as v,r as g,as as G,j as a,au as Te,av as ke,a5 as e,aN as Fe,aO as Me,aP as we,aQ as Se,B as W,c as te,C as L,aR as Oe,aS as We,aT as ze,aU as Re,aV as Ie,M as Ne,aW as Ae,aX as $e}from"./index-Bj3C8koD.js";import{L as qe}from"./Layout-NrhJHGwr.js";import{P as Ee}from"./PageName-Biq2F0VA.js";import{P as Le,h as Z,e as Q,k as re,G as se,f as de,o as Be,p as He,g as Y,s as Ve,u as Ge,a as ne,b as Qe,v as le,j as Ye,I as E,J as Ue,K as ue,N as Ke,O as ce,Q as Je,R as Xe,d as O,L as U,A as K}from"./useMobilePicker-D3XzxUZR.js";import{P as $}from"./Paper-Dbdqoibw.js";import{G as S}from"./Grid-BFZ5c2Eo.js";import{T as b,I as B}from"./TextField-B-BJcQE_.js";import{u as Ze}from"./FolderCopy-DZT0bMue.js";import{T as ea}from"./Typography-BrPjQYMZ.js";import{u as aa,r as he}from"./Modal-DP-e0wkE.js";import{F as H}from"./FormControl-BUrl-vBt.js";import{S as V}from"./Select-D8KEf11G.js";import{M as q}from"./MenuItem-Bp5CoyVW.js";import{B as A}from"./Button-D4WmCtXy.js";import{d as me}from"./Remove-D86mu_k9.js";import{T as pe}from"./TableContainer-Cx1L-07N.js";import{T as fe,a as _e,b as J,c as R,d as xe}from"./TableRow-C6a_lx_T.js";import{I as be}from"./IconButton-DpREeSCV.js";import{B as ta}from"./ButtonGroup-8xtbKUXN.js";import"./ChevronRight-CBf5NFe3.js";import"./createSvgIcon-D-BIaofd.js";import"./CalendarMonth-Kz6fg5D9.js";import"./Style-DEKwriaF.js";import"./ExitToApp-QjsXFa-4.js";import"./useTheme-CpZLhXHk.js";import"./Toolbar-N1d9vRU8.js";import"./InputAdornment-cS-2NHD2.js";import"./utils-ChUDx9XN.js";import"./Popper-BY-kpQyG.js";import"./Grow-BxafOqhx.js";import"./useThemeProps-d3JYUmB4.js";import"./getThemeProps-TTdwN0UH.js";import"./Input-Di2yNiZQ.js";import"./GlobalStyles-DKJB1qfv.js";import"./listItemIconClasses-D2S5NYx_.js";import"./Menu-AE6GZcr2.js";function ra(t){return Pe("MuiDatePickerToolbar",t)}Ce("MuiDatePickerToolbar",["root","title"]);const sa=["value","isLandscape","onChange","toolbarFormat","toolbarPlaceholder","views","className"],na=t=>{const{classes:r}=t;return ke({root:["root"],title:["title"]},ra,r)},la=ie(Le,{name:"MuiDatePickerToolbar",slot:"Root",overridesResolver:(t,r)=>r.root})({}),oa=ie(ea,{name:"MuiDatePickerToolbar",slot:"Title",overridesResolver:(t,r)=>r.title})(({ownerState:t})=>v({},t.isLandscape&&{margin:"auto 16px auto auto"})),ia=g.forwardRef(function(r,c){const i=Z({props:r,name:"MuiDatePickerToolbar"}),{value:u,isLandscape:d,toolbarFormat:h,toolbarPlaceholder:n="––",views:s,className:o}=i,C=G(i,sa),f=Q(),j=re(),y=na(i),m=g.useMemo(()=>{if(!u)return n;const D=se(f,{format:h,views:s},!0);return f.formatByString(u,D)},[u,h,n,f,s]),_=i;return a.jsx(la,v({ref:c,toolbarTitle:j.datePickerToolbarTitle,isLandscape:d,className:Te(y.root,o)},C,{children:a.jsx(oa,{variant:"h4",align:d?"left":"center",ownerState:_,className:y.title,children:m})}))});function ge(t,r){var c,i,u,d;const h=Q(),n=de(),s=Z({props:t,name:r}),o=g.useMemo(()=>{var f;return((f=s.localeText)==null?void 0:f.toolbarTitle)==null?s.localeText:v({},s.localeText,{datePickerToolbarTitle:s.localeText.toolbarTitle})},[s.localeText]),C=(c=s.slots)!=null?c:Be(s.components);return v({},s,{localeText:o},He({views:s.views,openTo:s.openTo,defaultViews:["year","day"],defaultOpenTo:"day"}),{disableFuture:(i=s.disableFuture)!=null?i:!1,disablePast:(u=s.disablePast)!=null?u:!1,minDate:Y(h,s.minDate,n.minDate),maxDate:Y(h,s.maxDate,n.maxDate),slots:v({toolbar:ia},C),slotProps:(d=s.slotProps)!=null?d:s.componentsProps})}const da=t=>{var r,c,i;const u=Q(),d=de();return v({},t,{disablePast:(r=t.disablePast)!=null?r:!1,disableFuture:(c=t.disableFuture)!=null?c:!1,format:(i=t.format)!=null?i:u.formats.keyboardDate,minDate:Y(u,t.minDate,d.minDate),maxDate:Y(u,t.maxDate,d.maxDate)})},ua=({props:t,inputRef:r})=>{const c=da(t),{forwardedProps:i,internalProps:u}=Ve(c,"date");return Ge({inputRef:r,forwardedProps:i,internalProps:u,valueManager:ne,fieldValueManager:Qe,validator:le,valueType:"date"})},ca=["components","componentsProps","slots","slotProps","InputProps","inputProps"],ha=["inputRef"],ma=["ref","onPaste","onKeyDown","inputMode","readOnly","clearable","onClear"],ye=g.forwardRef(function(r,c){var i,u,d;const h=Z({props:r,name:"MuiDateField"}),{components:n,componentsProps:s,slots:o,slotProps:C,InputProps:f,inputProps:j}=h,y=G(h,ca),m=h,_=(i=(u=o==null?void 0:o.textField)!=null?u:n==null?void 0:n.TextField)!=null?i:b,D=aa({elementType:_,externalSlotProps:(d=C==null?void 0:C.textField)!=null?d:s==null?void 0:s.textField,externalForwardedProps:y,ownerState:m}),{inputRef:w}=D,k=G(D,ha);k.inputProps=v({},j,k.inputProps),k.InputProps=v({},f,k.InputProps);const p=ua({props:k,inputRef:w}),{ref:x,onPaste:l,onKeyDown:T,inputMode:I,readOnly:P,clearable:z,onClear:M}=p,F=G(p,ma),{InputProps:N,fieldProps:De}=Ye({onClear:M,clearable:z,fieldProps:F,InputProps:F.InputProps,slots:o,slotProps:C,components:n,componentsProps:s});return a.jsx(_,v({ref:c},De,{InputProps:v({},N,{readOnly:P}),inputProps:v({},F.inputProps,{inputMode:I,onPaste:l,onKeyDown:T,ref:x})}))}),ve=g.forwardRef(function(r,c){var i,u,d,h;const n=re(),s=Q(),o=ge(r,"MuiDesktopDatePicker"),C=v({day:E,month:E,year:E},o.viewRenderers),f=v({},o,{viewRenderers:C,format:se(s,o,!1),yearsPerRow:(i=o.yearsPerRow)!=null?i:4,slots:v({openPickerIcon:Ue,field:ye},o.slots),slotProps:v({},o.slotProps,{field:y=>{var m;return v({},he((m=o.slotProps)==null?void 0:m.field,y),ue(o),{ref:c})},toolbar:v({hidden:!0},(u=o.slotProps)==null?void 0:u.toolbar)})}),{renderPicker:j}=Ke({props:f,valueManager:ne,valueType:"date",getOpenDialogAriaText:(d=(h=f.localeText)==null?void 0:h.openDatePickerDialogue)!=null?d:n.openDatePickerDialogue,validator:le});return j()});ve.propTypes={autoFocus:e.bool,className:e.string,closeOnSelect:e.bool,components:e.object,componentsProps:e.object,dayOfWeekFormatter:e.func,defaultCalendarMonth:e.any,defaultValue:e.any,disabled:e.bool,disableFuture:e.bool,disableHighlightToday:e.bool,disableOpenPicker:e.bool,disablePast:e.bool,displayWeekNumber:e.bool,fixedWeekNumber:e.number,format:e.string,formatDensity:e.oneOf(["dense","spacious"]),inputRef:ce,label:e.node,loading:e.bool,localeText:e.object,maxDate:e.any,minDate:e.any,monthsPerRow:e.oneOf([3,4]),name:e.string,onAccept:e.func,onChange:e.func,onClose:e.func,onError:e.func,onMonthChange:e.func,onOpen:e.func,onSelectedSectionsChange:e.func,onViewChange:e.func,onYearChange:e.func,open:e.bool,openTo:e.oneOf(["day","month","year"]),orientation:e.oneOf(["landscape","portrait"]),readOnly:e.bool,reduceAnimations:e.bool,referenceDate:e.any,renderLoading:e.func,selectedSections:e.oneOfType([e.oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),e.number,e.shape({endIndex:e.number.isRequired,startIndex:e.number.isRequired})]),shouldDisableDate:e.func,shouldDisableMonth:e.func,shouldDisableYear:e.func,showDaysOutsideCurrentMonth:e.bool,slotProps:e.object,slots:e.object,sx:e.oneOfType([e.arrayOf(e.oneOfType([e.func,e.object,e.bool])),e.func,e.object]),timezone:e.string,value:e.any,view:e.oneOf(["day","month","year"]),viewRenderers:e.shape({day:e.func,month:e.func,year:e.func}),views:e.arrayOf(e.oneOf(["day","month","year"]).isRequired),yearsPerRow:e.oneOf([3,4])};const je=g.forwardRef(function(r,c){var i,u,d;const h=re(),n=Q(),s=ge(r,"MuiMobileDatePicker"),o=v({day:E,month:E,year:E},s.viewRenderers),C=v({},s,{viewRenderers:o,format:se(n,s,!1),slots:v({field:ye},s.slots),slotProps:v({},s.slotProps,{field:j=>{var y;return v({},he((y=s.slotProps)==null?void 0:y.field,j),ue(s),{ref:c})},toolbar:v({hidden:!1},(i=s.slotProps)==null?void 0:i.toolbar)})}),{renderPicker:f}=Je({props:C,valueManager:ne,valueType:"date",getOpenDialogAriaText:(u=(d=C.localeText)==null?void 0:d.openDatePickerDialogue)!=null?u:h.openDatePickerDialogue,validator:le});return f()});je.propTypes={autoFocus:e.bool,className:e.string,closeOnSelect:e.bool,components:e.object,componentsProps:e.object,dayOfWeekFormatter:e.func,defaultCalendarMonth:e.any,defaultValue:e.any,disabled:e.bool,disableFuture:e.bool,disableHighlightToday:e.bool,disableOpenPicker:e.bool,disablePast:e.bool,displayWeekNumber:e.bool,fixedWeekNumber:e.number,format:e.string,formatDensity:e.oneOf(["dense","spacious"]),inputRef:ce,label:e.node,loading:e.bool,localeText:e.object,maxDate:e.any,minDate:e.any,monthsPerRow:e.oneOf([3,4]),name:e.string,onAccept:e.func,onChange:e.func,onClose:e.func,onError:e.func,onMonthChange:e.func,onOpen:e.func,onSelectedSectionsChange:e.func,onViewChange:e.func,onYearChange:e.func,open:e.bool,openTo:e.oneOf(["day","month","year"]),orientation:e.oneOf(["landscape","portrait"]),readOnly:e.bool,reduceAnimations:e.bool,referenceDate:e.any,renderLoading:e.func,selectedSections:e.oneOfType([e.oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),e.number,e.shape({endIndex:e.number.isRequired,startIndex:e.number.isRequired})]),shouldDisableDate:e.func,shouldDisableMonth:e.func,shouldDisableYear:e.func,showDaysOutsideCurrentMonth:e.bool,slotProps:e.object,slots:e.object,sx:e.oneOfType([e.arrayOf(e.oneOfType([e.func,e.object,e.bool])),e.func,e.object]),timezone:e.string,value:e.any,view:e.oneOf(["day","month","year"]),viewRenderers:e.shape({day:e.func,month:e.func,year:e.func}),views:e.arrayOf(e.oneOf(["day","month","year"]).isRequired),yearsPerRow:e.oneOf([3,4])};const pa=["desktopModeMediaQuery"],X=g.forwardRef(function(r,c){const i=Z({props:r,name:"MuiDatePicker"}),{desktopModeMediaQuery:u=Xe}=i,d=G(i,pa);return Ze(u,{defaultMatches:!0})?a.jsx(ve,v({ref:c},d)):a.jsx(je,v({ref:c},d))}),fa=({provinces:t,info:r,name:c,nis:i})=>{const[u,d]=g.useState(""),[h,n]=g.useState(""),[s,o]=g.useState(""),[C,{data:f,isSuccess:j,error:y,isLoading:m,reset:_}]=Fe(),{data:D}=Me(u,{skip:!u}),{data:w}=we(h,{skip:!h}),{data:k}=Se(s,{skip:!s}),[p,x]=g.useState({name:c,nisn:"",nis:i,birth_place:"",birth_date:O(),height:"",weight:"",around_head:"",order_birth:"",siblings:"",province_id:"",province_name:"",regency_id:"",regency_name:"",district_id:"",district_name:"",village_id:"",village_name:"",district:"",address:"",postal_code:""}),l=P=>{const{name:z,value:M}=P.target;if(z==="province_id"){const F=t==null?void 0:t.find(N=>N.id===M);d(M),x({...p,province_id:M,province_name:F?F.name:""})}if(z==="regency_id"){const F=D==null?void 0:D.find(N=>N.id===M);n(M),x({...p,regency_id:M,regency_name:F?F.name:""})}if(z==="district_id"){const F=w==null?void 0:w.find(N=>N.id===M);o(M),x({...p,district_id:M,district_name:F?F.name:""})}if(z==="village_id"){const F=k==null?void 0:k.find(N=>N.id.trim()===M.trim());x({...p,village_id:M,village_name:F?F.name:""})}z!=="province_id"&&z!=="regency_id"&&z!=="district_id"&&z!=="village_id"&&x({...p,[z]:M})},T=P=>{x({...p,birth_date:P})},I=P=>{P.preventDefault(),C(p)};return g.useEffect(()=>{j&&(W.success(f.message),_()),y&&(W.error(y.data.message),_())},[j,y,f]),g.useEffect(()=>{r&&(x({name:r.name,nisn:r.nisn,nis:r.nis,birth_place:r.birth_place,birth_date:r.birth_date?O(r.birth_date):O(),height:r.height,weight:r.weight,around_head:r.around_head,order_birth:r.order_birth,siblings:r.siblings,province_id:r.province_id,province_name:r.province_name,regency_id:r.regency_id,regency_name:r.regency_name,district_id:r.district_id,district_name:r.district_name,village_id:r.village_id.trim(),village_name:r.village_name,address:r.address,postal_code:r.postal_code}),console.log(r.village_id),d(r.province_id),n(r.regency_id),o(r.district_id))},[r]),a.jsx($,{sx:{width:"100%",p:1},children:a.jsxs("form",{onSubmit:I,children:[a.jsxs(S,{container:!0,children:[a.jsxs(S,{item:!0,xs:12,md:6,sx:{p:1,display:"flex",flexDirection:"column",gap:2},children:[a.jsx(b,{fullWidth:!0,label:"Full Name",size:"small",variant:"standard",name:"name",value:p.name||"",onChange:l,required:!0}),a.jsx(b,{fullWidth:!0,label:"NISN",size:"small",variant:"standard",name:"nisn",value:p.nisn||"",onChange:l,required:!0}),a.jsx(b,{fullWidth:!0,label:"NIS",size:"small",variant:"standard",name:"nis",value:p.nis||"",onChange:l,required:!0}),a.jsx(b,{fullWidth:!0,label:"Birth Place",size:"small",variant:"standard",name:"birth_place",value:p.birth_place||"",onChange:l,required:!0}),a.jsx(U,{dateAdapter:K,children:a.jsx(X,{label:"Birth Date",value:p.birth_date||"",onChange:T,slotProps:{textField:{fullWidth:!0,variant:"standard"}}})}),a.jsx(b,{fullWidth:!0,type:"number",label:"Order Birth",size:"small",variant:"standard",name:"order_birth",value:p.order_birth,onChange:l,required:!0}),a.jsx(b,{fullWidth:!0,type:"number",label:"Total Siblings",size:"small",variant:"standard",name:"siblings",value:p.siblings||"",onChange:l,required:!0}),a.jsx(b,{fullWidth:!0,type:"number",label:"Height",size:"small",variant:"standard",name:"height",value:p.height||"",onChange:l,required:!0}),a.jsx(b,{fullWidth:!0,type:"number",label:"Weight",size:"small",variant:"standard",name:"weight",value:p.weight||"",onChange:l,required:!0})]}),a.jsxs(S,{item:!0,xs:12,md:6,sx:{p:1,display:"flex",flexDirection:"column",gap:2},children:[a.jsx(b,{fullWidth:!0,type:"number",label:"Around Head",size:"small",variant:"standard",name:"around_head",value:p.around_head||"",onChange:l,required:!0}),a.jsxs(H,{fullWidth:!0,variant:"standard",children:[a.jsx(B,{children:"--Province--"}),a.jsx(V,{name:"province_id",value:p.province_id||"",onChange:l,required:!0,children:t==null?void 0:t.map(P=>a.jsx(q,{value:P.id,children:P.name},P.id))})]}),u&&a.jsxs(H,{fullWidth:!0,variant:"standard",children:[a.jsx(B,{children:"--Regency--"}),a.jsx(V,{name:"regency_id",value:p.regency_id||"",onChange:l,required:!0,children:D==null?void 0:D.map(P=>a.jsx(q,{value:P.id,children:P.name},P.id))})]}),h&&a.jsxs(H,{fullWidth:!0,variant:"standard",children:[a.jsx(B,{children:"--District--"}),a.jsx(V,{name:"district_id",value:p.district_id||"",onChange:l,required:!0,children:w==null?void 0:w.map(P=>a.jsx(q,{value:P.id,children:P.name},P.id))})]}),s&&a.jsxs(H,{fullWidth:!0,variant:"standard",children:[a.jsx(B,{children:"--Village--"}),a.jsx(V,{name:"village_id",value:p.village_id||"",onChange:l,required:!0,children:k==null?void 0:k.map(P=>a.jsx(q,{value:P.id.trim(),children:P.name},P.id.trim()))})]}),a.jsx(b,{fullWidth:!0,label:"Address",size:"small",variant:"standard",name:"address",value:p.address||"",onChange:l,required:!0}),a.jsx(b,{fullWidth:!0,label:"Postal Code",size:"small",variant:"standard",name:"postal_code",value:p.postal_code||"",onChange:l,required:!0})]})]}),a.jsx(te,{sx:{display:"flex",justifyContent:"end"},children:a.jsx(A,{variant:"contained",color:"success",type:"submit",children:m?a.jsx(L,{size:24,color:"inherit"}):"save"})})]})})},_a=({info:t})=>{const[r,{isSuccess:c,data:i,isLoading:u,error:d,reset:h}]=Oe(),[n,{isSuccess:s,data:o,isLoading:C,error:f,reset:j}]=We(),[y,m]=g.useState((t==null?void 0:t.family_info)||[]),[_,D]=g.useState({family_name:"",family_gender:"",family_birth_date:O()}),w=l=>{const{name:T,value:I}=l.target;D({..._,[T]:I})},k=l=>{D({..._,family_birth_date:l})},p=()=>{const l={family_name:_.family_name,family_gender:_.family_gender,family_birth_date:_.family_birth_date,id:Date.now()},T={nis:t.nis,familyData:[...y,l]};r(T).unwrap().then(()=>{m(I=>[...I,l]),D({family_name:"",family_gender:"",family_birth_date:O()})})},x=l=>{const T={nis:t.nis,familyId:l};n(T).unwrap().then(()=>{m(y.filter(I=>I.id!==l))})};return g.useEffect(()=>{c&&(W.success(i.message),h()),d&&(W.error(d.data.message),h())},[c,d,h,i]),g.useEffect(()=>{s&&(W.success(o.message),j()),f&&(W.error(f.data.message),j())},[s,f,o]),a.jsx($,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:2,p:1},children:a.jsxs(S,{container:!0,children:[a.jsx(S,{item:!0,xs:12,md:8,sx:{p:1},children:a.jsx(pe,{component:$,sx:{maxHeight:{xs:500,md:450,lg:530},overflow:"auto"},children:a.jsxs(fe,{children:[a.jsx(_e,{children:a.jsx(J,{children:["No","Name","Gender","Birth Date","Action"].map(l=>a.jsx(R,{children:l},l))})}),a.jsx(xe,{children:y.map((l,T)=>a.jsxs(J,{children:[a.jsx(R,{children:T+1}),a.jsx(R,{children:l.family_name}),a.jsx(R,{children:l.family_gender}),a.jsx(R,{children:O(l.family_birth_date).format("DD/MM/YYYY")}),a.jsx(R,{children:a.jsx(be,{color:"error",onClick:()=>x(l.id),children:C?a.jsx(L,{size:20,color:"inherit"}):a.jsx(me,{})})})]},l.id))})]})})}),a.jsx(S,{item:!0,xs:12,md:4,sx:{p:1},children:a.jsxs("form",{style:{display:"flex",flexDirection:"column",gap:"1rem"},onSubmit:l=>{l.preventDefault(),p()},children:[a.jsx(b,{fullWidth:!0,size:"small",variant:"standard",label:"Name",name:"family_name",value:_.family_name,onChange:w,required:!0}),a.jsxs(H,{required:!0,children:[a.jsx(B,{children:"--Gender--"}),a.jsxs(V,{label:"--Gender--",name:"family_gender",value:_.family_gender,onChange:w,children:[a.jsx(q,{value:"Male ",children:"Male"}),a.jsx(q,{value:"Female",children:"Female"})]})]}),a.jsx(U,{dateAdapter:K,children:a.jsx(X,{label:"Birth Date",name:"family_birth_date",value:_.family_birth_date,onChange:k,slotProps:{textField:{fullWidth:!0,variant:"standard"}}})}),a.jsx(A,{fullWidth:!0,variant:"contained",color:"success",type:"submit",children:u?a.jsx(L,{size:20,color:"inherit"}):"Add"})]})})]})})},ee=t=>t!=null&&t.startsWith("0")?`62${t.slice(1)}`:t,ae=t=>{const r=t.replace(/[^\d]/g,"");return`Rp ${parseInt(r,10).toLocaleString("id-ID")}`},oe=t=>t.replace(/[^\d]/g,""),xa=({info:t})=>{const[r,{data:c,isSuccess:i,isLoading:u,error:d,reset:h}]=ze(),[n,s]=g.useState({father_nik:"",father_name:"",father_birth_place:"",father_birth_date:O(),father_job:"",father_position:"",father_earning:0,father_phone:"",mother_nik:"",mother_name:"",mother_birth_place:"",mother_birth_date:O(),mother_job:"",mother_position:"",mother_earning:0,mother_phone:"",nis:""}),o=m=>{const{name:_,value:D}=m.target;s({...n,[_]:_==="father_phone"||_==="mother_phone"?ee(D):D})},C=m=>{const{name:_,value:D}=m.target;s({...n,[_]:ae(D)})},f=m=>{s({...n,father_birth_date:m})},j=m=>{s({...n,mother_birth_date:m})},y=m=>{m.preventDefault();const _={...n,father_earning:oe(n.father_earning),mother_earning:oe(n.mother_earning)};r(_)};return g.useEffect(()=>{i&&(W.success(c.message),h()),d&&(W.error(d.data.message),h())},[i,d,c]),g.useEffect(()=>{t&&s({father_nik:t.father_nik,father_name:t.father_name,father_birth_place:t.father_birth_place,father_birth_date:t.father_birth_date?O(t.father_birth_date):O(),father_job:t.father_job,father_position:t.father_position,father_earning:t.father_earning?ae(t.father_earning):0,father_phone:ee(t.father_phone),mother_nik:t.mother_nik,mother_name:t.mother_name,mother_birth_place:t.mother_birth_place,mother_birth_date:t.mother_birth_date?O(t.mother_birth_date):O(),mother_job:t.mother_job,mother_position:t.mother_position,mother_earning:t.mother_earning?ae(t.mother_earning):0,mother_phone:ee(t.mother_phone),nis:t.nis})},[t]),a.jsx($,{sx:{width:"100%",p:1},children:a.jsxs("form",{onSubmit:y,children:[a.jsxs(S,{container:!0,children:[a.jsxs(S,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column",gap:2,p:1},children:[a.jsx(b,{fullWidth:!0,type:"number",label:"Father NIK",size:"small",variant:"standard",name:"father_nik",value:n.father_nik||"",onChange:o}),a.jsx(b,{fullWidth:!0,label:"Father Name",size:"small",variant:"standard",name:"father_name",value:n.father_name||"",onChange:o}),a.jsx(b,{fullWidth:!0,label:"Father Birth Place",size:"small",variant:"standard",name:"father_birth_place",value:n.father_birth_place||"",onChange:o}),a.jsx(U,{dateAdapter:K,children:a.jsx(X,{label:"Father Birth Date",value:n.father_birth_date,onChange:f,slotProps:{textField:{fullWidth:!0,variant:"standard"}}})}),a.jsx(b,{fullWidth:!0,label:"Father Job",size:"small",variant:"standard",name:"father_job",value:n.father_job||"",onChange:o}),a.jsx(b,{fullWidth:!0,label:"Father Position",size:"small",variant:"standard",name:"father_position",value:n.father_position||"",onChange:o}),a.jsx(b,{fullWidth:!0,label:"Father Earning",size:"small",variant:"standard",name:"father_earning",onChange:C,value:n.father_earning||""}),a.jsx(b,{fullWidth:!0,type:"number",label:"Father Phone",size:"small",variant:"standard",name:"father_phone",onChange:o,value:n.father_phone||""})]}),a.jsxs(S,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column",gap:2,p:1},children:[a.jsx(b,{fullWidth:!0,type:"number",label:"Mohter NIK",size:"small",variant:"standard",name:"mother_nik",value:n.mother_nik||"",onChange:o}),a.jsx(b,{fullWidth:!0,label:"Mother Name",size:"small",variant:"standard",name:"mother_name",value:n.mother_name||"",onChange:o}),a.jsx(b,{fullWidth:!0,label:"Mother Birth Place",size:"small",variant:"standard",name:"mother_birth_place",value:n.mother_birth_place||"",onChange:o}),a.jsx(U,{dateAdapter:K,children:a.jsx(X,{label:"Mother Birth Date",value:n.mother_birth_date,onChange:j,slotProps:{textField:{fullWidth:!0,variant:"standard"}}})}),a.jsx(b,{fullWidth:!0,label:"Mother Job",size:"small",variant:"standard",name:"mother_job",value:n.mother_job||"",onChange:o}),a.jsx(b,{fullWidth:!0,label:"Mother Position",size:"small",variant:"standard",name:"mother_position",value:n.mother_position||"",onChange:o}),a.jsx(b,{fullWidth:!0,label:"Mother Earning",size:"small",variant:"standard",name:"mother_earning",onChange:C,value:n.mother_earning||""}),a.jsx(b,{fullWidth:!0,type:"number",label:"Mother phone",size:"small",variant:"standard",name:"mother_phone",onChange:o,value:n.mother_phone||""})]})]}),a.jsx(te,{sx:{display:"flex",justifyContent:"end"},children:a.jsx(A,{variant:"contained",color:"success",type:"submit",children:u?a.jsx(L,{size:20,color:"inherit"}):"save"})})]})})},ba=({info:t})=>{const[r,{data:c,isLoading:i,isSuccess:u,error:d,reset:h}]=Re(),[n,{isSuccess:s,data:o,isLoading:C,error:f,reset:j}]=Ie(),[y,m]=g.useState((t==null?void 0:t.health_records)||[]),[_,D]=g.useState({health_notes:""}),w=x=>{const{name:l,value:T}=x.target;D({..._,[l]:T})},k=()=>{const x={..._,id:Date.now()};m(T=>[...T,x]);const l={nis:t==null?void 0:t.nis,healthData:[...y,x].map(T=>({...T,id:T.id}))};r(l),D({health_notes:""})},p=x=>{const l={nis:t==null?void 0:t.nis,healthId:x};n(l).unwrap().then(()=>{m(y.filter(T=>T.id!==x))})};return g.useEffect(()=>{u&&(W.success(c.message),h()),d&&(W.error(d.data.message),h())},[c,u,d,h]),g.useEffect(()=>{s&&(W.success(o.message),j()),f&&(W.error(f.data.message),j())},[s,f,o]),a.jsx($,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:2,p:1},children:a.jsxs(S,{container:!0,children:[a.jsx(S,{item:!0,xs:12,md:8,sx:{p:1},children:a.jsx(pe,{component:$,sx:{maxHeight:{xs:500,md:450,lg:530},overflow:"auto"},children:a.jsxs(fe,{children:[a.jsx(_e,{children:a.jsx(J,{children:["No","Note","Actions"].map(x=>a.jsx(R,{children:x},x))})}),a.jsx(xe,{children:y.map((x,l)=>a.jsxs(J,{children:[a.jsx(R,{children:l+1}),a.jsx(R,{children:x.health_notes}),a.jsx(R,{children:a.jsx(be,{color:"error",onClick:()=>p(x.id),children:i?a.jsx(L,{size:20,color:"inherit"}):a.jsx(me,{})})})]},x.id))})]})})}),a.jsx(S,{item:!0,xs:12,md:4,sx:{p:1},children:a.jsxs("form",{style:{display:"flex",flexDirection:"column",gap:"1rem"},onSubmit:x=>{x.preventDefault(),k()},children:[a.jsx(b,{fullWidth:!0,required:!0,size:"small",variant:"standard",label:"Health Notes",name:"health_notes",value:_.health_notes,onChange:w}),a.jsx(A,{fullWidth:!0,variant:"contained",color:"success",type:"submit",children:i?a.jsx(L,{size:20,color:"inherit"}):"Add"})]})})]})})},at=()=>{const[t,r]=g.useState(!0),[c,i]=g.useState(!1),[u,d]=g.useState(!1),[h,n]=g.useState(!1),s=()=>{r(!0),i(!1),d(!1),n(!1)},o=()=>{r(!1),i(!0),d(!1),n(!1)},C=()=>{r(!1),i(!1),d(!0),n(!1)},f=()=>{r(!1),i(!1),d(!1),n(!0)},j=Ne(),{data:y}=Ae(),{data:m}=$e(j.nis,{skip:!j.nis});return a.jsxs(qe,{children:[a.jsx(Ee,{title:"Database"}),a.jsx(S,{container:!0,sx:{minHeight:"85vh",display:"flex",flexDirection:"column"},children:a.jsxs(te,{sx:{display:"flex",flexDirection:"column",gap:2,justifyContent:"center",alignItems:"center"},children:[a.jsx($,{children:a.jsxs(ta,{children:[a.jsx(A,{onClick:s,variant:t?"contained":"outlined",color:"primary",children:"student"}),m&&a.jsx(A,{onClick:o,variant:c?"contained":"outlined",color:"primary",children:"parents"}),m&&a.jsx(A,{onClick:C,variant:u?"contained":"outlined",color:"primary",children:"family"}),m&&a.jsx(A,{onClick:f,variant:h?"contained":"outlined",color:"primary",children:"health"})]})}),t&&a.jsx(fa,{provinces:y,info:m,name:j.studentName.replace(/-/g," "),nis:j.nis}),c&&a.jsx(xa,{info:m}),u&&a.jsx(_a,{info:m}),h&&a.jsx(ba,{info:m})]})})]})};export{at as default};
