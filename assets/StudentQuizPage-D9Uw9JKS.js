import{ap as A,aq as S,aj as v,r as n,ar as b,as as z,at as h,j as o,au as g,av as N,a as X,aw as Z,B as u,c as w,C as ee,b as se,am as oe,ax as te}from"./index-CBqzxWS9.js";import{L as re}from"./Layout-BU75CgJ9.js";import{P as ne}from"./PageName-C4sP66Ht.js";/* empty css               */import{P as Q}from"./Paper-CHCCFYqF.js";import{B as ie,T as x}from"./Typography-CrWPuPVK.js";import{M as ce,F as ae}from"./Modal-CBB7Z81D.js";import{I as T}from"./Input-Lnaa8h_K.js";import{B as le}from"./Button-B_xu-GsZ.js";import"./FolderCopy-DvBcCNgU.js";import"./getThemeProps-CbqsDNvq.js";import"./createSvgIcon-BY7hztag.js";import"./GlobalStyles-DyN9rhoG.js";import"./listItemIconClasses-CIQzwbog.js";import"./useTheme-Co8QHWII.js";import"./ChevronRight-BeZsILl3.js";import"./ExitToApp-C0pvusEU.js";import"./Toolbar-CDjnfqYK.js";import"./IconButton-fUZ_sEew.js";import"./utils-DYWkOjGQ.js";function ue(e){return A("MuiCard",e)}S("MuiCard",["root"]);const me=["className","raised"],pe=e=>{const{classes:s}=e;return N({root:["root"]},ue,s)},fe=v(Q,{name:"MuiCard",slot:"Root",overridesResolver:(e,s)=>s.root})(()=>({overflow:"hidden"})),he=n.forwardRef(function(s,t){const r=b({props:s,name:"MuiCard"}),{className:l,raised:c=!1}=r,m=z(r,me),a=h({},r,{raised:c}),i=pe(a);return o.jsx(fe,h({className:g(i.root,l),elevation:c?8:void 0,ref:t,ownerState:a},m))});function de(e){return A("MuiCardActionArea",e)}const j=S("MuiCardActionArea",["root","focusVisible","focusHighlight"]),Ce=["children","className","focusVisibleClassName"],xe=e=>{const{classes:s}=e;return N({root:["root"],focusHighlight:["focusHighlight"]},de,s)},ge=v(ie,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(e,s)=>s.root})(({theme:e})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${j.focusHighlight}`]:{opacity:(e.vars||e).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${j.focusVisible} .${j.focusHighlight}`]:{opacity:(e.vars||e).palette.action.focusOpacity}})),ve=v("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(e,s)=>s.focusHighlight})(({theme:e})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:e.transitions.create("opacity",{duration:e.transitions.duration.short})})),ye=n.forwardRef(function(s,t){const r=b({props:s,name:"MuiCardActionArea"}),{children:l,className:c,focusVisibleClassName:m}=r,a=z(r,Ce),i=r,f=xe(i);return o.jsxs(ge,h({className:g(f.root,c),focusVisibleClassName:g(m,f.focusVisible),ref:t,ownerState:i},a,{children:[l,o.jsx(ve,{className:f.focusHighlight,ownerState:i})]}))});function je(e){return A("MuiCardContent",e)}S("MuiCardContent",["root"]);const we=["className","component"],Ae=e=>{const{classes:s}=e;return N({root:["root"]},je,s)},Se=v("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,s)=>s.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),be=n.forwardRef(function(s,t){const r=b({props:s,name:"MuiCardContent"}),{className:l,component:c="div"}=r,m=z(r,we),a=h({},r,{component:c}),i=Ae(a);return o.jsx(Se,h({as:c,className:g(i.root,l),ownerState:a,ref:t},m))}),$=e=>{try{const s=new Date(e);return new Intl.DateTimeFormat("en-EN",{weekday:"short",day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"numeric"}).format(s)}catch{return console.error("Invalid date string:",e),"Invalid date"}},ze=({data:e,user:s,log:t})=>{const r=X(),[l,{data:c,isLoading:m,isSuccess:a,error:i,reset:f}]=Z(),[D,M]=n.useState(!1),[_,q]=n.useState(!1),[R,F]=n.useState(""),[B,E]=n.useState(!1),[H,I]=n.useState(""),[k,P]=n.useState(""),[U,L]=n.useState(""),[d,V]=n.useState(""),G=(p,C,y,W,K,J)=>{M(!0),q(p),E(C),I(y),P(W),L(K),V(J)},O=p=>{if(p.preventDefault(),R!==_)return u.error("Token is mismatch");if(!B)return u.error("Quiz is inactive");const C=new Date;if(C<new Date(H))return u.error("Quiz have not started yet");if(C>new Date(k))return u.error("Quiz is finished");if(t&&t.isDone&&t.quiz_id===d)return u.error("You have already joined this exam");if(t&&t.isActive&&t.quiz_id===d)return u.error("You are joining this exam");const y={quizId:d,nis:s.nis};l(y)},Y=()=>{M(!1),F("")};return n.useEffect(()=>{if(a){u.success(c.message);const p=U.replace(/\s+/g,"-");r(`/student/exam/${p}/${d}/${H}/${k}`),f(),localStorage.removeItem("questions")}i&&(u.error(i.data.message),f())},[a,c,i]),o.jsxs(n.Fragment,{children:[o.jsx(he,{sx:{width:260,bgcolor:new Date(e==null?void 0:e.start)>new Date?"#015AFF":new Date(e==null?void 0:e.end)<new Date?"#FF1414":"#37FF21",color:new Date(e==null?void 0:e.start)>new Date?"#F7F7F7":new Date(e==null?void 0:e.end)<new Date?"#0C0C0C":"#000000"},children:o.jsx(ye,{onClick:()=>G(e==null?void 0:e.token,e==null?void 0:e.status,e==null?void 0:e.start,e==null?void 0:e.end,e==null?void 0:e.quiz,e==null?void 0:e.quiz_id),children:o.jsxs(be,{children:[o.jsx(x,{fontSize:16,children:e==null?void 0:e.quiz}),o.jsx(x,{fontSize:12,fontStyle:"italic",children:e==null?void 0:e.teacher}),o.jsxs(x,{fontSize:12,sx:{mt:1},children:["Start: ",$(e==null?void 0:e.start)]}),o.jsxs(x,{fontSize:12,children:["End: ",$(e==null?void 0:e.end)]})]})})}),o.jsx(ce,{open:D,onClose:Y,closeAfterTransition:!0,children:o.jsx(ae,{in:D,children:o.jsx(w,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:o.jsxs("form",{onSubmit:O,className:"form-confirm",children:[o.jsx(T,{placeholder:"TOKEN",value:R,onChange:p=>F(p.target.value)}),o.jsx(le,{type:"submit",variant:"contained",color:"error",children:m?o.jsx(ee,{size:20,color:"inherit"}):"submit"})]})})})})]})},Oe=()=>{const{user:e}=se(r=>r.authentication),{data:s}=oe(e==null?void 0:e.grade_id,{skip:!(e!=null&&e.grade_id)}),{data:t}=te(e==null?void 0:e.nis,{skip:!(e!=null&&e.nis)});return o.jsxs(re,{children:[o.jsx(ne,{title:"Quiz"}),o.jsxs(w,{sx:{height:"82vh",display:"flex",flexDirection:"column",gap:1},children:[o.jsx(Q,{sx:{p:1},children:o.jsx(T,{placeholder:"Search Exam"})}),o.jsx(w,{sx:{display:"flex",flexWrap:"wrap",gap:1,maxHeight:520,overflow:"auto",alignItems:"start",overflowY:"auto"},children:s==null?void 0:s.map((r,l)=>o.jsx(ze,{data:r,user:e,log:t},l))})]})]})};export{Oe as default};
