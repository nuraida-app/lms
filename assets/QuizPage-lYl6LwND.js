import{at as v,aw as me,ax as G,r as i,as as Q,j as t,au as D,av as H,ap as O,aj as N,ar as A,aq as J,ay as re,az as fe,c as w,i as he,M as se,aA as xe,aB as ge,B,a0 as be,aC as ve,b as Ce,aD as ye}from"./index-Bj3C8koD.js";import{s as je,S as Re}from"./Stack-PNbU7XpE.js";import{u as Se}from"./useThemeProps-d3JYUmB4.js";import{T as U,u as ke}from"./Typography-BrPjQYMZ.js";/* empty css               */import{c as ae,a as Pe,u as Ie,b as Me,r as $e}from"./createSvgIcon-D-BIaofd.js";import{E as we}from"./Editor-D0OoKASN.js";import{P as ne}from"./Paper-Dbdqoibw.js";import{B as F}from"./Button-D4WmCtXy.js";import{I as Fe}from"./IconButton-DpREeSCV.js";import{G as W}from"./Grid-BFZ5c2Eo.js";import{F as ze}from"./FormControl-BUrl-vBt.js";import{u as le,f as ie}from"./utils-ChUDx9XN.js";import{S as Ge}from"./SwitchBase-CAB8xt9O.js";import{a as _e,d as Le}from"./ChevronRight-CBf5NFe3.js";import{M as Ne,F as We}from"./Modal-DP-e0wkE.js";import"./getThemeProps-TTdwN0UH.js";import"./quill.snow-BvzAP_Du.js";import"./useTheme-CpZLhXHk.js";const De=["className","component","disableGutters","fixed","maxWidth","classes"],Te=me(),Be=je("div",{name:"MuiContainer",slot:"Root",overridesResolver:(o,e)=>{const{ownerState:r}=o;return[e.root,e[`maxWidth${G(String(r.maxWidth))}`],r.fixed&&e.fixed,r.disableGutters&&e.disableGutters]}}),Ee=o=>Se({props:o,name:"MuiContainer",defaultTheme:Te}),Ue=(o,e)=>{const r=u=>O(e,u),{classes:s,fixed:l,disableGutters:n,maxWidth:a}=o,c={root:["root",a&&`maxWidth${G(String(a))}`,l&&"fixed",n&&"disableGutters"]};return H(c,r,s)};function Qe(o={}){const{createStyledComponent:e=Be,useThemeProps:r=Ee,componentName:s="MuiContainer"}=o,l=e(({theme:a,ownerState:c})=>v({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!c.disableGutters&&{paddingLeft:a.spacing(2),paddingRight:a.spacing(2),[a.breakpoints.up("sm")]:{paddingLeft:a.spacing(3),paddingRight:a.spacing(3)}}),({theme:a,ownerState:c})=>c.fixed&&Object.keys(a.breakpoints.values).reduce((u,f)=>{const S=f,h=a.breakpoints.values[S];return h!==0&&(u[a.breakpoints.up(S)]={maxWidth:`${h}${a.breakpoints.unit}`}),u},{}),({theme:a,ownerState:c})=>v({},c.maxWidth==="xs"&&{[a.breakpoints.up("xs")]:{maxWidth:Math.max(a.breakpoints.values.xs,444)}},c.maxWidth&&c.maxWidth!=="xs"&&{[a.breakpoints.up(c.maxWidth)]:{maxWidth:`${a.breakpoints.values[c.maxWidth]}${a.breakpoints.unit}`}}));return i.forwardRef(function(c,u){const f=r(c),{className:S,component:h="div",disableGutters:k=!1,fixed:y=!1,maxWidth:g="lg"}=f,j=Q(f,De),p=v({},f,{component:h,disableGutters:k,fixed:y,maxWidth:g}),C=Ue(p,s);return t.jsx(l,v({as:h,ownerState:p,className:D(C.root,S),ref:u},j))})}const He=Qe({createStyledComponent:N("div",{name:"MuiContainer",slot:"Root",overridesResolver:(o,e)=>{const{ownerState:r}=o;return[e.root,e[`maxWidth${G(String(r.maxWidth))}`],r.fixed&&e.fixed,r.disableGutters&&e.disableGutters]}}),useThemeProps:o=>A({props:o,name:"MuiContainer"})});function Oe(o){return O("MuiFormControlLabel",o)}const E=J("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Ve=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Ae=o=>{const{classes:e,disabled:r,labelPlacement:s,error:l,required:n}=o,a={root:["root",r&&"disabled",`labelPlacement${G(s)}`,l&&"error",n&&"required"],label:["label",r&&"disabled"],asterisk:["asterisk",l&&"error"]};return H(a,Oe,e)},Je=N("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(o,e)=>{const{ownerState:r}=o;return[{[`& .${E.label}`]:e.label},e.root,e[`labelPlacement${G(r.labelPlacement)}`]]}})(({theme:o,ownerState:e})=>v({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${E.disabled}`]:{cursor:"default"}},e.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},e.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},e.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${E.label}`]:{[`&.${E.disabled}`]:{color:(o.vars||o).palette.text.disabled}}})),Ze=N("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(o,e)=>e.asterisk})(({theme:o})=>({[`&.${E.error}`]:{color:(o.vars||o).palette.error.main}})),Ke=i.forwardRef(function(e,r){var s,l;const n=A({props:e,name:"MuiFormControlLabel"}),{className:a,componentsProps:c={},control:u,disabled:f,disableTypography:S,label:h,labelPlacement:k="end",required:y,slotProps:g={}}=n,j=Q(n,Ve),p=le(),C=(s=f??u.props.disabled)!=null?s:p==null?void 0:p.disabled,d=y??u.props.required,z={disabled:C,required:d};["checked","name","onChange","value","inputRef"].forEach(x=>{typeof u.props[x]>"u"&&typeof n[x]<"u"&&(z[x]=n[x])});const M=ie({props:n,muiFormControl:p,states:["error"]}),_=v({},n,{disabled:C,labelPlacement:k,required:d,error:M.error}),$=Ae(_),P=(l=g.typography)!=null?l:c.typography;let m=h;return m!=null&&m.type!==U&&!S&&(m=t.jsx(U,v({component:"span"},P,{className:D($.label,P==null?void 0:P.className),children:m}))),t.jsxs(Je,v({className:D($.root,a),ownerState:_,ref:r},j,{children:[i.cloneElement(u,z),d?t.jsxs(Re,{display:"block",children:[m,t.jsxs(Ze,{ownerState:_,"aria-hidden":!0,className:$.asterisk,children:["â€‰","*"]})]}):m]}))});function Xe(o){return O("MuiFormGroup",o)}J("MuiFormGroup",["root","row","error"]);const Ye=["className","row"],qe=o=>{const{classes:e,row:r,error:s}=o;return H({root:["root",r&&"row",s&&"error"]},Xe,e)},eo=N("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(o,e)=>{const{ownerState:r}=o;return[e.root,r.row&&e.row]}})(({ownerState:o})=>v({display:"flex",flexDirection:"column",flexWrap:"wrap"},o.row&&{flexDirection:"row"})),oo=i.forwardRef(function(e,r){const s=A({props:e,name:"MuiFormGroup"}),{className:l,row:n=!1}=s,a=Q(s,Ye),c=le(),u=ie({props:s,muiFormControl:c,states:["error"]}),f=v({},s,{row:n,error:u.error}),S=qe(f);return t.jsx(eo,v({className:D(S.root,l),ownerState:f,ref:r},a))}),to=ae(t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),ro=ae(t.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),so=N("span",{shouldForwardProp:re})({position:"relative",display:"flex"}),ao=N(to)({transform:"scale(1)"}),no=N(ro)(({theme:o,ownerState:e})=>v({left:0,position:"absolute",transform:"scale(0)",transition:o.transitions.create("transform",{easing:o.transitions.easing.easeIn,duration:o.transitions.duration.shortest})},e.checked&&{transform:"scale(1)",transition:o.transitions.create("transform",{easing:o.transitions.easing.easeOut,duration:o.transitions.duration.shortest})}));function ce(o){const{checked:e=!1,classes:r={},fontSize:s}=o,l=v({},o,{checked:e});return t.jsxs(so,{className:r.root,ownerState:l,children:[t.jsx(ao,{fontSize:s,className:r.background,ownerState:l}),t.jsx(no,{fontSize:s,className:r.dot,ownerState:l})]})}const de=i.createContext(void 0);function lo(){return i.useContext(de)}function io(o){return O("MuiRadio",o)}const q=J("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),co=["checked","checkedIcon","color","icon","name","onChange","size","className"],uo=o=>{const{classes:e,color:r,size:s}=o,l={root:["root",`color${G(r)}`,s!=="medium"&&`size${G(s)}`]};return v({},e,H(l,io,e))},po=N(Ge,{shouldForwardProp:o=>re(o)||o==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(o,e)=>{const{ownerState:r}=o;return[e.root,r.size!=="medium"&&e[`size${G(r.size)}`],e[`color${G(r.color)}`]]}})(({theme:o,ownerState:e})=>v({color:(o.vars||o).palette.text.secondary},!e.disableRipple&&{"&:hover":{backgroundColor:o.vars?`rgba(${e.color==="default"?o.vars.palette.action.activeChannel:o.vars.palette[e.color].mainChannel} / ${o.vars.palette.action.hoverOpacity})`:fe(e.color==="default"?o.palette.action.active:o.palette[e.color].main,o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${q.checked}`]:{color:(o.vars||o).palette[e.color].main}},{[`&.${q.disabled}`]:{color:(o.vars||o).palette.action.disabled}}));function mo(o,e){return typeof e=="object"&&e!==null?o===e:String(o)===String(e)}const ee=t.jsx(ce,{checked:!0}),oe=t.jsx(ce,{}),fo=i.forwardRef(function(e,r){var s,l;const n=A({props:e,name:"MuiRadio"}),{checked:a,checkedIcon:c=ee,color:u="primary",icon:f=oe,name:S,onChange:h,size:k="medium",className:y}=n,g=Q(n,co),j=v({},n,{color:u,size:k}),p=uo(j),C=lo();let d=a;const z=Pe(h,C&&C.onChange);let M=S;return C&&(typeof d>"u"&&(d=mo(C.value,n.value)),typeof M>"u"&&(M=C.name)),t.jsx(po,v({type:"radio",icon:i.cloneElement(f,{fontSize:(s=oe.props.fontSize)!=null?s:k}),checkedIcon:i.cloneElement(c,{fontSize:(l=ee.props.fontSize)!=null?l:k}),ownerState:j,classes:p,name:M,checked:d,onChange:z,ref:r,className:D(p.root,y)},g))});function ho(o){return O("MuiRadioGroup",o)}J("MuiRadioGroup",["root","row","error"]);const xo=["actions","children","className","defaultValue","name","onChange","value"],go=o=>{const{classes:e,row:r,error:s}=o;return H({root:["root",r&&"row",s&&"error"]},ho,e)},bo=i.forwardRef(function(e,r){const{actions:s,children:l,className:n,defaultValue:a,name:c,onChange:u,value:f}=e,S=Q(e,xo),h=i.useRef(null),k=go(e),[y,g]=Ie({controlled:f,default:a,name:"RadioGroup"});i.useImperativeHandle(s,()=>({focus:()=>{let d=h.current.querySelector("input:not(:disabled):checked");d||(d=h.current.querySelector("input:not(:disabled)")),d&&d.focus()}}),[]);const j=ke(r,h),p=Me(c),C=i.useMemo(()=>({name:p,onChange(d){g(d.target.value),u&&u(d,d.target.value)},value:y}),[p,u,g,y]);return t.jsx(de.Provider,{value:C,children:t.jsx(oo,v({role:"radiogroup",ref:j,className:D(k.root,n)},S,{children:l}))})}),vo=({user:o,quiz:e})=>t.jsx(w,{sx:{height:70,bgcolor:"#4D44B5",boxShadow:4,p:1},children:t.jsxs(He,{sx:{height:"100%",display:"flex",alignItems:"center",color:"#FFFFFF",justifyContent:"space-between"},children:[t.jsx(U,{fontWeight:"bold",children:o==null?void 0:o.name}),t.jsx(U,{align:"right",fontSize:12,children:e})]})});var Y={},Co=he;Object.defineProperty(Y,"__esModule",{value:!0});var ue=Y.default=void 0,yo=Co($e()),jo=t;ue=Y.default=(0,yo.default)((0,jo.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8m0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4z"}),"Sync");const te=o=>({__html:o}),Ro=({setOpen:o,question:e,note:r,number:s,refresh:l,answers:n})=>{const a=se(),c=a.start,u=a.end,[f,S]=i.useState(null),[h,k]=i.useState([]);i.useEffect(()=>{if(r!=null&&r.shuffle){const b=[...(e==null?void 0:e.choices)||[]].sort(()=>Math.random()-.5);k(b)}else k((e==null?void 0:e.choices)||[])},[r,e]),i.useEffect(()=>{const b=new Date(u).getTime(),L=setInterval(()=>{const pe=new Date().getTime(),V=b-pe;if(V<=0)clearInterval(L),localStorage.removeItem("questions"),window.location.href="https://center.nibs.sch.id/student/exam";else{const Z=Math.floor(V%864e5/36e5),K=Math.floor(V%(1e3*60*60)/(1e3*60)),X=Math.floor(V%(1e3*60)/1e3);S(`${Z<10?"0"+Z:Z}:${K<10?"0"+K:K}:${X<10?"0"+X:X}`)}},1e3);return()=>clearInterval(L)},[c,u]);const[y,g]=i.useState(""),[j,{data:p,isSuccess:C,error:d,reset:z}]=xe(),[M,{data:_,isSuccess:$,error:P}]=ge(),m=n==null?void 0:n.find(b=>b.question_id===(e==null?void 0:e.id)),x=b=>{const L={quizId:e==null?void 0:e.quiz_id,questionId:e==null?void 0:e.id,type:e==null?void 0:e.type,mc:b.target.value,poin:e==null?void 0:e.score};j(L)},R=b=>{b.preventDefault();const L={quizId:e==null?void 0:e.quiz_id,questionId:e==null?void 0:e.id,type:e==null?void 0:e.type,essay:y};j(L)},I=()=>{const b={quizId:e==null?void 0:e.quiz_id,questionId:e==null?void 0:e.id};M(b)};i.useEffect(()=>{C&&(B.success(p.message),g(""),z()),d&&(B.error(d.data.message),z())},[p,C,d]),i.useEffect(()=>{$&&B.info(_.message),P&&B.error(P.data.message)},[_,$,P]);const T=()=>{localStorage.removeItem("questions"),l()};return t.jsxs(i.Fragment,{children:[t.jsxs(ne,{sx:{p:1,display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[t.jsx(F,{variant:"contained",color:"error",sx:{display:{xs:"none",md:"flex"}},children:s}),t.jsx(F,{variant:"contained",color:"error",sx:{display:{xs:"flex",md:"none"}},onClick:()=>o(!0),children:s}),t.jsxs(w,{sx:{display:"flex",gap:1},children:[t.jsx(F,{variant:"contained",color:"error",children:f}),t.jsx(Fe,{color:"error",onClick:T,children:t.jsx(ue,{})})]})]}),t.jsxs(W,{container:!0,sx:{height:{xs:"75vh",md:"67vh"},mb:1,p:1,bgcolor:"white",borderRadius:1,boxShadow:3},children:[t.jsx(W,{item:!0,xs:12,md:8,children:t.jsx(w,{sx:{height:{xs:300,md:410},p:1,overflow:"auto"},children:t.jsx(w,{sx:{minHeight:"100%"},dangerouslySetInnerHTML:te(e==null?void 0:e.question)})})}),t.jsx(W,{item:!0,xs:12,md:4,children:t.jsxs(w,{sx:{height:{xs:250,md:410,lg:450,xl:480},overflow:"auto",p:1,display:"flex",flexDirection:"column",gap:1},children:[(e==null?void 0:e.type)===1&&t.jsx(ze,{sx:{ml:1},children:t.jsx(bo,{"aria-labelledby":"demo-controlled-radio-buttons-group",name:"controlled-radio-buttons-group",value:(m==null?void 0:m.mc)||"",onChange:x,children:h.filter(b=>b.text!==null).map((b,L)=>t.jsx(Ke,{control:t.jsx(fo,{}),value:b.value,label:t.jsx(U,{dangerouslySetInnerHTML:te(b.text)})},L))})}),(e==null?void 0:e.type)===2&&t.jsxs("form",{onSubmit:R,children:[t.jsx(we,{placeholder:"Write your answer here",value:(m==null?void 0:m.essay)||y,onChange:b=>g(b)}),t.jsx(F,{fullWidth:!0,variant:m!=null&&m.essay?"contained":"outlined",color:"success",type:"submit",sx:{mt:1},children:"Save"})]}),t.jsx(F,{variant:m!=null&&m.doubt?"contained":"outlined",color:"warning",onClick:I,children:"doubt"})]})})]})]})},Qo=()=>{const o=se(),e=o.quizId,r=o.quizname.replace(/-/g," "),{data:s,refetch:l}=be(e,{skip:!e}),{data:n}=ve(e,{skip:!e}),{user:a}=Ce(x=>x.authentication),[c,{data:u,isSuccess:f,isLoading:S,error:h}]=ye(),[k,y]=i.useState(!1),[g,j]=i.useState([]),[p,C]=i.useState(1),[d]=i.useState(1);i.useEffect(()=>{const x=localStorage.getItem("questions");if(x){const R=JSON.parse(x);Array.isArray(R.questions)?j(R.questions):j([])}else s&&Array.isArray(s.questions)&&(localStorage.setItem("questions",JSON.stringify(s)),j(s.questions))},[s]);const z=()=>{l(),s&&Array.isArray(s.questions)&&(localStorage.setItem("questions",JSON.stringify(s)),j(s.questions))},M=p*d,_=M-d,$=g==null?void 0:g.slice(_,M),P=(x,R)=>{R>=1&&R<=Math.ceil(g.length/d)&&C(R)},m=()=>{c(e)};return i.useEffect(()=>{f&&(window.location.href="https://center.nibs.sch.id/student/exam",localStorage.removeItem("questions")),h&&B.error(h.message||h.data.message)},[u,f,h]),t.jsxs(w,{sx:{bgcolor:"#EDF3F9",height:"100vh"},children:[t.jsx(vo,{user:a,quiz:r}),t.jsxs(W,{container:!0,children:[t.jsxs(W,{item:!0,xs:12,md:10,sx:{p:1,height:"calc(100vh - 70px)",overflow:"auto"},children:[$==null?void 0:$.map((x,R)=>t.jsx(Ro,{setOpen:y,question:x,answers:n,note:s==null?void 0:s.note,number:p,refresh:z},R)),t.jsxs(ne,{sx:{display:"flex",justifyContent:"space-between",p:1},children:[t.jsx(F,{startIcon:t.jsx(_e,{}),variant:"contained",color:"primary",onClick:()=>P(null,p-1),disabled:p===1,children:"Previous"}),p!==Math.ceil(g.length/d)?t.jsx(F,{endIcon:t.jsx(Le,{}),variant:"contained",color:"primary",onClick:()=>P(null,p+1),children:"Next"}):t.jsx(F,{variant:"contained",color:"success",onClick:m,children:"Finish"})]})]}),t.jsx(W,{item:!0,xs:12,md:2,sx:{p:1,display:{xs:"none",md:"flex"},flexDirection:"column",justifyContent:"space-between"},children:t.jsx(w,{sx:{height:"70vh",overflow:"auto"},children:t.jsx(w,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:g.map((x,R)=>{const I=n==null?void 0:n.find(T=>T.question_id===x.id);return t.jsx(F,{variant:"contained",color:I!=null&&I.doubt?"warning":I?"success":"primary",onClick:()=>P(null,R+1),children:R+1},x.id)})})})})]}),t.jsx(Ne,{open:k,onClose:()=>y(!1),closeAfterTransition:!0,children:t.jsx(We,{in:k,children:t.jsx(w,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:350,maxHeight:600,bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px",overflow:"auto"},children:t.jsx(w,{sx:{width:"100%",height:"100%",display:"flex",flexWrap:"wrap",gap:2},children:g.map((x,R)=>{const I=n==null?void 0:n.find(T=>T.question_id===x.id);return t.jsx(F,{variant:"contained",color:I!=null&&I.doubt?"warning":I?"success":"primary",onClick:()=>{P(null,R+1),y(!1)},children:R+1},x.id)})})})})})]})};export{Qo as default};
