import{R as L,r as a,B as T,j as e,c as C,C as I,S as P,e as F}from"./index-CBqzxWS9.js";import{L as H}from"./Layout-BNgdQ4YH.js";import{P as R}from"./PageName-C4sP66Ht.js";import{d as G}from"./MoreHoriz-CinNhB57.js";import{M as A,B as D,F as z}from"./Modal-CBB7Z81D.js";import{T as y}from"./TextField-CP-9qv2v.js";import{B as v}from"./Button-B_xu-GsZ.js";import{I as W}from"./Input-Lnaa8h_K.js";import{P as Q}from"./Paper-CHCCFYqF.js";import{T as U}from"./TableContainer-C623AcUq.js";import{T as _,a as B,b as l,c as q}from"./TableRow-BlZIV6bx.js";import{T as J}from"./TableHead-EOUloY0Q.js";import{I as K}from"./IconButton-fUZ_sEew.js";import{M as O}from"./Menu-UxrHd9mF.js";import{M as V}from"./MenuItem-D_0O02Xm.js";import{G as X}from"./Grid--ggCq7Rv.js";import"./FolderCopy-DvBcCNgU.js";import"./getThemeProps-CbqsDNvq.js";import"./Typography-CrWPuPVK.js";import"./createSvgIcon-BY7hztag.js";import"./GlobalStyles-DyN9rhoG.js";import"./listItemIconClasses-CIQzwbog.js";import"./useTheme-Co8QHWII.js";import"./ChevronRight-BeZsILl3.js";import"./PeopleAlt-PNVEDtJp.js";import"./CalendarMonth-Ch2tT4zi.js";import"./Style-BZ9vKAjT.js";import"./ExitToApp-C0pvusEU.js";import"./Toolbar-CDjnfqYK.js";import"./FormControl-BLwwiMD9.js";import"./utils-DYWkOjGQ.js";import"./Select-BNmj1Ngj.js";import"./Grow-CSUfa3Iq.js";const Y=({open:r,close:i,student:o})=>{const[b,{data:h,isSuccess:c,isLoading:x,error:d}]=L(),[m,u]=a.useState(""),[f,n]=a.useState(""),j=s=>{s.preventDefault();const g={nis:m,name:f};b({id:o.id,body:g})};return a.useEffect(()=>{c&&(T.success(h.message),i()),d&&T.error(d.data.message)},[c,h,d]),a.useEffect(()=>{o&&(u(o.nis),n(o.name))},[o]),e.jsx(A,{open:r,onClose:i,closeAfterTransition:!0,slots:{backdrop:D},slotProps:{backdrop:{timeout:500}},children:e.jsx(z,{in:r,children:e.jsx(C,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{className:"form-class",onSubmit:j,children:[e.jsx(y,{fullWidth:!0,label:"NIS",placeholder:"NIS",value:m||"",onChange:s=>u(s.target.value)}),e.jsx(y,{fullWidth:!0,label:"Full name",placeholder:"Full name",value:f||"",onChange:s=>n(s.target.value)}),e.jsxs(C,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(v,{variant:"outlined",color:"error",onClick:i,children:"batal"}),e.jsx(v,{variant:"contained",color:"success",type:"submit",children:x?e.jsx(I,{size:20,color:"inherit"}):"update"})]})]})})})})},Z=[{label:"No",width:40},{label:"NIS",width:100},{label:"Name",width:170},{label:"Homebase",width:80},{label:"Actions",width:100}],$=({students:r,loading:i})=>{const[o,{data:b,isLoading:h}]=P(),[c,x]=a.useState(null),[d,m]=a.useState(!1),[u,f]=a.useState(""),n=!!c,j=(t,p)=>{x(t.currentTarget),f(p)},s=()=>{x(null)},g=()=>{u&&(m(!0),o(u),s())},[w,k]=a.useState(""),E=t=>t.name.toLowerCase().includes(w.toLowerCase()),S=r==null?void 0:r.filter(E),M=t=>{k(t.target.value)};return e.jsxs(a.Fragment,{children:[e.jsx(C,{sx:{p:1,boxShadow:2,bgcolor:"white",borderRadius:1,display:"flex",justifyContent:"space-between",flexDirection:{xs:"column-reverse",md:"row"},gap:1},children:e.jsx(W,{placeholder:"Search student",value:w,onChange:M})}),e.jsx(Q,{children:e.jsx(U,{sx:{height:{xs:500,md:530,lg:630},overflow:"auto"},children:e.jsxs(_,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(J,{children:e.jsx(B,{children:Z.map((t,p)=>e.jsx(l,{align:"center",sx:{width:t.width},children:t.label},p))})}),e.jsx(q,{children:S==null?void 0:S.map((t,p)=>e.jsxs(B,{children:[e.jsx(l,{align:"center",children:p+1}),e.jsx(l,{align:"center",children:t.nis}),e.jsx(l,{align:"left",children:t.name}),e.jsx(l,{align:"center",children:t.homebase}),e.jsx(l,{align:"center",children:e.jsx(K,{color:"primary",id:"basic-button","aria-controls":n?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":n?"true":void 0,onClick:N=>j(N,t.id),children:h?e.jsx(I,{size:20,color:"inherit"}):e.jsx(G,{})})})]},t.id))})]})})}),e.jsx(O,{id:"basic-menu",anchorEl:c,open:n,onClose:s,MenuListProps:{"aria-labelledby":"basic-button"},children:e.jsx(V,{onClick:g,children:"Edit"})}),e.jsx(Y,{open:d,close:()=>m(!1),student:b})]})},Pe=()=>{const{data:r,isLoading:i}=F();return e.jsxs(H,{children:[e.jsx(R,{title:"Students"}),e.jsx(X,{container:!0,sx:{minHeight:"85vh",display:"flex",flexDirection:"column",gap:1},children:e.jsx($,{students:r,loading:i})})]})};export{Pe as default};
