import{i as K,j as e,n as O,bG as V,bH as $,r,B as m,c as _,C as z,bI as U,bJ as X,bK as Y}from"./index-CSxfCMfO.js";import{L as Z}from"./Layout-CMizF-6J.js";import{d as ee}from"./MoreHoriz-C6H4XRMQ.js";import{r as se}from"./createSvgIcon-CUdXFR2t.js";import{M as ae,F as re}from"./Modal-BxMNLGUj.js";import{T as k,I as F}from"./TextField-siHAEH0i.js";import{F as G}from"./FormControl-DuxQqY0B.js";import{S as N}from"./Select-DP2IIPsQ.js";import{M as n}from"./MenuItem-h-V7nKs-.js";import{B}from"./Button-C8egMFNd.js";import{P as te}from"./Paper-1BeYRGVZ.js";import{I as oe}from"./Input-BytLO2YT.js";import{T as ie}from"./TableContainer-CHQDQz7K.js";import{T as ne,a as q,b as C,c as le}from"./TableRow-W4KJomaA.js";import{T as de}from"./TableHead-aksBcRt4.js";import{I as ce}from"./IconButton-BKERT6y0.js";import{M as ue}from"./Menu-SlX1X7p5.js";import"./PeopleAlt-SgC_nfS6.js";import"./ExitToApp-BfJL4ORI.js";import"./Typography-CvABrH6u.js";import"./Grid-DB3tpxkA.js";import"./useTheme-CrWoQ2Gw.js";import"./utils-DhE5sAzO.js";import"./listItemIconClasses-DH5o3P_F.js";import"./GlobalStyles-BxWeaP1-.js";import"./Grow-2X7iiG1m.js";var D={},me=K;Object.defineProperty(D,"__esModule",{value:!0});var Q=D.default=void 0,pe=me(se()),he=e;Q=D.default=(0,pe.default)((0,he.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");const xe=({open:p,close:o,admin:t})=>{const{data:h}=O(),[x,{data:l,isSuccess:S,isLoading:f,error:j,reset:A}]=V(),[E,{data:b,isSuccess:I,isLoading:d,error:c,reset:R}]=$(),[u,g]=r.useState(""),[v,s]=r.useState(""),[i,y]=r.useState(""),[H,w]=r.useState("--Role--"),[T,M]=r.useState("--Homebase--"),[P,L]=r.useState(""),W=a=>{a.preventDefault(),u?E({name:v,email:i,password:P,role:H,homebase_id:T,id:u}):x({name:v,email:i,password:P,role:H,homebase_id:T})};return r.useEffect(()=>{S&&(m.success(l.message),A(),g(""),s(""),y(""),L(""),w("--Role--"),M("--Homebase--"),o(),window.location.reload()),j&&(m.error(j.data.message),A())},[l,S,j]),r.useEffect(()=>{I&&(m.success(b.message),g(""),s(""),y(""),L(""),w("--Role--"),M("--Homebase--"),o(),R(),window.location.reload()),c&&(m.error(c.data.message),R())},[I,b,c]),r.useEffect(()=>{t&&(s(t.name),y(t.email),w(t.role),M(t.homebase_id?t.homebase_id:null),g(t.id))},[t]),e.jsx(ae,{open:p,onClose:o,closeAfterTransition:!0,children:e.jsx(re,{in:p,children:e.jsx(_,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{style:{display:"flex",flexDirection:"column",gap:"1rem"},onSubmit:W,children:[e.jsx(k,{label:"Name",placeholder:"Name",value:v||"",onChange:a=>s(a.target.value),InputLabelProps:{shrink:!0}}),e.jsx(k,{label:"Email",placeholder:"Email",value:i||"",onChange:a=>y(a.target.value),InputLabelProps:{shrink:!0}}),e.jsxs(G,{fullWidth:!0,children:[e.jsx(F,{children:"Role"}),e.jsxs(N,{label:"Role",value:H,onChange:a=>w(a.target.value),children:[e.jsx(n,{value:"--Role--",children:"--Role--"}),e.jsx(n,{value:"super-admin",children:"Super Admin"}),e.jsx(n,{value:"admin",children:"Admin"})]})]}),H==="admin"&&e.jsxs(G,{fullWidth:!0,children:[e.jsx(F,{children:"Homebase"}),e.jsxs(N,{label:"Homebase",value:T,onChange:a=>M(a.target.value),children:[e.jsx(n,{value:"--Homebase--",children:"--Homebase--"}),h==null?void 0:h.map(a=>e.jsx(n,{value:a.id,children:a.name},a.id))]})]}),e.jsx(k,{label:"Password",placeholder:"Password",type:"password",value:P||"",onChange:a=>L(a.target.value),InputLabelProps:{shrink:!0}}),e.jsxs(_,{alignSelf:"end",children:[e.jsx(B,{variant:"contained",color:"error",onClick:o,sx:{mr:1},children:"Cancel"}),e.jsx(B,{variant:"contained",color:"success",type:"submit",children:f||d?e.jsx(z,{size:24}):" Save"})]})]})})})})},ze=()=>{const[p,o]=r.useState(null),t=!!p,[h,x]=r.useState(!1),[l,S]=r.useState(""),{data:f}=U(),{data:j}=X(l,{skip:!l}),[A,{data:E,isSuccess:b,isLoading:I,error:d,reset:c}]=Y(),R=(s,i)=>{o(s.currentTarget),S(i)},u=()=>{o(null)},g=()=>{x(!0),u()},v=()=>{u(),A(l)};return r.useEffect(()=>{b&&(m.success(E.message),c()),d&&(m.error(d.data.message),c(),console.log(d))},[E,b,d]),e.jsx(Z,{children:e.jsxs(te,{sx:{p:1},children:[e.jsxs(_,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(oe,{placeholder:"Search Admin"}),e.jsx(B,{variant:"contained",color:"success",startIcon:e.jsx(Q,{}),onClick:()=>x(!0),children:"Add"})]}),e.jsx(ie,{children:e.jsxs(ne,{children:[e.jsx(de,{children:e.jsx(q,{children:["Name","Email","Role","Action"].map(s=>e.jsx(C,{align:"center",children:s},s))})}),e.jsx(le,{children:f==null?void 0:f.map(s=>e.jsxs(q,{children:[e.jsx(C,{align:"center",children:s.name}),e.jsx(C,{align:"center",children:s.email}),e.jsx(C,{align:"center",children:s.role}),e.jsx(C,{align:"center",children:e.jsx(ce,{color:"primary",id:"basic-button","aria-controls":t?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":t?"true":void 0,onClick:i=>R(i,s.id),children:I?e.jsx(z,{size:24}):e.jsx(ee,{})})})]},s.id))})]})}),e.jsxs(ue,{id:"basic-menu",anchorEl:p,open:t,onClose:u,MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsx(n,{onClick:g,children:"Edit"}),e.jsx(n,{onClick:v,children:"Delete"})]}),e.jsx(xe,{open:h,close:()=>x(!1),admin:j})]})})};export{ze as default};
