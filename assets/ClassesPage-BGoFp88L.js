import{G as F,H as O,r as t,B as j,j as e,c as S,C as L,I as V,J as X,a as Y,f as Z,K as ee,L as se}from"./index-zx9QfZoY.js";import{P as te}from"./PageName-jjQDIWWV.js";import{L as ae}from"./Layout-CrlGJOeK.js";import{d as re,a as oe}from"./FolderDelete-DByTlg9y.js";/* empty css               */import{M as A,F as H}from"./Modal-D9QrkZCY.js";import{F as R}from"./FormControl-C4c9a5nH.js";import{I as K,T as I}from"./TextField-BJwxyke2.js";import{S as _}from"./Select-SvZ_7dw1.js";import{M as k}from"./MenuItem-CRwodlBl.js";import{B as g}from"./Button-DXlUDVsQ.js";import{T as le}from"./Typography-BbVuTYIM.js";import{d as ne}from"./MoreHoriz-B3w18AMM.js";import{P as ie}from"./Paper-DOpa6jtL.js";import{T as de}from"./TableContainer-BZTGtx4W.js";import{T as ce,a as D,b as p,c as ue}from"./TableRow-BN76dLse.js";import{T as xe}from"./TableHead-D2TM6eWY.js";import{I as he}from"./IconButton-B86WcClk.js";import{M as me}from"./Menu-CYSo7JTe.js";import{G as M}from"./Grid-BCizA4LM.js";import"./FolderCopy-C5Wgay4i.js";import"./getThemeProps-CgUQ_SlC.js";import"./createSvgIcon-ejoD_ev4.js";import"./GlobalStyles-CYc0cWWR.js";import"./listItemIconClasses-2n8eT5dP.js";import"./useTheme-D7Zdti-D.js";import"./ChevronRight-DD6-zMVG.js";import"./PeopleAlt-tYum5u-5.js";import"./CalendarMonth-DsKu-ARM.js";import"./Style-Z1RiwaPN.js";import"./colorManipulator-DVYWUa-M.js";import"./ExitToApp-CQL913Gf.js";import"./Toolbar-BcTO8NSz.js";import"./utils-BeOBfU0K.js";import"./Input-BOlgPoNw.js";import"./Grow-HGwcTEBV.js";const fe=({open:l,close:a})=>{const{data:s}=F(),[n,{data:c,isSuccess:u,isLoading:x,error:i,reset:C}]=O(),[w,f]=t.useState(""),[b,h]=t.useState(""),[v,m]=t.useState(""),T=r=>{r.preventDefault(),n({gradeId:w,code:b,name:v})};return t.useEffect(()=>{u&&(j.success(c.message),f(""),h(""),m(""),C(),a()),i&&j.error(i.data.message)},[c,u,i]),e.jsx(A,{open:l,onClose:a,closeAfterTransition:!0,children:e.jsx(H,{in:l,children:e.jsx(S,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{className:"form-class",onSubmit:T,children:[e.jsxs(R,{children:[e.jsx(K,{children:"--Tingkat--"}),e.jsx(_,{required:!0,label:"--Tingkat--",value:w,onChange:r=>f(r.target.value),children:s==null?void 0:s.map(r=>e.jsx(k,{value:r.id,children:r.grade},r.id))})]}),e.jsx(I,{fullWidth:!0,label:"kode Kelas",placeholder:"harus ANGKA",value:b,onChange:r=>h(r.target.value),InputLabelProps:{shrink:!0}}),e.jsx(I,{fullWidth:!0,label:"Class",placeholder:"Class",value:v,onChange:r=>m(r.target.value),InputLabelProps:{shrink:!0}}),e.jsxs(S,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(g,{variant:"outlined",color:"error",onClick:a,children:"tutup"}),e.jsx(g,{variant:"contained",color:"success",type:"submit",children:x?e.jsx(L,{size:20,color:"inherit"}):"tambah"})]})]})})})})},pe=({open:l,close:a})=>{const[s,{data:n,isSuccess:c,isLoading:u,error:x}]=V(),i=()=>s();return t.useEffect(()=>{c&&(j.success(n.message),a()),x&&j.error(x.data.message)},[c,n,x]),e.jsx(A,{open:l,onClose:a,closeAfterTransition:!0,children:e.jsx(H,{in:l,children:e.jsxs(S,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:[e.jsx(le,{align:"center",children:"Are you sure you want to delete all classes?"}),e.jsxs(S,{sx:{display:"flex",gap:2,justifyContent:"flex-end",mt:2},children:[e.jsx(g,{variant:"contained",color:"error",onClick:a,children:"cancel"}),e.jsx(g,{variant:"outlined",color:"error",onClick:i,children:u?e.jsx(L,{size:20,color:"inherit"}):"sure"})]})]})})})},je=()=>{const[l,a]=t.useState(!1),[s,n]=t.useState(!1);return e.jsxs(S,{sx:{display:"flex",justifyContent:"end",gap:1,p:1,boxShadow:2,bgcolor:"white",borderRadius:1},children:[e.jsx(g,{variant:"contained",color:"success",startIcon:e.jsx(re,{}),onClick:()=>n(!0),sx:{width:120},children:"Tambah"}),e.jsx(g,{startIcon:e.jsx(oe,{}),variant:"contained",color:"error",onClick:()=>a(!0),sx:{width:120},children:"Hapus"}),e.jsx(fe,{open:s,close:()=>n(!1)}),e.jsx(pe,{open:l,close:()=>a(!1)})]})},ge=({open:l,close:a,data:s})=>{const{data:n}=F(),[c,{data:u,isLoading:x,isSuccess:i,error:C,reset:w}]=X(),[f,b]=t.useState(""),[h,v]=t.useState(""),[m,T]=t.useState(""),r=o=>{o.preventDefault();const N={gradeId:f,code:h,name:m};c({id:s==null?void 0:s.id,body:N})};return t.useEffect(()=>{i&&(j.success(u.message),a(),w()),C&&j.error(C.data.message)},[i,u,C]),t.useEffect(()=>{s&&(b(s==null?void 0:s.grade_id),v(s==null?void 0:s.code),T(s==null?void 0:s.name))},[s]),e.jsx(A,{open:l,onClose:a,closeAfterTransition:!0,children:e.jsx(H,{in:l,children:e.jsx(S,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{className:"form-class",onSubmit:r,children:[e.jsxs(R,{children:[e.jsx(K,{children:"--Grade--"}),e.jsx(_,{required:!0,label:"--Grade--",value:f||"",onChange:o=>b(o.target.value),children:n==null?void 0:n.map(o=>e.jsx(k,{value:o.id,children:o.grade},o.id))})]}),e.jsx(I,{fullWidth:!0,label:"Code",placeholder:"Code",value:h||"",onChange:o=>v(o.target.value)}),e.jsx(I,{fullWidth:!0,label:"Name",placeholder:"Name",value:m||"",onChange:o=>T(o.target.value)}),e.jsxs(S,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(g,{variant:"outlined",color:"error",onClick:a,children:"cancel"}),e.jsx(g,{variant:"contained",color:"success",type:"submit",children:x?e.jsx(L,{size:20,color:"inherit"}):"add"})]})]})})})})},Ce=[{label:"No",width:40},{label:"Satuan",width:100},{label:"Tingkat",width:100},{label:"Kode",width:40},{label:"Kelas",width:100},{label:"Siswa",width:50},{label:"Aksi",width:50}],be=()=>{const[l,a]=t.useState(null),s=!!l,[n,c]=t.useState(""),[u,x]=t.useState(""),[i,C]=t.useState(""),[w,f]=t.useState(!1),b=(d,y,E,J)=>{a(d.currentTarget),C(y),c(J),x(E)},h=()=>{a(null)},v=Y(),{data:m,isLoading:T}=Z(),[r,{data:o,isLoading:N}]=ee(),[z,{data:P,isLoading:W,isSuccess:B,error:G,reset:$}]=se(),q=()=>v(`/admin/classes/grade/${u}/class-code/${n}/add-students`),Q=()=>{i&&(r(i),f(!0),h())},U=()=>{i&&(z(i),h())};return t.useEffect(()=>{B&&(j.success(P.message),$()),G&&j.error(G.data.message)},[B,P,G]),e.jsx(ie,{children:e.jsxs(de,{sx:{height:{xs:500,md:530,xl:630},overflow:"auto"},children:[e.jsxs(ce,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(xe,{children:e.jsx(D,{children:Ce.map((d,y)=>e.jsx(p,{align:"center",sx:{width:d.width},children:d.label},y))})}),e.jsx(ue,{children:m==null?void 0:m.map((d,y)=>e.jsxs(D,{children:[e.jsx(p,{align:"center",children:y+1}),e.jsx(p,{align:"center",children:d.homebase}),e.jsx(p,{align:"center",children:d.grade}),e.jsx(p,{align:"center",children:d.code}),e.jsx(p,{align:"center",children:d.name}),e.jsx(p,{align:"center",children:d.students}),e.jsx(p,{align:"center",children:e.jsx(he,{onClick:E=>b(E,d.id,d.grade_id,d.code),children:W?e.jsx(L,{size:14}):e.jsx(ne,{})})})]},y))})]}),e.jsxs(me,{id:"basic-menu",anchorEl:l,open:s,onClose:h,MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsx(k,{onClick:q,children:"Tambah"}),e.jsx(k,{onClick:Q,children:"Edit"}),e.jsx(k,{onClick:U,children:"Hapus"})]}),e.jsx(ge,{open:w,close:()=>f(!1),data:o})]})})},as=()=>e.jsxs(ae,{children:[e.jsx(te,{title:"Classes"}),e.jsxs(M,{container:!0,sx:{minHeight:"85vh",display:"flex",flexDirection:"column",gap:2},children:[e.jsx(M,{item:!0,xs:12,md:12,children:e.jsx(je,{})}),e.jsx(M,{item:!0,xs:12,md:12,children:e.jsx(be,{})})]})]});export{as as default};
