import{j as e,i as D,M as E,bw as Z,bx as ee,f as se,r as i,B as g,c as l,C as _,by as te,aE as re,bz as ae,bA as oe,bB as ne,bC as le,bD as ie,aF as ce,bE as de}from"./index-CUBHetVN.js";import{L as ue}from"./Layout-B5b6e6Zc.js";import{c as O,r as R}from"./createSvgIcon-BNiQ1uMK.js";import{M as P,F}from"./Modal-DHX36T4n.js";import{T as k}from"./TextField-Br9tBp4K.js";import{F as pe}from"./FormControl-C5SBuuzI.js";import{F as xe,a as he}from"./FormGroup-2jC_eYuU.js";import{C as fe}from"./Checkbox-CuZQh6-6.js";import{B as f}from"./Button-CDl_mD0Q.js";import{d as me,a as je,b as ve}from"./YouTube-jQD6NJgB.js";import{I as T}from"./IconButton-xtUAGam4.js";import{e as ge}from"./FolderCopy-DBXADfz0.js";import{c as Y}from"./ExitToApp-NQb6q9Sm.js";import{G as B}from"./Grow-DFz5RKAv.js";import{P as J}from"./Paper-CvDSqGgi.js";import{T as be}from"./Typography-Bk7xBqzM.js";import"./ChevronRight-DOUVWpEN.js";import"./CalendarMonth-CAXonYvH.js";import"./Style-CREQcY6J.js";import"./useTheme-C8jBbgHn.js";import"./Toolbar-DwhPy3O0.js";import"./listItemIconClasses-EVjYjc_D.js";import"./utils-C7ZUp4cy.js";import"./Select-BaIo7R3g.js";import"./Menu-Tx7ft6l0.js";import"./Input-DEJs1UBe.js";import"./GlobalStyles-DnPqwiRl.js";import"./Stack-qcdLjNrC.js";import"./useThemeProps-CxYhRxk7.js";import"./getThemeProps-DZHS2swm.js";import"./SwitchBase-Df-nYITh.js";const Ce=O(e.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"AddOutlined"),ye=O([e.jsx("path",{d:"M19 5v14H5V5zm0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"},"0"),e.jsx("path",{d:"M14 17H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"},"1")],"ArticleOutlined"),ze=O(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"CloseOutlined"),Se=O(e.jsx("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92zM17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94z"}),"EditOutlined"),Ie=O(e.jsx("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5"}),"InsertLinkOutlined"),Q=O(e.jsx("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 14H8V4h12zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm12 6V9c0-.55-.45-1-1-1h-2v5h2c.55 0 1-.45 1-1m-2-3h1v3h-1zm4 2h1v-1h-1V9h1V8h-2v5h1zm-8 0h1c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1H9v5h1zm0-2h1v1h-1z"}),"PictureAsPdfOutlined"),q=O(e.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save");var $={},_e=D;Object.defineProperty($,"__esModule",{value:!0});var M=$.default=void 0,ke=_e(R()),Oe=e;M=$.default=(0,ke.default)((0,Oe.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"AddOutlined");var G={},we=D;Object.defineProperty(G,"__esModule",{value:!0});var H=G.default=void 0,Le=we(R()),Te=e;H=G.default=(0,Le.default)((0,Te.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"CloseOutlined");const K=({open:s,close:x,id:a})=>{const m=E().code,[h,{data:n,isSuccess:p,isLoading:C,error:j,reset:y}]=Z(),{data:t}=ee(a,{skip:!a}),{data:d}=se(),[o,u]=i.useState(""),[S,I]=i.useState(""),[r,b]=i.useState([]),w=(v,L)=>{v.target.checked?b(V=>[...V,L]):b(V=>V.filter(X=>X!==L))},A=v=>{if(v.preventDefault(),!o){g.error("Please enter chapter title");return}if(!r){g.error("Please select classes");return}h({id:a||null,code:m,title:o,selectedClasses:r,goal:S})};i.useEffect(()=>{p&&(g.success(n.message),y(),u(""),I(""),b([]),x(),window.location.reload()),j&&(g.error(j.data.message),y())},[n,p,j]),i.useEffect(()=>{t&&(u(t.title),I(t.goal),b(t==null?void 0:t.class_code))},[t]);const z=()=>{u(""),I(""),b([]),x()};return e.jsx(P,{open:s,onClose:z,closeAfterTransition:!0,children:e.jsx(F,{in:s,children:e.jsx(l,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{style:{display:"flex",flexDirection:"column",gap:"1rem"},onSubmit:A,children:[e.jsx(k,{fullWidth:!0,label:"Title",placeholder:"Chapter's title",InputLabelProps:{shrink:!0},value:o||"",onChange:v=>u(v.target.value)}),e.jsx(k,{fullWidth:!0,multiline:!0,rows:4,label:"Learning Prurpose",placeholder:"Learning Prurpose",InputLabelProps:{shrink:!0},sx:{my:1},value:S||"",onChange:v=>I(v.target.value)}),e.jsx(pe,{component:"fieldset",children:e.jsx(xe,{row:!0,children:d==null?void 0:d.map(v=>e.jsx(he,{control:e.jsx(fe,{checked:r==null?void 0:r.includes(v.code),onChange:L=>w(L,v.code)}),label:v.name},v.id))})}),e.jsxs(l,{align:"end",children:[e.jsx(f,{startIcon:e.jsx(H,{}),variant:"contained",color:"error",onClick:z,sx:{mr:1},children:"cancel"}),e.jsx(f,{startIcon:e.jsx(M,{}),variant:"contained",color:"success",type:"submit",children:C?e.jsx(_,{size:24}):"Add"})]})]})})})})};var W={},Me=D;Object.defineProperty(W,"__esModule",{value:!0});var N=W.default=void 0,He=Me(R()),Pe=e;N=W.default=(0,He.default)((0,Pe.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92zM17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94z"}),"EditOutlined");const Fe=({file:s})=>{const[x,{data:a,isSuccess:c,isLoading:m,error:h,reset:n}]=te();return i.useEffect(()=>{c&&(g.success(a.message),n()),h&&(g.error(h.data.message),n())},[a,c,h]),e.jsxs(l,{sx:{p:1,mx:8,borderRadius:1,boxShadow:4,my:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(f,{size:"small",startIcon:s.type_file==="pdf"?e.jsx(me,{}):s.type_file==="doc"?e.jsx(je,{}):e.jsx(ve,{}),variant:"contained",color:s.type_file==="pdf"?"warning":s.type_file==="doc"?"primary":"error",children:s.title}),e.jsx(T,{color:"error",onClick:()=>x(s.id),children:m?e.jsx(_,{size:24}):e.jsx(H,{})})]})},Ee=({data:s,number:x})=>{const{code:a}=E(),{data:c}=re(s.id,{skip:!s.id}),[m,{isLoading:h}]=ae(),[n,{isLoading:p,isSuccess:C,error:j,reset:y}]=oe(),[t,d]=i.useState({open:!1,fileOpen:!1,urlOpen:!1}),[o,u]=i.useState({file:null,type:"",title:"",url:""}),S=(r,b)=>{const w=r.target.files[0];u({...o,file:w,type:b})},I=()=>{const{file:r,type:b,title:w,url:A}=o,z=new FormData;z.append("file",r),z.append("type",b),z.append("title",w),z.append("subject_code",a),z.append("topic_id",s.id),z.append("url",A),n(z)};return i.useEffect(()=>{C&&(g.success("File uploaded successfully"),y(),u({file:null,type:"",title:"",url:""}),d({...t,fileOpen:!1,urlOpen:!1})),j&&g.error("Error uploading file")},[C,j]),e.jsxs(l,{sx:{my:1,mx:8,borderRadius:1,p:1,boxShadow:4},children:[e.jsxs(l,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(ge,{children:x}),e.jsx(Y,{primary:s.title,secondary:s.goal,sx:{width:"70%"}}),e.jsxs("div",{children:[e.jsx(T,{color:"warning",children:e.jsx(Se,{})}),e.jsx(T,{color:"error",onClick:()=>m(s.id),children:h?e.jsx(_,{size:24}):e.jsx(ze,{})})]})]}),e.jsxs(l,{sx:{mx:6,mt:1,display:"flex",gap:2},children:[e.jsx(f,{startIcon:e.jsx(Ce,{}),size:"small",variant:"outlined",color:"success",onClick:()=>d({...t,open:!t.open}),children:"Add File"}),e.jsxs(l,{sx:{display:"flex",gap:2,width:"50%"},children:[e.jsx(B,{in:t.open,children:e.jsx(f,{size:"small",variant:"contained",color:"error",startIcon:e.jsx(Q,{}),onClick:()=>d({...t,fileOpen:!0}),children:"Pdf / doc"})}),e.jsx(B,{in:t.open,children:e.jsx(f,{size:"small",variant:"contained",color:"warning",startIcon:e.jsx(Ie,{}),onClick:()=>d({...t,urlOpen:!0}),children:"url"})})]})]}),c&&c.map(r=>e.jsx(Fe,{file:r},r.id)),e.jsx(P,{open:t.fileOpen,onClose:()=>d({...t,fileOpen:!1}),closeAfterTransition:!0,children:e.jsx(F,{in:t.fileOpen,children:e.jsxs(l,{sx:U,children:[e.jsx(k,{label:"Title",fullWidth:!0,size:"small",sx:{mb:1},value:o.title,onChange:r=>u({...o,title:r.target.value})}),e.jsxs(f,{component:"label",variant:"contained",color:"error",startIcon:e.jsx(Q,{}),sx:{mr:1},children:["Pdf",e.jsx("input",{type:"file",hidden:!0,accept:".pdf",onChange:r=>S(r,"pdf")})]}),e.jsxs(f,{component:"label",variant:"contained",color:"primary",startIcon:e.jsx(ye,{}),children:["doc",e.jsx("input",{type:"file",hidden:!0,accept:".doc,.docx",onChange:r=>S(r,"doc")})]}),e.jsx(l,{sx:{display:"flex",justifyContent:"end"},children:e.jsx(f,{variant:"contained",color:"success",size:"small",startIcon:e.jsx(q,{}),onClick:I,disabled:p,children:p?e.jsx(_,{size:24}):"Save"})})]})})}),e.jsx(P,{open:t.urlOpen,onClose:()=>d({...t,urlOpen:!1}),closeAfterTransition:!0,children:e.jsx(F,{in:t.urlOpen,children:e.jsxs(l,{sx:U,children:[e.jsx(k,{label:"Title",fullWidth:!0,size:"small",sx:{mb:2},value:o.title,onChange:r=>u({...o,title:r.target.value})}),e.jsx(k,{label:"YouTube's Url",fullWidth:!0,size:"small",sx:{mb:2},value:o.url,onChange:r=>u({...o,url:r.target.value})}),e.jsx(l,{sx:{display:"flex",justifyContent:"end"},children:e.jsx(f,{variant:"contained",color:"success",size:"small",startIcon:e.jsx(q,{}),onClick:I,disabled:p,children:p?e.jsx(_,{size:24}):"Save"})})]})})})]})},U={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#fff",boxShadow:24,p:2,borderRadius:"5px"},Ae=({open:s,close:x,id:a,chapter_id:c})=>{const m=E(),[h,{data:n,isSuccess:p,isLoading:C,error:j,reset:y}]=ne(),{data:t}=le(a,{skip:!a}),[d,o]=i.useState(""),[u,S]=i.useState(""),I=r=>{r.preventDefault();const b={id:a||null,chapter_id:c,title:d,goal:u,subject_code:m.code};h(b)};return i.useEffect(()=>{p&&(g.success(n.message),y(),o(""),S(""),x(),window.location.reload()),j&&(g.error(j.data.message),y())},[n,p,j]),i.useEffect(()=>{t&&(o(t.title),S(t.goal))},[t]),e.jsx(P,{open:s,onClose:x,closeAfterTransition:!0,children:e.jsx(F,{in:s,children:e.jsx(l,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:350,md:400},bgcolor:"#ffff",boxShadow:24,p:2,borderRadius:"5px"},children:e.jsxs("form",{onSubmit:I,children:[e.jsx(k,{fullWidth:!0,label:"Title",placeholder:"Topic's title",InputLabelProps:{shrink:!0},sx:{my:1},value:d||"",onChange:r=>o(r.target.value)}),e.jsx(k,{fullWidth:!0,multiline:!0,rows:4,label:"Learning Prurpose",placeholder:"Learning Prurpose",InputLabelProps:{shrink:!0},sx:{my:1},value:u||"",onChange:r=>S(r.target.value)}),e.jsxs(l,{align:"end",children:[e.jsx(f,{startIcon:e.jsx(H,{}),variant:"contained",color:"error",onClick:x,sx:{mr:1},children:"cancel"}),e.jsx(f,{startIcon:e.jsx(M,{}),variant:"contained",color:"success",type:"submit",children:C?e.jsx(_,{size:24}):"Add"})]})]})})})})},Ve=({data:s,number:x})=>{const[a,{data:c,isSuccess:m,isLoading:h,error:n,reset:p}]=ie(),{data:C}=ce(s.id,{skip:!s.id}),[j,y]=i.useState(!1),[t,d]=i.useState(!1);return i.useEffect(()=>{m&&(g.success(c.message),p()),n&&(g.error(n.data.message),p())},[c,m,n]),e.jsxs(J,{sx:{my:2,p:1},children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(Y,{primary:`Chapter ${x}: ${s.title}`,secondary:s.goal,sx:{width:"75%"}}),e.jsxs(l,{children:[e.jsx(T,{color:"warning",onClick:()=>y(!0),children:e.jsx(N,{})}),e.jsx(T,{color:"error",onClick:()=>a(s.id),children:h?e.jsx(_,{size:24}):e.jsx(H,{})})]})]}),C==null?void 0:C.map((o,u)=>e.jsx(Ee,{data:o,number:u+1},u)),e.jsx(l,{alignSelf:"flex-start",sx:{mx:8,mt:1},children:e.jsx(f,{startIcon:e.jsx(M,{}),variant:"contained",color:"success",onClick:()=>d(!0),size:"small",children:"Topic"})}),e.jsx(Ae,{open:t,close:()=>d(!1),chapter_id:s.id}),e.jsx(K,{open:j,close:()=>y(!1),id:s.id})]})},ms=()=>{const s=E(),x=s.name.replace(/-/g," "),a=s.code,{data:c}=de(a,{skip:!a}),[m,h]=i.useState(!1);return e.jsxs(ue,{children:[e.jsx(J,{sx:{p:1},children:e.jsx(be,{variant:"h6",fontWeight:"bold",children:x})}),e.jsx(l,{alignSelf:"flex-start",sx:{my:1},children:e.jsx(f,{startIcon:e.jsx(M,{}),variant:"contained",color:"success",onClick:()=>h(!0),children:"Chapter"})}),c&&(c==null?void 0:c.map((n,p)=>e.jsx(Ve,{data:n,number:p+1},n.id))),e.jsx(K,{open:m,close:()=>h(!1)})]})};export{ms as default};
