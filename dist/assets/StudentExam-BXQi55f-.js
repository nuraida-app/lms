import{e as z,r as l,u as w,aV as _,aW as C,aX as M,y as d,j as a}from"./index-BbmGHnRR.js";import{L as T}from"./Layout-CW9TcGgM.js";import{T as $}from"./TabelContainer-DIYxBcPO.js";import"./index-BTG1MRsM.js";const D=[{label:"No"},{label:"Nama Guru"},{label:"Nama Ujian"},{label:"Waktu"},{label:"Aksi"}],A=()=>{z();const[c,p]=l.useState(1),[u,N]=l.useState(10),[f,k]=l.useState(""),[x,o]=l.useState(""),[t,h]=l.useState(""),{user:s}=w(e=>e.auth),{data:y={}}=_({grade:s==null?void 0:s.grade_id,page:c,limit:u,search:f}),{schedules:i=[],totalPages:v,totalData:E}=y,[L,{data:b,isLoading:G,isSuccess:j,error:m,reset:g}]=C(),{data:n}=M({nis:s==null?void 0:s.nis,quiz:t==null?void 0:t.quiz_id},{skip:!(s!=null&&s.nis)||!(t!=null&&t.quiz_id)}),S=()=>{if(x===t.token){if(n!=null&&n.isActive&&n.quiz_id===t.quiz_id)return o(""),d.warning(`Anda sedang mengerjakan ujian ${t.name}`);if(n!=null&&n.isDone&&n.quiz_id===t.quiz_id)return o(""),d.warning(`Anda sudah mengerjakan ujian ${t.name}`);const e={quizId:t.quiz_id,nis:s==null?void 0:s.nis};L(e)}else o(""),d.warning("Token yang anda masukan salah")},q=()=>{h(""),o("")};return l.useEffect(()=>{if(j){d.success(b.message);const e=t.name.replace(/\s+/g,"-");window.location.href=`/cbt-halaman/${e}/${t.quiz_id}/${t.time}`,g(),localStorage.removeItem("questions")}m&&(d.error(m.data.message),g())},[j,b,m]),a.jsxs("div",{className:"d-flex gap-2 flex-wrap align-items-start justify-content-center",style:{height:"100%",overflow:"auto"},children:[a.jsx($,{page:c,setPage:e=>p(e),setLimit:e=>N(e),onValue:e=>k(e),totalPages:v,children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{children:a.jsx("tr",{children:D.map((e,r)=>a.jsx("th",{scope:"col",className:"text-center",children:e.label},r))})}),a.jsxs("tbody",{children:[(i==null?void 0:i.length)===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:5,children:"Data belum tersedia"})}),i==null?void 0:i.map((e,r)=>a.jsxs("tr",{children:[a.jsx("td",{className:"text-center",children:r+1+(c-1)*u}),a.jsx("td",{children:e.teacher}),a.jsx("td",{children:e.name}),a.jsx("td",{className:"align-middle text-center",children:`${e.time} Menit`}),a.jsx("td",{className:"align-middle text-center",children:a.jsx("button",{className:"btn btn-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#token",onClick:()=>h(e),children:"Ikuti Ujian"})})]},r))]})]})}),a.jsx("div",{className:"modal fade",id:"token",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:a.jsx("div",{className:"modal-dialog",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",id:"exampleModalLabel",children:["Masukan Token ",a.jsx("span",{children:t.name})]}),a.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"Masukan Token",value:x,onChange:e=>o(e.target.value)})}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:q,children:"Batal"}),a.jsx("button",{type:"button",className:"btn btn-success",onClick:S,children:"Konfirmasi"})]})]})})})]})},Q=()=>a.jsx(T,{title:"Jadwal Ujian",children:a.jsx(A,{})});export{Q as default};
