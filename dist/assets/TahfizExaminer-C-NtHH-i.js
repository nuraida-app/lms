import{r as s,as as v,y as o,j as e,aj as y,at as w,al as L}from"./index-SXBgl-Na.js";import{T as P}from"./TabelContainer-YSWDuOy7.js";import"./index-CzZiVV_3.js";const C=({examiner:t,clear:b})=>{const[m,c]=s.useState(""),[r,n]=s.useState(""),[f,{data:d,isSuccess:u,isLoading:i,error:x,reset:h}]=v(),N=l=>{if(l.preventDefault(),!r)return o.warning("Data harus diisi");f({id:m,name:r})},j=()=>{c(""),n(""),b()};return s.useEffect(()=>{u&&(o.success(d.message),c(""),n(""),h()),x&&(o.error(x.data.message),h())},[d,u,x]),s.useEffect(()=>{t&&(c(t.id),n(t.name))},[t]),e.jsxs("form",{className:"d-flex flex-column gap-2 bg-white rounded shadow p-2 border border-2",onSubmit:N,children:[e.jsx("p",{className:"m-0 h6",children:"Tambah Penguji"}),e.jsx("input",{type:"text",name:"examiner",id:"1",className:"form-control",placeholder:"Nama Penguji",value:r||"",onChange:l=>n(l.target.value)}),e.jsxs("div",{className:"text-end",children:[e.jsx("button",{type:"button",className:"btn btn-warning me-2",onClick:j,children:"Batal"}),e.jsx("button",{type:"submit",className:"btn btn-success",children:i?"Loading...":"+ Tambahkan"})]})]})},H=()=>{const[t,b]=s.useState(1),[m,c]=s.useState(10),[r,n]=s.useState(""),[f,d]=s.useState({}),{data:u={}}=y({page:t,limit:m,search:r}),{examiners:i=[],totalData:x,totalPages:h}=u,[N,{data:j,isSuccess:l,isLoading:p,error:g,reset:E}]=w();return s.useEffect(()=>{l&&(o.success(j.message),E()),g&&(o.error(g.data.message),E(),console.log(g))},[j,l,g]),console.log(i),e.jsx(L,{title:"Penguji Tahfiz",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-3 col-12",children:e.jsx(C,{examiner:f,clear:()=>d({})})}),e.jsx("div",{className:"col-md-9 col-12",children:e.jsx(P,{page:t,setPage:a=>b(a),setLimit:a=>c(a),onValue:a=>n(a),totalPages:h,children:e.jsxs("table",{className:"table table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"text-center align-middle",children:"No"}),e.jsx("td",{className:"text-center align-middle",children:"Nama Penguji"}),e.jsx("td",{className:"text-center align-middle",children:"Aksi"})]})}),e.jsx("tbody",{children:i==null?void 0:i.map((a,S)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center align-middle",children:(t-1)*m+S+1}),e.jsx("td",{className:"align-middle",children:a.name}),e.jsx("td",{className:"text-center align-middle",children:e.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[e.jsx("button",{className:"btn btn-warning",onClick:()=>d(a),children:"Edit"}),e.jsx("button",{className:"btn btn-danger",onClick:()=>N(a.id),children:p?"Loading...":"Hapus"})]})})]},S))})]})})})]})})};export{H as default};
