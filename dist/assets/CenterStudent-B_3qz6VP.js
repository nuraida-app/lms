import{r as s,a6 as C,y as u,j as e,a7 as L,a8 as D}from"./index-BbmGHnRR.js";import{L as E}from"./Layout-VSuejT0k.js";import{T}from"./TabelContainer-DIYxBcPO.js";import"./index-BTG1MRsM.js";const B=({student:n,clear:h})=>{const[d,o]=s.useState(""),[c,i]=s.useState(""),[m,r]=s.useState(""),[p,{data:x,isSuccess:b,isLoading:g,error:l,reset:j}]=C(),f=t=>{if(t.preventDefault(),!c||!m){u.error("Semua data harus diisi");return}p({id:d,nis:m,name:c})},N=()=>{o(""),i(""),r(""),h()};return s.useEffect(()=>{b&&(u.success(x.message),j(),o(""),i(""),r("")),l&&(u.error(l.data.message),j())},[x,b,l]),s.useEffect(()=>{n&&(o(n.id),i(n.name),r(n.nis))},[n]),e.jsxs("div",{className:"mt-2 p-2 shadow rounded d-flex flex-column gap-2 bg-white border border-2",children:[e.jsx("p",{className:"h5",children:"Tambahkan Peseta Didik"}),e.jsxs("form",{className:"d-flex flex-column gap-2",onSubmit:f,children:[e.jsx("input",{type:"number",name:"name",id:"",placeholder:"NIS",className:"form-control",value:m||"",onChange:t=>r(t.target.value),required:!0}),e.jsx("input",{type:"text",name:"name",id:"",placeholder:"Nama Lengkap",className:"form-control",value:c||"",onChange:t=>i(t.target.value),required:!0}),e.jsxs("div",{className:"d-flex align-items-center justify-content-end gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-danger",onClick:N,children:"Batal"}),e.jsx("button",{type:"button",className:"btn btn-info","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop",children:"upload"}),e.jsx("button",{type:"submit",className:"btn btn-success",children:g?"Loading...":"+ Tambahkan"})]})]}),e.jsx("div",{className:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabIndex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"staticBackdropLabel",children:"Pilih file"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body d-flex flex-column align-items-end gap-2",children:[e.jsx("input",{type:"file",name:"file",id:"",className:"form-control"}),e.jsx("button",{type:"button",className:"btn btn-warning",children:"Template"})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-danger","data-bs-dismiss":"modal",children:"Tutup"}),e.jsx("button",{type:"button",className:"btn btn-primary",children:"Unggah"})]})]})})})]})},M=()=>{const[n,h]=s.useState({}),[d,o]=s.useState(1),[c,i]=s.useState(15),[m,r]=s.useState(""),p="",x="",b="",{data:g={}}=L({page:d,limit:c,search:m,homebase:p,gradeId:x,classCode:b}),{students:l,totalPages:j,totalStudents:f}=g,[N,{data:t,isSuccess:y,isLoading:k,error:S,reset:v}]=D();return s.useEffect(()=>{y&&(u.success(t.message),v()),S&&(u.error(S.data.message),v())},[t,y,S]),e.jsx(E,{title:"Daftar Siswa",children:e.jsxs("div",{className:"row",style:{height:"100%"},children:[e.jsx("div",{className:"col-lg-3 col-12",children:e.jsx(B,{student:n,clear:()=>h({})})}),e.jsx("div",{className:"col-lg-9 col-12",style:{height:"100%",overflow:"auto"},children:e.jsxs(T,{page:d,setPage:a=>o(a),setLimit:a=>i(a),onValue:a=>r(a),totalPages:j,children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between my-1",children:[e.jsxs("h6",{className:"m-0",children:["Jumlah Siswa ",e.jsx("span",{children:f})]}),e.jsx("button",{className:"btn btn-danger",children:"Hapus Data"})]}),e.jsxs("table",{className:"table table-striped table-hover mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"text-center",children:"#"}),e.jsx("th",{scope:"col",className:"text-center",children:"NIS"}),e.jsx("th",{scope:"col",className:"text-center",children:"Nama Siswa"}),e.jsx("th",{scope:"col",className:"text-center",children:"Aksi"})]})}),e.jsx("tbody",{children:l==null?void 0:l.map((a,w)=>e.jsxs("tr",{children:[e.jsx("th",{scope:"row",className:"text-center",children:(d-1)*c+w+1}),e.jsx("td",{children:a.nis}),e.jsx("td",{children:a.name}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[e.jsx("button",{className:"btn btn-warning",onClick:()=>h(a),children:"Edit"}),e.jsx("button",{className:"btn btn-danger",onClick:()=>N(a.id),children:k?"Loading...":"Hapus"})]})})]},a.id))})]})]})})]})})};export{M as default};
