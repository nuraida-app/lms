import{e as R,i as U,r as t,o as F,p as G,y as c,j as a,B as $}from"./index-BmFd-R0Z.js";import{L as z}from"./Layout-BWYL_gq4.js";import{E as k}from"./Editor-Cu0UxARg.js";import{R as K}from"./bundle-CvzedajO.js";import"./Menus-C_0QUNbK.js";import"./Menus-CeiNyHsH.js";import"./quill.snow-D1MbZPFh.js";import"./index-Chjiymov.js";const W=()=>{R();const S=U(),{name:g,bankid:r,questionid:l}=S,[i,d]=t.useState(1),[u,p]=t.useState(""),[o,h]=t.useState({choiceA:"",choiceB:"",choiceC:"",choiceD:"",choiceE:""}),[m,x]=t.useState(""),[f,v]=t.useState("default"),[y,w]=t.useState(null),[j,b]=t.useState(""),[B,{data:C,isSuccess:N,isLoading:D,error:A,reset:E}]=F(),{data:s}=G(l,{skip:!l}),P=e=>n=>{h(Q=>({...Q,[e]:n}))},L=e=>{const n=e.target.files[0];w(n),b(URL.createObjectURL(n))},q=()=>{if(!u){c.error("Please give question");return}if(i===1&&!f){c.error("Please give answer key");return}if(i===1&&!m){c.error("Please give score");return}const e=new FormData;e.append("id",l||""),e.append("type",i),e.append("quiz_id",r),e.append("question",u),e.append("a",o.choiceA||""),e.append("b",o.choiceB||""),e.append("c",o.choiceC||""),e.append("d",o.choiceD||""),e.append("e",o.choiceE||""),e.append("key",f||""),e.append("score",m||0),y&&e.append("audio",y),B(e)};return t.useEffect(()=>{N&&(c.success(C.message),d(1),p(""),h({choiceA:"",choiceB:"",choiceC:"",choiceD:"",choiceE:""}),x(""),E(),window.location.href=`/cbt-bank-soal/${g}/${r}`),A&&(c.error(A.data.message),E())},[C,N,g,r]),t.useEffect(()=>{s&&(d(s.type||1),p(s.question||""),h({choiceA:s.a||"",choiceB:s.b||"",choiceC:s.c||"",choiceD:s.d||"",choiceE:s.e||""}),x(s.score||""),v(s.key||"default"),b(s.audio||""))},[s]),console.log(s),a.jsx(z,{title:"Buat Pertanyaan",children:a.jsx("div",{className:"row",style:{maxHeight:"calc(100vh - 75px)",overflow:"auto"},children:a.jsxs("div",{className:"col-12 d-flex align-items-start flex-column gap-3",children:[a.jsxs("div",{style:{top:0,left:10,zIndex:1e3},className:"container-fluid bg-primary row d-flex justify-content-between p-2 shadow rounded position-sticky",children:[a.jsxs("div",{className:"col-lg-6 col-12 d-flex gap-2",children:[a.jsxs("select",{name:"number",id:"",value:i,onChange:e=>d(e.target.value),className:"form-control",children:[a.jsx("option",{value:1,children:"PG"}),a.jsx("option",{value:2,children:"Essay"})]}),i==1&&a.jsxs("select",{name:"answer",id:"",value:f,onChange:e=>v(e.target.value),className:"form-control",children:[a.jsx("option",{value:"A",children:"A"}),a.jsx("option",{value:"B",children:"B"}),a.jsx("option",{value:"C",children:"C"}),a.jsx("option",{value:"D",children:"D"}),a.jsx("option",{value:"E",children:"E"})]}),a.jsx("input",{type:"number",className:"form-control",placeholder:"Skor Soal",value:m,onChange:e=>x(e.target.value)})]}),a.jsx("div",{className:"text-end col-lg-6 col-12",children:D?a.jsx($,{}):a.jsx("button",{className:"btn btn-light",onClick:q,children:"Simpan"})})]}),a.jsxs("div",{className:"container-fluid",children:[a.jsx(k,{placeholder:"Ketikan pertanyaan di sini ...",value:u,onChange:e=>p(e)}),!j&&a.jsxs("div",{className:"input-group mb-3 pointer",children:[a.jsx("input",{type:"file",className:"form-control",id:"inputGroupFile02",accept:"audio/mp3",onChange:L}),a.jsx("label",{className:"input-group-text pointer",htmlFor:"inputGroupFile02",children:"Upload Audio"})]}),j&&a.jsx("div",{className:"text-end",children:a.jsx(K,{src:j,controls:!0})}),i==1&&Object.keys(o).map((e,n)=>a.jsx(k,{placeholder:`Jawaban ${e.charAt(e.length-1)}`,value:o[e],onChange:P(e)},n))]})]})})})};export{W as default};
