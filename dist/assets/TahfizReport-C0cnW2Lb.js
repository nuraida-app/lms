import{e as w,r as n,aq as C,ab as $,ar as E,y as g,j as e,ah as I}from"./index-BbmGHnRR.js";import{T as _}from"./TabelContainer-DIYxBcPO.js";import"./index-BTG1MRsM.js";const Q=()=>{const j=w(),[r,N]=n.useState(1),[u,p]=n.useState(10),[b,y]=n.useState(""),[f,o]=n.useState(""),{data:S={},isLoading:L}=C({page:r,limit:u,search:b,type:f}),{report:s=[],totalPages:D,totalData:z}=S,{data:c}=$(),[T,{data:m,isSuccess:x,isLoading:k,error:l,reset:h}]=E(),P=t=>{localStorage.setItem("report",JSON.stringify(t));const a=t.name.replace(/\s+/g,"-");j(`/tahfiz-laporan/${t.nis}/${a}`)},R=(t,a,i)=>{T({nis:t,typeId:a,createdat:i})};return n.useEffect(()=>{x&&(g.success(m.message),h()),l&&(g.error(l.data.message),h(),console.log(l))},[m,x,l]),e.jsxs(I,{title:"Laporan",children:[e.jsxs("div",{className:"d-flex justify-content-end gap-2 p-2 rounded border shadow",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>o(""),children:"Reset"}),c==null?void 0:c.map(t=>e.jsx("button",{className:"btn btn-secondary",onClick:()=>o(t.id),children:t.name},t.id))]}),e.jsx(_,{page:r,setPage:t=>N(t),setLimit:t=>p(t),onValue:t=>y(t),totalPages:D,children:e.jsxs("table",{className:"table table-striped table-hover table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"align-middle text-center",children:"No"}),e.jsx("th",{className:"align-middle text-center",children:"Tanggal"}),e.jsx("th",{className:"align-middle text-center",children:"NIS"}),e.jsx("th",{className:"align-middle text-center",children:"Nama Siswa"}),e.jsx("th",{className:"align-middle text-center",children:"Tingkat"}),e.jsx("th",{className:"align-middle text-center",children:"Kelas"}),e.jsx("th",{className:"align-middle text-center",children:"Jenis Penilaian"}),e.jsx("th",{className:"align-middle text-center",children:"Surah"}),e.jsx("th",{className:"align-middle text-center",children:"Nilai"}),e.jsx("th",{className:"align-middle text-center",children:"Penguji"}),e.jsx("th",{className:"align-middle text-center",children:"Aksi"})]})}),(s==null?void 0:s.length)===0?e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:11,children:"Belum ada data"})})}):L?e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{children:"Loading.."})})}):e.jsx("tbody",{children:s==null?void 0:s.map((t,a)=>{var i;return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center align-middle",children:a+1}),e.jsx("td",{className:"text-center align-middle",children:new Date(t.date).toLocaleDateString()}),e.jsx("td",{className:"text-center align-middle",children:t.nis}),e.jsx("td",{className:"text-start align-middle",children:t.name}),e.jsx("td",{className:"text-center align-middle",children:t.grade}),e.jsx("td",{className:"text-center align-middle",children:t.class}),e.jsx("td",{className:"text-center align-middle",children:t.type}),e.jsx("td",{className:"text-center align-middle",children:(i=t.surahs)==null?void 0:i.map((d,v)=>e.jsxs("p",{className:"m-0",children:[d.name," ",e.jsx("span",{children:`(${d.from_ayat} - ${d.to_ayat})`})]},v))}),e.jsx("td",{className:"text-center align-middle",children:t.totalPoints}),e.jsx("td",{className:"text-center align-middle",children:t.examiner}),e.jsx("td",{className:"align-middle",children:e.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>P(t),children:"Detail"}),e.jsx("button",{className:"btn btn-danger",onClick:()=>R(t.nis,t.type_id,new Date(t.date).toLocaleDateString()),children:k?"Loading...":"Hapus"})]})})]},a)})})]})})]})};export{Q as default};
