import{r as a,$ as L,y as x,j as e,a0 as T,a1 as y}from"./index-BbmGHnRR.js";import{L as C}from"./Layout-VSuejT0k.js";import{T as Y}from"./TabelContainer-DIYxBcPO.js";import"./index-BTG1MRsM.js";const E=({year:t,clear:o})=>{const[m,l]=a.useState(""),[u,n]=a.useState(""),[j,{data:d,isSuccess:h,isLoading:r,error:i,reset:b}]=L(),g=c=>{c.preventDefault(),j({id:m,name:u})},f=()=>{o(),l(""),n("")};return a.useEffect(()=>{h&&(x.success(d.message),l(""),n(""),b(),o()),i&&(x.error(i.data.message),b())},[d,h,i]),a.useEffect(()=>{t&&(l(t.id),n(t.name))},[t]),e.jsxs("div",{className:"p-2 d-flex flex-column gap-2 border border-2 shadow rounded bg-white mt-2",children:[e.jsx("p",{className:"m-0 h5",children:"Tambah Tahun Ajar"}),e.jsxs("form",{action:"",className:"d-flex flex-column gap-2",onSubmit:g,children:[e.jsx("input",{type:"text",name:"year",id:"1",className:"form-control",placeholder:"Tahun Ajar",value:u||"",onChange:c=>n(c.target.value)}),e.jsxs("div",{className:"text-end",children:[e.jsx("button",{type:"button",className:"btn btn-danger me-2",onClick:f,children:"Batal"}),e.jsx("button",{type:"submit",className:"btn btn-success",children:r?"Loading...":"+ Tambahkan"})]})]})]})},D=()=>{const[t,o]=a.useState(1),[m,l]=a.useState(10),[u,n]=a.useState(""),[j,d]=a.useState({}),{data:h={}}=T({page:t,limit:m,search:u}),{data:r,totalPages:i,total:b}=h,[g,{data:f,isSuccess:c,isLoading:p,error:N,reset:v}]=y();return a.useEffect(()=>{c&&(x.success(f.message),v()),N&&(x.error(N.data.message),v())},[r,c,N]),e.jsx(C,{title:"Tahun Pelajaran",children:e.jsxs("div",{className:"row g-2",children:[e.jsx("div",{className:"col-md-3 col-12",children:e.jsx(E,{year:j,clear:()=>d({})})}),e.jsx("div",{className:"col-md-9 col-12",children:e.jsx(Y,{page:t,setPage:s=>o(s),setLimit:s=>l(s),onValue:s=>n(s),totalPages:i,children:e.jsxs("table",{className:"table table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center",children:"No"}),e.jsx("th",{className:"text-center",children:"Tahun Pelajaran"}),e.jsx("th",{className:"text-center",children:"Aksi"})]})}),e.jsx("tbody",{children:r==null?void 0:r.map((s,S)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center align-middle",children:(t-1)*m+S+1}),e.jsx("td",{className:"align-middle",children:s.name}),e.jsx("td",{className:"text-center align-middle",children:e.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[e.jsx("button",{className:"btn btn-warning",onClick:()=>d(s),children:"Edit"}),e.jsx("button",{className:"btn btn-danger",disabled:!!p,onClick:()=>g(s.id),children:p?"Loading...":"Hapus"})]})})]},S))})]})})})]})})};export{D as default};
