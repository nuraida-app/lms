import{i as K,r as t,af as L,aj as $,ai as q,ag as z,j as e,al as B}from"./index-SXBgl-Na.js";const U=()=>{const T=K(),[C,I]=t.useState(""),[f,H]=t.useState(),[k,b]=t.useState(""),[D,N]=t.useState(""),[d,g]=t.useState(""),[h,y]=t.useState(""),[m,E]=t.useState(""),[u,S]=t.useState(""),[Q,w]=t.useState([]),[r,G]=t.useState(null),{data:x}=L(),{data:j}=$({search:f}),{data:l}=q({search:f}),{data:p}=z(),A=a=>{const i=l==null?void 0:l.find(n=>n.id===parseInt(a));return i?Array.from({length:i.ayat},(n,c)=>c+1):[]},O=()=>{var a,i;if(d&&h&&m&&u){const n=((a=l.find(s=>s.id===parseInt(d)))==null?void 0:a.name)||"",c=((i=l.find(s=>s.id===parseInt(m)))==null?void 0:i.name)||"";w(s=>[...s,{fromSurah:d,fromSurahName:n,fromAyat:h,toSurah:m,toSurahName:c,toAyat:u}]),g(""),y(""),E(""),S("")}};return t.useEffect(()=>{const a=JSON.parse(localStorage.getItem("report"));a&&(I(a.name),b(a.type_id),N(a.examiner_id),w(a.surahs),G(a))},[]),e.jsx(B,{title:`laporan ${T.name.replace("-"," ")}`,children:e.jsxs("div",{className:"d-flex flex-column gap-2",children:[e.jsx("p",{className:"m-0 h5 bg-white p-2 border shadow rounded",children:C}),e.jsxs("div",{className:"d-flex justify-content-between gap-2",children:[e.jsxs("select",{name:"type",id:"1",className:"form-select shadow",value:k||"",onChange:a=>b(a.target.value),children:[e.jsx("option",{value:"",hidden:!0,children:"Pilih Jenis Penilaian"}),x==null?void 0:x.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),e.jsxs("select",{name:"type",id:"1",className:"form-select shadow",value:D||"",onChange:a=>N(a.target.value),children:[e.jsx("option",{value:"",hidden:!0,children:"Pilih Penguji"}),j==null?void 0:j.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsx("div",{className:"p-2 rounded border bg-white shadow",children:e.jsxs("div",{className:"row g-2 ",children:[e.jsx("div",{className:"col-md-3 col-12",children:e.jsxs("select",{className:"form-select",value:d,onChange:a=>g(a.target.value),children:[e.jsx("option",{value:"",hidden:!0,children:"Dari Surah"}),l==null?void 0:l.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})}),e.jsx("div",{className:"col-md-3 col-12",children:e.jsxs("select",{className:"form-select",value:h,onChange:a=>y(a.target.value),disabled:!d,children:[e.jsx("option",{value:"",hidden:!0,children:"Dari Ayat"}),A(d).map(a=>e.jsx("option",{value:a,children:a},a))]})}),e.jsx("div",{className:"col-md-3 col-12",children:e.jsxs("select",{className:"form-select",value:u,onChange:a=>S(a.target.value),disabled:!d,children:[e.jsx("option",{value:"",hidden:!0,children:"Sampai Ayat"}),A(d).map(a=>e.jsx("option",{value:a,children:a},a))]})}),e.jsx("div",{className:"col-md-3 col-12",children:e.jsx("button",{className:"btn btn-primary",disabled:!d,onClick:O,children:"Simpan"})})]})}),e.jsxs("div",{className:"row g-2",children:[e.jsx("div",{className:"col-md-8 col-12",children:e.jsx("div",{className:"table-responsive border border-2 p-1 rounded bg-white shadow",children:e.jsxs("table",{className:"table table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Kategori"}),e.jsx("th",{children:"Indikator"}),e.jsx("th",{children:"Poin"})]})}),e.jsx("tbody",{children:p==null?void 0:p.map((a,i)=>{var n,c;return e.jsxs("tr",{children:[e.jsx("td",{className:"align-middle",children:a.category}),e.jsx("td",{className:"align-middle",children:e.jsx("div",{className:"d-flex flex-column gap-2",children:Array.isArray(a.indicators)&&a.indicators.filter(s=>s!==null).length>0?a.indicators.filter(s=>s!==null).map((s,R)=>{var _,P;const v=(_=r==null?void 0:r.scores)==null?void 0:_.find(o=>o.category_id===a.id&&o.indicators.some(J=>J.indicator_id===s.id)),F=(P=v==null?void 0:v.indicators.find(o=>o.indicator_id===s.id))==null?void 0:P.poin;return e.jsxs("div",{className:"d-flex align-items-center justify-content-between p-2 rounded border border-2 bg-white",children:[e.jsx("p",{className:"m-0",children:s.name}),e.jsx("input",{style:{width:200},type:"text",className:"form-control",placeholder:"Penilaian",value:F||"",readOnly:!0,"data-indicator-id":s.id,"data-category-id":a.id})]},R)}):e.jsx("p",{className:"m-0 text-muted",children:"Tidak ada indikator untuk kategori ini"})})}),e.jsx("td",{className:"align-middle",children:e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx("input",{type:"text",name:"category-score",className:"form-control",placeholder:"Nilai",style:{width:80},value:((c=(n=r==null?void 0:r.scores)==null?void 0:n.find(s=>s.category_id===a.id))==null?void 0:c.poin)||"",readOnly:!0,"data-category-id":a.id})})})]},i)})})]})})}),e.jsx("div",{className:"col-md-4 col-12",children:e.jsx("div",{className:"table-responsive border border-2 rounded p-1 bg-white shadow",children:e.jsxs("table",{className:"table table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Surah"}),e.jsx("th",{children:"Dari Ayat"}),e.jsx("th",{children:"Sampai Ayat"})]})}),e.jsx("tbody",{children:Q.map((a,i)=>e.jsxs("tr",{children:[e.jsx("td",{children:a.name}),e.jsx("td",{children:a.from_ayat}),e.jsx("td",{children:a.to_ayat})]},i))})]})})})]})]})})};export{U as default};
