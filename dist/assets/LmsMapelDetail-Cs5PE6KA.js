const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/YouTube-tMv0CPzO.js","assets/index-BbmGHnRR.js","assets/index-CPW-tBat.css","assets/SoundCloud-BtRGlllR.js","assets/Vimeo-Bl77cNZ8.js","assets/Mux-Ckq-SV-d.js","assets/Facebook-DLeMKYZI.js","assets/Streamable-1244MwIk.js","assets/Wistia-DnrwfN0y.js","assets/Twitch-BBHHGcXM.js","assets/DailyMotion-k2CKX_H5.js","assets/Mixcloud-CgkLr_zF.js","assets/Vidyard-B8flMJ5A.js","assets/Kaltura-BEPapJQZ.js","assets/FilePlayer-C0NXhPDO.js","assets/Preview-Dg41r9sS.js"])))=>i.map(i=>d[i]);
var Ce=Object.defineProperty;var Ee=(i,l,f)=>l in i?Ce(i,l,{enumerable:!0,configurable:!0,writable:!0,value:f}):i[l]=f;var G=(i,l,f)=>Ee(i,typeof l!="symbol"?l+"":l,f);import{r as M,j as e,i as ce,u as de,C as Re,N as Ae,y as V,B as X,O as Me,q as ue,_ as H,Q as Le,R as Oe,S as J,s as Ie,T as ke,U as De,c as Ue,V as He}from"./index-BbmGHnRR.js";import{L as Ve}from"./Layout-BySQPFrR.js";import{Q as ze,a as qe,P as Z,R as Fe}from"./quill.snow-Dz6Y2gEr.js";import{r as $e}from"./index-Chjiymov.js";ze.register("modules/resize",qe);class $ extends M.Component{constructor(f){super(f);G(this,"handleChange",f=>{this.setState({editorHtml:f}),this.props.onChange(f)});G(this,"handleImageUpload",()=>{const f=document.createElement("input");f.setAttribute("type","file"),f.setAttribute("accept","image/*"),f.click(),f.onchange=async()=>{const g=f.files[0];if(g){const h=new FormData;h.append("file",g);try{const w=await(await fetch("https://api.nibs.sch.id/upload/images",{method:"POST",body:h})).json(),v=this.reactQuillRef.getEditor().getSelection();this.reactQuillRef.getEditor().insertEmbed(v.index,"image",w.url)}catch(b){console.error("Error uploading image:",b),alert(b.message)}}}});this.state={editorHtml:f.value||""},this.reactQuillRef=null}componentDidUpdate(f){f.value!==this.props.value&&this.setState({editorHtml:this.props.value})}render(){const{placeholder:f}=this.props;return e.jsx("div",{className:"d-flex mb-2",style:{height:300},children:e.jsx(Fe,{ref:g=>{this.reactQuillRef=g},theme:"snow",value:this.state.editorHtml,onChange:this.handleChange,modules:$.modules(this.handleImageUpload),formats:$.formats,placeholder:f,style:{width:"100%"},className:"react-quill border border-sm rounded"})})}}$.modules=i=>({toolbar:{container:[[{header:"1"},{header:"2"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],["clean"]],handlers:{image:i}},clipboard:{matchVisual:!1},resize:{modules:["Resize"]}});$.formats=["header","font","size","bold","italic","underline","strike","blockquote","list","indent","link","image","video"];$.propTypes={placeholder:Z.string,value:Z.string,onChange:Z.func.isRequired};const Be=({add:i,grades:l,gLoad:f})=>{const h=ce().code,{user:b}=de(d=>d.auth),[w,v]=M.useState(""),[u,P]=M.useState(""),[N,t]=M.useState([]),[m,p]=M.useState(""),[R,x]=M.useState(""),{data:C,isLoading:r}=Re(m,{skip:!m}),[c,{data:a,isLoading:s,isSuccess:o,error:y,reset:S}]=Ae(),E=d=>{t(j=>j.includes(d)?j.filter(A=>A!==d):[...j,d])},L=d=>{t([]),p(d)},I=d=>{if(d.preventDefault(),!w||!u||N.length===0){V.error("Lengkapi form");return}const j={id:R||"",code:h,title:w,classIds:N,gradeid:m,goal:u,teacher_id:b.id};console.log(j),c(j)};return M.useEffect(()=>{const d=localStorage.getItem("chapter");if(d){const j=JSON.parse(d);v(j.chapter_title),P(j.chapter_goal),t(j.class_codes||[]),p(j.grade_id||""),x(j.chapter_id)}},[]),M.useEffect(()=>{o&&(V.success(a.message),S(),v(""),P(""),t([]),i(),localStorage.removeItem("chapter")),y&&(V.error(y.data.message),S())},[a,o,y]),e.jsxs("form",{className:"d-flex flex-column gap-1 rounded shadow p-2 bg-white",onSubmit:I,children:[e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text",id:"basic-addon1",children:"Materi Pembelajaran"}),e.jsx("input",{type:"text",className:"form-control","aria-label":"Username",placeholder:"Nama BAB",value:w||"",onChange:d=>v(d.target.value)})]}),e.jsx($,{placeholder:"Tujuan Pembelajaran",value:u,onChange:d=>P(d)}),e.jsxs("div",{className:"d-flex flex-column gap-1",children:[e.jsx("p",{className:"m-0 h6",children:"Pilih Tingkat"}),f?e.jsx(X,{}):e.jsx("div",{className:"d-flex flex-wrap gap-1",children:l==null?void 0:l.map((d,j)=>e.jsx("button",{type:"button",className:`btn ${m==d.id?"btn-success":"btn-secondary"}`,onClick:()=>L(d.id),children:d.grade},j))})]}),C&&e.jsxs("div",{className:"d-flex flex-column gap-1",children:[e.jsx("p",{className:"m-0 h6",children:"Pilih Kelas"}),r?e.jsx(X,{}):e.jsx("div",{className:"d-flex flex-wrap gap-1",children:C==null?void 0:C.map((d,j)=>e.jsx("button",{type:"button",className:`btn ${N.includes(d.code)?"btn-success":"btn-secondary"}`,onClick:()=>E(d.code),children:d.name},j))})]}),e.jsx("hr",{}),e.jsxs("div",{className:"text-end",children:[e.jsx("button",{className:"btn btn-danger me-2",onClick:i,children:"Batal"}),s?e.jsx(X,{}):e.jsx("button",{className:"btn btn-success",type:"submit",children:"Simpan"})]})]})},Ke=({type:i,topicId:l,subjectCode:f})=>{const g=i==="file",h=i==="video",[b,w]=M.useState(""),[v,u]=M.useState(""),[P,N]=M.useState(null),[t,{data:m,isSuccess:p,isLoading:R,error:x,reset:C}]=Me(),r=c=>{if(c.preventDefault(),!b.trim()){V.warning("Nama harus diisi");return}if(g&&!P){V.warning("File harus diunggah.");return}if(h&&!v.trim()){V.warning("URL video harus diisi.");return}const a=new FormData;if(g&&P)a.append("file",P);else if(h&&v)a.append("url",v);else{V.error("Mohon lengkapi semua data sebelum mengunggah.");return}a.append("title",b),a.append("subject_code",f),a.append("topic_id",l),t(a)};return M.useEffect(()=>{p&&(V.success(m.message),w(""),u(""),N(null),C()),x&&(V.error(x.data.message),C())},[m,p,x]),e.jsx("div",{className:"modal fade",id:"upload",tabIndex:"-1","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("form",{className:"modal-content",onSubmit:r,children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h5",{className:"modal-title",children:["Tambah ",g?"File":h?"Video":"Konten"]}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body d-flex flex-column gap-2",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:`Nama ${g?"File":h?"Video":"Konten"}`,value:b,onChange:c=>w(c.target.value),required:!0}),g&&e.jsx("input",{type:"file",className:"form-control",onChange:c=>N(c.target.files[0]),required:!0}),h&&e.jsx("input",{type:"text",className:"form-control",placeholder:"URL Video",value:v,onChange:c=>u(c.target.value),required:!0})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Batal"}),e.jsx("button",{className:"btn btn-primary",type:"submit",disabled:R,children:R?"Mengunggah...":"Simpan"})]})]})})})};var ee,fe;function Xe(){if(fe)return ee;fe=1,ee=function(h,b,w){var v=document.head||document.getElementsByTagName("head")[0],u=document.createElement("script");typeof b=="function"&&(w=b,b={}),b=b||{},w=w||function(){},u.type=b.type||"text/javascript",u.charset=b.charset||"utf8",u.async="async"in b?!!b.async:!0,u.src=h,b.attrs&&i(u,b.attrs),b.text&&(u.text=""+b.text);var P="onload"in u?l:f;P(u,w),u.onload||l(u,w),v.appendChild(u)};function i(g,h){for(var b in h)g.setAttribute(b,h[b])}function l(g,h){g.onload=function(){this.onerror=this.onload=null,h(null,g)},g.onerror=function(){this.onerror=this.onload=null,h(new Error("Failed to load "+this.src),g)}}function f(g,h){g.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,h(null,g))}}return ee}var te,ye;function Se(){if(ye)return te;ye=1;var i=function(c){return l(c)&&!f(c)};function l(r){return!!r&&typeof r=="object"}function f(r){var c=Object.prototype.toString.call(r);return c==="[object RegExp]"||c==="[object Date]"||b(r)}var g=typeof Symbol=="function"&&Symbol.for,h=g?Symbol.for("react.element"):60103;function b(r){return r.$$typeof===h}function w(r){return Array.isArray(r)?[]:{}}function v(r,c){return c.clone!==!1&&c.isMergeableObject(r)?x(w(r),r,c):r}function u(r,c,a){return r.concat(c).map(function(s){return v(s,a)})}function P(r,c){if(!c.customMerge)return x;var a=c.customMerge(r);return typeof a=="function"?a:x}function N(r){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(r).filter(function(c){return Object.propertyIsEnumerable.call(r,c)}):[]}function t(r){return Object.keys(r).concat(N(r))}function m(r,c){try{return c in r}catch{return!1}}function p(r,c){return m(r,c)&&!(Object.hasOwnProperty.call(r,c)&&Object.propertyIsEnumerable.call(r,c))}function R(r,c,a){var s={};return a.isMergeableObject(r)&&t(r).forEach(function(o){s[o]=v(r[o],a)}),t(c).forEach(function(o){p(r,o)||(m(r,o)&&a.isMergeableObject(c[o])?s[o]=P(o,a)(r[o],c[o],a):s[o]=v(c[o],a))}),s}function x(r,c,a){a=a||{},a.arrayMerge=a.arrayMerge||u,a.isMergeableObject=a.isMergeableObject||i,a.cloneUnlessOtherwiseSpecified=v;var s=Array.isArray(c),o=Array.isArray(r),y=s===o;return y?s?a.arrayMerge(r,c,a):R(r,c,a):v(c,a)}x.all=function(c,a){if(!Array.isArray(c))throw new Error("first argument should be an array");return c.reduce(function(s,o){return x(s,o,a)},{})};var C=x;return te=C,te}var ae,be;function Q(){if(be)return ae;be=1;var i=Object.create,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,h=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,w=(_,T)=>{for(var k in T)l(_,k,{get:T[k],enumerable:!0})},v=(_,T,k,D)=>{if(T&&typeof T=="object"||typeof T=="function")for(let z of g(T))!b.call(_,z)&&z!==k&&l(_,z,{get:()=>T[z],enumerable:!(D=f(T,z))||D.enumerable});return _},u=(_,T,k)=>(k=_!=null?i(h(_)):{},v(!_||!_.__esModule?l(k,"default",{value:_,enumerable:!0}):k,_)),P=_=>v(l({},"__esModule",{value:!0}),_),N={};w(N,{callPlayer:()=>n,getConfig:()=>j,getSDK:()=>d,isBlobUrl:()=>U,isMediaStream:()=>O,lazy:()=>R,omit:()=>A,parseEndTime:()=>y,parseStartTime:()=>o,queryString:()=>E,randomString:()=>S,supportsWebKitPresentationMode:()=>F}),ae=P(N);var t=u(ue()),m=u(Xe()),p=u(Se());const R=_=>t.default.lazy(async()=>{const T=await _();return typeof T.default=="function"?T:T.default}),x=/[?&#](?:start|t)=([0-9hms]+)/,C=/[?&#]end=([0-9hms]+)/,r=/(\d+)(h|m|s)/g,c=/^\d+$/;function a(_,T){if(_ instanceof Array)return;const k=_.match(T);if(k){const D=k[1];if(D.match(r))return s(D);if(c.test(D))return parseInt(D)}}function s(_){let T=0,k=r.exec(_);for(;k!==null;){const[,D,z]=k;z==="h"&&(T+=parseInt(D,10)*60*60),z==="m"&&(T+=parseInt(D,10)*60),z==="s"&&(T+=parseInt(D,10)),k=r.exec(_)}return T}function o(_){return a(_,x)}function y(_){return a(_,C)}function S(){return Math.random().toString(36).substr(2,5)}function E(_){return Object.keys(_).map(T=>`${T}=${_[T]}`).join("&")}function L(_){return window[_]?window[_]:window.exports&&window.exports[_]?window.exports[_]:window.module&&window.module.exports&&window.module.exports[_]?window.module.exports[_]:null}const I={},d=function(T,k,D=null,z=()=>!0,K=m.default){const W=L(k);return W&&z(W)?Promise.resolve(W):new Promise((pe,he)=>{if(I[T]){I[T].push({resolve:pe,reject:he});return}I[T]=[{resolve:pe,reject:he}];const me=B=>{I[T].forEach(Y=>Y.resolve(B))};if(D){const B=window[D];window[D]=function(){B&&B(),me(L(k))}}K(T,B=>{B?(I[T].forEach(Y=>Y.reject(B)),I[T]=null):D||me(L(k))})})};function j(_,T){return(0,p.default)(T.config,_.config)}function A(_,...T){const k=[].concat(...T),D={},z=Object.keys(_);for(const K of z)k.indexOf(K)===-1&&(D[K]=_[K]);return D}function n(_,...T){if(!this.player||!this.player[_]){let k=`ReactPlayer: ${this.constructor.displayName} player could not call %c${_}%c – `;return this.player?this.player[_]||(k+="The method was not available"):k+="The player was not available",console.warn(k,"font-weight: bold",""),null}return this.player[_](...T)}function O(_){return typeof window<"u"&&typeof window.MediaStream<"u"&&_ instanceof window.MediaStream}function U(_){return/^blob:/.test(_)}function F(_=document.createElement("video")){const T=/iPhone|iPod/.test(navigator.userAgent)===!1;return _.webkitSupportsPresentationMode&&typeof _.webkitSetPresentationMode=="function"&&T}function q(_){return _}return ae}var re,_e;function Qe(){if(_e)return re;_e=1;var i=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h=(n,O)=>{for(var U in O)i(n,U,{get:O[U],enumerable:!0})},b=(n,O,U,F)=>{if(typeof O=="object"||typeof O=="function")for(let q of f(O))!g.call(n,q)&&q!==U&&i(n,q,{get:()=>O[q],enumerable:!(F=l(O,q))||F.enumerable});return n},w=n=>b(i({},"__esModule",{value:!0}),n),v={};h(v,{AUDIO_EXTENSIONS:()=>S,DASH_EXTENSIONS:()=>I,FLV_EXTENSIONS:()=>d,HLS_EXTENSIONS:()=>L,MATCH_URL_DAILYMOTION:()=>a,MATCH_URL_FACEBOOK:()=>p,MATCH_URL_FACEBOOK_WATCH:()=>R,MATCH_URL_KALTURA:()=>y,MATCH_URL_MIXCLOUD:()=>s,MATCH_URL_MUX:()=>m,MATCH_URL_SOUNDCLOUD:()=>N,MATCH_URL_STREAMABLE:()=>x,MATCH_URL_TWITCH_CHANNEL:()=>c,MATCH_URL_TWITCH_VIDEO:()=>r,MATCH_URL_VIDYARD:()=>o,MATCH_URL_VIMEO:()=>t,MATCH_URL_WISTIA:()=>C,MATCH_URL_YOUTUBE:()=>P,VIDEO_EXTENSIONS:()=>E,canPlay:()=>A}),re=w(v);var u=Q();const P=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,N=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/,t=/vimeo\.com\/(?!progressive_redirect).+/,m=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,p=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/,R=/^https?:\/\/fb\.watch\/.+$/,x=/streamable\.com\/([a-z0-9]+)$/,C=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,r=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/,c=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,a=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/,s=/mixcloud\.com\/([^/]+\/[^/]+)/,o=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/,y=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/,S=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,E=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,L=/\.(m3u8)($|\?)/i,I=/\.(mpd)($|\?)/i,d=/\.(flv)($|\?)/i,j=n=>{if(n instanceof Array){for(const O of n)if(typeof O=="string"&&j(O)||j(O.src))return!0;return!1}return(0,u.isMediaStream)(n)||(0,u.isBlobUrl)(n)?!0:S.test(n)||E.test(n)||L.test(n)||I.test(n)||d.test(n)},A={youtube:n=>n instanceof Array?n.every(O=>P.test(O)):P.test(n),soundcloud:n=>N.test(n)&&!S.test(n),vimeo:n=>t.test(n)&&!E.test(n)&&!L.test(n),mux:n=>m.test(n),facebook:n=>p.test(n)||R.test(n),streamable:n=>x.test(n),wistia:n=>C.test(n),twitch:n=>r.test(n)||c.test(n),dailymotion:n=>a.test(n),mixcloud:n=>s.test(n),vidyard:n=>o.test(n),kaltura:n=>y.test(n),file:j};return re}var se,ge;function We(){if(ge)return se;ge=1;var i=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,h=(t,m)=>{for(var p in m)i(t,p,{get:m[p],enumerable:!0})},b=(t,m,p,R)=>{if(typeof m=="object"||typeof m=="function")for(let x of f(m))!g.call(t,x)&&x!==p&&i(t,x,{get:()=>m[x],enumerable:!(R=l(m,x))||R.enumerable});return t},w=t=>b(i({},"__esModule",{value:!0}),t),v={};h(v,{default:()=>N}),se=w(v);var u=Q(),P=Qe(),N=[{key:"youtube",name:"YouTube",canPlay:P.canPlay.youtube,lazyPlayer:(0,u.lazy)(()=>H(()=>import("./YouTube-tMv0CPzO.js").then(t=>t.Y),__vite__mapDeps([0,1,2])))},{key:"soundcloud",name:"SoundCloud",canPlay:P.canPlay.soundcloud,lazyPlayer:(0,u.lazy)(()=>H(()=>import("./SoundCloud-BtRGlllR.js").then(t=>t.S),__vite__mapDeps([3,1,2])))},{key:"vimeo",name:"Vimeo",canPlay:P.canPlay.vimeo,lazyPlayer:(0,u.lazy)(()=>H(()=>import("./Vimeo-Bl77cNZ8.js").then(t=>t.V),__vite__mapDeps([4,1,2])))},{key:"mux",name:"Mux",canPlay:P.canPlay.mux,lazyPlayer:(0,u.lazy)(()=>H(()=>import("./Mux-Ckq-SV-d.js").then(t=>t.M),__vite__mapDeps([5,1,2])))},{key:"facebook",name:"Facebook",canPlay:P.canPlay.facebook,lazyPlayer:(0,u.lazy)(()=>H(()=>import("./Facebook-DLeMKYZI.js").then(t=>t.F),__vite__mapDeps([6,1,2])))},{key:"streamable",name:"Streamable",canPlay:P.canPlay.streamable,lazyPlayer:(0,u.lazy)(()=>H(()=>import("./Streamable-1244MwIk.js").then(t=>t.S),__vite__mapDeps([7,1,2])))},{key:"wistia",name:"Wistia",canPlay:P.canPlay.wistia,lazyPlayer:(0,u.lazy)(()=>H(()=>import("./Wistia-DnrwfN0y.js").then(t=>t.W),__vite__mapDeps([8,1,2])))},{key:"twitch",name:"Twitch",canPlay:P.canPlay.twitch,lazyPlayer:(0,u.lazy)(()=>H(()=>import("./Twitch-BBHHGcXM.js").then(t=>t.T),__vite__mapDeps([9,1,2])))},{key:"dailymotion",name:"DailyMotion",canPlay:P.canPlay.dailymotion,lazyPlayer:(0,u.lazy)(()=>H(()=>import("./DailyMotion-k2CKX_H5.js").then(t=>t.D),__vite__mapDeps([10,1,2])))},{key:"mixcloud",name:"Mixcloud",canPlay:P.canPlay.mixcloud,lazyPlayer:(0,u.lazy)(()=>H(()=>import("./Mixcloud-CgkLr_zF.js").then(t=>t.M),__vite__mapDeps([11,1,2])))},{key:"vidyard",name:"Vidyard",canPlay:P.canPlay.vidyard,lazyPlayer:(0,u.lazy)(()=>H(()=>import("./Vidyard-B8flMJ5A.js").then(t=>t.V),__vite__mapDeps([12,1,2])))},{key:"kaltura",name:"Kaltura",canPlay:P.canPlay.kaltura,lazyPlayer:(0,u.lazy)(()=>H(()=>import("./Kaltura-BEPapJQZ.js").then(t=>t.K),__vite__mapDeps([13,1,2])))},{key:"file",name:"FilePlayer",canPlay:P.canPlay.file,canEnablePIP:t=>P.canPlay.file(t)&&(document.pictureInPictureEnabled||(0,u.supportsWebKitPresentationMode)())&&!P.AUDIO_EXTENSIONS.test(t),lazyPlayer:(0,u.lazy)(()=>H(()=>import("./FilePlayer-C0NXhPDO.js").then(t=>t.F),__vite__mapDeps([14,1,2])))}];return se}var ve=Number.isNaN||function(l){return typeof l=="number"&&l!==l};function Ye(i,l){return!!(i===l||ve(i)&&ve(l))}function Ge(i,l){if(i.length!==l.length)return!1;for(var f=0;f<i.length;f++)if(!Ye(i[f],l[f]))return!1;return!0}function Je(i,l){l===void 0&&(l=Ge);var f,g=[],h,b=!1;function w(){for(var v=[],u=0;u<arguments.length;u++)v[u]=arguments[u];return b&&f===this&&l(v,g)||(h=i.apply(this,v),b=!0,f=this,g=v),h}return w}const Ze=Object.freeze(Object.defineProperty({__proto__:null,default:Je},Symbol.toStringTag,{value:"Module"})),et=Le(Ze);var ne,Pe;function Ne(){if(Pe)return ne;Pe=1;var i=Object.create,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,h=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,w=(E,L)=>{for(var I in L)l(E,I,{get:L[I],enumerable:!0})},v=(E,L,I,d)=>{if(L&&typeof L=="object"||typeof L=="function")for(let j of g(L))!b.call(E,j)&&j!==I&&l(E,j,{get:()=>L[j],enumerable:!(d=f(L,j))||d.enumerable});return E},u=(E,L,I)=>(I=E!=null?i(h(E)):{},v(!E||!E.__esModule?l(I,"default",{value:E,enumerable:!0}):I,E)),P=E=>v(l({},"__esModule",{value:!0}),E),N={};w(N,{defaultProps:()=>S,propTypes:()=>o}),ne=P(N);var t=u($e());const{string:m,bool:p,number:R,array:x,oneOfType:C,shape:r,object:c,func:a,node:s}=t.default,o={url:C([m,x,c]),playing:p,loop:p,controls:p,volume:R,muted:p,playbackRate:R,width:C([m,R]),height:C([m,R]),style:c,progressInterval:R,playsinline:p,pip:p,stopOnUnmount:p,light:C([p,m,c]),playIcon:s,previewTabIndex:R,previewAriaLabel:m,fallback:s,oEmbedUrl:m,wrapper:C([m,a,r({render:a.isRequired})]),config:r({soundcloud:r({options:c}),youtube:r({playerVars:c,embedOptions:c,onUnstarted:a}),facebook:r({appId:m,version:m,playerId:m,attributes:c}),dailymotion:r({params:c}),vimeo:r({playerOptions:c,title:m}),mux:r({attributes:c,version:m}),file:r({attributes:c,tracks:x,forceVideo:p,forceAudio:p,forceHLS:p,forceSafariHLS:p,forceDisableHls:p,forceDASH:p,forceFLV:p,hlsOptions:c,hlsVersion:m,dashVersion:m,flvVersion:m}),wistia:r({options:c,playerId:m,customControls:x}),mixcloud:r({options:c}),twitch:r({options:c,playerId:m}),vidyard:r({options:c})}),onReady:a,onStart:a,onPlay:a,onPause:a,onBuffer:a,onBufferEnd:a,onEnded:a,onError:a,onDuration:a,onSeek:a,onPlaybackRateChange:a,onPlaybackQualityChange:a,onProgress:a,onClickPreview:a,onEnablePIP:a,onDisablePIP:a},y=()=>{},S={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:y},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},mux:{attributes:{},version:"2"},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:y,onStart:y,onPlay:y,onPause:y,onBuffer:y,onBufferEnd:y,onEnded:y,onError:y,onDuration:y,onSeek:y,onPlaybackRateChange:y,onPlaybackQualityChange:y,onProgress:y,onClickPreview:y,onEnablePIP:y,onDisablePIP:y};return ne}var ie,xe;function tt(){if(xe)return ie;xe=1;var i=Object.create,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,h=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,w=(a,s,o)=>s in a?l(a,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[s]=o,v=(a,s)=>{for(var o in s)l(a,o,{get:s[o],enumerable:!0})},u=(a,s,o,y)=>{if(s&&typeof s=="object"||typeof s=="function")for(let S of g(s))!b.call(a,S)&&S!==o&&l(a,S,{get:()=>s[S],enumerable:!(y=f(s,S))||y.enumerable});return a},P=(a,s,o)=>(o=a!=null?i(h(a)):{},u(!a||!a.__esModule?l(o,"default",{value:a,enumerable:!0}):o,a)),N=a=>u(l({},"__esModule",{value:!0}),a),t=(a,s,o)=>(w(a,typeof s!="symbol"?s+"":s,o),o),m={};v(m,{default:()=>c}),ie=N(m);var p=P(ue()),R=P(Oe()),x=Ne(),C=Q();const r=5e3;class c extends p.Component{constructor(){super(...arguments),t(this,"mounted",!1),t(this,"isReady",!1),t(this,"isPlaying",!1),t(this,"isLoading",!0),t(this,"loadOnReady",null),t(this,"startOnPlay",!0),t(this,"seekOnPlay",null),t(this,"onDurationCalled",!1),t(this,"handlePlayerMount",s=>{if(this.player){this.progress();return}this.player=s,this.player.load(this.props.url),this.progress()}),t(this,"getInternalPlayer",s=>this.player?this.player[s]:null),t(this,"progress",()=>{if(this.props.url&&this.player&&this.isReady){const s=this.getCurrentTime()||0,o=this.getSecondsLoaded(),y=this.getDuration();if(y){const S={playedSeconds:s,played:s/y};o!==null&&(S.loadedSeconds=o,S.loaded=o/y),(S.playedSeconds!==this.prevPlayed||S.loadedSeconds!==this.prevLoaded)&&this.props.onProgress(S),this.prevPlayed=S.playedSeconds,this.prevLoaded=S.loadedSeconds}}this.progressTimeout=setTimeout(this.progress,this.props.progressFrequency||this.props.progressInterval)}),t(this,"handleReady",()=>{if(!this.mounted)return;this.isReady=!0,this.isLoading=!1;const{onReady:s,playing:o,volume:y,muted:S}=this.props;s(),!S&&y!==null&&this.player.setVolume(y),this.loadOnReady?(this.player.load(this.loadOnReady,!0),this.loadOnReady=null):o&&this.player.play(),this.handleDurationCheck()}),t(this,"handlePlay",()=>{this.isPlaying=!0,this.isLoading=!1;const{onStart:s,onPlay:o,playbackRate:y}=this.props;this.startOnPlay&&(this.player.setPlaybackRate&&y!==1&&this.player.setPlaybackRate(y),s(),this.startOnPlay=!1),o(),this.seekOnPlay&&(this.seekTo(this.seekOnPlay),this.seekOnPlay=null),this.handleDurationCheck()}),t(this,"handlePause",s=>{this.isPlaying=!1,this.isLoading||this.props.onPause(s)}),t(this,"handleEnded",()=>{const{activePlayer:s,loop:o,onEnded:y}=this.props;s.loopOnEnded&&o&&this.seekTo(0),o||(this.isPlaying=!1,y())}),t(this,"handleError",(...s)=>{this.isLoading=!1,this.props.onError(...s)}),t(this,"handleDurationCheck",()=>{clearTimeout(this.durationCheckTimeout);const s=this.getDuration();s?this.onDurationCalled||(this.props.onDuration(s),this.onDurationCalled=!0):this.durationCheckTimeout=setTimeout(this.handleDurationCheck,100)}),t(this,"handleLoaded",()=>{this.isLoading=!1})}componentDidMount(){this.mounted=!0}componentWillUnmount(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}componentDidUpdate(s){if(!this.player)return;const{url:o,playing:y,volume:S,muted:E,playbackRate:L,pip:I,loop:d,activePlayer:j,disableDeferredLoading:A}=this.props;if(!(0,R.default)(s.url,o)){if(this.isLoading&&!j.forceLoad&&!A&&!(0,C.isMediaStream)(o)){console.warn(`ReactPlayer: the attempt to load ${o} is being deferred until the player has loaded`),this.loadOnReady=o;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(o,this.isReady)}!s.playing&&y&&!this.isPlaying&&this.player.play(),s.playing&&!y&&this.isPlaying&&this.player.pause(),!s.pip&&I&&this.player.enablePIP&&this.player.enablePIP(),s.pip&&!I&&this.player.disablePIP&&this.player.disablePIP(),s.volume!==S&&S!==null&&this.player.setVolume(S),s.muted!==E&&(E?this.player.mute():(this.player.unmute(),S!==null&&setTimeout(()=>this.player.setVolume(S)))),s.playbackRate!==L&&this.player.setPlaybackRate&&this.player.setPlaybackRate(L),s.loop!==d&&this.player.setLoop&&this.player.setLoop(d)}getDuration(){return this.isReady?this.player.getDuration():null}getCurrentTime(){return this.isReady?this.player.getCurrentTime():null}getSecondsLoaded(){return this.isReady?this.player.getSecondsLoaded():null}seekTo(s,o,y){if(!this.isReady){s!==0&&(this.seekOnPlay=s,setTimeout(()=>{this.seekOnPlay=null},r));return}if(o?o==="fraction":s>0&&s<1){const E=this.player.getDuration();if(!E){console.warn("ReactPlayer: could not seek using fraction – duration not yet available");return}this.player.seekTo(E*s,y);return}this.player.seekTo(s,y)}render(){const s=this.props.activePlayer;return s?p.default.createElement(s,{...this.props,onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError}):null}}return t(c,"displayName","Player"),t(c,"propTypes",x.propTypes),t(c,"defaultProps",x.defaultProps),ie}var oe,je;function at(){if(je)return oe;je=1;var i=Object.create,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,h=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,w=(d,j,A)=>j in d?l(d,j,{enumerable:!0,configurable:!0,writable:!0,value:A}):d[j]=A,v=(d,j)=>{for(var A in j)l(d,A,{get:j[A],enumerable:!0})},u=(d,j,A,n)=>{if(j&&typeof j=="object"||typeof j=="function")for(let O of g(j))!b.call(d,O)&&O!==A&&l(d,O,{get:()=>j[O],enumerable:!(n=f(j,O))||n.enumerable});return d},P=(d,j,A)=>(A=d!=null?i(h(d)):{},u(!d||!d.__esModule?l(A,"default",{value:d,enumerable:!0}):A,d)),N=d=>u(l({},"__esModule",{value:!0}),d),t=(d,j,A)=>(w(d,typeof j!="symbol"?j+"":j,A),A),m={};v(m,{createReactPlayer:()=>I}),oe=N(m);var p=P(ue()),R=P(Se()),x=P(et),C=P(Oe()),r=Ne(),c=Q(),a=P(tt());const s=(0,c.lazy)(()=>H(()=>import("./Preview-Dg41r9sS.js").then(d=>d.P),__vite__mapDeps([15,1,2]))),o=typeof window<"u"&&window.document&&typeof document<"u",y=typeof J<"u"&&J.window&&J.window.document,S=Object.keys(r.propTypes),E=o||y?p.Suspense:()=>null,L=[],I=(d,j)=>{var A;return A=class extends p.Component{constructor(){super(...arguments),t(this,"state",{showPreview:!!this.props.light}),t(this,"references",{wrapper:n=>{this.wrapper=n},player:n=>{this.player=n}}),t(this,"handleClickPreview",n=>{this.setState({showPreview:!1}),this.props.onClickPreview(n)}),t(this,"showPreview",()=>{this.setState({showPreview:!0})}),t(this,"getDuration",()=>this.player?this.player.getDuration():null),t(this,"getCurrentTime",()=>this.player?this.player.getCurrentTime():null),t(this,"getSecondsLoaded",()=>this.player?this.player.getSecondsLoaded():null),t(this,"getInternalPlayer",(n="player")=>this.player?this.player.getInternalPlayer(n):null),t(this,"seekTo",(n,O,U)=>{if(!this.player)return null;this.player.seekTo(n,O,U)}),t(this,"handleReady",()=>{this.props.onReady(this)}),t(this,"getActivePlayer",(0,x.default)(n=>{for(const O of[...L,...d])if(O.canPlay(n))return O;return j||null})),t(this,"getConfig",(0,x.default)((n,O)=>{const{config:U}=this.props;return R.default.all([r.defaultProps.config,r.defaultProps.config[O]||{},U,U[O]||{}])})),t(this,"getAttributes",(0,x.default)(n=>(0,c.omit)(this.props,S))),t(this,"renderActivePlayer",n=>{if(!n)return null;const O=this.getActivePlayer(n);if(!O)return null;const U=this.getConfig(n,O.key);return p.default.createElement(a.default,{...this.props,key:O.key,ref:this.references.player,config:U,activePlayer:O.lazyPlayer||O,onReady:this.handleReady})})}shouldComponentUpdate(n,O){return!(0,C.default)(this.props,n)||!(0,C.default)(this.state,O)}componentDidUpdate(n){const{light:O}=this.props;!n.light&&O&&this.setState({showPreview:!0}),n.light&&!O&&this.setState({showPreview:!1})}renderPreview(n){if(!n)return null;const{light:O,playIcon:U,previewTabIndex:F,oEmbedUrl:q,previewAriaLabel:_}=this.props;return p.default.createElement(s,{url:n,light:O,playIcon:U,previewTabIndex:F,previewAriaLabel:_,oEmbedUrl:q,onClick:this.handleClickPreview})}render(){const{url:n,style:O,width:U,height:F,fallback:q,wrapper:_}=this.props,{showPreview:T}=this.state,k=this.getAttributes(n),D=typeof _=="string"?this.references.wrapper:void 0;return p.default.createElement(_,{ref:D,style:{...O,width:U,height:F},...k},p.default.createElement(E,{fallback:q},T?this.renderPreview(n):this.renderActivePlayer(n)))}},t(A,"displayName","ReactPlayer"),t(A,"propTypes",r.propTypes),t(A,"defaultProps",r.defaultProps),t(A,"addCustomPlayer",n=>{L.push(n)}),t(A,"removeCustomPlayers",()=>{L.length=0}),t(A,"canPlay",n=>{for(const O of[...L,...d])if(O.canPlay(n))return!0;return!1}),t(A,"canEnablePIP",n=>{for(const O of[...L,...d])if(O.canEnablePIP&&O.canEnablePIP(n))return!0;return!1}),A};return oe}var le,we;function rt(){if(we)return le;we=1;var i=Object.create,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,h=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,w=(x,C)=>{for(var r in C)l(x,r,{get:C[r],enumerable:!0})},v=(x,C,r,c)=>{if(C&&typeof C=="object"||typeof C=="function")for(let a of g(C))!b.call(x,a)&&a!==r&&l(x,a,{get:()=>C[a],enumerable:!(c=f(C,a))||c.enumerable});return x},u=(x,C,r)=>(r=x!=null?i(h(x)):{},v(!x||!x.__esModule?l(r,"default",{value:x,enumerable:!0}):r,x)),P=x=>v(l({},"__esModule",{value:!0}),x),N={};w(N,{default:()=>R}),le=P(N);var t=u(We()),m=at();const p=t.default[t.default.length-1];var R=(0,m.createReactPlayer)(t.default,p);return le}var st=rt();const nt=Ie(st),Te=({name:i,url:l})=>{const[f,g]=M.useState(!1),[h,b]=M.useState(0),[w,v]=M.useState(0),[u,P]=M.useState("auto"),[N,t]=M.useState(l),m=M.useRef(null),p=M.useRef(null),R=o=>{const y=Math.floor(o/3600),S=Math.floor(o%3600/60),E=Math.floor(o%60);return`${y>0?`${y}:`:""}${y>0?String(S).padStart(2,"0"):S}:${String(E).padStart(2,"0")}`},x=o=>{b(o)},C=o=>{v(o.playedSeconds)},r=()=>{g(o=>!o)},c=o=>{p.current&&p.current.seekTo(o)},a=()=>{m.current.requestFullscreen?m.current.requestFullscreen():m.current.webkitRequestFullscreen?m.current.webkitRequestFullscreen():m.current.mozRequestFullScreen?m.current.mozRequestFullScreen():m.current.msRequestFullscreen&&m.current.msRequestFullscreen()},s=o=>{P(o);const y=l.split("?")[0],S=new URLSearchParams(l.split("?")[1]||"");o!=="auto"?S.set("vq",o):S.delete("vq");const E=`${y}?${S.toString()}`;t(E)};return e.jsx("div",{className:"modal fade",id:"video",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"exampleModalLabel",children:i}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:()=>g(!1)})]}),e.jsxs("div",{className:"modal-body d-flex flex-column gap-2",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("p",{className:"text-muted m-0",children:["Durasi: ",R(h)]}),e.jsx("p",{className:"text-muted m-0",children:R(w)})]}),u==="auto"?e.jsxs("div",{className:"dropdown text-center",children:[e.jsx("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"qualityDropdown","data-bs-toggle":"dropdown","aria-expanded":"false",children:"Pilih Kualitas Video"}),e.jsxs("ul",{className:"dropdown-menu","aria-labelledby":"qualityDropdown",children:[e.jsx("li",{children:e.jsx("button",{className:"dropdown-item",onClick:()=>s("auto"),children:"Auto"})}),e.jsx("li",{children:e.jsx("button",{className:"dropdown-item",onClick:()=>s("hd1080"),children:"1080p"})}),e.jsx("li",{children:e.jsx("button",{className:"dropdown-item",onClick:()=>s("hd720"),children:"720p"})}),e.jsx("li",{children:e.jsx("button",{className:"dropdown-item",onClick:()=>s("sd480"),children:"480p"})})]})]}):e.jsx("div",{ref:m,style:{aspectRatio:"16/9",width:"100%"},children:e.jsx(nt,{ref:p,playing:f,controls:!0,url:N,width:"100%",height:"100%",onDuration:x,onProgress:C,style:{pointerEvents:"none"}},N)}),e.jsx("div",{className:"progress position-relative",onClick:o=>{if(h){const y=o.target.getBoundingClientRect(),E=(o.clientX-y.left)/y.width*h;c(E)}},style:{height:"10px",cursor:"pointer"},children:e.jsx("div",{className:"progress-bar bg-danger",role:"progressbar",style:{width:`${w/h*100}%`},"aria-valuenow":w/h*100,"aria-valuemin":"0","aria-valuemax":"100"})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{onClick:r,className:"btn btn-primary",style:{pointerEvents:"auto"},children:f?"Pause":"Play"}),e.jsx("button",{onClick:a,className:"btn btn-secondary",style:{pointerEvents:"auto"},children:"Fullscreen"}),e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:()=>g(!1),children:"Close"})]})]})})})},it=({files:i})=>{const[l,f]=M.useState(""),[g,h]=M.useState(""),{user:b}=de(p=>p.auth);if(!i||i.length===0)return e.jsx("p",{children:"Belum ada file yang diupload untuk topik ini."});const[w,{data:v,isSuccess:u,isLoading:P,error:N,reset:t}]=ke(),m=p=>{p.link_file?window.open(p.link_file,"_blank"):(f(p.title),h(p.video))};return M.useEffect(()=>{u&&(V.success(v.message),t()),N&&(V.error(N.data.message),t())},[v,u,N]),e.jsxs("div",{children:[i.map(p=>e.jsxs("div",{className:"mb-2 d-flex justify-content-between p-1 rounded border border-2",children:[e.jsxs("button",{className:"btn btn-primary d-flex gap-2",onClick:()=>m(p),"data-bs-toggle":p.video?"modal":null,"data-bs-target":p.video?"#video":null,children:[e.jsx("i",{className:"bi bi-youtube"}),p.title]}),P?e.jsx(X,{}):(b==null?void 0:b.role)==="teacher"&&e.jsx("button",{className:"btn btn-danger",onClick:()=>w(p.file_id),children:"Hapus"})]},p.file_id)),e.jsx(Te,{name:l,url:g})]})},ot=i=>({__html:i}),lt=({topic:i,role:l,uploadHandler:f,setGoal:g,setTitle:h,setChapterId:b,setTopicId:w})=>{M.useState(""),M.useState("");const v=()=>{w(i.topic_id),h(i.topic_title),b(i.topic_chapter),g(i.goal)};return e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex justify-content-between p-2 rounded border border-2",children:[e.jsx("button",{className:"btn btn-outline-info text-start",type:"button","data-bs-toggle":"collapse","data-bs-target":`#topic-${i.topic_id}`,"aria-expanded":"false","aria-controls":`topic-${i.topic_id}`,style:{width:"40%"},children:i.topic_title}),l==="teacher"&&e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{"data-bs-toggle":"modal","data-bs-target":"#upload",className:"btn btn-secondary",onClick:()=>f(i.topic_id,"file"),children:"File"}),e.jsx("button",{"data-bs-toggle":"modal","data-bs-target":"#upload",className:"btn btn-secondary",onClick:()=>f(i.topic_id,"video"),children:"Video"}),e.jsx("button",{className:"btn btn-warning","data-bs-toggle":"modal","data-bs-target":"#topic",onClick:v,children:"Edit"}),e.jsx("button",{className:"btn btn-danger",children:"Hapus"})]})]}),e.jsx("div",{className:"collapse mt-2",id:`topic-${i.topic_id}`,children:e.jsxs("div",{className:"card card-body",children:[e.jsx("p",{className:"text-muted fst-italic",dangerouslySetInnerHTML:ot(i.goal)}),e.jsx(it,{files:i.files})]})}),e.jsx(Te,{})]})},ct=i=>({__html:i}),dt=({chapter:i,role:l,uploadHandler:f,setChapterId:g,setTopicId:h,setGoal:b,setTitle:w,add:v})=>{var P;const u=()=>{localStorage.setItem("chapter",JSON.stringify(i)),v()};return e.jsxs("div",{className:"w-100 card shadow border border-info",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h5",{children:i.chapter_title}),e.jsx("p",{className:"m-0 fst-italic text-secondary",children:i.teacher_name}),e.jsxs("p",{className:"m-0 fst-italic text-secondary",children:["Tingkat ",e.jsx("span",{children:i.grade_name})]}),e.jsxs("p",{className:"m-0 fst-italic text-secondary",children:["Kelas ",e.jsx("span",{children:i.class_names.join(", ")})]})]}),e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Tujuan Pembelajaran"}),e.jsx("p",{className:"card-text",dangerouslySetInnerHTML:ct(i.chapter_goal)}),e.jsx("p",{className:"h6",children:"Topik Pembelajaran"}),e.jsx("div",{className:"d-flex flex-column gap-2",children:(P=i.topics)==null?void 0:P.map(N=>e.jsx(lt,{topic:N,role:l,uploadHandler:f,setGoal:b,setTitle:w,setChapterId:g,setTopicId:h},N.topic_id))}),l==="teacher"&&e.jsxs("div",{className:"text-end p-2 border-top border-2 mt-3",children:[e.jsx("button",{className:"btn btn-info","data-bs-toggle":"modal","data-bs-target":"#topic",onClick:()=>g(i.chapter_id),children:"+ Topik"}),e.jsx("button",{className:"btn btn-warning mx-2",onClick:u,children:"Edit"}),e.jsx("button",{className:"btn btn-danger",children:"Hapus"})]})]})]})},ut=({title:i,setTitle:l,goal:f,setGoal:g,aLoad:h,addTopicHandler:b,closeHandler:w})=>e.jsx("div",{className:"modal fade",id:"topic",tabIndex:"-1","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("form",{className:"modal-content",onSubmit:b,children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Tambah Topik Pembelajaran"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:w})]}),e.jsxs("div",{className:"modal-body d-flex flex-column gap-2",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Topik Pembelajaran",value:i,onChange:v=>l(v.target.value)}),e.jsx($,{placeholder:"Tujuan Pembelajaran",value:f,onChange:g})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:w,children:"Batal"}),h?e.jsx("button",{className:"btn btn-primary",disabled:!0,children:"Loading..."}):e.jsx("button",{className:"btn btn-primary",type:"submit",children:"Simpan"})]})]})})}),pt=({chapters:i,add:l,grades:f,setGrade:g,role:h})=>{const b=ce(),{code:w,name:v}=b,[u,P]=M.useState(""),[N,t]=M.useState(""),[m,p]=M.useState(""),[R,x]=M.useState(""),[C,r]=M.useState(""),[c,{data:a,isLoading:s,isSuccess:o,error:y,reset:S}]=De(),E=()=>{x(""),t(""),P("")},L=(d,j)=>{x(d),r(j)},I=d=>{if(d.preventDefault(),!N||!u)return V.error("Semua input harus diisi");c({id:R,title:N,goal:u,chapter_id:m,subject_code:w})};return M.useEffect(()=>{o&&(V.success(a.message),E(),S()),y&&(V.error(y.data.message),S())},[o,y]),e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between rounded p-2 shadow bg-white mb-2",children:[e.jsx("p",{className:"m-0 h5",children:v.replace("-"," ")}),h!=="student"&&e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>g(""),children:"Reset"}),f==null?void 0:f.map(d=>e.jsx("button",{className:"btn btn-secondary",onClick:()=>g(d.id),children:d.grade},d.id))]}),h==="teacher"&&e.jsx("button",{className:"btn btn-info",onClick:l,children:"+ Materi Pembelajaran"})]}),e.jsx("div",{className:"d-flex flex-wrap gap-2",children:i==null?void 0:i.map(d=>e.jsx(dt,{chapter:d,role:h,uploadHandler:L,setChapterId:p,setTopicId:x,setGoal:P,setTitle:t,add:l},d.chapter_id))}),e.jsx(Ke,{type:C,topicId:R,subjectCode:w}),e.jsx(ut,{title:N,setTitle:t,goal:u,setGoal:P,aLoad:s,addTopicHandler:I,closeHandler:E})]})},ht=()=>{const i=ce(),{name:l,id:f,code:g}=i,{user:h}=de(p=>p.auth),b=h==null?void 0:h.role,[w,v]=M.useState(!1),[u,P]=M.useState(""),{data:N,isLoading:t}=Ue(),{data:m}=He({grade_id:b==="student"?h==null?void 0:h.grade_id:u,subjectCode:g});return e.jsxs(Ve,{title:l,children:[!w&&!m&&e.jsx("div",{style:{height:"calc(100vh - 90px)"},className:"d-flex flex-column gap-2 align-items-center",children:e.jsxs("div",{style:{height:"100%"},className:"container-fluid rounded shadow bg-white p-3 d-flex flex-column align-items-center gap-2",children:[e.jsx("div",{style:{height:"100%",width:500},children:e.jsx("img",{src:"/ilustration.jpg",alt:"robot-not-found",style:{height:"100%",width:"100%",objectFit:"cover"}})}),e.jsx("p",{className:"h5 m-0",children:"Belum Ada Materi Pembelajaran"}),b==="teacher"&&e.jsx("button",{className:"btn btn-info",onClick:()=>v(!0),children:"+ Tambah Materi"})]})}),w&&e.jsx(Be,{add:()=>v(!1),grades:N,gLoad:t}),m&&!w&&e.jsx(pt,{chapters:m,add:()=>v(!0),grades:N,setGrade:p=>P(p),role:h==null?void 0:h.role})]})},gt=Object.freeze(Object.defineProperty({__proto__:null,default:ht},Symbol.toStringTag,{value:"Module"}));export{gt as L,Qe as a,Q as r};
