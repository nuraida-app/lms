const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/YouTube-DuCTOSse.js","assets/index-SXBgl-Na.js","assets/index-CPW-tBat.css","assets/SoundCloud-CcfVwPuj.js","assets/Vimeo-qfGd0Iuj.js","assets/Mux-ApMopbsp.js","assets/Facebook-YxgN-4la.js","assets/Streamable-roiaR4M3.js","assets/Wistia-CSmefiAN.js","assets/Twitch-CRmlnETL.js","assets/DailyMotion-BlDDbF9G.js","assets/Mixcloud-t9Gvp8cC.js","assets/Vidyard-JB5KeFi1.js","assets/Kaltura-B0Ee6ut9.js","assets/FilePlayer-CHrNl2F0.js","assets/Preview-Cv5t2NHG.js"])))=>i.map(i=>d[i]);
var Ce=Object.defineProperty;var Ee=(i,l,f)=>l in i?Ce(i,l,{enumerable:!0,configurable:!0,writable:!0,value:f}):i[l]=f;var G=(i,l,f)=>Ee(i,typeof l!="symbol"?l+"":l,f);import{r as M,j as e,i as ce,u as de,C as Re,N as Me,y as U,B as X,O as Ae,q as ue,_ as V,Q as Le,R as Oe,S as J,s as Ie,T as ke,U as De,V as Ue,W as He,c as Ve,X as ze}from"./index-SXBgl-Na.js";import{L as qe}from"./Layout-DhhZhy9k.js";import{Q as Fe,a as $e,P as Z,R as Be}from"./quill.snow-BW79X3n8.js";import{r as Ke}from"./index-Chjiymov.js";Fe.register("modules/resize",$e);class $ extends M.Component{constructor(f){super(f);G(this,"handleChange",f=>{this.setState({editorHtml:f}),this.props.onChange(f)});G(this,"handleImageUpload",()=>{const f=document.createElement("input");f.setAttribute("type","file"),f.setAttribute("accept","image/*"),f.click(),f.onchange=async()=>{const v=f.files[0];if(v){const m=new FormData;m.append("file",v);try{const w=await(await fetch("https://api.nibs.sch.id/upload/images",{method:"POST",body:m})).json(),P=this.reactQuillRef.getEditor().getSelection();this.reactQuillRef.getEditor().insertEmbed(P.index,"image",w.url)}catch(b){console.error("Error uploading image:",b),alert(b.message)}}}});this.state={editorHtml:f.value||""},this.reactQuillRef=null}componentDidUpdate(f){f.value!==this.props.value&&this.setState({editorHtml:this.props.value})}render(){const{placeholder:f}=this.props;return e.jsx("div",{className:"d-flex mb-2",style:{height:300},children:e.jsx(Be,{ref:v=>{this.reactQuillRef=v},theme:"snow",value:this.state.editorHtml,onChange:this.handleChange,modules:$.modules(this.handleImageUpload),formats:$.formats,placeholder:f,style:{width:"100%"},className:"react-quill border border-sm rounded"})})}}$.modules=i=>({toolbar:{container:[[{header:"1"},{header:"2"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],["clean"]],handlers:{image:i}},clipboard:{matchVisual:!1},resize:{modules:["Resize"]}});$.formats=["header","font","size","bold","italic","underline","strike","blockquote","list","indent","link","image","video"];$.propTypes={placeholder:Z.string,value:Z.string,onChange:Z.func.isRequired};const Xe=({add:i,grades:l,gLoad:f})=>{const m=ce().code,{user:b}=de(h=>h.auth),[w,P]=M.useState(""),[p,_]=M.useState(""),[S,t]=M.useState([]),[d,u]=M.useState(""),[R,x]=M.useState(""),{data:T,isLoading:r}=Re(d,{skip:!d}),[c,{data:a,isLoading:s,isSuccess:o,error:y,reset:N}]=Me(),E=h=>{t(j=>j.includes(h)?j.filter(A=>A!==h):[...j,h])},L=h=>{t([]),u(h)},I=h=>{if(h.preventDefault(),!w||!p||S.length===0){U.error("Lengkapi form");return}const j={id:R||"",code:m,title:w,classIds:S,gradeid:d,goal:p,teacher_id:b.id};console.log(j),c(j)};return M.useEffect(()=>{const h=localStorage.getItem("chapter");if(h){const j=JSON.parse(h);P(j.chapter_title),_(j.chapter_goal),t(j.class_codes||[]),u(j.grade_id||""),x(j.chapter_id)}},[]),M.useEffect(()=>{o&&(U.success(a.message),N(),P(""),_(""),t([]),i(),localStorage.removeItem("chapter")),y&&(U.error(y.data.message),N())},[a,o,y]),e.jsxs("form",{className:"d-flex flex-column gap-1 rounded shadow p-2 bg-white",onSubmit:I,children:[e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text",id:"basic-addon1",children:"Materi Pembelajaran"}),e.jsx("input",{type:"text",className:"form-control","aria-label":"Username",placeholder:"Nama Materi Pembelajaran",value:w||"",onChange:h=>P(h.target.value)})]}),e.jsx($,{placeholder:"Tujuan Pembelajaran",value:p,onChange:h=>_(h)}),e.jsxs("div",{className:"d-flex flex-column gap-1",children:[e.jsx("p",{className:"m-0 h6",children:"Pilih Tingkat"}),f?e.jsx(X,{}):e.jsx("div",{className:"d-flex flex-wrap gap-1",children:l==null?void 0:l.map((h,j)=>e.jsx("button",{type:"button",className:`btn ${d==h.id?"btn-success":"btn-secondary"}`,onClick:()=>L(h.id),children:h.grade},j))})]}),T&&e.jsxs("div",{className:"d-flex flex-column gap-1",children:[e.jsx("p",{className:"m-0 h6",children:"Pilih Kelas"}),r?e.jsx(X,{}):e.jsx("div",{className:"d-flex flex-wrap gap-1",children:T==null?void 0:T.map((h,j)=>e.jsx("button",{type:"button",className:`btn ${S.includes(h.code)?"btn-success":"btn-secondary"}`,onClick:()=>E(h.code),children:h.name},j))})]}),e.jsx("hr",{}),e.jsxs("div",{className:"text-end",children:[e.jsx("button",{className:"btn btn-danger me-2",onClick:i,children:"Tutup"}),s?e.jsx(X,{}):e.jsx("button",{className:"btn btn-success",type:"submit",children:"Simpan"})]})]})},We=({type:i,topicId:l,subjectCode:f})=>{const v=i==="file",m=i==="video",[b,w]=M.useState(""),[P,p]=M.useState(""),[_,S]=M.useState(null),[t,{data:d,isSuccess:u,isLoading:R,error:x,reset:T}]=Ae(),r=c=>{if(c.preventDefault(),!b.trim()){U.warning("Nama harus diisi");return}if(v&&!_){U.warning("File harus diunggah.");return}if(m&&!P.trim()){U.warning("URL video harus diisi.");return}const a=new FormData;if(v&&_)a.append("file",_);else if(m&&P)a.append("url",P);else{U.error("Mohon lengkapi semua data sebelum mengunggah.");return}a.append("title",b),a.append("subject_code",f),a.append("topic_id",l),t(a)};return M.useEffect(()=>{u&&(U.success(d.message),w(""),p(""),S(null),T()),x&&(U.error(x.data.message),T())},[d,u,x]),e.jsx("div",{className:"modal fade",id:"upload",tabIndex:"-1","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("form",{className:"modal-content",onSubmit:r,children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h5",{className:"modal-title",children:["Tambah ",v?"File":m?"Video":"Konten"]}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body d-flex flex-column gap-2",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:`Nama ${v?"File":m?"Video":"Konten"}`,value:b,onChange:c=>w(c.target.value),required:!0}),v&&e.jsx("input",{type:"file",className:"form-control",onChange:c=>S(c.target.files[0]),required:!0}),m&&e.jsx("input",{type:"text",className:"form-control",placeholder:"URL Video",value:P,onChange:c=>p(c.target.value),required:!0})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Tutup"}),e.jsx("button",{className:"btn btn-primary",type:"submit",disabled:R,children:R?"Mengunggah...":"Simpan"})]})]})})})};var ee,fe;function Qe(){if(fe)return ee;fe=1,ee=function(m,b,w){var P=document.head||document.getElementsByTagName("head")[0],p=document.createElement("script");typeof b=="function"&&(w=b,b={}),b=b||{},w=w||function(){},p.type=b.type||"text/javascript",p.charset=b.charset||"utf8",p.async="async"in b?!!b.async:!0,p.src=m,b.attrs&&i(p,b.attrs),b.text&&(p.text=""+b.text);var _="onload"in p?l:f;_(p,w),p.onload||l(p,w),P.appendChild(p)};function i(v,m){for(var b in m)v.setAttribute(b,m[b])}function l(v,m){v.onload=function(){this.onerror=this.onload=null,m(null,v)},v.onerror=function(){this.onerror=this.onload=null,m(new Error("Failed to load "+this.src),v)}}function f(v,m){v.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,m(null,v))}}return ee}var te,ye;function Se(){if(ye)return te;ye=1;var i=function(c){return l(c)&&!f(c)};function l(r){return!!r&&typeof r=="object"}function f(r){var c=Object.prototype.toString.call(r);return c==="[object RegExp]"||c==="[object Date]"||b(r)}var v=typeof Symbol=="function"&&Symbol.for,m=v?Symbol.for("react.element"):60103;function b(r){return r.$$typeof===m}function w(r){return Array.isArray(r)?[]:{}}function P(r,c){return c.clone!==!1&&c.isMergeableObject(r)?x(w(r),r,c):r}function p(r,c,a){return r.concat(c).map(function(s){return P(s,a)})}function _(r,c){if(!c.customMerge)return x;var a=c.customMerge(r);return typeof a=="function"?a:x}function S(r){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(r).filter(function(c){return Object.propertyIsEnumerable.call(r,c)}):[]}function t(r){return Object.keys(r).concat(S(r))}function d(r,c){try{return c in r}catch{return!1}}function u(r,c){return d(r,c)&&!(Object.hasOwnProperty.call(r,c)&&Object.propertyIsEnumerable.call(r,c))}function R(r,c,a){var s={};return a.isMergeableObject(r)&&t(r).forEach(function(o){s[o]=P(r[o],a)}),t(c).forEach(function(o){u(r,o)||(d(r,o)&&a.isMergeableObject(c[o])?s[o]=_(o,a)(r[o],c[o],a):s[o]=P(c[o],a))}),s}function x(r,c,a){a=a||{},a.arrayMerge=a.arrayMerge||p,a.isMergeableObject=a.isMergeableObject||i,a.cloneUnlessOtherwiseSpecified=P;var s=Array.isArray(c),o=Array.isArray(r),y=s===o;return y?s?a.arrayMerge(r,c,a):R(r,c,a):P(c,a)}x.all=function(c,a){if(!Array.isArray(c))throw new Error("first argument should be an array");return c.reduce(function(s,o){return x(s,o,a)},{})};var T=x;return te=T,te}var ae,be;function W(){if(be)return ae;be=1;var i=Object.create,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,v=Object.getOwnPropertyNames,m=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,w=(g,C)=>{for(var k in C)l(g,k,{get:C[k],enumerable:!0})},P=(g,C,k,D)=>{if(C&&typeof C=="object"||typeof C=="function")for(let z of v(C))!b.call(g,z)&&z!==k&&l(g,z,{get:()=>C[z],enumerable:!(D=f(C,z))||D.enumerable});return g},p=(g,C,k)=>(k=g!=null?i(m(g)):{},P(!g||!g.__esModule?l(k,"default",{value:g,enumerable:!0}):k,g)),_=g=>P(l({},"__esModule",{value:!0}),g),S={};w(S,{callPlayer:()=>n,getConfig:()=>j,getSDK:()=>h,isBlobUrl:()=>H,isMediaStream:()=>O,lazy:()=>R,omit:()=>A,parseEndTime:()=>y,parseStartTime:()=>o,queryString:()=>E,randomString:()=>N,supportsWebKitPresentationMode:()=>F}),ae=_(S);var t=p(ue()),d=p(Qe()),u=p(Se());const R=g=>t.default.lazy(async()=>{const C=await g();return typeof C.default=="function"?C:C.default}),x=/[?&#](?:start|t)=([0-9hms]+)/,T=/[?&#]end=([0-9hms]+)/,r=/(\d+)(h|m|s)/g,c=/^\d+$/;function a(g,C){if(g instanceof Array)return;const k=g.match(C);if(k){const D=k[1];if(D.match(r))return s(D);if(c.test(D))return parseInt(D)}}function s(g){let C=0,k=r.exec(g);for(;k!==null;){const[,D,z]=k;z==="h"&&(C+=parseInt(D,10)*60*60),z==="m"&&(C+=parseInt(D,10)*60),z==="s"&&(C+=parseInt(D,10)),k=r.exec(g)}return C}function o(g){return a(g,x)}function y(g){return a(g,T)}function N(){return Math.random().toString(36).substr(2,5)}function E(g){return Object.keys(g).map(C=>`${C}=${g[C]}`).join("&")}function L(g){return window[g]?window[g]:window.exports&&window.exports[g]?window.exports[g]:window.module&&window.module.exports&&window.module.exports[g]?window.module.exports[g]:null}const I={},h=function(C,k,D=null,z=()=>!0,K=d.default){const Q=L(k);return Q&&z(Q)?Promise.resolve(Q):new Promise((pe,he)=>{if(I[C]){I[C].push({resolve:pe,reject:he});return}I[C]=[{resolve:pe,reject:he}];const me=B=>{I[C].forEach(Y=>Y.resolve(B))};if(D){const B=window[D];window[D]=function(){B&&B(),me(L(k))}}K(C,B=>{B?(I[C].forEach(Y=>Y.reject(B)),I[C]=null):D||me(L(k))})})};function j(g,C){return(0,u.default)(C.config,g.config)}function A(g,...C){const k=[].concat(...C),D={},z=Object.keys(g);for(const K of z)k.indexOf(K)===-1&&(D[K]=g[K]);return D}function n(g,...C){if(!this.player||!this.player[g]){let k=`ReactPlayer: ${this.constructor.displayName} player could not call %c${g}%c – `;return this.player?this.player[g]||(k+="The method was not available"):k+="The player was not available",console.warn(k,"font-weight: bold",""),null}return this.player[g](...C)}function O(g){return typeof window<"u"&&typeof window.MediaStream<"u"&&g instanceof window.MediaStream}function H(g){return/^blob:/.test(g)}function F(g=document.createElement("video")){const C=/iPhone|iPod/.test(navigator.userAgent)===!1;return g.webkitSupportsPresentationMode&&typeof g.webkitSetPresentationMode=="function"&&C}function q(g){return g}return ae}var re,_e;function Ye(){if(_e)return re;_e=1;var i=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,v=Object.prototype.hasOwnProperty,m=(n,O)=>{for(var H in O)i(n,H,{get:O[H],enumerable:!0})},b=(n,O,H,F)=>{if(typeof O=="object"||typeof O=="function")for(let q of f(O))!v.call(n,q)&&q!==H&&i(n,q,{get:()=>O[q],enumerable:!(F=l(O,q))||F.enumerable});return n},w=n=>b(i({},"__esModule",{value:!0}),n),P={};m(P,{AUDIO_EXTENSIONS:()=>N,DASH_EXTENSIONS:()=>I,FLV_EXTENSIONS:()=>h,HLS_EXTENSIONS:()=>L,MATCH_URL_DAILYMOTION:()=>a,MATCH_URL_FACEBOOK:()=>u,MATCH_URL_FACEBOOK_WATCH:()=>R,MATCH_URL_KALTURA:()=>y,MATCH_URL_MIXCLOUD:()=>s,MATCH_URL_MUX:()=>d,MATCH_URL_SOUNDCLOUD:()=>S,MATCH_URL_STREAMABLE:()=>x,MATCH_URL_TWITCH_CHANNEL:()=>c,MATCH_URL_TWITCH_VIDEO:()=>r,MATCH_URL_VIDYARD:()=>o,MATCH_URL_VIMEO:()=>t,MATCH_URL_WISTIA:()=>T,MATCH_URL_YOUTUBE:()=>_,VIDEO_EXTENSIONS:()=>E,canPlay:()=>A}),re=w(P);var p=W();const _=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,S=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/,t=/vimeo\.com\/(?!progressive_redirect).+/,d=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,u=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/,R=/^https?:\/\/fb\.watch\/.+$/,x=/streamable\.com\/([a-z0-9]+)$/,T=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,r=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/,c=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,a=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/,s=/mixcloud\.com\/([^/]+\/[^/]+)/,o=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/,y=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/,N=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,E=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,L=/\.(m3u8)($|\?)/i,I=/\.(mpd)($|\?)/i,h=/\.(flv)($|\?)/i,j=n=>{if(n instanceof Array){for(const O of n)if(typeof O=="string"&&j(O)||j(O.src))return!0;return!1}return(0,p.isMediaStream)(n)||(0,p.isBlobUrl)(n)?!0:N.test(n)||E.test(n)||L.test(n)||I.test(n)||h.test(n)},A={youtube:n=>n instanceof Array?n.every(O=>_.test(O)):_.test(n),soundcloud:n=>S.test(n)&&!N.test(n),vimeo:n=>t.test(n)&&!E.test(n)&&!L.test(n),mux:n=>d.test(n),facebook:n=>u.test(n)||R.test(n),streamable:n=>x.test(n),wistia:n=>T.test(n),twitch:n=>r.test(n)||c.test(n),dailymotion:n=>a.test(n),mixcloud:n=>s.test(n),vidyard:n=>o.test(n),kaltura:n=>y.test(n),file:j};return re}var se,ge;function Ge(){if(ge)return se;ge=1;var i=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,v=Object.prototype.hasOwnProperty,m=(t,d)=>{for(var u in d)i(t,u,{get:d[u],enumerable:!0})},b=(t,d,u,R)=>{if(typeof d=="object"||typeof d=="function")for(let x of f(d))!v.call(t,x)&&x!==u&&i(t,x,{get:()=>d[x],enumerable:!(R=l(d,x))||R.enumerable});return t},w=t=>b(i({},"__esModule",{value:!0}),t),P={};m(P,{default:()=>S}),se=w(P);var p=W(),_=Ye(),S=[{key:"youtube",name:"YouTube",canPlay:_.canPlay.youtube,lazyPlayer:(0,p.lazy)(()=>V(()=>import("./YouTube-DuCTOSse.js").then(t=>t.Y),__vite__mapDeps([0,1,2])))},{key:"soundcloud",name:"SoundCloud",canPlay:_.canPlay.soundcloud,lazyPlayer:(0,p.lazy)(()=>V(()=>import("./SoundCloud-CcfVwPuj.js").then(t=>t.S),__vite__mapDeps([3,1,2])))},{key:"vimeo",name:"Vimeo",canPlay:_.canPlay.vimeo,lazyPlayer:(0,p.lazy)(()=>V(()=>import("./Vimeo-qfGd0Iuj.js").then(t=>t.V),__vite__mapDeps([4,1,2])))},{key:"mux",name:"Mux",canPlay:_.canPlay.mux,lazyPlayer:(0,p.lazy)(()=>V(()=>import("./Mux-ApMopbsp.js").then(t=>t.M),__vite__mapDeps([5,1,2])))},{key:"facebook",name:"Facebook",canPlay:_.canPlay.facebook,lazyPlayer:(0,p.lazy)(()=>V(()=>import("./Facebook-YxgN-4la.js").then(t=>t.F),__vite__mapDeps([6,1,2])))},{key:"streamable",name:"Streamable",canPlay:_.canPlay.streamable,lazyPlayer:(0,p.lazy)(()=>V(()=>import("./Streamable-roiaR4M3.js").then(t=>t.S),__vite__mapDeps([7,1,2])))},{key:"wistia",name:"Wistia",canPlay:_.canPlay.wistia,lazyPlayer:(0,p.lazy)(()=>V(()=>import("./Wistia-CSmefiAN.js").then(t=>t.W),__vite__mapDeps([8,1,2])))},{key:"twitch",name:"Twitch",canPlay:_.canPlay.twitch,lazyPlayer:(0,p.lazy)(()=>V(()=>import("./Twitch-CRmlnETL.js").then(t=>t.T),__vite__mapDeps([9,1,2])))},{key:"dailymotion",name:"DailyMotion",canPlay:_.canPlay.dailymotion,lazyPlayer:(0,p.lazy)(()=>V(()=>import("./DailyMotion-BlDDbF9G.js").then(t=>t.D),__vite__mapDeps([10,1,2])))},{key:"mixcloud",name:"Mixcloud",canPlay:_.canPlay.mixcloud,lazyPlayer:(0,p.lazy)(()=>V(()=>import("./Mixcloud-t9Gvp8cC.js").then(t=>t.M),__vite__mapDeps([11,1,2])))},{key:"vidyard",name:"Vidyard",canPlay:_.canPlay.vidyard,lazyPlayer:(0,p.lazy)(()=>V(()=>import("./Vidyard-JB5KeFi1.js").then(t=>t.V),__vite__mapDeps([12,1,2])))},{key:"kaltura",name:"Kaltura",canPlay:_.canPlay.kaltura,lazyPlayer:(0,p.lazy)(()=>V(()=>import("./Kaltura-B0Ee6ut9.js").then(t=>t.K),__vite__mapDeps([13,1,2])))},{key:"file",name:"FilePlayer",canPlay:_.canPlay.file,canEnablePIP:t=>_.canPlay.file(t)&&(document.pictureInPictureEnabled||(0,p.supportsWebKitPresentationMode)())&&!_.AUDIO_EXTENSIONS.test(t),lazyPlayer:(0,p.lazy)(()=>V(()=>import("./FilePlayer-CHrNl2F0.js").then(t=>t.F),__vite__mapDeps([14,1,2])))}];return se}var ve=Number.isNaN||function(l){return typeof l=="number"&&l!==l};function Je(i,l){return!!(i===l||ve(i)&&ve(l))}function Ze(i,l){if(i.length!==l.length)return!1;for(var f=0;f<i.length;f++)if(!Je(i[f],l[f]))return!1;return!0}function et(i,l){l===void 0&&(l=Ze);var f,v=[],m,b=!1;function w(){for(var P=[],p=0;p<arguments.length;p++)P[p]=arguments[p];return b&&f===this&&l(P,v)||(m=i.apply(this,P),b=!0,f=this,v=P),m}return w}const tt=Object.freeze(Object.defineProperty({__proto__:null,default:et},Symbol.toStringTag,{value:"Module"})),at=Le(tt);var ne,Pe;function Ne(){if(Pe)return ne;Pe=1;var i=Object.create,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,v=Object.getOwnPropertyNames,m=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,w=(E,L)=>{for(var I in L)l(E,I,{get:L[I],enumerable:!0})},P=(E,L,I,h)=>{if(L&&typeof L=="object"||typeof L=="function")for(let j of v(L))!b.call(E,j)&&j!==I&&l(E,j,{get:()=>L[j],enumerable:!(h=f(L,j))||h.enumerable});return E},p=(E,L,I)=>(I=E!=null?i(m(E)):{},P(!E||!E.__esModule?l(I,"default",{value:E,enumerable:!0}):I,E)),_=E=>P(l({},"__esModule",{value:!0}),E),S={};w(S,{defaultProps:()=>N,propTypes:()=>o}),ne=_(S);var t=p(Ke());const{string:d,bool:u,number:R,array:x,oneOfType:T,shape:r,object:c,func:a,node:s}=t.default,o={url:T([d,x,c]),playing:u,loop:u,controls:u,volume:R,muted:u,playbackRate:R,width:T([d,R]),height:T([d,R]),style:c,progressInterval:R,playsinline:u,pip:u,stopOnUnmount:u,light:T([u,d,c]),playIcon:s,previewTabIndex:R,previewAriaLabel:d,fallback:s,oEmbedUrl:d,wrapper:T([d,a,r({render:a.isRequired})]),config:r({soundcloud:r({options:c}),youtube:r({playerVars:c,embedOptions:c,onUnstarted:a}),facebook:r({appId:d,version:d,playerId:d,attributes:c}),dailymotion:r({params:c}),vimeo:r({playerOptions:c,title:d}),mux:r({attributes:c,version:d}),file:r({attributes:c,tracks:x,forceVideo:u,forceAudio:u,forceHLS:u,forceSafariHLS:u,forceDisableHls:u,forceDASH:u,forceFLV:u,hlsOptions:c,hlsVersion:d,dashVersion:d,flvVersion:d}),wistia:r({options:c,playerId:d,customControls:x}),mixcloud:r({options:c}),twitch:r({options:c,playerId:d}),vidyard:r({options:c})}),onReady:a,onStart:a,onPlay:a,onPause:a,onBuffer:a,onBufferEnd:a,onEnded:a,onError:a,onDuration:a,onSeek:a,onPlaybackRateChange:a,onPlaybackQualityChange:a,onProgress:a,onClickPreview:a,onEnablePIP:a,onDisablePIP:a},y=()=>{},N={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:y},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},mux:{attributes:{},version:"2"},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:y,onStart:y,onPlay:y,onPause:y,onBuffer:y,onBufferEnd:y,onEnded:y,onError:y,onDuration:y,onSeek:y,onPlaybackRateChange:y,onPlaybackQualityChange:y,onProgress:y,onClickPreview:y,onEnablePIP:y,onDisablePIP:y};return ne}var ie,xe;function rt(){if(xe)return ie;xe=1;var i=Object.create,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,v=Object.getOwnPropertyNames,m=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,w=(a,s,o)=>s in a?l(a,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[s]=o,P=(a,s)=>{for(var o in s)l(a,o,{get:s[o],enumerable:!0})},p=(a,s,o,y)=>{if(s&&typeof s=="object"||typeof s=="function")for(let N of v(s))!b.call(a,N)&&N!==o&&l(a,N,{get:()=>s[N],enumerable:!(y=f(s,N))||y.enumerable});return a},_=(a,s,o)=>(o=a!=null?i(m(a)):{},p(!a||!a.__esModule?l(o,"default",{value:a,enumerable:!0}):o,a)),S=a=>p(l({},"__esModule",{value:!0}),a),t=(a,s,o)=>(w(a,typeof s!="symbol"?s+"":s,o),o),d={};P(d,{default:()=>c}),ie=S(d);var u=_(ue()),R=_(Oe()),x=Ne(),T=W();const r=5e3;class c extends u.Component{constructor(){super(...arguments),t(this,"mounted",!1),t(this,"isReady",!1),t(this,"isPlaying",!1),t(this,"isLoading",!0),t(this,"loadOnReady",null),t(this,"startOnPlay",!0),t(this,"seekOnPlay",null),t(this,"onDurationCalled",!1),t(this,"handlePlayerMount",s=>{if(this.player){this.progress();return}this.player=s,this.player.load(this.props.url),this.progress()}),t(this,"getInternalPlayer",s=>this.player?this.player[s]:null),t(this,"progress",()=>{if(this.props.url&&this.player&&this.isReady){const s=this.getCurrentTime()||0,o=this.getSecondsLoaded(),y=this.getDuration();if(y){const N={playedSeconds:s,played:s/y};o!==null&&(N.loadedSeconds=o,N.loaded=o/y),(N.playedSeconds!==this.prevPlayed||N.loadedSeconds!==this.prevLoaded)&&this.props.onProgress(N),this.prevPlayed=N.playedSeconds,this.prevLoaded=N.loadedSeconds}}this.progressTimeout=setTimeout(this.progress,this.props.progressFrequency||this.props.progressInterval)}),t(this,"handleReady",()=>{if(!this.mounted)return;this.isReady=!0,this.isLoading=!1;const{onReady:s,playing:o,volume:y,muted:N}=this.props;s(),!N&&y!==null&&this.player.setVolume(y),this.loadOnReady?(this.player.load(this.loadOnReady,!0),this.loadOnReady=null):o&&this.player.play(),this.handleDurationCheck()}),t(this,"handlePlay",()=>{this.isPlaying=!0,this.isLoading=!1;const{onStart:s,onPlay:o,playbackRate:y}=this.props;this.startOnPlay&&(this.player.setPlaybackRate&&y!==1&&this.player.setPlaybackRate(y),s(),this.startOnPlay=!1),o(),this.seekOnPlay&&(this.seekTo(this.seekOnPlay),this.seekOnPlay=null),this.handleDurationCheck()}),t(this,"handlePause",s=>{this.isPlaying=!1,this.isLoading||this.props.onPause(s)}),t(this,"handleEnded",()=>{const{activePlayer:s,loop:o,onEnded:y}=this.props;s.loopOnEnded&&o&&this.seekTo(0),o||(this.isPlaying=!1,y())}),t(this,"handleError",(...s)=>{this.isLoading=!1,this.props.onError(...s)}),t(this,"handleDurationCheck",()=>{clearTimeout(this.durationCheckTimeout);const s=this.getDuration();s?this.onDurationCalled||(this.props.onDuration(s),this.onDurationCalled=!0):this.durationCheckTimeout=setTimeout(this.handleDurationCheck,100)}),t(this,"handleLoaded",()=>{this.isLoading=!1})}componentDidMount(){this.mounted=!0}componentWillUnmount(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}componentDidUpdate(s){if(!this.player)return;const{url:o,playing:y,volume:N,muted:E,playbackRate:L,pip:I,loop:h,activePlayer:j,disableDeferredLoading:A}=this.props;if(!(0,R.default)(s.url,o)){if(this.isLoading&&!j.forceLoad&&!A&&!(0,T.isMediaStream)(o)){console.warn(`ReactPlayer: the attempt to load ${o} is being deferred until the player has loaded`),this.loadOnReady=o;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(o,this.isReady)}!s.playing&&y&&!this.isPlaying&&this.player.play(),s.playing&&!y&&this.isPlaying&&this.player.pause(),!s.pip&&I&&this.player.enablePIP&&this.player.enablePIP(),s.pip&&!I&&this.player.disablePIP&&this.player.disablePIP(),s.volume!==N&&N!==null&&this.player.setVolume(N),s.muted!==E&&(E?this.player.mute():(this.player.unmute(),N!==null&&setTimeout(()=>this.player.setVolume(N)))),s.playbackRate!==L&&this.player.setPlaybackRate&&this.player.setPlaybackRate(L),s.loop!==h&&this.player.setLoop&&this.player.setLoop(h)}getDuration(){return this.isReady?this.player.getDuration():null}getCurrentTime(){return this.isReady?this.player.getCurrentTime():null}getSecondsLoaded(){return this.isReady?this.player.getSecondsLoaded():null}seekTo(s,o,y){if(!this.isReady){s!==0&&(this.seekOnPlay=s,setTimeout(()=>{this.seekOnPlay=null},r));return}if(o?o==="fraction":s>0&&s<1){const E=this.player.getDuration();if(!E){console.warn("ReactPlayer: could not seek using fraction – duration not yet available");return}this.player.seekTo(E*s,y);return}this.player.seekTo(s,y)}render(){const s=this.props.activePlayer;return s?u.default.createElement(s,{...this.props,onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError}):null}}return t(c,"displayName","Player"),t(c,"propTypes",x.propTypes),t(c,"defaultProps",x.defaultProps),ie}var oe,je;function st(){if(je)return oe;je=1;var i=Object.create,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,v=Object.getOwnPropertyNames,m=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,w=(h,j,A)=>j in h?l(h,j,{enumerable:!0,configurable:!0,writable:!0,value:A}):h[j]=A,P=(h,j)=>{for(var A in j)l(h,A,{get:j[A],enumerable:!0})},p=(h,j,A,n)=>{if(j&&typeof j=="object"||typeof j=="function")for(let O of v(j))!b.call(h,O)&&O!==A&&l(h,O,{get:()=>j[O],enumerable:!(n=f(j,O))||n.enumerable});return h},_=(h,j,A)=>(A=h!=null?i(m(h)):{},p(!h||!h.__esModule?l(A,"default",{value:h,enumerable:!0}):A,h)),S=h=>p(l({},"__esModule",{value:!0}),h),t=(h,j,A)=>(w(h,typeof j!="symbol"?j+"":j,A),A),d={};P(d,{createReactPlayer:()=>I}),oe=S(d);var u=_(ue()),R=_(Se()),x=_(at),T=_(Oe()),r=Ne(),c=W(),a=_(rt());const s=(0,c.lazy)(()=>V(()=>import("./Preview-Cv5t2NHG.js").then(h=>h.P),__vite__mapDeps([15,1,2]))),o=typeof window<"u"&&window.document&&typeof document<"u",y=typeof J<"u"&&J.window&&J.window.document,N=Object.keys(r.propTypes),E=o||y?u.Suspense:()=>null,L=[],I=(h,j)=>{var A;return A=class extends u.Component{constructor(){super(...arguments),t(this,"state",{showPreview:!!this.props.light}),t(this,"references",{wrapper:n=>{this.wrapper=n},player:n=>{this.player=n}}),t(this,"handleClickPreview",n=>{this.setState({showPreview:!1}),this.props.onClickPreview(n)}),t(this,"showPreview",()=>{this.setState({showPreview:!0})}),t(this,"getDuration",()=>this.player?this.player.getDuration():null),t(this,"getCurrentTime",()=>this.player?this.player.getCurrentTime():null),t(this,"getSecondsLoaded",()=>this.player?this.player.getSecondsLoaded():null),t(this,"getInternalPlayer",(n="player")=>this.player?this.player.getInternalPlayer(n):null),t(this,"seekTo",(n,O,H)=>{if(!this.player)return null;this.player.seekTo(n,O,H)}),t(this,"handleReady",()=>{this.props.onReady(this)}),t(this,"getActivePlayer",(0,x.default)(n=>{for(const O of[...L,...h])if(O.canPlay(n))return O;return j||null})),t(this,"getConfig",(0,x.default)((n,O)=>{const{config:H}=this.props;return R.default.all([r.defaultProps.config,r.defaultProps.config[O]||{},H,H[O]||{}])})),t(this,"getAttributes",(0,x.default)(n=>(0,c.omit)(this.props,N))),t(this,"renderActivePlayer",n=>{if(!n)return null;const O=this.getActivePlayer(n);if(!O)return null;const H=this.getConfig(n,O.key);return u.default.createElement(a.default,{...this.props,key:O.key,ref:this.references.player,config:H,activePlayer:O.lazyPlayer||O,onReady:this.handleReady})})}shouldComponentUpdate(n,O){return!(0,T.default)(this.props,n)||!(0,T.default)(this.state,O)}componentDidUpdate(n){const{light:O}=this.props;!n.light&&O&&this.setState({showPreview:!0}),n.light&&!O&&this.setState({showPreview:!1})}renderPreview(n){if(!n)return null;const{light:O,playIcon:H,previewTabIndex:F,oEmbedUrl:q,previewAriaLabel:g}=this.props;return u.default.createElement(s,{url:n,light:O,playIcon:H,previewTabIndex:F,previewAriaLabel:g,oEmbedUrl:q,onClick:this.handleClickPreview})}render(){const{url:n,style:O,width:H,height:F,fallback:q,wrapper:g}=this.props,{showPreview:C}=this.state,k=this.getAttributes(n),D=typeof g=="string"?this.references.wrapper:void 0;return u.default.createElement(g,{ref:D,style:{...O,width:H,height:F},...k},u.default.createElement(E,{fallback:q},C?this.renderPreview(n):this.renderActivePlayer(n)))}},t(A,"displayName","ReactPlayer"),t(A,"propTypes",r.propTypes),t(A,"defaultProps",r.defaultProps),t(A,"addCustomPlayer",n=>{L.push(n)}),t(A,"removeCustomPlayers",()=>{L.length=0}),t(A,"canPlay",n=>{for(const O of[...L,...h])if(O.canPlay(n))return!0;return!1}),t(A,"canEnablePIP",n=>{for(const O of[...L,...h])if(O.canEnablePIP&&O.canEnablePIP(n))return!0;return!1}),A};return oe}var le,we;function nt(){if(we)return le;we=1;var i=Object.create,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,v=Object.getOwnPropertyNames,m=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,w=(x,T)=>{for(var r in T)l(x,r,{get:T[r],enumerable:!0})},P=(x,T,r,c)=>{if(T&&typeof T=="object"||typeof T=="function")for(let a of v(T))!b.call(x,a)&&a!==r&&l(x,a,{get:()=>T[a],enumerable:!(c=f(T,a))||c.enumerable});return x},p=(x,T,r)=>(r=x!=null?i(m(x)):{},P(!x||!x.__esModule?l(r,"default",{value:x,enumerable:!0}):r,x)),_=x=>P(l({},"__esModule",{value:!0}),x),S={};w(S,{default:()=>R}),le=_(S);var t=p(Ge()),d=st();const u=t.default[t.default.length-1];var R=(0,d.createReactPlayer)(t.default,u);return le}var it=nt();const ot=Ie(it),Te=({name:i,url:l})=>{const[f,v]=M.useState(!1),[m,b]=M.useState(0),[w,P]=M.useState(0),[p,_]=M.useState("auto"),[S,t]=M.useState(l),d=M.useRef(null),u=M.useRef(null),R=o=>{const y=Math.floor(o/3600),N=Math.floor(o%3600/60),E=Math.floor(o%60);return`${y>0?`${y}:`:""}${y>0?String(N).padStart(2,"0"):N}:${String(E).padStart(2,"0")}`},x=o=>{b(o)},T=o=>{P(o.playedSeconds)},r=()=>{v(o=>!o)},c=o=>{u.current&&u.current.seekTo(o)},a=()=>{d.current.requestFullscreen?d.current.requestFullscreen():d.current.webkitRequestFullscreen?d.current.webkitRequestFullscreen():d.current.mozRequestFullScreen?d.current.mozRequestFullScreen():d.current.msRequestFullscreen&&d.current.msRequestFullscreen()},s=o=>{_(o);const y=l.split("?")[0],N=new URLSearchParams(l.split("?")[1]||"");o!=="auto"?N.set("vq",o):N.delete("vq");const E=`${y}?${N.toString()}`;t(E)};return e.jsx("div",{className:"modal fade",id:"video",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"exampleModalLabel",children:i}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:()=>v(!1)})]}),e.jsxs("div",{className:"modal-body d-flex flex-column gap-2",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("p",{className:"text-muted m-0",children:["Durasi: ",R(m)]}),e.jsx("p",{className:"text-muted m-0",children:R(w)})]}),p==="auto"?e.jsxs("div",{className:"dropdown text-center",children:[e.jsx("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"qualityDropdown","data-bs-toggle":"dropdown","aria-expanded":"false",children:"Pilih Kualitas Video"}),e.jsxs("ul",{className:"dropdown-menu","aria-labelledby":"qualityDropdown",children:[e.jsx("li",{children:e.jsx("button",{className:"dropdown-item",onClick:()=>s("auto"),children:"Auto"})}),e.jsx("li",{children:e.jsx("button",{className:"dropdown-item",onClick:()=>s("hd1080"),children:"1080p"})}),e.jsx("li",{children:e.jsx("button",{className:"dropdown-item",onClick:()=>s("hd720"),children:"720p"})}),e.jsx("li",{children:e.jsx("button",{className:"dropdown-item",onClick:()=>s("sd480"),children:"480p"})})]})]}):e.jsx("div",{ref:d,style:{aspectRatio:"16/9",width:"100%"},children:e.jsx(ot,{ref:u,playing:f,controls:!0,url:S,width:"100%",height:"100%",onDuration:x,onProgress:T,style:{pointerEvents:"none"}},S)}),e.jsx("div",{className:"progress position-relative",onClick:o=>{if(m){const y=o.target.getBoundingClientRect(),E=(o.clientX-y.left)/y.width*m;c(E)}},style:{height:"10px",cursor:"pointer"},children:e.jsx("div",{className:"progress-bar bg-danger",role:"progressbar",style:{width:`${w/m*100}%`},"aria-valuenow":w/m*100,"aria-valuemin":"0","aria-valuemax":"100"})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{onClick:r,className:"btn btn-primary",style:{pointerEvents:"auto"},children:f?"Pause":"Play"}),e.jsx("button",{onClick:a,className:"btn btn-secondary",style:{pointerEvents:"auto"},children:"Fullscreen"}),e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:()=>v(!1),children:"Close"})]})]})})})},lt=({files:i})=>{const[l,f]=M.useState(""),[v,m]=M.useState(""),{user:b}=de(u=>u.auth);if(!i||i.length===0)return e.jsx("p",{children:"Belum ada file yang diupload untuk topik ini."});const[w,{data:P,isSuccess:p,isLoading:_,error:S,reset:t}]=ke(),d=u=>{u.link_file?window.open(u.link_file,"_blank"):(f(u.title),m(u.video))};return M.useEffect(()=>{p&&(U.success(P.message),t()),S&&(U.error(S.data.message),t())},[P,p,S]),e.jsxs("div",{children:[i.map(u=>e.jsxs("div",{className:"mb-2 d-flex justify-content-between p-1 rounded border border-2",children:[e.jsxs("button",{className:"btn btn-primary d-flex gap-2",onClick:()=>d(u),"data-bs-toggle":u.video?"modal":null,"data-bs-target":u.video?"#video":null,children:[u.video?e.jsx("i",{className:"bi bi-youtube"}):e.jsx("i",{className:"bi bi-file-earmark-pdf"}),u.title]}),_?e.jsx(X,{}):(b==null?void 0:b.role)==="teacher"&&e.jsx("button",{className:"btn btn-danger",onClick:()=>w(u.file_id),children:"Hapus"})]},u.file_id)),e.jsx(Te,{name:l,url:v})]})},ct=i=>({__html:i}),dt=({topic:i,role:l,uploadHandler:f,setGoal:v,setTitle:m,setChapterId:b,setTopicId:w})=>{M.useState(""),M.useState("");const[P,{data:p,isSuccess:_,isLoading:S,error:t,reset:d}]=De(),u=()=>{w(i.topic_id),m(i.topic_title),b(i.topic_chapter),v(i.goal)};return M.useEffect(()=>{_&&(U.success(p.message),d()),t&&(U.error(t.data.message),d())},[p,_,t]),e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex justify-content-between p-2 rounded border border-2",children:[e.jsx("button",{className:"btn btn-outline-info text-start",type:"button","data-bs-toggle":"collapse","data-bs-target":`#topic-${i.topic_id}`,"aria-expanded":"false","aria-controls":`topic-${i.topic_id}`,style:{width:"40%"},children:i.topic_title}),l==="teacher"&&e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{"data-bs-toggle":"modal","data-bs-target":"#upload",className:"btn btn-secondary",onClick:()=>f(i.topic_id,"file"),children:"File"}),e.jsx("button",{"data-bs-toggle":"modal","data-bs-target":"#upload",className:"btn btn-secondary",onClick:()=>f(i.topic_id,"video"),children:"Video"}),e.jsx("button",{className:"btn btn-warning","data-bs-toggle":"modal","data-bs-target":"#topic",onClick:u,children:"Edit"}),e.jsx("button",{className:"btn btn-danger",disabled:!!S,onClick:()=>P(i.topic_id),children:S?"Loading...":"Hapus"})]})]}),e.jsx("div",{className:"collapse mt-2",id:`topic-${i.topic_id}`,children:e.jsxs("div",{className:"card card-body",children:[e.jsx("p",{className:"text-muted fst-italic",dangerouslySetInnerHTML:ct(i.goal)}),e.jsx(lt,{files:i.files})]})}),e.jsx(Te,{})]})},ut=i=>({__html:i}),pt=({chapter:i,role:l,uploadHandler:f,setChapterId:v,setTopicId:m,setGoal:b,setTitle:w,add:P})=>{var x;const[p,{data:_,isSuccess:S,isLoading:t,error:d,reset:u}]=Ue(),R=()=>{localStorage.setItem("chapter",JSON.stringify(i)),P()};return M.useEffect(()=>{S&&(U.success(_.message),u(),window.location.reload()),d&&(U.error(d.data.message),u())},[_,S,d]),console.log(i),e.jsxs("div",{className:"w-100 card shadow border border-info",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h5",{children:i.chapter_title}),e.jsx("p",{className:"m-0 fst-italic text-secondary",children:i.teacher_name}),e.jsxs("p",{className:"m-0 fst-italic text-secondary",children:["Tingkat ",e.jsx("span",{children:i.grade_name})]}),e.jsxs("p",{className:"m-0 fst-italic text-secondary",children:["Kelas ",e.jsx("span",{children:i.class_names.join(", ")})]})]}),e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Tujuan Pembelajaran"}),e.jsx("p",{className:"card-text",dangerouslySetInnerHTML:ut(i.chapter_goal)}),e.jsx("p",{className:"h6",children:"Topik Pembelajaran"}),e.jsx("div",{className:"d-flex flex-column gap-2",children:(x=i.topics)==null?void 0:x.map(T=>e.jsx(dt,{topic:T,role:l,uploadHandler:f,setGoal:b,setTitle:w,setChapterId:v,setTopicId:m},T.topic_id))}),l==="teacher"&&e.jsxs("div",{className:"text-end p-2 border-top border-2 mt-3",children:[e.jsx("button",{className:"btn btn-info","data-bs-toggle":"modal","data-bs-target":"#topic",onClick:()=>v(i.chapter_id),children:"+ Topik"}),e.jsx("button",{className:"btn btn-warning mx-2",onClick:R,children:"Edit"}),e.jsx("button",{className:"btn btn-danger",disabled:t,onClick:()=>p(i.chapter_id),children:t?"Loading...":"Hapus"})]})]})]})},ht=({title:i,setTitle:l,goal:f,setGoal:v,aLoad:m,addTopicHandler:b,closeHandler:w})=>e.jsx("div",{className:"modal fade",id:"topic",tabIndex:"-1","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("form",{className:"modal-content",onSubmit:b,children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Tambah Topik Pembelajaran"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:w})]}),e.jsxs("div",{className:"modal-body d-flex flex-column gap-2",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Topik Pembelajaran",value:i,onChange:P=>l(P.target.value)}),e.jsx($,{placeholder:"Tujuan Pembelajaran",value:f,onChange:v})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:w,children:"Tutup"}),m?e.jsx("button",{className:"btn btn-primary",disabled:!0,children:"Loading..."}):e.jsx("button",{className:"btn btn-primary",type:"submit",children:"Simpan"})]})]})})}),mt=({chapters:i,add:l,grades:f,setGrade:v,role:m})=>{const b=ce(),{code:w,name:P}=b,[p,_]=M.useState(""),[S,t]=M.useState(""),[d,u]=M.useState(""),[R,x]=M.useState(""),[T,r]=M.useState(""),[c,{data:a,isLoading:s,isSuccess:o,error:y,reset:N}]=He(),E=()=>{x(""),t(""),_("")},L=(h,j)=>{x(h),r(j)},I=h=>{if(h.preventDefault(),!S||!p)return U.error("Semua input harus diisi");c({id:R,title:S,goal:p,chapter_id:d,subject_code:w})};return M.useEffect(()=>{o&&(U.success(a.message),E(),N()),y&&(U.error(y.data.message),N())},[o,y]),e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between rounded p-2 shadow bg-white mb-2",children:[e.jsx("p",{className:"m-0 h5",children:P.replace("-"," ")}),m!=="student"&&e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>v(""),children:"Reset"}),f==null?void 0:f.map(h=>e.jsx("button",{className:"btn btn-secondary",onClick:()=>v(h.id),children:h.grade},h.id))]}),m==="teacher"&&e.jsx("button",{className:"btn btn-info",onClick:l,children:"+ Materi Pembelajaran"})]}),e.jsx("div",{className:"d-flex flex-wrap gap-2",children:i==null?void 0:i.map(h=>e.jsx(pt,{chapter:h,role:m,uploadHandler:L,setChapterId:u,setTopicId:x,setGoal:_,setTitle:t,add:l},h.chapter_id))}),e.jsx(We,{type:T,topicId:R,subjectCode:w}),e.jsx(ht,{title:S,setTitle:t,goal:p,setGoal:_,aLoad:s,addTopicHandler:I,closeHandler:E})]})},ft=()=>{const i=ce(),{name:l,id:f,code:v}=i,{user:m}=de(u=>u.auth),b=m==null?void 0:m.role,[w,P]=M.useState(!1),[p,_]=M.useState(""),{data:S,isLoading:t}=Ve(),{data:d}=ze({grade_id:b==="student"?m==null?void 0:m.grade_id:p,subjectCode:v});return e.jsxs(qe,{title:l,children:[!w&&!d&&e.jsx("div",{style:{height:"calc(100vh - 90px)"},className:"d-flex flex-column gap-2 align-items-center",children:e.jsxs("div",{style:{height:"100%"},className:"container-fluid rounded shadow bg-white p-3 d-flex flex-column align-items-center gap-2",children:[e.jsx("div",{style:{height:"100%",width:500},children:e.jsx("img",{src:"/ilustration.jpg",alt:"robot-not-found",style:{height:"100%",width:"100%",objectFit:"cover"}})}),e.jsx("p",{className:"h5 m-0",children:"Belum Ada Materi Pembelajaran"}),b==="teacher"&&e.jsx("button",{className:"btn btn-info",onClick:()=>P(!0),children:"+ Tambah Materi"})]})}),w&&e.jsx(Xe,{add:()=>P(!1),grades:S,gLoad:t}),d&&!w&&e.jsx(mt,{chapters:d,add:()=>P(!0),grades:S,setGrade:u=>_(u),role:m==null?void 0:m.role})]})},Pt=Object.freeze(Object.defineProperty({__proto__:null,default:ft},Symbol.toStringTag,{value:"Module"}));export{Pt as L,Ye as a,W as r};
