var Mh=Object.defineProperty;var Bh=(n,t,e)=>t in n?Mh(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var k=(n,t,e)=>Bh(n,typeof t!="symbol"?t+"":t,e);import{s as Vr,S as It,ay as Xt,r as Ph}from"./index-SXBgl-Na.js";import{r as jh}from"./index-Chjiymov.js";var Dh=jh();const Yb=Vr(Dh);var $s,Lo;function $h(){if(Lo)return $s;Lo=1;function n(){this.__data__=[],this.size=0}return $s=n,$s}var Us,Oo;function mu(){if(Oo)return Us;Oo=1;function n(t,e){return t===e||t!==t&&e!==e}return Us=n,Us}var zs,Ro;function Dn(){if(Ro)return zs;Ro=1;var n=mu();function t(e,r){for(var s=e.length;s--;)if(n(e[s][0],r))return s;return-1}return zs=t,zs}var Fs,Io;function Uh(){if(Io)return Fs;Io=1;var n=Dn(),t=Array.prototype,e=t.splice;function r(s){var i=this.__data__,a=n(i,s);if(a<0)return!1;var l=i.length-1;return a==l?i.pop():e.call(i,a,1),--this.size,!0}return Fs=r,Fs}var Hs,ko;function zh(){if(ko)return Hs;ko=1;var n=Dn();function t(e){var r=this.__data__,s=n(r,e);return s<0?void 0:r[s][1]}return Hs=t,Hs}var Gs,Mo;function Fh(){if(Mo)return Gs;Mo=1;var n=Dn();function t(e){return n(this.__data__,e)>-1}return Gs=t,Gs}var Ks,Bo;function Hh(){if(Bo)return Ks;Bo=1;var n=Dn();function t(e,r){var s=this.__data__,i=n(s,e);return i<0?(++this.size,s.push([e,r])):s[i][1]=r,this}return Ks=t,Ks}var Vs,Po;function $n(){if(Po)return Vs;Po=1;var n=$h(),t=Uh(),e=zh(),r=Fh(),s=Hh();function i(a){var l=-1,c=a==null?0:a.length;for(this.clear();++l<c;){var h=a[l];this.set(h[0],h[1])}}return i.prototype.clear=n,i.prototype.delete=t,i.prototype.get=e,i.prototype.has=r,i.prototype.set=s,Vs=i,Vs}var Ws,jo;function Gh(){if(jo)return Ws;jo=1;var n=$n();function t(){this.__data__=new n,this.size=0}return Ws=t,Ws}var Zs,Do;function Kh(){if(Do)return Zs;Do=1;function n(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}return Zs=n,Zs}var Xs,$o;function Vh(){if($o)return Xs;$o=1;function n(t){return this.__data__.get(t)}return Xs=n,Xs}var Ys,Uo;function Wh(){if(Uo)return Ys;Uo=1;function n(t){return this.__data__.has(t)}return Ys=n,Ys}var Qs,zo;function bu(){if(zo)return Qs;zo=1;var n=typeof It=="object"&&It&&It.Object===Object&&It;return Qs=n,Qs}var Js,Fo;function he(){if(Fo)return Js;Fo=1;var n=bu(),t=typeof self=="object"&&self&&self.Object===Object&&self,e=n||t||Function("return this")();return Js=e,Js}var ti,Ho;function ro(){if(Ho)return ti;Ho=1;var n=he(),t=n.Symbol;return ti=t,ti}var ei,Go;function Zh(){if(Go)return ei;Go=1;var n=ro(),t=Object.prototype,e=t.hasOwnProperty,r=t.toString,s=n?n.toStringTag:void 0;function i(a){var l=e.call(a,s),c=a[s];try{a[s]=void 0;var h=!0}catch{}var g=r.call(a);return h&&(l?a[s]=c:delete a[s]),g}return ei=i,ei}var ri,Ko;function Xh(){if(Ko)return ri;Ko=1;var n=Object.prototype,t=n.toString;function e(r){return t.call(r)}return ri=e,ri}var ni,Vo;function Un(){if(Vo)return ni;Vo=1;var n=ro(),t=Zh(),e=Xh(),r="[object Null]",s="[object Undefined]",i=n?n.toStringTag:void 0;function a(l){return l==null?l===void 0?s:r:i&&i in Object(l)?t(l):e(l)}return ni=a,ni}var si,Wo;function vu(){if(Wo)return si;Wo=1;function n(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}return si=n,si}var ii,Zo;function yu(){if(Zo)return ii;Zo=1;var n=Un(),t=vu(),e="[object AsyncFunction]",r="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function a(l){if(!t(l))return!1;var c=n(l);return c==r||c==s||c==e||c==i}return ii=a,ii}var ai,Xo;function Yh(){if(Xo)return ai;Xo=1;var n=he(),t=n["__core-js_shared__"];return ai=t,ai}var oi,Yo;function Qh(){if(Yo)return oi;Yo=1;var n=Yh(),t=function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function e(r){return!!t&&t in r}return oi=e,oi}var li,Qo;function _u(){if(Qo)return li;Qo=1;var n=Function.prototype,t=n.toString;function e(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return li=e,li}var ci,Jo;function Jh(){if(Jo)return ci;Jo=1;var n=yu(),t=Qh(),e=vu(),r=_u(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,a=Function.prototype,l=Object.prototype,c=a.toString,h=l.hasOwnProperty,g=RegExp("^"+c.call(h).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function _(f){if(!e(f)||t(f))return!1;var v=n(f)?g:i;return v.test(r(f))}return ci=_,ci}var ui,tl;function tf(){if(tl)return ui;tl=1;function n(t,e){return t==null?void 0:t[e]}return ui=n,ui}var hi,el;function ur(){if(el)return hi;el=1;var n=Jh(),t=tf();function e(r,s){var i=t(r,s);return n(i)?i:void 0}return hi=e,hi}var fi,rl;function no(){if(rl)return fi;rl=1;var n=ur(),t=he(),e=n(t,"Map");return fi=e,fi}var di,nl;function zn(){if(nl)return di;nl=1;var n=ur(),t=n(Object,"create");return di=t,di}var pi,sl;function ef(){if(sl)return pi;sl=1;var n=zn();function t(){this.__data__=n?n(null):{},this.size=0}return pi=t,pi}var gi,il;function rf(){if(il)return gi;il=1;function n(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}return gi=n,gi}var mi,al;function nf(){if(al)return mi;al=1;var n=zn(),t="__lodash_hash_undefined__",e=Object.prototype,r=e.hasOwnProperty;function s(i){var a=this.__data__;if(n){var l=a[i];return l===t?void 0:l}return r.call(a,i)?a[i]:void 0}return mi=s,mi}var bi,ol;function sf(){if(ol)return bi;ol=1;var n=zn(),t=Object.prototype,e=t.hasOwnProperty;function r(s){var i=this.__data__;return n?i[s]!==void 0:e.call(i,s)}return bi=r,bi}var vi,ll;function af(){if(ll)return vi;ll=1;var n=zn(),t="__lodash_hash_undefined__";function e(r,s){var i=this.__data__;return this.size+=this.has(r)?0:1,i[r]=n&&s===void 0?t:s,this}return vi=e,vi}var yi,cl;function of(){if(cl)return yi;cl=1;var n=ef(),t=rf(),e=nf(),r=sf(),s=af();function i(a){var l=-1,c=a==null?0:a.length;for(this.clear();++l<c;){var h=a[l];this.set(h[0],h[1])}}return i.prototype.clear=n,i.prototype.delete=t,i.prototype.get=e,i.prototype.has=r,i.prototype.set=s,yi=i,yi}var _i,ul;function lf(){if(ul)return _i;ul=1;var n=of(),t=$n(),e=no();function r(){this.size=0,this.__data__={hash:new n,map:new(e||t),string:new n}}return _i=r,_i}var Ai,hl;function cf(){if(hl)return Ai;hl=1;function n(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}return Ai=n,Ai}var Ei,fl;function Fn(){if(fl)return Ei;fl=1;var n=cf();function t(e,r){var s=e.__data__;return n(r)?s[typeof r=="string"?"string":"hash"]:s.map}return Ei=t,Ei}var Ti,dl;function uf(){if(dl)return Ti;dl=1;var n=Fn();function t(e){var r=n(this,e).delete(e);return this.size-=r?1:0,r}return Ti=t,Ti}var wi,pl;function hf(){if(pl)return wi;pl=1;var n=Fn();function t(e){return n(this,e).get(e)}return wi=t,wi}var xi,gl;function ff(){if(gl)return xi;gl=1;var n=Fn();function t(e){return n(this,e).has(e)}return xi=t,xi}var Ni,ml;function df(){if(ml)return Ni;ml=1;var n=Fn();function t(e,r){var s=n(this,e),i=s.size;return s.set(e,r),this.size+=s.size==i?0:1,this}return Ni=t,Ni}var qi,bl;function Au(){if(bl)return qi;bl=1;var n=lf(),t=uf(),e=hf(),r=ff(),s=df();function i(a){var l=-1,c=a==null?0:a.length;for(this.clear();++l<c;){var h=a[l];this.set(h[0],h[1])}}return i.prototype.clear=n,i.prototype.delete=t,i.prototype.get=e,i.prototype.has=r,i.prototype.set=s,qi=i,qi}var Si,vl;function pf(){if(vl)return Si;vl=1;var n=$n(),t=no(),e=Au(),r=200;function s(i,a){var l=this.__data__;if(l instanceof n){var c=l.__data__;if(!t||c.length<r-1)return c.push([i,a]),this.size=++l.size,this;l=this.__data__=new e(c)}return l.set(i,a),this.size=l.size,this}return Si=s,Si}var Ci,yl;function gf(){if(yl)return Ci;yl=1;var n=$n(),t=Gh(),e=Kh(),r=Vh(),s=Wh(),i=pf();function a(l){var c=this.__data__=new n(l);this.size=c.size}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=s,a.prototype.set=i,Ci=a,Ci}var Li,_l;function mf(){if(_l)return Li;_l=1;var n="__lodash_hash_undefined__";function t(e){return this.__data__.set(e,n),this}return Li=t,Li}var Oi,Al;function bf(){if(Al)return Oi;Al=1;function n(t){return this.__data__.has(t)}return Oi=n,Oi}var Ri,El;function vf(){if(El)return Ri;El=1;var n=Au(),t=mf(),e=bf();function r(s){var i=-1,a=s==null?0:s.length;for(this.__data__=new n;++i<a;)this.add(s[i])}return r.prototype.add=r.prototype.push=t,r.prototype.has=e,Ri=r,Ri}var Ii,Tl;function yf(){if(Tl)return Ii;Tl=1;function n(t,e){for(var r=-1,s=t==null?0:t.length;++r<s;)if(e(t[r],r,t))return!0;return!1}return Ii=n,Ii}var ki,wl;function _f(){if(wl)return ki;wl=1;function n(t,e){return t.has(e)}return ki=n,ki}var Mi,xl;function Eu(){if(xl)return Mi;xl=1;var n=vf(),t=yf(),e=_f(),r=1,s=2;function i(a,l,c,h,g,_){var f=c&r,v=a.length,b=l.length;if(v!=b&&!(f&&b>v))return!1;var m=_.get(a),y=_.get(l);if(m&&y)return m==l&&y==a;var E=-1,T=!0,S=c&s?new n:void 0;for(_.set(a,l),_.set(l,a);++E<v;){var C=a[E],O=l[E];if(h)var B=f?h(O,C,E,l,a,_):h(C,O,E,a,l,_);if(B!==void 0){if(B)continue;T=!1;break}if(S){if(!t(l,function(U,X){if(!e(S,X)&&(C===U||g(C,U,c,h,_)))return S.push(X)})){T=!1;break}}else if(!(C===O||g(C,O,c,h,_))){T=!1;break}}return _.delete(a),_.delete(l),T}return Mi=i,Mi}var Bi,Nl;function Af(){if(Nl)return Bi;Nl=1;var n=he(),t=n.Uint8Array;return Bi=t,Bi}var Pi,ql;function Ef(){if(ql)return Pi;ql=1;function n(t){var e=-1,r=Array(t.size);return t.forEach(function(s,i){r[++e]=[i,s]}),r}return Pi=n,Pi}var ji,Sl;function Tf(){if(Sl)return ji;Sl=1;function n(t){var e=-1,r=Array(t.size);return t.forEach(function(s){r[++e]=s}),r}return ji=n,ji}var Di,Cl;function wf(){if(Cl)return Di;Cl=1;var n=ro(),t=Af(),e=mu(),r=Eu(),s=Ef(),i=Tf(),a=1,l=2,c="[object Boolean]",h="[object Date]",g="[object Error]",_="[object Map]",f="[object Number]",v="[object RegExp]",b="[object Set]",m="[object String]",y="[object Symbol]",E="[object ArrayBuffer]",T="[object DataView]",S=n?n.prototype:void 0,C=S?S.valueOf:void 0;function O(B,U,X,at,ut,d,q){switch(X){case T:if(B.byteLength!=U.byteLength||B.byteOffset!=U.byteOffset)return!1;B=B.buffer,U=U.buffer;case E:return!(B.byteLength!=U.byteLength||!d(new t(B),new t(U)));case c:case h:case f:return e(+B,+U);case g:return B.name==U.name&&B.message==U.message;case v:case m:return B==U+"";case _:var A=s;case b:var I=at&a;if(A||(A=i),B.size!=U.size&&!I)return!1;var L=q.get(B);if(L)return L==U;at|=l,q.set(B,U);var N=r(A(B),A(U),at,ut,d,q);return q.delete(B),N;case y:if(C)return C.call(B)==C.call(U)}return!1}return Di=O,Di}var $i,Ll;function xf(){if(Ll)return $i;Ll=1;function n(t,e){for(var r=-1,s=e.length,i=t.length;++r<s;)t[i+r]=e[r];return t}return $i=n,$i}var Ui,Ol;function so(){if(Ol)return Ui;Ol=1;var n=Array.isArray;return Ui=n,Ui}var zi,Rl;function Nf(){if(Rl)return zi;Rl=1;var n=xf(),t=so();function e(r,s,i){var a=s(r);return t(r)?a:n(a,i(r))}return zi=e,zi}var Fi,Il;function qf(){if(Il)return Fi;Il=1;function n(t,e){for(var r=-1,s=t==null?0:t.length,i=0,a=[];++r<s;){var l=t[r];e(l,r,t)&&(a[i++]=l)}return a}return Fi=n,Fi}var Hi,kl;function Sf(){if(kl)return Hi;kl=1;function n(){return[]}return Hi=n,Hi}var Gi,Ml;function Cf(){if(Ml)return Gi;Ml=1;var n=qf(),t=Sf(),e=Object.prototype,r=e.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(a){return a==null?[]:(a=Object(a),n(s(a),function(l){return r.call(a,l)}))}:t;return Gi=i,Gi}var Ki,Bl;function Lf(){if(Bl)return Ki;Bl=1;function n(t,e){for(var r=-1,s=Array(t);++r<t;)s[r]=e(r);return s}return Ki=n,Ki}var Vi,Pl;function Hn(){if(Pl)return Vi;Pl=1;function n(t){return t!=null&&typeof t=="object"}return Vi=n,Vi}var Wi,jl;function Of(){if(jl)return Wi;jl=1;var n=Un(),t=Hn(),e="[object Arguments]";function r(s){return t(s)&&n(s)==e}return Wi=r,Wi}var Zi,Dl;function Rf(){if(Dl)return Zi;Dl=1;var n=Of(),t=Hn(),e=Object.prototype,r=e.hasOwnProperty,s=e.propertyIsEnumerable,i=n(function(){return arguments}())?n:function(a){return t(a)&&r.call(a,"callee")&&!s.call(a,"callee")};return Zi=i,Zi}var Or={exports:{}},Xi,$l;function If(){if($l)return Xi;$l=1;function n(){return!1}return Xi=n,Xi}Or.exports;var Ul;function Tu(){return Ul||(Ul=1,function(n,t){var e=he(),r=If(),s=t&&!t.nodeType&&t,i=s&&!0&&n&&!n.nodeType&&n,a=i&&i.exports===s,l=a?e.Buffer:void 0,c=l?l.isBuffer:void 0,h=c||r;n.exports=h}(Or,Or.exports)),Or.exports}var Yi,zl;function kf(){if(zl)return Yi;zl=1;var n=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function e(r,s){var i=typeof r;return s=s??n,!!s&&(i=="number"||i!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<s}return Yi=e,Yi}var Qi,Fl;function wu(){if(Fl)return Qi;Fl=1;var n=9007199254740991;function t(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=n}return Qi=t,Qi}var Ji,Hl;function Mf(){if(Hl)return Ji;Hl=1;var n=Un(),t=wu(),e=Hn(),r="[object Arguments]",s="[object Array]",i="[object Boolean]",a="[object Date]",l="[object Error]",c="[object Function]",h="[object Map]",g="[object Number]",_="[object Object]",f="[object RegExp]",v="[object Set]",b="[object String]",m="[object WeakMap]",y="[object ArrayBuffer]",E="[object DataView]",T="[object Float32Array]",S="[object Float64Array]",C="[object Int8Array]",O="[object Int16Array]",B="[object Int32Array]",U="[object Uint8Array]",X="[object Uint8ClampedArray]",at="[object Uint16Array]",ut="[object Uint32Array]",d={};d[T]=d[S]=d[C]=d[O]=d[B]=d[U]=d[X]=d[at]=d[ut]=!0,d[r]=d[s]=d[y]=d[i]=d[E]=d[a]=d[l]=d[c]=d[h]=d[g]=d[_]=d[f]=d[v]=d[b]=d[m]=!1;function q(A){return e(A)&&t(A.length)&&!!d[n(A)]}return Ji=q,Ji}var ta,Gl;function Bf(){if(Gl)return ta;Gl=1;function n(t){return function(e){return t(e)}}return ta=n,ta}var Rr={exports:{}};Rr.exports;var Kl;function Pf(){return Kl||(Kl=1,function(n,t){var e=bu(),r=t&&!t.nodeType&&t,s=r&&!0&&n&&!n.nodeType&&n,i=s&&s.exports===r,a=i&&e.process,l=function(){try{var c=s&&s.require&&s.require("util").types;return c||a&&a.binding&&a.binding("util")}catch{}}();n.exports=l}(Rr,Rr.exports)),Rr.exports}var ea,Vl;function xu(){if(Vl)return ea;Vl=1;var n=Mf(),t=Bf(),e=Pf(),r=e&&e.isTypedArray,s=r?t(r):n;return ea=s,ea}var ra,Wl;function jf(){if(Wl)return ra;Wl=1;var n=Lf(),t=Rf(),e=so(),r=Tu(),s=kf(),i=xu(),a=Object.prototype,l=a.hasOwnProperty;function c(h,g){var _=e(h),f=!_&&t(h),v=!_&&!f&&r(h),b=!_&&!f&&!v&&i(h),m=_||f||v||b,y=m?n(h.length,String):[],E=y.length;for(var T in h)(g||l.call(h,T))&&!(m&&(T=="length"||v&&(T=="offset"||T=="parent")||b&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||s(T,E)))&&y.push(T);return y}return ra=c,ra}var na,Zl;function Df(){if(Zl)return na;Zl=1;var n=Object.prototype;function t(e){var r=e&&e.constructor,s=typeof r=="function"&&r.prototype||n;return e===s}return na=t,na}var sa,Xl;function $f(){if(Xl)return sa;Xl=1;function n(t,e){return function(r){return t(e(r))}}return sa=n,sa}var ia,Yl;function Uf(){if(Yl)return ia;Yl=1;var n=$f(),t=n(Object.keys,Object);return ia=t,ia}var aa,Ql;function zf(){if(Ql)return aa;Ql=1;var n=Df(),t=Uf(),e=Object.prototype,r=e.hasOwnProperty;function s(i){if(!n(i))return t(i);var a=[];for(var l in Object(i))r.call(i,l)&&l!="constructor"&&a.push(l);return a}return aa=s,aa}var oa,Jl;function Ff(){if(Jl)return oa;Jl=1;var n=yu(),t=wu();function e(r){return r!=null&&t(r.length)&&!n(r)}return oa=e,oa}var la,tc;function Hf(){if(tc)return la;tc=1;var n=jf(),t=zf(),e=Ff();function r(s){return e(s)?n(s):t(s)}return la=r,la}var ca,ec;function Gf(){if(ec)return ca;ec=1;var n=Nf(),t=Cf(),e=Hf();function r(s){return n(s,e,t)}return ca=r,ca}var ua,rc;function Kf(){if(rc)return ua;rc=1;var n=Gf(),t=1,e=Object.prototype,r=e.hasOwnProperty;function s(i,a,l,c,h,g){var _=l&t,f=n(i),v=f.length,b=n(a),m=b.length;if(v!=m&&!_)return!1;for(var y=v;y--;){var E=f[y];if(!(_?E in a:r.call(a,E)))return!1}var T=g.get(i),S=g.get(a);if(T&&S)return T==a&&S==i;var C=!0;g.set(i,a),g.set(a,i);for(var O=_;++y<v;){E=f[y];var B=i[E],U=a[E];if(c)var X=_?c(U,B,E,a,i,g):c(B,U,E,i,a,g);if(!(X===void 0?B===U||h(B,U,l,c,g):X)){C=!1;break}O||(O=E=="constructor")}if(C&&!O){var at=i.constructor,ut=a.constructor;at!=ut&&"constructor"in i&&"constructor"in a&&!(typeof at=="function"&&at instanceof at&&typeof ut=="function"&&ut instanceof ut)&&(C=!1)}return g.delete(i),g.delete(a),C}return ua=s,ua}var ha,nc;function Vf(){if(nc)return ha;nc=1;var n=ur(),t=he(),e=n(t,"DataView");return ha=e,ha}var fa,sc;function Wf(){if(sc)return fa;sc=1;var n=ur(),t=he(),e=n(t,"Promise");return fa=e,fa}var da,ic;function Zf(){if(ic)return da;ic=1;var n=ur(),t=he(),e=n(t,"Set");return da=e,da}var pa,ac;function Xf(){if(ac)return pa;ac=1;var n=ur(),t=he(),e=n(t,"WeakMap");return pa=e,pa}var ga,oc;function Yf(){if(oc)return ga;oc=1;var n=Vf(),t=no(),e=Wf(),r=Zf(),s=Xf(),i=Un(),a=_u(),l="[object Map]",c="[object Object]",h="[object Promise]",g="[object Set]",_="[object WeakMap]",f="[object DataView]",v=a(n),b=a(t),m=a(e),y=a(r),E=a(s),T=i;return(n&&T(new n(new ArrayBuffer(1)))!=f||t&&T(new t)!=l||e&&T(e.resolve())!=h||r&&T(new r)!=g||s&&T(new s)!=_)&&(T=function(S){var C=i(S),O=C==c?S.constructor:void 0,B=O?a(O):"";if(B)switch(B){case v:return f;case b:return l;case m:return h;case y:return g;case E:return _}return C}),ga=T,ga}var ma,lc;function Qf(){if(lc)return ma;lc=1;var n=gf(),t=Eu(),e=wf(),r=Kf(),s=Yf(),i=so(),a=Tu(),l=xu(),c=1,h="[object Arguments]",g="[object Array]",_="[object Object]",f=Object.prototype,v=f.hasOwnProperty;function b(m,y,E,T,S,C){var O=i(m),B=i(y),U=O?g:s(m),X=B?g:s(y);U=U==h?_:U,X=X==h?_:X;var at=U==_,ut=X==_,d=U==X;if(d&&a(m)){if(!a(y))return!1;O=!0,at=!1}if(d&&!at)return C||(C=new n),O||l(m)?t(m,y,E,T,S,C):e(m,y,U,E,T,S,C);if(!(E&c)){var q=at&&v.call(m,"__wrapped__"),A=ut&&v.call(y,"__wrapped__");if(q||A){var I=q?m.value():m,L=A?y.value():y;return C||(C=new n),S(I,L,E,T,C)}}return d?(C||(C=new n),r(m,y,E,T,S,C)):!1}return ma=b,ma}var ba,cc;function Jf(){if(cc)return ba;cc=1;var n=Qf(),t=Hn();function e(r,s,i,a,l){return r===s?!0:r==null||s==null||!t(r)&&!t(s)?r!==r&&s!==s:n(r,s,i,a,e,l)}return ba=e,ba}var va,uc;function td(){if(uc)return va;uc=1;var n=Jf();function t(e,r){return n(e,r)}return va=t,va}var ed=td();const Sr=Vr(ed);var Nu=typeof global=="object"&&global&&global.Object===Object&&global,rd=typeof self=="object"&&self&&self.Object===Object&&self,re=Nu||rd||Function("return this")(),_e=re.Symbol,qu=Object.prototype,nd=qu.hasOwnProperty,sd=qu.toString,Cr=_e?_e.toStringTag:void 0;function id(n){var t=nd.call(n,Cr),e=n[Cr];try{n[Cr]=void 0;var r=!0}catch{}var s=sd.call(n);return r&&(t?n[Cr]=e:delete n[Cr]),s}var ad=Object.prototype,od=ad.toString;function ld(n){return od.call(n)}var cd="[object Null]",ud="[object Undefined]",hc=_e?_e.toStringTag:void 0;function hr(n){return n==null?n===void 0?ud:cd:hc&&hc in Object(n)?id(n):ld(n)}function le(n){return n!=null&&typeof n=="object"}var Le=Array.isArray;function Ae(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}function Su(n){return n}var hd="[object AsyncFunction]",fd="[object Function]",dd="[object GeneratorFunction]",pd="[object Proxy]";function io(n){if(!Ae(n))return!1;var t=hr(n);return t==fd||t==dd||t==hd||t==pd}var ya=re["__core-js_shared__"],fc=function(){var n=/[^.]+$/.exec(ya&&ya.keys&&ya.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function gd(n){return!!fc&&fc in n}var md=Function.prototype,bd=md.toString;function Ie(n){if(n!=null){try{return bd.call(n)}catch{}try{return n+""}catch{}}return""}var vd=/[\\^$.*+?()[\]{}|]/g,yd=/^\[object .+?Constructor\]$/,_d=Function.prototype,Ad=Object.prototype,Ed=_d.toString,Td=Ad.hasOwnProperty,wd=RegExp("^"+Ed.call(Td).replace(vd,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function xd(n){if(!Ae(n)||gd(n))return!1;var t=io(n)?wd:yd;return t.test(Ie(n))}function Nd(n,t){return n==null?void 0:n[t]}function ke(n,t){var e=Nd(n,t);return xd(e)?e:void 0}var Ia=ke(re,"WeakMap"),dc=Object.create,qd=function(){function n(){}return function(t){if(!Ae(t))return{};if(dc)return dc(t);n.prototype=t;var e=new n;return n.prototype=void 0,e}}();function Sd(n,t,e){switch(e.length){case 0:return n.call(t);case 1:return n.call(t,e[0]);case 2:return n.call(t,e[0],e[1]);case 3:return n.call(t,e[0],e[1],e[2])}return n.apply(t,e)}function Cu(n,t){var e=-1,r=n.length;for(t||(t=Array(r));++e<r;)t[e]=n[e];return t}var Cd=800,Ld=16,Od=Date.now;function Rd(n){var t=0,e=0;return function(){var r=Od(),s=Ld-(r-e);if(e=r,s>0){if(++t>=Cd)return arguments[0]}else t=0;return n.apply(void 0,arguments)}}function Id(n){return function(){return n}}var Mn=function(){try{var n=ke(Object,"defineProperty");return n({},"",{}),n}catch{}}(),kd=Mn?function(n,t){return Mn(n,"toString",{configurable:!0,enumerable:!1,value:Id(t),writable:!0})}:Su,Md=Rd(kd);function Bd(n,t){for(var e=-1,r=n==null?0:n.length;++e<r&&t(n[e],e,n)!==!1;);return n}var Pd=9007199254740991,jd=/^(?:0|[1-9]\d*)$/;function Lu(n,t){var e=typeof n;return t=t??Pd,!!t&&(e=="number"||e!="symbol"&&jd.test(n))&&n>-1&&n%1==0&&n<t}function ao(n,t,e){t=="__proto__"&&Mn?Mn(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}function Wr(n,t){return n===t||n!==n&&t!==t}var Dd=Object.prototype,$d=Dd.hasOwnProperty;function Ou(n,t,e){var r=n[t];(!($d.call(n,t)&&Wr(r,e))||e===void 0&&!(t in n))&&ao(n,t,e)}function Zr(n,t,e,r){var s=!e;e||(e={});for(var i=-1,a=t.length;++i<a;){var l=t[i],c=void 0;c===void 0&&(c=n[l]),s?ao(e,l,c):Ou(e,l,c)}return e}var pc=Math.max;function Ud(n,t,e){return t=pc(t===void 0?n.length-1:t,0),function(){for(var r=arguments,s=-1,i=pc(r.length-t,0),a=Array(i);++s<i;)a[s]=r[t+s];s=-1;for(var l=Array(t+1);++s<t;)l[s]=r[s];return l[t]=e(a),Sd(n,this,l)}}function zd(n,t){return Md(Ud(n,t,Su),n+"")}var Fd=9007199254740991;function Ru(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Fd}function Gn(n){return n!=null&&Ru(n.length)&&!io(n)}function Hd(n,t,e){if(!Ae(e))return!1;var r=typeof t;return(r=="number"?Gn(e)&&Lu(t,e.length):r=="string"&&t in e)?Wr(e[t],n):!1}function Gd(n){return zd(function(t,e){var r=-1,s=e.length,i=s>1?e[s-1]:void 0,a=s>2?e[2]:void 0;for(i=n.length>3&&typeof i=="function"?(s--,i):void 0,a&&Hd(e[0],e[1],a)&&(i=s<3?void 0:i,s=1),t=Object(t);++r<s;){var l=e[r];l&&n(t,l,r,i)}return t})}var Kd=Object.prototype;function oo(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||Kd;return n===e}function Vd(n,t){for(var e=-1,r=Array(n);++e<n;)r[e]=t(e);return r}var Wd="[object Arguments]";function gc(n){return le(n)&&hr(n)==Wd}var Iu=Object.prototype,Zd=Iu.hasOwnProperty,Xd=Iu.propertyIsEnumerable,ka=gc(function(){return arguments}())?gc:function(n){return le(n)&&Zd.call(n,"callee")&&!Xd.call(n,"callee")};function Yd(){return!1}var ku=typeof exports=="object"&&exports&&!exports.nodeType&&exports,mc=ku&&typeof module=="object"&&module&&!module.nodeType&&module,Qd=mc&&mc.exports===ku,bc=Qd?re.Buffer:void 0,Jd=bc?bc.isBuffer:void 0,$r=Jd||Yd,tp="[object Arguments]",ep="[object Array]",rp="[object Boolean]",np="[object Date]",sp="[object Error]",ip="[object Function]",ap="[object Map]",op="[object Number]",lp="[object Object]",cp="[object RegExp]",up="[object Set]",hp="[object String]",fp="[object WeakMap]",dp="[object ArrayBuffer]",pp="[object DataView]",gp="[object Float32Array]",mp="[object Float64Array]",bp="[object Int8Array]",vp="[object Int16Array]",yp="[object Int32Array]",_p="[object Uint8Array]",Ap="[object Uint8ClampedArray]",Ep="[object Uint16Array]",Tp="[object Uint32Array]",ct={};ct[gp]=ct[mp]=ct[bp]=ct[vp]=ct[yp]=ct[_p]=ct[Ap]=ct[Ep]=ct[Tp]=!0;ct[tp]=ct[ep]=ct[dp]=ct[rp]=ct[pp]=ct[np]=ct[sp]=ct[ip]=ct[ap]=ct[op]=ct[lp]=ct[cp]=ct[up]=ct[hp]=ct[fp]=!1;function wp(n){return le(n)&&Ru(n.length)&&!!ct[hr(n)]}function lo(n){return function(t){return n(t)}}var Mu=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Br=Mu&&typeof module=="object"&&module&&!module.nodeType&&module,xp=Br&&Br.exports===Mu,_a=xp&&Nu.process,ir=function(){try{var n=Br&&Br.require&&Br.require("util").types;return n||_a&&_a.binding&&_a.binding("util")}catch{}}(),vc=ir&&ir.isTypedArray,co=vc?lo(vc):wp,Np=Object.prototype,qp=Np.hasOwnProperty;function Bu(n,t){var e=Le(n),r=!e&&ka(n),s=!e&&!r&&$r(n),i=!e&&!r&&!s&&co(n),a=e||r||s||i,l=a?Vd(n.length,String):[],c=l.length;for(var h in n)(t||qp.call(n,h))&&!(a&&(h=="length"||s&&(h=="offset"||h=="parent")||i&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||Lu(h,c)))&&l.push(h);return l}function Pu(n,t){return function(e){return n(t(e))}}var Sp=Pu(Object.keys,Object),Cp=Object.prototype,Lp=Cp.hasOwnProperty;function Op(n){if(!oo(n))return Sp(n);var t=[];for(var e in Object(n))Lp.call(n,e)&&e!="constructor"&&t.push(e);return t}function uo(n){return Gn(n)?Bu(n):Op(n)}function Rp(n){var t=[];if(n!=null)for(var e in Object(n))t.push(e);return t}var Ip=Object.prototype,kp=Ip.hasOwnProperty;function Mp(n){if(!Ae(n))return Rp(n);var t=oo(n),e=[];for(var r in n)r=="constructor"&&(t||!kp.call(n,r))||e.push(r);return e}function Xr(n){return Gn(n)?Bu(n,!0):Mp(n)}var Ur=ke(Object,"create");function Bp(){this.__data__=Ur?Ur(null):{},this.size=0}function Pp(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}var jp="__lodash_hash_undefined__",Dp=Object.prototype,$p=Dp.hasOwnProperty;function Up(n){var t=this.__data__;if(Ur){var e=t[n];return e===jp?void 0:e}return $p.call(t,n)?t[n]:void 0}var zp=Object.prototype,Fp=zp.hasOwnProperty;function Hp(n){var t=this.__data__;return Ur?t[n]!==void 0:Fp.call(t,n)}var Gp="__lodash_hash_undefined__";function Kp(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=Ur&&t===void 0?Gp:t,this}function Oe(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}Oe.prototype.clear=Bp;Oe.prototype.delete=Pp;Oe.prototype.get=Up;Oe.prototype.has=Hp;Oe.prototype.set=Kp;function Vp(){this.__data__=[],this.size=0}function Kn(n,t){for(var e=n.length;e--;)if(Wr(n[e][0],t))return e;return-1}var Wp=Array.prototype,Zp=Wp.splice;function Xp(n){var t=this.__data__,e=Kn(t,n);if(e<0)return!1;var r=t.length-1;return e==r?t.pop():Zp.call(t,e,1),--this.size,!0}function Yp(n){var t=this.__data__,e=Kn(t,n);return e<0?void 0:t[e][1]}function Qp(n){return Kn(this.__data__,n)>-1}function Jp(n,t){var e=this.__data__,r=Kn(e,n);return r<0?(++this.size,e.push([n,t])):e[r][1]=t,this}function fe(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}fe.prototype.clear=Vp;fe.prototype.delete=Xp;fe.prototype.get=Yp;fe.prototype.has=Qp;fe.prototype.set=Jp;var zr=ke(re,"Map");function tg(){this.size=0,this.__data__={hash:new Oe,map:new(zr||fe),string:new Oe}}function eg(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}function Vn(n,t){var e=n.__data__;return eg(t)?e[typeof t=="string"?"string":"hash"]:e.map}function rg(n){var t=Vn(this,n).delete(n);return this.size-=t?1:0,t}function ng(n){return Vn(this,n).get(n)}function sg(n){return Vn(this,n).has(n)}function ig(n,t){var e=Vn(this,n),r=e.size;return e.set(n,t),this.size+=e.size==r?0:1,this}function Me(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}Me.prototype.clear=tg;Me.prototype.delete=rg;Me.prototype.get=ng;Me.prototype.has=sg;Me.prototype.set=ig;function ju(n,t){for(var e=-1,r=t.length,s=n.length;++e<r;)n[s+e]=t[e];return n}var ho=Pu(Object.getPrototypeOf,Object),ag="[object Object]",og=Function.prototype,lg=Object.prototype,Du=og.toString,cg=lg.hasOwnProperty,ug=Du.call(Object);function hg(n){if(!le(n)||hr(n)!=ag)return!1;var t=ho(n);if(t===null)return!0;var e=cg.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&Du.call(e)==ug}function fg(){this.__data__=new fe,this.size=0}function dg(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}function pg(n){return this.__data__.get(n)}function gg(n){return this.__data__.has(n)}var mg=200;function bg(n,t){var e=this.__data__;if(e instanceof fe){var r=e.__data__;if(!zr||r.length<mg-1)return r.push([n,t]),this.size=++e.size,this;e=this.__data__=new Me(r)}return e.set(n,t),this.size=e.size,this}function Qt(n){var t=this.__data__=new fe(n);this.size=t.size}Qt.prototype.clear=fg;Qt.prototype.delete=dg;Qt.prototype.get=pg;Qt.prototype.has=gg;Qt.prototype.set=bg;function vg(n,t){return n&&Zr(t,uo(t),n)}function yg(n,t){return n&&Zr(t,Xr(t),n)}var $u=typeof exports=="object"&&exports&&!exports.nodeType&&exports,yc=$u&&typeof module=="object"&&module&&!module.nodeType&&module,_g=yc&&yc.exports===$u,_c=_g?re.Buffer:void 0,Ac=_c?_c.allocUnsafe:void 0;function Uu(n,t){if(t)return n.slice();var e=n.length,r=Ac?Ac(e):new n.constructor(e);return n.copy(r),r}function Ag(n,t){for(var e=-1,r=n==null?0:n.length,s=0,i=[];++e<r;){var a=n[e];t(a,e,n)&&(i[s++]=a)}return i}function zu(){return[]}var Eg=Object.prototype,Tg=Eg.propertyIsEnumerable,Ec=Object.getOwnPropertySymbols,fo=Ec?function(n){return n==null?[]:(n=Object(n),Ag(Ec(n),function(t){return Tg.call(n,t)}))}:zu;function wg(n,t){return Zr(n,fo(n),t)}var xg=Object.getOwnPropertySymbols,Fu=xg?function(n){for(var t=[];n;)ju(t,fo(n)),n=ho(n);return t}:zu;function Ng(n,t){return Zr(n,Fu(n),t)}function Hu(n,t,e){var r=t(n);return Le(n)?r:ju(r,e(n))}function Ma(n){return Hu(n,uo,fo)}function qg(n){return Hu(n,Xr,Fu)}var Ba=ke(re,"DataView"),Pa=ke(re,"Promise"),ja=ke(re,"Set"),Tc="[object Map]",Sg="[object Object]",wc="[object Promise]",xc="[object Set]",Nc="[object WeakMap]",qc="[object DataView]",Cg=Ie(Ba),Lg=Ie(zr),Og=Ie(Pa),Rg=Ie(ja),Ig=Ie(Ia),Dt=hr;(Ba&&Dt(new Ba(new ArrayBuffer(1)))!=qc||zr&&Dt(new zr)!=Tc||Pa&&Dt(Pa.resolve())!=wc||ja&&Dt(new ja)!=xc||Ia&&Dt(new Ia)!=Nc)&&(Dt=function(n){var t=hr(n),e=t==Sg?n.constructor:void 0,r=e?Ie(e):"";if(r)switch(r){case Cg:return qc;case Lg:return Tc;case Og:return wc;case Rg:return xc;case Ig:return Nc}return t});var kg=Object.prototype,Mg=kg.hasOwnProperty;function Bg(n){var t=n.length,e=new n.constructor(t);return t&&typeof n[0]=="string"&&Mg.call(n,"index")&&(e.index=n.index,e.input=n.input),e}var Bn=re.Uint8Array;function po(n){var t=new n.constructor(n.byteLength);return new Bn(t).set(new Bn(n)),t}function Pg(n,t){var e=t?po(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.byteLength)}var jg=/\w*$/;function Dg(n){var t=new n.constructor(n.source,jg.exec(n));return t.lastIndex=n.lastIndex,t}var Sc=_e?_e.prototype:void 0,Cc=Sc?Sc.valueOf:void 0;function $g(n){return Cc?Object(Cc.call(n)):{}}function Gu(n,t){var e=t?po(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}var Ug="[object Boolean]",zg="[object Date]",Fg="[object Map]",Hg="[object Number]",Gg="[object RegExp]",Kg="[object Set]",Vg="[object String]",Wg="[object Symbol]",Zg="[object ArrayBuffer]",Xg="[object DataView]",Yg="[object Float32Array]",Qg="[object Float64Array]",Jg="[object Int8Array]",t1="[object Int16Array]",e1="[object Int32Array]",r1="[object Uint8Array]",n1="[object Uint8ClampedArray]",s1="[object Uint16Array]",i1="[object Uint32Array]";function a1(n,t,e){var r=n.constructor;switch(t){case Zg:return po(n);case Ug:case zg:return new r(+n);case Xg:return Pg(n,e);case Yg:case Qg:case Jg:case t1:case e1:case r1:case n1:case s1:case i1:return Gu(n,e);case Fg:return new r;case Hg:case Vg:return new r(n);case Gg:return Dg(n);case Kg:return new r;case Wg:return $g(n)}}function Ku(n){return typeof n.constructor=="function"&&!oo(n)?qd(ho(n)):{}}var o1="[object Map]";function l1(n){return le(n)&&Dt(n)==o1}var Lc=ir&&ir.isMap,c1=Lc?lo(Lc):l1,u1="[object Set]";function h1(n){return le(n)&&Dt(n)==u1}var Oc=ir&&ir.isSet,f1=Oc?lo(Oc):h1,d1=1,p1=2,g1=4,Vu="[object Arguments]",m1="[object Array]",b1="[object Boolean]",v1="[object Date]",y1="[object Error]",Wu="[object Function]",_1="[object GeneratorFunction]",A1="[object Map]",E1="[object Number]",Zu="[object Object]",T1="[object RegExp]",w1="[object Set]",x1="[object String]",N1="[object Symbol]",q1="[object WeakMap]",S1="[object ArrayBuffer]",C1="[object DataView]",L1="[object Float32Array]",O1="[object Float64Array]",R1="[object Int8Array]",I1="[object Int16Array]",k1="[object Int32Array]",M1="[object Uint8Array]",B1="[object Uint8ClampedArray]",P1="[object Uint16Array]",j1="[object Uint32Array]",ot={};ot[Vu]=ot[m1]=ot[S1]=ot[C1]=ot[b1]=ot[v1]=ot[L1]=ot[O1]=ot[R1]=ot[I1]=ot[k1]=ot[A1]=ot[E1]=ot[Zu]=ot[T1]=ot[w1]=ot[x1]=ot[N1]=ot[M1]=ot[B1]=ot[P1]=ot[j1]=!0;ot[y1]=ot[Wu]=ot[q1]=!1;function On(n,t,e,r,s,i){var a,l=t&d1,c=t&p1,h=t&g1;if(a!==void 0)return a;if(!Ae(n))return n;var g=Le(n);if(g){if(a=Bg(n),!l)return Cu(n,a)}else{var _=Dt(n),f=_==Wu||_==_1;if($r(n))return Uu(n,l);if(_==Zu||_==Vu||f&&!s){if(a=c||f?{}:Ku(n),!l)return c?Ng(n,yg(a,n)):wg(n,vg(a,n))}else{if(!ot[_])return s?n:{};a=a1(n,_,l)}}i||(i=new Qt);var v=i.get(n);if(v)return v;i.set(n,a),f1(n)?n.forEach(function(y){a.add(On(y,t,e,y,n,i))}):c1(n)&&n.forEach(function(y,E){a.set(E,On(y,t,e,E,n,i))});var b=h?c?qg:Ma:c?Xr:uo,m=g?void 0:b(n);return Bd(m||n,function(y,E){m&&(E=y,y=n[E]),Ou(a,E,On(y,t,e,E,n,i))}),a}var D1=1,$1=4;function rr(n){return On(n,D1|$1)}var U1="__lodash_hash_undefined__";function z1(n){return this.__data__.set(n,U1),this}function F1(n){return this.__data__.has(n)}function Pn(n){var t=-1,e=n==null?0:n.length;for(this.__data__=new Me;++t<e;)this.add(n[t])}Pn.prototype.add=Pn.prototype.push=z1;Pn.prototype.has=F1;function H1(n,t){for(var e=-1,r=n==null?0:n.length;++e<r;)if(t(n[e],e,n))return!0;return!1}function G1(n,t){return n.has(t)}var K1=1,V1=2;function Xu(n,t,e,r,s,i){var a=e&K1,l=n.length,c=t.length;if(l!=c&&!(a&&c>l))return!1;var h=i.get(n),g=i.get(t);if(h&&g)return h==t&&g==n;var _=-1,f=!0,v=e&V1?new Pn:void 0;for(i.set(n,t),i.set(t,n);++_<l;){var b=n[_],m=t[_];if(r)var y=a?r(m,b,_,t,n,i):r(b,m,_,n,t,i);if(y!==void 0){if(y)continue;f=!1;break}if(v){if(!H1(t,function(E,T){if(!G1(v,T)&&(b===E||s(b,E,e,r,i)))return v.push(T)})){f=!1;break}}else if(!(b===m||s(b,m,e,r,i))){f=!1;break}}return i.delete(n),i.delete(t),f}function W1(n){var t=-1,e=Array(n.size);return n.forEach(function(r,s){e[++t]=[s,r]}),e}function Z1(n){var t=-1,e=Array(n.size);return n.forEach(function(r){e[++t]=r}),e}var X1=1,Y1=2,Q1="[object Boolean]",J1="[object Date]",tm="[object Error]",em="[object Map]",rm="[object Number]",nm="[object RegExp]",sm="[object Set]",im="[object String]",am="[object Symbol]",om="[object ArrayBuffer]",lm="[object DataView]",Rc=_e?_e.prototype:void 0,Aa=Rc?Rc.valueOf:void 0;function cm(n,t,e,r,s,i,a){switch(e){case lm:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case om:return!(n.byteLength!=t.byteLength||!i(new Bn(n),new Bn(t)));case Q1:case J1:case rm:return Wr(+n,+t);case tm:return n.name==t.name&&n.message==t.message;case nm:case im:return n==t+"";case em:var l=W1;case sm:var c=r&X1;if(l||(l=Z1),n.size!=t.size&&!c)return!1;var h=a.get(n);if(h)return h==t;r|=Y1,a.set(n,t);var g=Xu(l(n),l(t),r,s,i,a);return a.delete(n),g;case am:if(Aa)return Aa.call(n)==Aa.call(t)}return!1}var um=1,hm=Object.prototype,fm=hm.hasOwnProperty;function dm(n,t,e,r,s,i){var a=e&um,l=Ma(n),c=l.length,h=Ma(t),g=h.length;if(c!=g&&!a)return!1;for(var _=c;_--;){var f=l[_];if(!(a?f in t:fm.call(t,f)))return!1}var v=i.get(n),b=i.get(t);if(v&&b)return v==t&&b==n;var m=!0;i.set(n,t),i.set(t,n);for(var y=a;++_<c;){f=l[_];var E=n[f],T=t[f];if(r)var S=a?r(T,E,f,t,n,i):r(E,T,f,n,t,i);if(!(S===void 0?E===T||s(E,T,e,r,i):S)){m=!1;break}y||(y=f=="constructor")}if(m&&!y){var C=n.constructor,O=t.constructor;C!=O&&"constructor"in n&&"constructor"in t&&!(typeof C=="function"&&C instanceof C&&typeof O=="function"&&O instanceof O)&&(m=!1)}return i.delete(n),i.delete(t),m}var pm=1,Ic="[object Arguments]",kc="[object Array]",An="[object Object]",gm=Object.prototype,Mc=gm.hasOwnProperty;function mm(n,t,e,r,s,i){var a=Le(n),l=Le(t),c=a?kc:Dt(n),h=l?kc:Dt(t);c=c==Ic?An:c,h=h==Ic?An:h;var g=c==An,_=h==An,f=c==h;if(f&&$r(n)){if(!$r(t))return!1;a=!0,g=!1}if(f&&!g)return i||(i=new Qt),a||co(n)?Xu(n,t,e,r,s,i):cm(n,t,c,e,r,s,i);if(!(e&pm)){var v=g&&Mc.call(n,"__wrapped__"),b=_&&Mc.call(t,"__wrapped__");if(v||b){var m=v?n.value():n,y=b?t.value():t;return i||(i=new Qt),s(m,y,e,r,i)}}return f?(i||(i=new Qt),dm(n,t,e,r,s,i)):!1}function Yu(n,t,e,r,s){return n===t?!0:n==null||t==null||!le(n)&&!le(t)?n!==n&&t!==t:mm(n,t,e,r,Yu,s)}function bm(n){return function(t,e,r){for(var s=-1,i=Object(t),a=r(t),l=a.length;l--;){var c=a[++s];if(e(i[c],c,i)===!1)break}return t}}var vm=bm();function Da(n,t,e){(e!==void 0&&!Wr(n[t],e)||e===void 0&&!(t in n))&&ao(n,t,e)}function ym(n){return le(n)&&Gn(n)}function $a(n,t){if(!(t==="constructor"&&typeof n[t]=="function")&&t!="__proto__")return n[t]}function _m(n){return Zr(n,Xr(n))}function Am(n,t,e,r,s,i,a){var l=$a(n,e),c=$a(t,e),h=a.get(c);if(h){Da(n,e,h);return}var g=i?i(l,c,e+"",n,t,a):void 0,_=g===void 0;if(_){var f=Le(c),v=!f&&$r(c),b=!f&&!v&&co(c);g=c,f||v||b?Le(l)?g=l:ym(l)?g=Cu(l):v?(_=!1,g=Uu(c,!0)):b?(_=!1,g=Gu(c,!0)):g=[]:hg(c)||ka(c)?(g=l,ka(l)?g=_m(l):(!Ae(l)||io(l))&&(g=Ku(c))):_=!1}_&&(a.set(c,g),s(g,c,r,i,a),a.delete(c)),Da(n,e,g)}function Qu(n,t,e,r,s){n!==t&&vm(t,function(i,a){if(s||(s=new Qt),Ae(i))Am(n,t,a,e,Qu,r,s);else{var l=r?r($a(n,a),i,a+"",n,t,s):void 0;l===void 0&&(l=i),Da(n,a,l)}},Xr)}function go(n,t){return Yu(n,t)}var ye=Gd(function(n,t,e){Qu(n,t,e)}),$=(n=>(n[n.TYPE=3]="TYPE",n[n.LEVEL=12]="LEVEL",n[n.ATTRIBUTE=13]="ATTRIBUTE",n[n.BLOT=14]="BLOT",n[n.INLINE=7]="INLINE",n[n.BLOCK=11]="BLOCK",n[n.BLOCK_BLOT=10]="BLOCK_BLOT",n[n.INLINE_BLOT=6]="INLINE_BLOT",n[n.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",n[n.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",n[n.ANY=15]="ANY",n))($||{});class te{constructor(t,e,r={}){this.attrName=t,this.keyName=e;const s=$.TYPE&$.ATTRIBUTE;this.scope=r.scope!=null?r.scope&$.LEVEL|s:$.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(t){return Array.from(t.attributes).map(e=>e.name)}add(t,e){return this.canAdd(t,e)?(t.setAttribute(this.keyName,e),!0):!1}canAdd(t,e){return this.whitelist==null?!0:typeof e=="string"?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1}remove(t){t.removeAttribute(this.keyName)}value(t){const e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""}}class nr extends Error{constructor(t){t="[Parchment] "+t,super(t),this.message=t,this.name=this.constructor.name}}const Ju=class Ua{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,e=!1){if(t==null)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(e){let r=null;try{r=t.parentNode}catch{return null}return this.find(r,e)}return null}create(t,e,r){const s=this.query(e);if(s==null)throw new nr(`Unable to create ${e} blot`);const i=s,a=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:i.create(r),l=new i(t,a,r);return Ua.blots.set(l.domNode,l),l}find(t,e=!1){return Ua.find(t,e)}query(t,e=$.ANY){let r;return typeof t=="string"?r=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?r=this.types.text:typeof t=="number"?t&$.LEVEL&$.BLOCK?r=this.types.block:t&$.LEVEL&$.INLINE&&(r=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some(s=>(r=this.classes[s],!!r)),r=r||this.tags[t.tagName]),r==null?null:"scope"in r&&e&$.LEVEL&r.scope&&e&$.TYPE&r.scope?r:null}register(...t){return t.map(e=>{const r="blotName"in e,s="attrName"in e;if(!r&&!s)throw new nr("Invalid definition");if(r&&e.blotName==="abstract")throw new nr("Cannot register abstract class");const i=r?e.blotName:s?e.attrName:void 0;return this.types[i]=e,s?typeof e.keyName=="string"&&(this.attributes[e.keyName]=e):r&&(e.className&&(this.classes[e.className]=e),e.tagName&&(Array.isArray(e.tagName)?e.tagName=e.tagName.map(a=>a.toUpperCase()):e.tagName=e.tagName.toUpperCase(),(Array.isArray(e.tagName)?e.tagName:[e.tagName]).forEach(a=>{(this.tags[a]==null||e.className==null)&&(this.tags[a]=e)}))),e})}};Ju.blots=new WeakMap;let ar=Ju;function Bc(n,t){return(n.getAttribute("class")||"").split(/\s+/).filter(e=>e.indexOf(`${t}-`)===0)}class Em extends te{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map(e=>e.split("-").slice(0,-1).join("-"))}add(t,e){return this.canAdd(t,e)?(this.remove(t),t.classList.add(`${this.keyName}-${e}`),!0):!1}remove(t){Bc(t,this.keyName).forEach(e=>{t.classList.remove(e)}),t.classList.length===0&&t.removeAttribute("class")}value(t){const e=(Bc(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""}}const Ft=Em;function Ea(n){const t=n.split("-"),e=t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return t[0]+e}class Tm extends te{static keys(t){return(t.getAttribute("style")||"").split(";").map(e=>e.split(":")[0].trim())}add(t,e){return this.canAdd(t,e)?(t.style[Ea(this.keyName)]=e,!0):!1}remove(t){t.style[Ea(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const e=t.style[Ea(this.keyName)];return this.canAdd(t,e)?e:""}}const Ee=Tm;class wm{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,e){e?t.add(this.domNode,e)&&(t.value(this.domNode)!=null?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=ar.find(this.domNode);if(t==null)return;const e=te.keys(this.domNode),r=Ft.keys(this.domNode),s=Ee.keys(this.domNode);e.concat(r).concat(s).forEach(i=>{const a=t.scroll.query(i,$.ATTRIBUTE);a instanceof te&&(this.attributes[a.attrName]=a)})}copy(t){Object.keys(this.attributes).forEach(e=>{const r=this.attributes[e].value(this.domNode);t.format(e,r)})}move(t){this.copy(t),Object.keys(this.attributes).forEach(e=>{this.attributes[e].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((t,e)=>(t[e]=this.attributes[e].value(this.domNode),t),{})}}const Wn=wm,th=class{constructor(t,e){this.scroll=t,this.domNode=e,ar.blots.set(e,this),this.prev=null,this.next=null}static create(t){if(this.tagName==null)throw new nr("Blot definition missing tagName");let e,r;return Array.isArray(this.tagName)?(typeof t=="string"?(r=t.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof t=="number"&&(r=t),typeof r=="number"?e=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?e=document.createElement(r):e=document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){const t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){this.parent!=null&&this.parent.removeChild(this),ar.blots.delete(this.domNode)}deleteAt(t,e){this.isolate(t,e).remove()}formatAt(t,e,r,s){const i=this.isolate(t,e);if(this.scroll.query(r,$.BLOT)!=null&&s)i.wrap(r,s);else if(this.scroll.query(r,$.ATTRIBUTE)!=null){const a=this.scroll.create(this.statics.scope);i.wrap(a),a.format(r,s)}}insertAt(t,e,r){const s=r==null?this.scroll.create("text",e):this.scroll.create(e,r),i=this.split(t);this.parent.insertBefore(s,i||void 0)}isolate(t,e){const r=this.split(t);if(r==null)throw new Error("Attempt to isolate at end");return r.split(e),r}length(){return 1}offset(t=this.parent){return this.parent==null||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,e){const r=typeof t=="string"?this.scroll.create(t,e):t;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(t,e){return t===0?this:this.next}update(t,e){}wrap(t,e){const r=typeof t=="string"?this.scroll.create(t,e):t;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new nr(`Cannot wrap ${t}`);return r.appendChild(this),r}};th.blotName="abstract";let eh=th;const rh=class extends eh{static value(t){return!0}index(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(t,e){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};rh.scope=$.INLINE_BLOT;let xm=rh;const Et=xm;class Nm{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const e=t.slice(1);this.append(...e)}}at(t){const e=this.iterator();let r=e();for(;r&&t>0;)t-=1,r=e();return r}contains(t){const e=this.iterator();let r=e();for(;r;){if(r===t)return!0;r=e()}return!1}indexOf(t){const e=this.iterator();let r=e(),s=0;for(;r;){if(r===t)return s;s+=1,r=e()}return-1}insertBefore(t,e){t!=null&&(this.remove(t),t.next=e,e!=null?(t.prev=e.prev,e.prev!=null&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):this.tail!=null?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let e=0,r=this.head;for(;r!=null;){if(r===t)return e;e+=r.length(),r=r.next}return-1}remove(t){this.contains(t)&&(t.prev!=null&&(t.prev.next=t.next),t.next!=null&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const e=t;return t!=null&&(t=t.next),e}}find(t,e=!1){const r=this.iterator();let s=r();for(;s;){const i=s.length();if(t<i||e&&t===i&&(s.next==null||s.next.length()!==0))return[s,t];t-=i,s=r()}return[null,0]}forEach(t){const e=this.iterator();let r=e();for(;r;)t(r),r=e()}forEachAt(t,e,r){if(e<=0)return;const[s,i]=this.find(t);let a=t-i;const l=this.iterator(s);let c=l();for(;c&&a<t+e;){const h=c.length();t>a?r(c,t-a,Math.min(e,a+h-t)):r(c,0,Math.min(h,t+e-a)),a+=h,c=l()}}map(t){return this.reduce((e,r)=>(e.push(t(r)),e),[])}reduce(t,e){const r=this.iterator();let s=r();for(;s;)e=t(e,s),s=r();return e}}function Pc(n,t){const e=t.find(n);if(e)return e;try{return t.create(n)}catch{const r=t.create($.INLINE);return Array.from(n.childNodes).forEach(s=>{r.domNode.appendChild(s)}),n.parentNode&&n.parentNode.replaceChild(r.domNode,n),r.attach(),r}}const nh=class me extends eh{constructor(t,e){super(t,e),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach(t=>{t.attach()})}attachUI(t){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=t,me.uiClass&&this.uiNode.classList.add(me.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new Nm,Array.from(this.domNode.childNodes).filter(t=>t!==this.uiNode).reverse().forEach(t=>{try{const e=Pc(t,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(e){if(e instanceof nr)return;throw e}})}deleteAt(t,e){if(t===0&&e===this.length())return this.remove();this.children.forEachAt(t,e,(r,s,i)=>{r.deleteAt(s,i)})}descendant(t,e=0){const[r,s]=this.children.find(e);return t.blotName==null&&t(r)||t.blotName!=null&&r instanceof t?[r,s]:r instanceof me?r.descendant(t,s):[null,-1]}descendants(t,e=0,r=Number.MAX_VALUE){let s=[],i=r;return this.children.forEachAt(e,r,(a,l,c)=>{(t.blotName==null&&t(a)||t.blotName!=null&&a instanceof t)&&s.push(a),a instanceof me&&(s=s.concat(a.descendants(t,l,i))),i-=c}),s}detach(){this.children.forEach(t=>{t.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(e=>{t||this.statics.allowedChildren.some(r=>e instanceof r)||(e.statics.scope===$.BLOCK_BLOT?(e.next!=null&&this.splitAfter(e),e.prev!=null&&this.splitAfter(e.prev),e.parent.unwrap(),t=!0):e instanceof me?e.unwrap():e.remove())})}formatAt(t,e,r,s){this.children.forEachAt(t,e,(i,a,l)=>{i.formatAt(a,l,r,s)})}insertAt(t,e,r){const[s,i]=this.children.find(t);if(s)s.insertAt(i,e,r);else{const a=r==null?this.scroll.create("text",e):this.scroll.create(e,r);this.appendChild(a)}}insertBefore(t,e){t.parent!=null&&t.parent.children.remove(t);let r=null;this.children.insertBefore(t,e||null),t.parent=this,e!=null&&(r=e.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(t.domNode,r),t.attach()}length(){return this.children.reduce((t,e)=>t+e.length(),0)}moveChildren(t,e){this.children.forEach(r=>{t.insertBefore(r,e)})}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const e=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(e)}else this.remove()}path(t,e=!1){const[r,s]=this.children.find(t,e),i=[[this,t]];return r instanceof me?i.concat(r.path(s,e)):(r!=null&&i.push([r,s]),i)}removeChild(t){this.children.remove(t)}replaceWith(t,e){const r=typeof t=="string"?this.scroll.create(t,e):t;return r instanceof me&&this.moveChildren(r),super.replaceWith(r)}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(t,this.length(),(s,i,a)=>{const l=s.split(i,e);l!=null&&r.appendChild(l)}),r}splitAfter(t){const e=this.clone();for(;t.next!=null;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,e){const r=[],s=[];t.forEach(i=>{i.target===this.domNode&&i.type==="childList"&&(r.push(...i.addedNodes),s.push(...i.removedNodes))}),s.forEach(i=>{if(i.parentNode!=null&&i.tagName!=="IFRAME"&&document.body.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const a=this.scroll.find(i);a!=null&&(a.domNode.parentNode==null||a.domNode.parentNode===this.domNode)&&a.detach()}),r.filter(i=>i.parentNode===this.domNode&&i!==this.uiNode).sort((i,a)=>i===a?0:i.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(i=>{let a=null;i.nextSibling!=null&&(a=this.scroll.find(i.nextSibling));const l=Pc(i,this.scroll);(l.next!==a||l.next==null)&&(l.parent!=null&&l.parent.removeChild(this),this.insertBefore(l,a||void 0))}),this.enforceAllowedChildren()}};nh.uiClass="";let qm=nh;const Ut=qm;function Sm(n,t){if(Object.keys(n).length!==Object.keys(t).length)return!1;for(const e in n)if(n[e]!==t[e])return!1;return!0}const Xe=class Ye extends Ut{static create(t){return super.create(t)}static formats(t,e){const r=e.query(Ye.blotName);if(!(r!=null&&t.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new Wn(this.domNode)}format(t,e){if(t===this.statics.blotName&&!e)this.children.forEach(r=>{r instanceof Ye||(r=r.wrap(Ye.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{const r=this.scroll.query(t,$.INLINE);if(r==null)return;r instanceof te?this.attributes.attribute(r,e):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e)}}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,r,s){this.formats()[r]!=null||this.scroll.query(r,$.ATTRIBUTE)?this.isolate(t,e).format(r,s):super.formatAt(t,e,r,s)}optimize(t){super.optimize(t);const e=this.formats();if(Object.keys(e).length===0)return this.unwrap();const r=this.next;r instanceof Ye&&r.prev===this&&Sm(e,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(t,e){const r=super.replaceWith(t,e);return this.attributes.copy(r),r}update(t,e){super.update(t,e),t.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(t,e){const r=super.wrap(t,e);return r instanceof Ye&&this.attributes.move(r),r}};Xe.allowedChildren=[Xe,Et],Xe.blotName="inline",Xe.scope=$.INLINE_BLOT,Xe.tagName="SPAN";let Cm=Xe;const mo=Cm,Qe=class za extends Ut{static create(t){return super.create(t)}static formats(t,e){const r=e.query(za.blotName);if(!(r!=null&&t.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new Wn(this.domNode)}format(t,e){const r=this.scroll.query(t,$.BLOCK);r!=null&&(r instanceof te?this.attributes.attribute(r,e):t===this.statics.blotName&&!e?this.replaceWith(za.blotName):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e))}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,r,s){this.scroll.query(r,$.BLOCK)!=null?this.format(r,s):super.formatAt(t,e,r,s)}insertAt(t,e,r){if(r==null||this.scroll.query(e,$.INLINE)!=null)super.insertAt(t,e,r);else{const s=this.split(t);if(s!=null){const i=this.scroll.create(e,r);s.parent.insertBefore(i,s)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(t,e){const r=super.replaceWith(t,e);return this.attributes.copy(r),r}update(t,e){super.update(t,e),t.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};Qe.blotName="block",Qe.scope=$.BLOCK_BLOT,Qe.tagName="P",Qe.allowedChildren=[mo,Qe,Et];let Lm=Qe;const Fr=Lm,Fa=class extends Ut{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,e){super.deleteAt(t,e),this.enforceAllowedChildren()}formatAt(t,e,r,s){super.formatAt(t,e,r,s),this.enforceAllowedChildren()}insertAt(t,e,r){super.insertAt(t,e,r),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Fa.blotName="container",Fa.scope=$.BLOCK_BLOT;let Om=Fa;const Zn=Om;class Rm extends Et{static formats(t,e){}format(t,e){super.formatAt(0,this.length(),t,e)}formatAt(t,e,r,s){t===0&&e===this.length()?this.format(r,s):super.formatAt(t,e,r,s)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const qt=Rm,Im={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},km=100,Je=class extends Ut{constructor(t,e){super(null,e),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,Im),this.attach()}create(t,e){return this.registry.create(this,t,e)}find(t,e=!1){const r=this.registry.find(t,e);return r?r.scroll===this?r:e?this.find(r.scroll.domNode.parentNode,!0):null:null}query(t,e=$.ANY){return this.registry.query(t,e)}register(...t){return this.registry.register(...t)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,e){this.update(),t===0&&e===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(t,e)}formatAt(t,e,r,s){this.update(),super.formatAt(t,e,r,s)}insertAt(t,e,r){this.update(),super.insertAt(t,e,r)}optimize(t=[],e={}){super.optimize(e);const r=e.mutationsMap||new WeakMap;let s=Array.from(this.observer.takeRecords());for(;s.length>0;)t.push(s.pop());const i=(c,h=!0)=>{c==null||c===this||c.domNode.parentNode!=null&&(r.has(c.domNode)||r.set(c.domNode,[]),h&&i(c.parent))},a=c=>{r.has(c.domNode)&&(c instanceof Ut&&c.children.forEach(a),r.delete(c.domNode),c.optimize(e))};let l=t;for(let c=0;l.length>0;c+=1){if(c>=km)throw new Error("[Parchment] Maximum optimize iterations reached");for(l.forEach(h=>{const g=this.find(h.target,!0);g!=null&&(g.domNode===h.target&&(h.type==="childList"?(i(this.find(h.previousSibling,!1)),Array.from(h.addedNodes).forEach(_=>{const f=this.find(_,!1);i(f,!1),f instanceof Ut&&f.children.forEach(v=>{i(v,!1)})})):h.type==="attributes"&&i(g.prev)),i(g))}),this.children.forEach(a),l=Array.from(this.observer.takeRecords()),s=l.slice();s.length>0;)t.push(s.pop())}}update(t,e={}){t=t||this.observer.takeRecords();const r=new WeakMap;t.map(s=>{const i=this.find(s.target,!0);return i==null?null:r.has(i.domNode)?(r.get(i.domNode).push(s),null):(r.set(i.domNode,[s]),i)}).forEach(s=>{s!=null&&s!==this&&r.has(s.domNode)&&s.update(r.get(s.domNode)||[],e)}),e.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),e),this.optimize(t,e)}};Je.blotName="scroll",Je.defaultChild=Fr,Je.allowedChildren=[Fr,Zn],Je.scope=$.BLOCK_BLOT,Je.tagName="DIV";let Mm=Je;const bo=Mm,Ha=class sh extends Et{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,e){super(t,e),this.text=this.statics.value(this.domNode)}deleteAt(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}index(t,e){return this.domNode===t?e:-1}insertAt(t,e,r){r==null?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,e,r)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof sh&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,e=!1){return[this.domNode,t]}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}const r=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(t,e){t.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Ha.blotName="text",Ha.scope=$.INLINE_BLOT;let Bm=Ha;const jn=Bm,Pm=Object.freeze(Object.defineProperty({__proto__:null,Attributor:te,AttributorStore:Wn,BlockBlot:Fr,ClassAttributor:Ft,ContainerBlot:Zn,EmbedBlot:qt,InlineBlot:mo,LeafBlot:Et,ParentBlot:Ut,Registry:ar,Scope:$,ScrollBlot:bo,StyleAttributor:Ee,TextBlot:jn},Symbol.toStringTag,{value:"Module"}));var En={exports:{}},Ta,jc;function jm(){if(jc)return Ta;jc=1;var n=-1,t=1,e=0;function r(d,q,A,I,L){if(d===q)return d?[[e,d]]:[];if(A!=null){var N=at(d,q,A);if(N)return N}var R=l(d,q),j=d.substring(0,R);d=d.substring(R),q=q.substring(R),R=h(d,q);var z=d.substring(d.length-R);d=d.substring(0,d.length-R),q=q.substring(0,q.length-R);var M=s(d,q);return j&&M.unshift([e,j]),z&&M.push([e,z]),T(M,L),I&&_(M),M}function s(d,q){var A;if(!d)return[[t,q]];if(!q)return[[n,d]];var I=d.length>q.length?d:q,L=d.length>q.length?q:d,N=I.indexOf(L);if(N!==-1)return A=[[t,I.substring(0,N)],[e,L],[t,I.substring(N+L.length)]],d.length>q.length&&(A[0][0]=A[2][0]=n),A;if(L.length===1)return[[n,d],[t,q]];var R=g(d,q);if(R){var j=R[0],z=R[1],M=R[2],V=R[3],G=R[4],Z=r(j,M),Y=r(z,V);return Z.concat([[e,G]],Y)}return i(d,q)}function i(d,q){for(var A=d.length,I=q.length,L=Math.ceil((A+I)/2),N=L,R=2*L,j=new Array(R),z=new Array(R),M=0;M<R;M++)j[M]=-1,z[M]=-1;j[N+1]=0,z[N+1]=0;for(var V=A-I,G=V%2!==0,Z=0,Y=0,H=0,lt=0,ht=0;ht<L;ht++){for(var W=-ht+Z;W<=ht-Y;W+=2){var et=N+W,tt;W===-ht||W!==ht&&j[et-1]<j[et+1]?tt=j[et+1]:tt=j[et-1]+1;for(var rt=tt-W;tt<A&&rt<I&&d.charAt(tt)===q.charAt(rt);)tt++,rt++;if(j[et]=tt,tt>A)Y+=2;else if(rt>I)Z+=2;else if(G){var st=N+V-W;if(st>=0&&st<R&&z[st]!==-1){var it=A-z[st];if(tt>=it)return a(d,q,tt,rt)}}}for(var ft=-ht+H;ft<=ht-lt;ft+=2){var st=N+ft,it;ft===-ht||ft!==ht&&z[st-1]<z[st+1]?it=z[st+1]:it=z[st-1]+1;for(var vt=it-ft;it<A&&vt<I&&d.charAt(A-it-1)===q.charAt(I-vt-1);)it++,vt++;if(z[st]=it,it>A)lt+=2;else if(vt>I)H+=2;else if(!G){var et=N+V-ft;if(et>=0&&et<R&&j[et]!==-1){var tt=j[et],rt=N+tt-et;if(it=A-it,tt>=it)return a(d,q,tt,rt)}}}}return[[n,d],[t,q]]}function a(d,q,A,I){var L=d.substring(0,A),N=q.substring(0,I),R=d.substring(A),j=q.substring(I),z=r(L,N),M=r(R,j);return z.concat(M)}function l(d,q){if(!d||!q||d.charAt(0)!==q.charAt(0))return 0;for(var A=0,I=Math.min(d.length,q.length),L=I,N=0;A<L;)d.substring(N,L)==q.substring(N,L)?(A=L,N=A):I=L,L=Math.floor((I-A)/2+A);return S(d.charCodeAt(L-1))&&L--,L}function c(d,q){var A=d.length,I=q.length;if(A==0||I==0)return 0;A>I?d=d.substring(A-I):A<I&&(q=q.substring(0,A));var L=Math.min(A,I);if(d==q)return L;for(var N=0,R=1;;){var j=d.substring(L-R),z=q.indexOf(j);if(z==-1)return N;R+=z,(z==0||d.substring(L-R)==q.substring(0,R))&&(N=R,R++)}}function h(d,q){if(!d||!q||d.slice(-1)!==q.slice(-1))return 0;for(var A=0,I=Math.min(d.length,q.length),L=I,N=0;A<L;)d.substring(d.length-L,d.length-N)==q.substring(q.length-L,q.length-N)?(A=L,N=A):I=L,L=Math.floor((I-A)/2+A);return C(d.charCodeAt(d.length-L))&&L--,L}function g(d,q){var A=d.length>q.length?d:q,I=d.length>q.length?q:d;if(A.length<4||I.length*2<A.length)return null;function L(Y,H,lt){for(var ht=Y.substring(lt,lt+Math.floor(Y.length/4)),W=-1,et="",tt,rt,st,it;(W=H.indexOf(ht,W+1))!==-1;){var ft=l(Y.substring(lt),H.substring(W)),vt=h(Y.substring(0,lt),H.substring(0,W));et.length<vt+ft&&(et=H.substring(W-vt,W)+H.substring(W,W+ft),tt=Y.substring(0,lt-vt),rt=Y.substring(lt+ft),st=H.substring(0,W-vt),it=H.substring(W+ft))}return et.length*2>=Y.length?[tt,rt,st,it,et]:null}var N=L(A,I,Math.ceil(A.length/4)),R=L(A,I,Math.ceil(A.length/2)),j;if(!N&&!R)return null;R?N?j=N[4].length>R[4].length?N:R:j=R:j=N;var z,M,V,G;d.length>q.length?(z=j[0],M=j[1],V=j[2],G=j[3]):(V=j[0],G=j[1],z=j[2],M=j[3]);var Z=j[4];return[z,M,V,G,Z]}function _(d){for(var q=!1,A=[],I=0,L=null,N=0,R=0,j=0,z=0,M=0;N<d.length;)d[N][0]==e?(A[I++]=N,R=z,j=M,z=0,M=0,L=d[N][1]):(d[N][0]==t?z+=d[N][1].length:M+=d[N][1].length,L&&L.length<=Math.max(R,j)&&L.length<=Math.max(z,M)&&(d.splice(A[I-1],0,[n,L]),d[A[I-1]+1][0]=t,I--,I--,N=I>0?A[I-1]:-1,R=0,j=0,z=0,M=0,L=null,q=!0)),N++;for(q&&T(d),E(d),N=1;N<d.length;){if(d[N-1][0]==n&&d[N][0]==t){var V=d[N-1][1],G=d[N][1],Z=c(V,G),Y=c(G,V);Z>=Y?(Z>=V.length/2||Z>=G.length/2)&&(d.splice(N,0,[e,G.substring(0,Z)]),d[N-1][1]=V.substring(0,V.length-Z),d[N+1][1]=G.substring(Z),N++):(Y>=V.length/2||Y>=G.length/2)&&(d.splice(N,0,[e,V.substring(0,Y)]),d[N-1][0]=t,d[N-1][1]=G.substring(0,G.length-Y),d[N+1][0]=n,d[N+1][1]=V.substring(Y),N++),N++}N++}}var f=/[^a-zA-Z0-9]/,v=/\s/,b=/[\r\n]/,m=/\n\r?\n$/,y=/^\r?\n\r?\n/;function E(d){function q(Y,H){if(!Y||!H)return 6;var lt=Y.charAt(Y.length-1),ht=H.charAt(0),W=lt.match(f),et=ht.match(f),tt=W&&lt.match(v),rt=et&&ht.match(v),st=tt&&lt.match(b),it=rt&&ht.match(b),ft=st&&Y.match(m),vt=it&&H.match(y);return ft||vt?5:st||it?4:W&&!tt&&rt?3:tt||rt?2:W||et?1:0}for(var A=1;A<d.length-1;){if(d[A-1][0]==e&&d[A+1][0]==e){var I=d[A-1][1],L=d[A][1],N=d[A+1][1],R=h(I,L);if(R){var j=L.substring(L.length-R);I=I.substring(0,I.length-R),L=j+L.substring(0,L.length-R),N=j+N}for(var z=I,M=L,V=N,G=q(I,L)+q(L,N);L.charAt(0)===N.charAt(0);){I+=L.charAt(0),L=L.substring(1)+N.charAt(0),N=N.substring(1);var Z=q(I,L)+q(L,N);Z>=G&&(G=Z,z=I,M=L,V=N)}d[A-1][1]!=z&&(z?d[A-1][1]=z:(d.splice(A-1,1),A--),d[A][1]=M,V?d[A+1][1]=V:(d.splice(A+1,1),A--))}A++}}function T(d,q){d.push([e,""]);for(var A=0,I=0,L=0,N="",R="",j;A<d.length;){if(A<d.length-1&&!d[A][1]){d.splice(A,1);continue}switch(d[A][0]){case t:L++,R+=d[A][1],A++;break;case n:I++,N+=d[A][1],A++;break;case e:var z=A-L-I-1;if(q){if(z>=0&&B(d[z][1])){var M=d[z][1].slice(-1);if(d[z][1]=d[z][1].slice(0,-1),N=M+N,R=M+R,!d[z][1]){d.splice(z,1),A--;var V=z-1;d[V]&&d[V][0]===t&&(L++,R=d[V][1]+R,V--),d[V]&&d[V][0]===n&&(I++,N=d[V][1]+N,V--),z=V}}if(O(d[A][1])){var M=d[A][1].charAt(0);d[A][1]=d[A][1].slice(1),N+=M,R+=M}}if(A<d.length-1&&!d[A][1]){d.splice(A,1);break}if(N.length>0||R.length>0){N.length>0&&R.length>0&&(j=l(R,N),j!==0&&(z>=0?d[z][1]+=R.substring(0,j):(d.splice(0,0,[e,R.substring(0,j)]),A++),R=R.substring(j),N=N.substring(j)),j=h(R,N),j!==0&&(d[A][1]=R.substring(R.length-j)+d[A][1],R=R.substring(0,R.length-j),N=N.substring(0,N.length-j)));var G=L+I;N.length===0&&R.length===0?(d.splice(A-G,G),A=A-G):N.length===0?(d.splice(A-G,G,[t,R]),A=A-G+1):R.length===0?(d.splice(A-G,G,[n,N]),A=A-G+1):(d.splice(A-G,G,[n,N],[t,R]),A=A-G+2)}A!==0&&d[A-1][0]===e?(d[A-1][1]+=d[A][1],d.splice(A,1)):A++,L=0,I=0,N="",R="";break}}d[d.length-1][1]===""&&d.pop();var Z=!1;for(A=1;A<d.length-1;)d[A-1][0]===e&&d[A+1][0]===e&&(d[A][1].substring(d[A][1].length-d[A-1][1].length)===d[A-1][1]?(d[A][1]=d[A-1][1]+d[A][1].substring(0,d[A][1].length-d[A-1][1].length),d[A+1][1]=d[A-1][1]+d[A+1][1],d.splice(A-1,1),Z=!0):d[A][1].substring(0,d[A+1][1].length)==d[A+1][1]&&(d[A-1][1]+=d[A+1][1],d[A][1]=d[A][1].substring(d[A+1][1].length)+d[A+1][1],d.splice(A+1,1),Z=!0)),A++;Z&&T(d,q)}function S(d){return d>=55296&&d<=56319}function C(d){return d>=56320&&d<=57343}function O(d){return C(d.charCodeAt(0))}function B(d){return S(d.charCodeAt(d.length-1))}function U(d){for(var q=[],A=0;A<d.length;A++)d[A][1].length>0&&q.push(d[A]);return q}function X(d,q,A,I){return B(d)||O(I)?null:U([[e,d],[n,q],[t,A],[e,I]])}function at(d,q,A){var I=typeof A=="number"?{index:A,length:0}:A.oldRange,L=typeof A=="number"?null:A.newRange,N=d.length,R=q.length;if(I.length===0&&(L===null||L.length===0)){var j=I.index,z=d.slice(0,j),M=d.slice(j),V=L?L.index:null;t:{var G=j+R-N;if(V!==null&&V!==G||G<0||G>R)break t;var Z=q.slice(0,G),Y=q.slice(G);if(Y!==M)break t;var H=Math.min(j,G),lt=z.slice(0,H),ht=Z.slice(0,H);if(lt!==ht)break t;var W=z.slice(H),et=Z.slice(H);return X(lt,W,et,M)}t:{if(V!==null&&V!==j)break t;var tt=j,Z=q.slice(0,tt),Y=q.slice(tt);if(Z!==z)break t;var rt=Math.min(N-tt,R-tt),st=M.slice(M.length-rt),it=Y.slice(Y.length-rt);if(st!==it)break t;var W=M.slice(0,M.length-rt),et=Y.slice(0,Y.length-rt);return X(z,W,et,st)}}if(I.length>0&&L&&L.length===0)t:{var lt=d.slice(0,I.index),st=d.slice(I.index+I.length),H=lt.length,rt=st.length;if(R<H+rt)break t;var ht=q.slice(0,H),it=q.slice(R-rt);if(lt!==ht||st!==it)break t;var W=d.slice(H,N-rt),et=q.slice(H,R-rt);return X(lt,W,et,st)}return null}function ut(d,q,A,I){return r(d,q,A,I,!0)}return ut.INSERT=t,ut.DELETE=n,ut.EQUAL=e,Ta=ut,Ta}var Ir={exports:{}};Ir.exports;var Dc;function ih(){return Dc||(Dc=1,function(n,t){var e=200,r="__lodash_hash_undefined__",s=9007199254740991,i="[object Arguments]",a="[object Array]",l="[object Boolean]",c="[object Date]",h="[object Error]",g="[object Function]",_="[object GeneratorFunction]",f="[object Map]",v="[object Number]",b="[object Object]",m="[object Promise]",y="[object RegExp]",E="[object Set]",T="[object String]",S="[object Symbol]",C="[object WeakMap]",O="[object ArrayBuffer]",B="[object DataView]",U="[object Float32Array]",X="[object Float64Array]",at="[object Int8Array]",ut="[object Int16Array]",d="[object Int32Array]",q="[object Uint8Array]",A="[object Uint8ClampedArray]",I="[object Uint16Array]",L="[object Uint32Array]",N=/[\\^$.*+?()[\]{}|]/g,R=/\w*$/,j=/^\[object .+?Constructor\]$/,z=/^(?:0|[1-9]\d*)$/,M={};M[i]=M[a]=M[O]=M[B]=M[l]=M[c]=M[U]=M[X]=M[at]=M[ut]=M[d]=M[f]=M[v]=M[b]=M[y]=M[E]=M[T]=M[S]=M[q]=M[A]=M[I]=M[L]=!0,M[h]=M[g]=M[C]=!1;var V=typeof It=="object"&&It&&It.Object===Object&&It,G=typeof self=="object"&&self&&self.Object===Object&&self,Z=V||G||Function("return this")(),Y=t&&!t.nodeType&&t,H=Y&&!0&&n&&!n.nodeType&&n,lt=H&&H.exports===Y;function ht(o,u){return o.set(u[0],u[1]),o}function W(o,u){return o.add(u),o}function et(o,u){for(var p=-1,w=o?o.length:0;++p<w&&u(o[p],p,o)!==!1;);return o}function tt(o,u){for(var p=-1,w=u.length,K=o.length;++p<w;)o[K+p]=u[p];return o}function rt(o,u,p,w){for(var K=-1,F=o?o.length:0;++K<F;)p=u(p,o[K],K,o);return p}function st(o,u){for(var p=-1,w=Array(o);++p<o;)w[p]=u(p);return w}function it(o,u){return o==null?void 0:o[u]}function ft(o){var u=!1;if(o!=null&&typeof o.toString!="function")try{u=!!(o+"")}catch{}return u}function vt(o){var u=-1,p=Array(o.size);return o.forEach(function(w,K){p[++u]=[K,w]}),p}function fr(o,u){return function(p){return o(u(p))}}function en(o){var u=-1,p=Array(o.size);return o.forEach(function(w){p[++u]=w}),p}var Jn=Array.prototype,ts=Function.prototype,De=Object.prototype,dr=Z["__core-js_shared__"],rn=function(){var o=/[^.]+$/.exec(dr&&dr.keys&&dr.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),nn=ts.toString,Kt=De.hasOwnProperty,$e=De.toString,es=RegExp("^"+nn.call(Kt).replace(N,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Te=lt?Z.Buffer:void 0,Ue=Z.Symbol,pr=Z.Uint8Array,St=fr(Object.getPrototypeOf,Object),sn=Object.create,an=De.propertyIsEnumerable,rs=Jn.splice,gr=Object.getOwnPropertySymbols,ze=Te?Te.isBuffer:void 0,on=fr(Object.keys,Object),Fe=Bt(Z,"DataView"),we=Bt(Z,"Map"),Mt=Bt(Z,"Promise"),He=Bt(Z,"Set"),mr=Bt(Z,"WeakMap"),xe=Bt(Object,"create"),br=wt(Fe),Ne=wt(we),vr=wt(Mt),yr=wt(He),_r=wt(mr),pe=Ue?Ue.prototype:void 0,ln=pe?pe.valueOf:void 0;function ne(o){var u=-1,p=o?o.length:0;for(this.clear();++u<p;){var w=o[u];this.set(w[0],w[1])}}function ns(){this.__data__=xe?xe(null):{}}function ss(o){return this.has(o)&&delete this.__data__[o]}function is(o){var u=this.__data__;if(xe){var p=u[o];return p===r?void 0:p}return Kt.call(u,o)?u[o]:void 0}function cn(o){var u=this.__data__;return xe?u[o]!==void 0:Kt.call(u,o)}function Ar(o,u){var p=this.__data__;return p[o]=xe&&u===void 0?r:u,this}ne.prototype.clear=ns,ne.prototype.delete=ss,ne.prototype.get=is,ne.prototype.has=cn,ne.prototype.set=Ar;function gt(o){var u=-1,p=o?o.length:0;for(this.clear();++u<p;){var w=o[u];this.set(w[0],w[1])}}function as(){this.__data__=[]}function os(o){var u=this.__data__,p=Ke(u,o);if(p<0)return!1;var w=u.length-1;return p==w?u.pop():rs.call(u,p,1),!0}function ls(o){var u=this.__data__,p=Ke(u,o);return p<0?void 0:u[p][1]}function cs(o){return Ke(this.__data__,o)>-1}function us(o,u){var p=this.__data__,w=Ke(p,o);return w<0?p.push([o,u]):p[w][1]=u,this}gt.prototype.clear=as,gt.prototype.delete=os,gt.prototype.get=ls,gt.prototype.has=cs,gt.prototype.set=us;function yt(o){var u=-1,p=o?o.length:0;for(this.clear();++u<p;){var w=o[u];this.set(w[0],w[1])}}function hs(){this.__data__={hash:new ne,map:new(we||gt),string:new ne}}function fs(o){return Se(this,o).delete(o)}function ds(o){return Se(this,o).get(o)}function ps(o){return Se(this,o).has(o)}function gs(o,u){return Se(this,o).set(o,u),this}yt.prototype.clear=hs,yt.prototype.delete=fs,yt.prototype.get=ds,yt.prototype.has=ps,yt.prototype.set=gs;function xt(o){this.__data__=new gt(o)}function ms(){this.__data__=new gt}function bs(o){return this.__data__.delete(o)}function vs(o){return this.__data__.get(o)}function ys(o){return this.__data__.has(o)}function _s(o,u){var p=this.__data__;if(p instanceof gt){var w=p.__data__;if(!we||w.length<e-1)return w.push([o,u]),this;p=this.__data__=new yt(w)}return p.set(o,u),this}xt.prototype.clear=ms,xt.prototype.delete=bs,xt.prototype.get=vs,xt.prototype.has=ys,xt.prototype.set=_s;function Ge(o,u){var p=xr(o)||We(o)?st(o.length,String):[],w=p.length,K=!!w;for(var F in o)Kt.call(o,F)&&!(K&&(F=="length"||ks(F,w)))&&p.push(F);return p}function un(o,u,p){var w=o[u];(!(Kt.call(o,u)&&gn(w,p))||p===void 0&&!(u in o))&&(o[u]=p)}function Ke(o,u){for(var p=o.length;p--;)if(gn(o[p][0],u))return p;return-1}function Vt(o,u){return o&&wr(u,qr(u),o)}function Er(o,u,p,w,K,F,J){var Q;if(w&&(Q=F?w(o,K,F,J):w(o)),Q!==void 0)return Q;if(!Zt(o))return o;var dt=xr(o);if(dt){if(Q=Rs(o),!u)return Cs(o,Q)}else{var nt=ie(o),_t=nt==g||nt==_;if(mn(o))return Ve(o,u);if(nt==b||nt==i||_t&&!F){if(ft(o))return F?o:{};if(Q=Wt(_t?{}:o),!u)return Ls(o,Vt(Q,o))}else{if(!M[nt])return F?o:{};Q=Is(o,nt,Er,u)}}J||(J=new xt);var Nt=J.get(o);if(Nt)return Nt;if(J.set(o,Q),!dt)var pt=p?Os(o):qr(o);return et(pt||o,function(At,mt){pt&&(mt=At,At=o[mt]),un(Q,mt,Er(At,u,p,w,mt,o,J))}),Q}function As(o){return Zt(o)?sn(o):{}}function Es(o,u,p){var w=u(o);return xr(o)?w:tt(w,p(o))}function Ts(o){return $e.call(o)}function ws(o){if(!Zt(o)||Bs(o))return!1;var u=Nr(o)||ft(o)?es:j;return u.test(wt(o))}function xs(o){if(!dn(o))return on(o);var u=[];for(var p in Object(o))Kt.call(o,p)&&p!="constructor"&&u.push(p);return u}function Ve(o,u){if(u)return o.slice();var p=new o.constructor(o.length);return o.copy(p),p}function Tr(o){var u=new o.constructor(o.byteLength);return new pr(u).set(new pr(o)),u}function qe(o,u){var p=u?Tr(o.buffer):o.buffer;return new o.constructor(p,o.byteOffset,o.byteLength)}function hn(o,u,p){var w=u?p(vt(o),!0):vt(o);return rt(w,ht,new o.constructor)}function fn(o){var u=new o.constructor(o.source,R.exec(o));return u.lastIndex=o.lastIndex,u}function Ns(o,u,p){var w=u?p(en(o),!0):en(o);return rt(w,W,new o.constructor)}function qs(o){return ln?Object(ln.call(o)):{}}function Ss(o,u){var p=u?Tr(o.buffer):o.buffer;return new o.constructor(p,o.byteOffset,o.length)}function Cs(o,u){var p=-1,w=o.length;for(u||(u=Array(w));++p<w;)u[p]=o[p];return u}function wr(o,u,p,w){p||(p={});for(var K=-1,F=u.length;++K<F;){var J=u[K],Q=void 0;un(p,J,Q===void 0?o[J]:Q)}return p}function Ls(o,u){return wr(o,se(o),u)}function Os(o){return Es(o,qr,se)}function Se(o,u){var p=o.__data__;return Ms(u)?p[typeof u=="string"?"string":"hash"]:p.map}function Bt(o,u){var p=it(o,u);return ws(p)?p:void 0}var se=gr?fr(gr,Object):js,ie=Ts;(Fe&&ie(new Fe(new ArrayBuffer(1)))!=B||we&&ie(new we)!=f||Mt&&ie(Mt.resolve())!=m||He&&ie(new He)!=E||mr&&ie(new mr)!=C)&&(ie=function(o){var u=$e.call(o),p=u==b?o.constructor:void 0,w=p?wt(p):void 0;if(w)switch(w){case br:return B;case Ne:return f;case vr:return m;case yr:return E;case _r:return C}return u});function Rs(o){var u=o.length,p=o.constructor(u);return u&&typeof o[0]=="string"&&Kt.call(o,"index")&&(p.index=o.index,p.input=o.input),p}function Wt(o){return typeof o.constructor=="function"&&!dn(o)?As(St(o)):{}}function Is(o,u,p,w){var K=o.constructor;switch(u){case O:return Tr(o);case l:case c:return new K(+o);case B:return qe(o,w);case U:case X:case at:case ut:case d:case q:case A:case I:case L:return Ss(o,w);case f:return hn(o,w,p);case v:case T:return new K(o);case y:return fn(o);case E:return Ns(o,w,p);case S:return qs(o)}}function ks(o,u){return u=u??s,!!u&&(typeof o=="number"||z.test(o))&&o>-1&&o%1==0&&o<u}function Ms(o){var u=typeof o;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?o!=="__proto__":o===null}function Bs(o){return!!rn&&rn in o}function dn(o){var u=o&&o.constructor,p=typeof u=="function"&&u.prototype||De;return o===p}function wt(o){if(o!=null){try{return nn.call(o)}catch{}try{return o+""}catch{}}return""}function pn(o){return Er(o,!0,!0)}function gn(o,u){return o===u||o!==o&&u!==u}function We(o){return Ps(o)&&Kt.call(o,"callee")&&(!an.call(o,"callee")||$e.call(o)==i)}var xr=Array.isArray;function Ze(o){return o!=null&&bn(o.length)&&!Nr(o)}function Ps(o){return vn(o)&&Ze(o)}var mn=ze||Ds;function Nr(o){var u=Zt(o)?$e.call(o):"";return u==g||u==_}function bn(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=s}function Zt(o){var u=typeof o;return!!o&&(u=="object"||u=="function")}function vn(o){return!!o&&typeof o=="object"}function qr(o){return Ze(o)?Ge(o):xs(o)}function js(){return[]}function Ds(){return!1}n.exports=pn}(Ir,Ir.exports)),Ir.exports}var kr={exports:{}};kr.exports;var $c;function ah(){return $c||($c=1,function(n,t){var e=200,r="__lodash_hash_undefined__",s=1,i=2,a=9007199254740991,l="[object Arguments]",c="[object Array]",h="[object AsyncFunction]",g="[object Boolean]",_="[object Date]",f="[object Error]",v="[object Function]",b="[object GeneratorFunction]",m="[object Map]",y="[object Number]",E="[object Null]",T="[object Object]",S="[object Promise]",C="[object Proxy]",O="[object RegExp]",B="[object Set]",U="[object String]",X="[object Symbol]",at="[object Undefined]",ut="[object WeakMap]",d="[object ArrayBuffer]",q="[object DataView]",A="[object Float32Array]",I="[object Float64Array]",L="[object Int8Array]",N="[object Int16Array]",R="[object Int32Array]",j="[object Uint8Array]",z="[object Uint8ClampedArray]",M="[object Uint16Array]",V="[object Uint32Array]",G=/[\\^$.*+?()[\]{}|]/g,Z=/^\[object .+?Constructor\]$/,Y=/^(?:0|[1-9]\d*)$/,H={};H[A]=H[I]=H[L]=H[N]=H[R]=H[j]=H[z]=H[M]=H[V]=!0,H[l]=H[c]=H[d]=H[g]=H[q]=H[_]=H[f]=H[v]=H[m]=H[y]=H[T]=H[O]=H[B]=H[U]=H[ut]=!1;var lt=typeof It=="object"&&It&&It.Object===Object&&It,ht=typeof self=="object"&&self&&self.Object===Object&&self,W=lt||ht||Function("return this")(),et=t&&!t.nodeType&&t,tt=et&&!0&&n&&!n.nodeType&&n,rt=tt&&tt.exports===et,st=rt&&lt.process,it=function(){try{return st&&st.binding&&st.binding("util")}catch{}}(),ft=it&&it.isTypedArray;function vt(o,u){for(var p=-1,w=o==null?0:o.length,K=0,F=[];++p<w;){var J=o[p];u(J,p,o)&&(F[K++]=J)}return F}function fr(o,u){for(var p=-1,w=u.length,K=o.length;++p<w;)o[K+p]=u[p];return o}function en(o,u){for(var p=-1,w=o==null?0:o.length;++p<w;)if(u(o[p],p,o))return!0;return!1}function Jn(o,u){for(var p=-1,w=Array(o);++p<o;)w[p]=u(p);return w}function ts(o){return function(u){return o(u)}}function De(o,u){return o.has(u)}function dr(o,u){return o==null?void 0:o[u]}function rn(o){var u=-1,p=Array(o.size);return o.forEach(function(w,K){p[++u]=[K,w]}),p}function nn(o,u){return function(p){return o(u(p))}}function Kt(o){var u=-1,p=Array(o.size);return o.forEach(function(w){p[++u]=w}),p}var $e=Array.prototype,es=Function.prototype,Te=Object.prototype,Ue=W["__core-js_shared__"],pr=es.toString,St=Te.hasOwnProperty,sn=function(){var o=/[^.]+$/.exec(Ue&&Ue.keys&&Ue.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),an=Te.toString,rs=RegExp("^"+pr.call(St).replace(G,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gr=rt?W.Buffer:void 0,ze=W.Symbol,on=W.Uint8Array,Fe=Te.propertyIsEnumerable,we=$e.splice,Mt=ze?ze.toStringTag:void 0,He=Object.getOwnPropertySymbols,mr=gr?gr.isBuffer:void 0,xe=nn(Object.keys,Object),br=se(W,"DataView"),Ne=se(W,"Map"),vr=se(W,"Promise"),yr=se(W,"Set"),_r=se(W,"WeakMap"),pe=se(Object,"create"),ln=wt(br),ne=wt(Ne),ns=wt(vr),ss=wt(yr),is=wt(_r),cn=ze?ze.prototype:void 0,Ar=cn?cn.valueOf:void 0;function gt(o){var u=-1,p=o==null?0:o.length;for(this.clear();++u<p;){var w=o[u];this.set(w[0],w[1])}}function as(){this.__data__=pe?pe(null):{},this.size=0}function os(o){var u=this.has(o)&&delete this.__data__[o];return this.size-=u?1:0,u}function ls(o){var u=this.__data__;if(pe){var p=u[o];return p===r?void 0:p}return St.call(u,o)?u[o]:void 0}function cs(o){var u=this.__data__;return pe?u[o]!==void 0:St.call(u,o)}function us(o,u){var p=this.__data__;return this.size+=this.has(o)?0:1,p[o]=pe&&u===void 0?r:u,this}gt.prototype.clear=as,gt.prototype.delete=os,gt.prototype.get=ls,gt.prototype.has=cs,gt.prototype.set=us;function yt(o){var u=-1,p=o==null?0:o.length;for(this.clear();++u<p;){var w=o[u];this.set(w[0],w[1])}}function hs(){this.__data__=[],this.size=0}function fs(o){var u=this.__data__,p=Ve(u,o);if(p<0)return!1;var w=u.length-1;return p==w?u.pop():we.call(u,p,1),--this.size,!0}function ds(o){var u=this.__data__,p=Ve(u,o);return p<0?void 0:u[p][1]}function ps(o){return Ve(this.__data__,o)>-1}function gs(o,u){var p=this.__data__,w=Ve(p,o);return w<0?(++this.size,p.push([o,u])):p[w][1]=u,this}yt.prototype.clear=hs,yt.prototype.delete=fs,yt.prototype.get=ds,yt.prototype.has=ps,yt.prototype.set=gs;function xt(o){var u=-1,p=o==null?0:o.length;for(this.clear();++u<p;){var w=o[u];this.set(w[0],w[1])}}function ms(){this.size=0,this.__data__={hash:new gt,map:new(Ne||yt),string:new gt}}function bs(o){var u=Bt(this,o).delete(o);return this.size-=u?1:0,u}function vs(o){return Bt(this,o).get(o)}function ys(o){return Bt(this,o).has(o)}function _s(o,u){var p=Bt(this,o),w=p.size;return p.set(o,u),this.size+=p.size==w?0:1,this}xt.prototype.clear=ms,xt.prototype.delete=bs,xt.prototype.get=vs,xt.prototype.has=ys,xt.prototype.set=_s;function Ge(o){var u=-1,p=o==null?0:o.length;for(this.__data__=new xt;++u<p;)this.add(o[u])}function un(o){return this.__data__.set(o,r),this}function Ke(o){return this.__data__.has(o)}Ge.prototype.add=Ge.prototype.push=un,Ge.prototype.has=Ke;function Vt(o){var u=this.__data__=new yt(o);this.size=u.size}function Er(){this.__data__=new yt,this.size=0}function As(o){var u=this.__data__,p=u.delete(o);return this.size=u.size,p}function Es(o){return this.__data__.get(o)}function Ts(o){return this.__data__.has(o)}function ws(o,u){var p=this.__data__;if(p instanceof yt){var w=p.__data__;if(!Ne||w.length<e-1)return w.push([o,u]),this.size=++p.size,this;p=this.__data__=new xt(w)}return p.set(o,u),this.size=p.size,this}Vt.prototype.clear=Er,Vt.prototype.delete=As,Vt.prototype.get=Es,Vt.prototype.has=Ts,Vt.prototype.set=ws;function xs(o,u){var p=We(o),w=!p&&gn(o),K=!p&&!w&&Ze(o),F=!p&&!w&&!K&&vn(o),J=p||w||K||F,Q=J?Jn(o.length,String):[],dt=Q.length;for(var nt in o)St.call(o,nt)&&!(J&&(nt=="length"||K&&(nt=="offset"||nt=="parent")||F&&(nt=="buffer"||nt=="byteLength"||nt=="byteOffset")||Is(nt,dt)))&&Q.push(nt);return Q}function Ve(o,u){for(var p=o.length;p--;)if(pn(o[p][0],u))return p;return-1}function Tr(o,u,p){var w=u(o);return We(o)?w:fr(w,p(o))}function qe(o){return o==null?o===void 0?at:E:Mt&&Mt in Object(o)?ie(o):dn(o)}function hn(o){return Zt(o)&&qe(o)==l}function fn(o,u,p,w,K){return o===u?!0:o==null||u==null||!Zt(o)&&!Zt(u)?o!==o&&u!==u:Ns(o,u,p,w,fn,K)}function Ns(o,u,p,w,K,F){var J=We(o),Q=We(u),dt=J?c:Wt(o),nt=Q?c:Wt(u);dt=dt==l?T:dt,nt=nt==l?T:nt;var _t=dt==T,Nt=nt==T,pt=dt==nt;if(pt&&Ze(o)){if(!Ze(u))return!1;J=!0,_t=!1}if(pt&&!_t)return F||(F=new Vt),J||vn(o)?wr(o,u,p,w,K,F):Ls(o,u,dt,p,w,K,F);if(!(p&s)){var At=_t&&St.call(o,"__wrapped__"),mt=Nt&&St.call(u,"__wrapped__");if(At||mt){var ge=At?o.value():o,ae=mt?u.value():u;return F||(F=new Vt),K(ge,ae,p,w,F)}}return pt?(F||(F=new Vt),Os(o,u,p,w,K,F)):!1}function qs(o){if(!bn(o)||Ms(o))return!1;var u=mn(o)?rs:Z;return u.test(wt(o))}function Ss(o){return Zt(o)&&Nr(o.length)&&!!H[qe(o)]}function Cs(o){if(!Bs(o))return xe(o);var u=[];for(var p in Object(o))St.call(o,p)&&p!="constructor"&&u.push(p);return u}function wr(o,u,p,w,K,F){var J=p&s,Q=o.length,dt=u.length;if(Q!=dt&&!(J&&dt>Q))return!1;var nt=F.get(o);if(nt&&F.get(u))return nt==u;var _t=-1,Nt=!0,pt=p&i?new Ge:void 0;for(F.set(o,u),F.set(u,o);++_t<Q;){var At=o[_t],mt=u[_t];if(w)var ge=J?w(mt,At,_t,u,o,F):w(At,mt,_t,o,u,F);if(ge!==void 0){if(ge)continue;Nt=!1;break}if(pt){if(!en(u,function(ae,Ce){if(!De(pt,Ce)&&(At===ae||K(At,ae,p,w,F)))return pt.push(Ce)})){Nt=!1;break}}else if(!(At===mt||K(At,mt,p,w,F))){Nt=!1;break}}return F.delete(o),F.delete(u),Nt}function Ls(o,u,p,w,K,F,J){switch(p){case q:if(o.byteLength!=u.byteLength||o.byteOffset!=u.byteOffset)return!1;o=o.buffer,u=u.buffer;case d:return!(o.byteLength!=u.byteLength||!F(new on(o),new on(u)));case g:case _:case y:return pn(+o,+u);case f:return o.name==u.name&&o.message==u.message;case O:case U:return o==u+"";case m:var Q=rn;case B:var dt=w&s;if(Q||(Q=Kt),o.size!=u.size&&!dt)return!1;var nt=J.get(o);if(nt)return nt==u;w|=i,J.set(o,u);var _t=wr(Q(o),Q(u),w,K,F,J);return J.delete(o),_t;case X:if(Ar)return Ar.call(o)==Ar.call(u)}return!1}function Os(o,u,p,w,K,F){var J=p&s,Q=Se(o),dt=Q.length,nt=Se(u),_t=nt.length;if(dt!=_t&&!J)return!1;for(var Nt=dt;Nt--;){var pt=Q[Nt];if(!(J?pt in u:St.call(u,pt)))return!1}var At=F.get(o);if(At&&F.get(u))return At==u;var mt=!0;F.set(o,u),F.set(u,o);for(var ge=J;++Nt<dt;){pt=Q[Nt];var ae=o[pt],Ce=u[pt];if(w)var Co=J?w(Ce,ae,pt,u,o,F):w(ae,Ce,pt,o,u,F);if(!(Co===void 0?ae===Ce||K(ae,Ce,p,w,F):Co)){mt=!1;break}ge||(ge=pt=="constructor")}if(mt&&!ge){var yn=o.constructor,_n=u.constructor;yn!=_n&&"constructor"in o&&"constructor"in u&&!(typeof yn=="function"&&yn instanceof yn&&typeof _n=="function"&&_n instanceof _n)&&(mt=!1)}return F.delete(o),F.delete(u),mt}function Se(o){return Tr(o,qr,Rs)}function Bt(o,u){var p=o.__data__;return ks(u)?p[typeof u=="string"?"string":"hash"]:p.map}function se(o,u){var p=dr(o,u);return qs(p)?p:void 0}function ie(o){var u=St.call(o,Mt),p=o[Mt];try{o[Mt]=void 0;var w=!0}catch{}var K=an.call(o);return w&&(u?o[Mt]=p:delete o[Mt]),K}var Rs=He?function(o){return o==null?[]:(o=Object(o),vt(He(o),function(u){return Fe.call(o,u)}))}:js,Wt=qe;(br&&Wt(new br(new ArrayBuffer(1)))!=q||Ne&&Wt(new Ne)!=m||vr&&Wt(vr.resolve())!=S||yr&&Wt(new yr)!=B||_r&&Wt(new _r)!=ut)&&(Wt=function(o){var u=qe(o),p=u==T?o.constructor:void 0,w=p?wt(p):"";if(w)switch(w){case ln:return q;case ne:return m;case ns:return S;case ss:return B;case is:return ut}return u});function Is(o,u){return u=u??a,!!u&&(typeof o=="number"||Y.test(o))&&o>-1&&o%1==0&&o<u}function ks(o){var u=typeof o;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?o!=="__proto__":o===null}function Ms(o){return!!sn&&sn in o}function Bs(o){var u=o&&o.constructor,p=typeof u=="function"&&u.prototype||Te;return o===p}function dn(o){return an.call(o)}function wt(o){if(o!=null){try{return pr.call(o)}catch{}try{return o+""}catch{}}return""}function pn(o,u){return o===u||o!==o&&u!==u}var gn=hn(function(){return arguments}())?hn:function(o){return Zt(o)&&St.call(o,"callee")&&!Fe.call(o,"callee")},We=Array.isArray;function xr(o){return o!=null&&Nr(o.length)&&!mn(o)}var Ze=mr||Ds;function Ps(o,u){return fn(o,u)}function mn(o){if(!bn(o))return!1;var u=qe(o);return u==v||u==b||u==h||u==C}function Nr(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=a}function bn(o){var u=typeof o;return o!=null&&(u=="object"||u=="function")}function Zt(o){return o!=null&&typeof o=="object"}var vn=ft?ts(ft):Ss;function qr(o){return xr(o)?xs(o):Cs(o)}function js(){return[]}function Ds(){return!1}n.exports=Ps}(kr,kr.exports)),kr.exports}var Tn={},Uc;function Dm(){if(Uc)return Tn;Uc=1,Object.defineProperty(Tn,"__esModule",{value:!0});const n=ih(),t=ah();var e;return function(r){function s(c={},h={},g=!1){typeof c!="object"&&(c={}),typeof h!="object"&&(h={});let _=n(h);g||(_=Object.keys(_).reduce((f,v)=>(_[v]!=null&&(f[v]=_[v]),f),{}));for(const f in c)c[f]!==void 0&&h[f]===void 0&&(_[f]=c[f]);return Object.keys(_).length>0?_:void 0}r.compose=s;function i(c={},h={}){typeof c!="object"&&(c={}),typeof h!="object"&&(h={});const g=Object.keys(c).concat(Object.keys(h)).reduce((_,f)=>(t(c[f],h[f])||(_[f]=h[f]===void 0?null:h[f]),_),{});return Object.keys(g).length>0?g:void 0}r.diff=i;function a(c={},h={}){c=c||{};const g=Object.keys(h).reduce((_,f)=>(h[f]!==c[f]&&c[f]!==void 0&&(_[f]=h[f]),_),{});return Object.keys(c).reduce((_,f)=>(c[f]!==h[f]&&h[f]===void 0&&(_[f]=null),_),g)}r.invert=a;function l(c,h,g=!1){if(typeof c!="object")return h;if(typeof h!="object")return;if(!g)return h;const _=Object.keys(h).reduce((f,v)=>(c[v]===void 0&&(f[v]=h[v]),f),{});return Object.keys(_).length>0?_:void 0}r.transform=l}(e||(e={})),Tn.default=e,Tn}var wn={},zc;function oh(){if(zc)return wn;zc=1,Object.defineProperty(wn,"__esModule",{value:!0});var n;return function(t){function e(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}t.length=e}(n||(n={})),wn.default=n,wn}var xn={},Fc;function $m(){if(Fc)return xn;Fc=1,Object.defineProperty(xn,"__esModule",{value:!0});const n=oh();class t{constructor(r){this.ops=r,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(r){r||(r=1/0);const s=this.ops[this.index];if(s){const i=this.offset,a=n.default.length(s);if(r>=a-i?(r=a-i,this.index+=1,this.offset=0):this.offset+=r,typeof s.delete=="number")return{delete:r};{const l={};return s.attributes&&(l.attributes=s.attributes),typeof s.retain=="number"?l.retain=r:typeof s.retain=="object"&&s.retain!==null?l.retain=s.retain:typeof s.insert=="string"?l.insert=s.insert.substr(i,r):l.insert=s.insert,l}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?n.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const r=this.ops[this.index];return r?typeof r.delete=="number"?"delete":typeof r.retain=="number"||typeof r.retain=="object"&&r.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const r=this.offset,s=this.index,i=this.next(),a=this.ops.slice(this.index);return this.offset=r,this.index=s,[i].concat(a)}}else return[]}}return xn.default=t,xn}var Hc;function Um(){return Hc||(Hc=1,function(n,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeMap=t.OpIterator=t.Op=void 0;const e=jm(),r=ih(),s=ah(),i=Dm();t.AttributeMap=i.default;const a=oh();t.Op=a.default;const l=$m();t.OpIterator=l.default;const c="\0",h=(_,f)=>{if(typeof _!="object"||_===null)throw new Error(`cannot retain a ${typeof _}`);if(typeof f!="object"||f===null)throw new Error(`cannot retain a ${typeof f}`);const v=Object.keys(_)[0];if(!v||v!==Object.keys(f)[0])throw new Error(`embed types not matched: ${v} != ${Object.keys(f)[0]}`);return[v,_[v],f[v]]};class g{constructor(f){Array.isArray(f)?this.ops=f:f!=null&&Array.isArray(f.ops)?this.ops=f.ops:this.ops=[]}static registerEmbed(f,v){this.handlers[f]=v}static unregisterEmbed(f){delete this.handlers[f]}static getHandler(f){const v=this.handlers[f];if(!v)throw new Error(`no handlers for embed type "${f}"`);return v}insert(f,v){const b={};return typeof f=="string"&&f.length===0?this:(b.insert=f,v!=null&&typeof v=="object"&&Object.keys(v).length>0&&(b.attributes=v),this.push(b))}delete(f){return f<=0?this:this.push({delete:f})}retain(f,v){if(typeof f=="number"&&f<=0)return this;const b={retain:f};return v!=null&&typeof v=="object"&&Object.keys(v).length>0&&(b.attributes=v),this.push(b)}push(f){let v=this.ops.length,b=this.ops[v-1];if(f=r(f),typeof b=="object"){if(typeof f.delete=="number"&&typeof b.delete=="number")return this.ops[v-1]={delete:b.delete+f.delete},this;if(typeof b.delete=="number"&&f.insert!=null&&(v-=1,b=this.ops[v-1],typeof b!="object"))return this.ops.unshift(f),this;if(s(f.attributes,b.attributes)){if(typeof f.insert=="string"&&typeof b.insert=="string")return this.ops[v-1]={insert:b.insert+f.insert},typeof f.attributes=="object"&&(this.ops[v-1].attributes=f.attributes),this;if(typeof f.retain=="number"&&typeof b.retain=="number")return this.ops[v-1]={retain:b.retain+f.retain},typeof f.attributes=="object"&&(this.ops[v-1].attributes=f.attributes),this}}return v===this.ops.length?this.ops.push(f):this.ops.splice(v,0,f),this}chop(){const f=this.ops[this.ops.length-1];return f&&typeof f.retain=="number"&&!f.attributes&&this.ops.pop(),this}filter(f){return this.ops.filter(f)}forEach(f){this.ops.forEach(f)}map(f){return this.ops.map(f)}partition(f){const v=[],b=[];return this.forEach(m=>{(f(m)?v:b).push(m)}),[v,b]}reduce(f,v){return this.ops.reduce(f,v)}changeLength(){return this.reduce((f,v)=>v.insert?f+a.default.length(v):v.delete?f-v.delete:f,0)}length(){return this.reduce((f,v)=>f+a.default.length(v),0)}slice(f=0,v=1/0){const b=[],m=new l.default(this.ops);let y=0;for(;y<v&&m.hasNext();){let E;y<f?E=m.next(f-y):(E=m.next(v-y),b.push(E)),y+=a.default.length(E)}return new g(b)}compose(f){const v=new l.default(this.ops),b=new l.default(f.ops),m=[],y=b.peek();if(y!=null&&typeof y.retain=="number"&&y.attributes==null){let T=y.retain;for(;v.peekType()==="insert"&&v.peekLength()<=T;)T-=v.peekLength(),m.push(v.next());y.retain-T>0&&b.next(y.retain-T)}const E=new g(m);for(;v.hasNext()||b.hasNext();)if(b.peekType()==="insert")E.push(b.next());else if(v.peekType()==="delete")E.push(v.next());else{const T=Math.min(v.peekLength(),b.peekLength()),S=v.next(T),C=b.next(T);if(C.retain){const O={};if(typeof S.retain=="number")O.retain=typeof C.retain=="number"?T:C.retain;else if(typeof C.retain=="number")S.retain==null?O.insert=S.insert:O.retain=S.retain;else{const U=S.retain==null?"insert":"retain",[X,at,ut]=h(S[U],C.retain),d=g.getHandler(X);O[U]={[X]:d.compose(at,ut,U==="retain")}}const B=i.default.compose(S.attributes,C.attributes,typeof S.retain=="number");if(B&&(O.attributes=B),E.push(O),!b.hasNext()&&s(E.ops[E.ops.length-1],O)){const U=new g(v.rest());return E.concat(U).chop()}}else typeof C.delete=="number"&&(typeof S.retain=="number"||typeof S.retain=="object"&&S.retain!==null)&&E.push(C)}return E.chop()}concat(f){const v=new g(this.ops.slice());return f.ops.length>0&&(v.push(f.ops[0]),v.ops=v.ops.concat(f.ops.slice(1))),v}diff(f,v){if(this.ops===f.ops)return new g;const b=[this,f].map(S=>S.map(C=>{if(C.insert!=null)return typeof C.insert=="string"?C.insert:c;const O=S===f?"on":"with";throw new Error("diff() called "+O+" non-document")}).join("")),m=new g,y=e(b[0],b[1],v,!0),E=new l.default(this.ops),T=new l.default(f.ops);return y.forEach(S=>{let C=S[1].length;for(;C>0;){let O=0;switch(S[0]){case e.INSERT:O=Math.min(T.peekLength(),C),m.push(T.next(O));break;case e.DELETE:O=Math.min(C,E.peekLength()),E.next(O),m.delete(O);break;case e.EQUAL:O=Math.min(E.peekLength(),T.peekLength(),C);const B=E.next(O),U=T.next(O);s(B.insert,U.insert)?m.retain(O,i.default.diff(B.attributes,U.attributes)):m.push(U).delete(O);break}C-=O}}),m.chop()}eachLine(f,v=`
`){const b=new l.default(this.ops);let m=new g,y=0;for(;b.hasNext();){if(b.peekType()!=="insert")return;const E=b.peek(),T=a.default.length(E)-b.peekLength(),S=typeof E.insert=="string"?E.insert.indexOf(v,T)-T:-1;if(S<0)m.push(b.next());else if(S>0)m.push(b.next(S));else{if(f(m,b.next(1).attributes||{},y)===!1)return;y+=1,m=new g}}m.length()>0&&f(m,{},y)}invert(f){const v=new g;return this.reduce((b,m)=>{if(m.insert)v.delete(a.default.length(m));else{if(typeof m.retain=="number"&&m.attributes==null)return v.retain(m.retain),b+m.retain;if(m.delete||typeof m.retain=="number"){const y=m.delete||m.retain;return f.slice(b,b+y).forEach(T=>{m.delete?v.push(T):m.retain&&m.attributes&&v.retain(a.default.length(T),i.default.invert(m.attributes,T.attributes))}),b+y}else if(typeof m.retain=="object"&&m.retain!==null){const y=f.slice(b,b+1),E=new l.default(y.ops).next(),[T,S,C]=h(m.retain,E.insert),O=g.getHandler(T);return v.retain({[T]:O.invert(S,C)},i.default.invert(m.attributes,E.attributes)),b+1}}return b},0),v.chop()}transform(f,v=!1){if(v=!!v,typeof f=="number")return this.transformPosition(f,v);const b=f,m=new l.default(this.ops),y=new l.default(b.ops),E=new g;for(;m.hasNext()||y.hasNext();)if(m.peekType()==="insert"&&(v||y.peekType()!=="insert"))E.retain(a.default.length(m.next()));else if(y.peekType()==="insert")E.push(y.next());else{const T=Math.min(m.peekLength(),y.peekLength()),S=m.next(T),C=y.next(T);if(S.delete)continue;if(C.delete)E.push(C);else{const O=S.retain,B=C.retain;let U=typeof B=="object"&&B!==null?B:T;if(typeof O=="object"&&O!==null&&typeof B=="object"&&B!==null){const X=Object.keys(O)[0];if(X===Object.keys(B)[0]){const at=g.getHandler(X);at&&(U={[X]:at.transform(O[X],B[X],v)})}}E.retain(U,i.default.transform(S.attributes,C.attributes,v))}}return E.chop()}transformPosition(f,v=!1){v=!!v;const b=new l.default(this.ops);let m=0;for(;b.hasNext()&&m<=f;){const y=b.peekLength(),E=b.peekType();if(b.next(),E==="delete"){f-=Math.min(y,f-m);continue}else E==="insert"&&(m<f||!v)&&(f+=y);m+=y}return f}}g.Op=a.default,g.OpIterator=l.default,g.AttributeMap=i.default,g.handlers={},t.default=g,n.exports=g,n.exports.default=g}(En,En.exports)),En.exports}var kt=Um();const D=Vr(kt);class Ht extends qt{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Ht.blotName="break";Ht.tagName="BR";let zt=class extends jn{};const zm={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Xn(n){return n.replace(/[&<>"']/g,t=>zm[t])}const Yt=class Yt extends mo{static compare(t,e){const r=Yt.order.indexOf(t),s=Yt.order.indexOf(e);return r>=0||s>=0?r-s:t===e?0:t<e?-1:1}formatAt(t,e,r,s){if(Yt.compare(this.statics.blotName,r)<0&&this.scroll.query(r,$.BLOT)){const i=this.isolate(t,e);s&&i.wrap(r,s)}else super.formatAt(t,e,r,s)}optimize(t){if(super.optimize(t),this.parent instanceof Yt&&Yt.compare(this.statics.blotName,this.parent.statics.blotName)>0){const e=this.parent.isolate(this.offset(),this.length());this.moveChildren(e),e.wrap(this)}}};k(Yt,"allowedChildren",[Yt,Ht,qt,zt]),k(Yt,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let ee=Yt;const Gc=1;class bt extends Fr{constructor(){super(...arguments);k(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=lh(this)),this.cache.delta}deleteAt(e,r){super.deleteAt(e,r),this.cache={}}formatAt(e,r,s,i){r<=0||(this.scroll.query(s,$.BLOCK)?e+r===this.length()&&this.format(s,i):super.formatAt(e,Math.min(r,this.length()-e-1),s,i),this.cache={})}insertAt(e,r,s){if(s!=null){super.insertAt(e,r,s),this.cache={};return}if(r.length===0)return;const i=r.split(`
`),a=i.shift();a.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),a):this.children.tail.insertAt(this.children.tail.length(),a),this.cache={});let l=this;i.reduce((c,h)=>(l=l.split(c,!0),l.insertAt(0,h),h.length),e+a.length)}insertBefore(e,r){const{head:s}=this.children;super.insertBefore(e,r),s instanceof Ht&&s.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+Gc),this.cache.length}moveChildren(e,r){super.moveChildren(e,r),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r&&(e===0||e>=this.length()-Gc)){const i=this.clone();return e===0?(this.parent.insertBefore(i,this),this):(this.parent.insertBefore(i,this.next),i)}const s=super.split(e,r);return this.cache={},s}}bt.blotName="block";bt.tagName="P";bt.defaultChild=Ht;bt.allowedChildren=[Ht,ee,qt,zt];class Rt extends qt{attach(){super.attach(),this.attributes=new Wn(this.domNode)}delta(){return new D().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,e){const r=this.scroll.query(t,$.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,e)}formatAt(t,e,r,s){this.format(r,s)}insertAt(t,e,r){if(r!=null){super.insertAt(t,e,r);return}const s=e.split(`
`),i=s.pop(),a=s.map(c=>{const h=this.scroll.create(bt.blotName);return h.insertAt(0,c),h}),l=this.split(t);a.forEach(c=>{this.parent.insertBefore(c,l)}),i&&this.parent.insertBefore(this.scroll.create("text",i),l)}}Rt.scope=$.BLOCK_BLOT;function lh(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.descendants(Et).reduce((e,r)=>r.length()===0?e:e.insert(r.value(),Lt(r,{},t)),new D).insert(`
`,Lt(n))}function Lt(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return n==null||("formats"in n&&typeof n.formats=="function"&&(t={...t,...n.formats()},e&&delete t["code-token"]),n.parent==null||n.parent.statics.blotName==="scroll"||n.parent.statics.scope!==n.statics.scope)?t:Lt(n.parent,t,e)}const Ct=class Ct extends qt{static value(){}constructor(t,e,r){super(t,e),this.selection=r,this.textNode=document.createTextNode(Ct.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(t,e){if(this.savedLength!==0){super.format(t,e);return}let r=this,s=0;for(;r!=null&&r.statics.scope!==$.BLOCK_BLOT;)s+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=Ct.CONTENTS.length,r.optimize(),r.formatAt(s,Ct.CONTENTS.length,t,e),this.savedLength=0)}index(t,e){return t===this.textNode?0:super.index(t,e)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const t=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const e=this.prev instanceof zt?this.prev:null,r=e?e.length():0,s=this.next instanceof zt?this.next:null,i=s?s.text:"",{textNode:a}=this,l=a.data.split(Ct.CONTENTS).join("");a.data=Ct.CONTENTS;let c;if(e)c=e,(l||s)&&(e.insertAt(e.length(),l+i),s&&s.remove());else if(s)c=s,s.insertAt(0,l);else{const h=document.createTextNode(l);c=this.scroll.create(h),this.parent.insertBefore(c,this)}if(this.remove(),t){const h=(f,v)=>e&&f===e.domNode?v:f===a?r+v-1:s&&f===s.domNode?r+l.length+v:null,g=h(t.start.node,t.start.offset),_=h(t.end.node,t.end.offset);if(g!==null&&_!==null)return{startNode:c.domNode,startOffset:g,endNode:c.domNode,endOffset:_}}return null}update(t,e){if(t.some(r=>r.type==="characterData"&&r.target===this.textNode)){const r=this.restore();r&&(e.range=r)}}optimize(t){super.optimize(t);let{parent:e}=this;for(;e;){if(e.domNode.tagName==="A"){this.savedLength=Ct.CONTENTS.length,e.isolate(this.offset(e),this.length()).unwrap(),this.savedLength=0;break}e=e.parent}}value(){return""}};k(Ct,"blotName","cursor"),k(Ct,"className","ql-cursor"),k(Ct,"tagName","span"),k(Ct,"CONTENTS","\uFEFF");let or=Ct;var wa={exports:{}},Kc;function Fm(){return Kc||(Kc=1,function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function s(c,h,g){this.fn=c,this.context=h,this.once=g||!1}function i(c,h,g,_,f){if(typeof g!="function")throw new TypeError("The listener must be a function");var v=new s(g,_||c,f),b=e?e+h:h;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],v]:c._events[b].push(v):(c._events[b]=v,c._eventsCount++),c}function a(c,h){--c._eventsCount===0?c._events=new r:delete c._events[h]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var h=[],g,_;if(this._eventsCount===0)return h;for(_ in g=this._events)t.call(g,_)&&h.push(e?_.slice(1):_);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(g)):h},l.prototype.listeners=function(h){var g=e?e+h:h,_=this._events[g];if(!_)return[];if(_.fn)return[_.fn];for(var f=0,v=_.length,b=new Array(v);f<v;f++)b[f]=_[f].fn;return b},l.prototype.listenerCount=function(h){var g=e?e+h:h,_=this._events[g];return _?_.fn?1:_.length:0},l.prototype.emit=function(h,g,_,f,v,b){var m=e?e+h:h;if(!this._events[m])return!1;var y=this._events[m],E=arguments.length,T,S;if(y.fn){switch(y.once&&this.removeListener(h,y.fn,void 0,!0),E){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,g),!0;case 3:return y.fn.call(y.context,g,_),!0;case 4:return y.fn.call(y.context,g,_,f),!0;case 5:return y.fn.call(y.context,g,_,f,v),!0;case 6:return y.fn.call(y.context,g,_,f,v,b),!0}for(S=1,T=new Array(E-1);S<E;S++)T[S-1]=arguments[S];y.fn.apply(y.context,T)}else{var C=y.length,O;for(S=0;S<C;S++)switch(y[S].once&&this.removeListener(h,y[S].fn,void 0,!0),E){case 1:y[S].fn.call(y[S].context);break;case 2:y[S].fn.call(y[S].context,g);break;case 3:y[S].fn.call(y[S].context,g,_);break;case 4:y[S].fn.call(y[S].context,g,_,f);break;default:if(!T)for(O=1,T=new Array(E-1);O<E;O++)T[O-1]=arguments[O];y[S].fn.apply(y[S].context,T)}}return!0},l.prototype.on=function(h,g,_){return i(this,h,g,_,!1)},l.prototype.once=function(h,g,_){return i(this,h,g,_,!0)},l.prototype.removeListener=function(h,g,_,f){var v=e?e+h:h;if(!this._events[v])return this;if(!g)return a(this,v),this;var b=this._events[v];if(b.fn)b.fn===g&&(!f||b.once)&&(!_||b.context===_)&&a(this,v);else{for(var m=0,y=[],E=b.length;m<E;m++)(b[m].fn!==g||f&&!b[m].once||_&&b[m].context!==_)&&y.push(b[m]);y.length?this._events[v]=y.length===1?y[0]:y:a(this,v)}return this},l.prototype.removeAllListeners=function(h){var g;return h?(g=e?e+h:h,this._events[g]&&a(this,g)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=e,l.EventEmitter=l,n.exports=l}(wa)),wa.exports}var Hm=Fm();const Gm=Vr(Hm),Ga=new WeakMap,Ka=["error","warn","log","info"];let Va="warn";function ch(n){if(Va&&Ka.indexOf(n)<=Ka.indexOf(Va)){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];console[n](...e)}}function de(n){return Ka.reduce((t,e)=>(t[e]=ch.bind(console,e,n),t),{})}de.level=n=>{Va=n};ch.level=de.level;const xa=de("quill:events"),Km=["selectionchange","mousedown","mouseup","click"];Km.forEach(n=>{document.addEventListener(n,function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(s=>{const i=Ga.get(s);i&&i.emitter&&i.emitter.handleDOM(...e)})})});class P extends Gm{constructor(){super(),this.domListeners={},this.on("error",xa.error)}emit(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return xa.log.call(xa,...e),super.emit(...e)}handleDOM(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),s=1;s<e;s++)r[s-1]=arguments[s];(this.domListeners[t.type]||[]).forEach(i=>{let{node:a,handler:l}=i;(t.target===a||a.contains(t.target))&&l(t,...r)})}listenDOM(t,e,r){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:e,handler:r})}}k(P,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),k(P,"sources",{API:"api",SILENT:"silent",USER:"user"});const Na=de("quill:selection");class Re{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=t,this.length=e}}class Vm{constructor(t,e){this.emitter=e,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Re(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,P.sources.USER),1)}),this.emitter.on(P.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(P.events.SCROLL_UPDATE,(s,i)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);const a=i.some(l=>l.type==="characterData"||l.type==="childList"||l.type==="attributes"&&l.target===this.root);this.update(a?P.sources.SILENT:s)}catch{}})}),this.emitter.on(P.events.SCROLL_OPTIMIZE,(r,s)=>{if(s.range){const{startNode:i,startOffset:a,endNode:l,endOffset:c}=s.range;this.setNativeRange(i,a,l,c),this.update(P.sources.SILENT)}}),this.update(P.sources.SILENT)}handleComposition(){this.emitter.on(P.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(P.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const t=this.cursor.restore();if(!t)return;setTimeout(()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(P.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,e){this.scroll.update();const r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(t,$.BLOCK))){if(r.start.node!==this.cursor.textNode){const s=this.scroll.find(r.start.node,!1);if(s==null)return;if(s instanceof Et){const i=s.split(r.start.offset);s.parent.insertBefore(this.cursor,i)}else s.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=this.scroll.length();t=Math.min(t,r-1),e=Math.min(t+e,r-1)-t;let s,[i,a]=this.scroll.leaf(t);if(i==null)return null;if(e>0&&a===i.length()){const[g]=this.scroll.leaf(t+1);if(g){const[_]=this.scroll.line(t),[f]=this.scroll.line(t+1);_===f&&(i=g,a=0)}}[s,a]=i.position(a,!0);const l=document.createRange();if(e>0)return l.setStart(s,a),[i,a]=this.scroll.leaf(t+e),i==null?null:([s,a]=i.position(a,!0),l.setEnd(s,a),l.getBoundingClientRect());let c="left",h;if(s instanceof Text){if(!s.data.length)return null;a<s.data.length?(l.setStart(s,a),l.setEnd(s,a+1)):(l.setStart(s,a-1),l.setEnd(s,a),c="right"),h=l.getBoundingClientRect()}else{if(!(i.domNode instanceof Element))return null;h=i.domNode.getBoundingClientRect(),a>0&&(c="right")}return{bottom:h.top+h.height,height:h.height,left:h[c],right:h[c],top:h.top,width:0}}getNativeRange(){const t=document.getSelection();if(t==null||t.rangeCount<=0)return null;const e=t.getRangeAt(0);if(e==null)return null;const r=this.normalizeNative(e);return Na.info("getNativeRange",r),r}getRange(){const t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];const e=this.getNativeRange();return e==null?[null,null]:[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&qa(this.root,document.activeElement)}normalizedToRange(t){const e=[[t.start.node,t.start.offset]];t.native.collapsed||e.push([t.end.node,t.end.offset]);const r=e.map(a=>{const[l,c]=a,h=this.scroll.find(l,!0),g=h.offset(this.scroll);return c===0?g:h instanceof Et?g+h.index(l,c):g+h.length()}),s=Math.min(Math.max(...r),this.scroll.length()-1),i=Math.min(s,...r);return new Re(i,s-i)}normalizeNative(t){if(!qa(this.root,t.startContainer)||!t.collapsed&&!qa(this.root,t.endContainer))return null;const e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach(r=>{let{node:s,offset:i}=r;for(;!(s instanceof Text)&&s.childNodes.length>0;)if(s.childNodes.length>i)s=s.childNodes[i],i=0;else if(s.childNodes.length===i)s=s.lastChild,s instanceof Text?i=s.data.length:s.childNodes.length>0?i=s.childNodes.length:i=s.childNodes.length+1;else break;r.node=s,r.offset=i}),e}rangeToNative(t){const e=this.scroll.length(),r=(s,i)=>{s=Math.min(e-1,s);const[a,l]=this.scroll.leaf(s);return a?a.position(l,i):[null,-1]};return[...r(t.index,!1),...r(t.index+t.length,!0)]}setNativeRange(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Na.info("setNativeRange",t,e,r,s),t!=null&&(this.root.parentNode==null||t.parentNode==null||r.parentNode==null))return;const a=document.getSelection();if(a!=null)if(t!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:l}=this.getNativeRange()||{};if(l==null||i||t!==l.startContainer||e!==l.startOffset||r!==l.endContainer||s!==l.endOffset){t instanceof Element&&t.tagName==="BR"&&(e=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),r instanceof Element&&r.tagName==="BR"&&(s=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);const c=document.createRange();c.setStart(t,e),c.setEnd(r,s),a.removeAllRanges(),a.addRange(c)}}else a.removeAllRanges(),this.root.blur()}setRange(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:P.sources.API;if(typeof e=="string"&&(r=e,e=!1),Na.info("setRange",t),t!=null){const s=this.rangeToNative(t);this.setNativeRange(...s,e)}else this.setNativeRange(null);this.update(r)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:P.sources.USER;const e=this.lastRange,[r,s]=this.getRange();if(this.lastRange=r,this.lastNative=s,this.lastRange!=null&&(this.savedRange=this.lastRange),!go(e,this.lastRange)){if(!this.composing&&s!=null&&s.native.collapsed&&s.start.node!==this.cursor.textNode){const a=this.cursor.restore();a&&this.setNativeRange(a.startNode,a.startOffset,a.endNode,a.endOffset)}const i=[P.events.SELECTION_CHANGE,rr(this.lastRange),rr(e),t];this.emitter.emit(P.events.EDITOR_CHANGE,...i),t!==P.sources.SILENT&&this.emitter.emit(...i)}}}function qa(n,t){try{t.parentNode}catch{return!1}return n.contains(t)}const Wm=/^[ -~]*$/;class Zm{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();const r=Vc(t),s=new D;return Ym(r.ops.slice()).reduce((a,l)=>{const c=kt.Op.length(l);let h=l.attributes||{},g=!1,_=!1;if(l.insert!=null){if(s.retain(c),typeof l.insert=="string"){const b=l.insert;_=!b.endsWith(`
`)&&(e<=a||!!this.scroll.descendant(Rt,a)[0]),this.scroll.insertAt(a,b);const[m,y]=this.scroll.line(a);let E=ye({},Lt(m));if(m instanceof bt){const[T]=m.descendant(Et,y);T&&(E=ye(E,Lt(T)))}h=kt.AttributeMap.diff(E,h)||{}}else if(typeof l.insert=="object"){const b=Object.keys(l.insert)[0];if(b==null)return a;const m=this.scroll.query(b,$.INLINE)!=null;if(m)(e<=a||this.scroll.descendant(Rt,a)[0])&&(_=!0);else if(a>0){const[y,E]=this.scroll.descendant(Et,a-1);y instanceof zt?y.value()[E]!==`
`&&(g=!0):y instanceof qt&&y.statics.scope===$.INLINE_BLOT&&(g=!0)}if(this.scroll.insertAt(a,b,l.insert[b]),m){const[y]=this.scroll.descendant(Et,a);if(y){const E=ye({},Lt(y));h=kt.AttributeMap.diff(E,h)||{}}}}e+=c}else if(s.push(l),l.retain!==null&&typeof l.retain=="object"){const b=Object.keys(l.retain)[0];if(b==null)return a;this.scroll.updateEmbedAt(a,b,l.retain[b])}Object.keys(h).forEach(b=>{this.scroll.formatAt(a,c,b,h[b])});const f=g?1:0,v=_?1:0;return e+=f+v,s.retain(f),s.delete(v),a+c+f+v},0),s.reduce((a,l)=>typeof l.delete=="number"?(this.scroll.deleteAt(a,l.delete),a):a+kt.Op.length(l),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(t,e){return this.scroll.deleteAt(t,e),this.update(new D().retain(t).delete(e))}formatLine(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(i=>{this.scroll.lines(t,Math.max(e,1)).forEach(a=>{a.format(i,r[i])})}),this.scroll.optimize();const s=new D().retain(t).retain(e,rr(r));return this.update(s)}formatText(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(i=>{this.scroll.formatAt(t,e,i,r[i])});const s=new D().retain(t).retain(e,rr(r));return this.update(s)}getContents(t,e){return this.delta.slice(t,t+e)}getDelta(){return this.scroll.lines().reduce((t,e)=>t.concat(e.delta()),new D)}getFormat(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],s=[];e===0?this.scroll.path(t).forEach(l=>{const[c]=l;c instanceof bt?r.push(c):c instanceof Et&&s.push(c)}):(r=this.scroll.lines(t,e),s=this.scroll.descendants(Et,t,e));const[i,a]=[r,s].map(l=>{const c=l.shift();if(c==null)return{};let h=Lt(c);for(;Object.keys(h).length>0;){const g=l.shift();if(g==null)return h;h=Xm(Lt(g),h)}return h});return{...i,...a}}getHTML(t,e){const[r,s]=this.scroll.line(t);if(r){const i=r.length();return r.length()>=s+e&&!(s===0&&e===i)?Hr(r,s,e,!0):Hr(this.scroll,t,e,!0)}return""}getText(t,e){return this.getContents(t,e).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(t,e){const r=Vc(e),s=new D().retain(t).concat(r);return this.scroll.insertContents(t,r),this.update(s)}insertEmbed(t,e,r){return this.scroll.insertAt(t,e,r),this.update(new D().retain(t).insert({[e]:r}))}insertText(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(t,e),Object.keys(r).forEach(s=>{this.scroll.formatAt(t,e.length,s,r[s])}),this.update(new D().retain(t).insert(e,rr(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const t=this.scroll.children.head;if((t==null?void 0:t.statics.blotName)!==bt.blotName)return!1;const e=t;return e.children.length>1?!1:e.children.head instanceof Ht}removeFormat(t,e){const r=this.getText(t,e),[s,i]=this.scroll.line(t+e);let a=0,l=new D;s!=null&&(a=s.length()-i,l=s.delta().slice(i,i+a-1).insert(`
`));const h=this.getContents(t,e+a).diff(new D().insert(r).concat(l)),g=new D().retain(t).concat(h);return this.applyDelta(g)}update(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const s=this.delta;if(e.length===1&&e[0].type==="characterData"&&e[0].target.data.match(Wm)&&this.scroll.find(e[0].target)){const i=this.scroll.find(e[0].target),a=Lt(i),l=i.offset(this.scroll),c=e[0].oldValue.replace(or.CONTENTS,""),h=new D().insert(c),g=new D().insert(i.value()),_=r&&{oldRange:Wc(r.oldRange,-l),newRange:Wc(r.newRange,-l)};t=new D().retain(l).concat(h.diff(g,_)).reduce((v,b)=>b.insert?v.insert(b.insert,a):v.push(b),new D),this.delta=s.compose(t)}else this.delta=this.getDelta(),(!t||!go(s.compose(t),this.delta))&&(t=s.diff(this.delta,r));return t}}function tr(n,t,e){if(n.length===0){const[v]=Sa(e.pop());return t<=0?`</li></${v}>`:`</li></${v}>${tr([],t-1,e)}`}const[{child:r,offset:s,length:i,indent:a,type:l},...c]=n,[h,g]=Sa(l);if(a>t)return e.push(l),a===t+1?`<${h}><li${g}>${Hr(r,s,i)}${tr(c,a,e)}`:`<${h}><li>${tr(n,t+1,e)}`;const _=e[e.length-1];if(a===t&&l===_)return`</li><li${g}>${Hr(r,s,i)}${tr(c,a,e)}`;const[f]=Sa(e.pop());return`</li></${f}>${tr(n,t-1,e)}`}function Hr(n,t,e){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in n&&typeof n.html=="function")return n.html(t,e);if(n instanceof zt)return Xn(n.value().slice(t,t+e)).replaceAll(" ","&nbsp;");if(n instanceof Ut){if(n.statics.blotName==="list-container"){const h=[];return n.children.forEachAt(t,e,(g,_,f)=>{const v="formats"in g&&typeof g.formats=="function"?g.formats():{};h.push({child:g,offset:_,length:f,indent:v.indent||0,type:v.list})}),tr(h,-1,[])}const s=[];if(n.children.forEachAt(t,e,(h,g,_)=>{s.push(Hr(h,g,_))}),r||n.statics.blotName==="list")return s.join("");const{outerHTML:i,innerHTML:a}=n.domNode,[l,c]=i.split(`>${a}<`);return l==="<table"?`<table style="border: 1px solid #000;">${s.join("")}<${c}`:`${l}>${s.join("")}<${c}`}return n.domNode instanceof Element?n.domNode.outerHTML:""}function Xm(n,t){return Object.keys(t).reduce((e,r)=>{if(n[r]==null)return e;const s=t[r];return s===n[r]?e[r]=s:Array.isArray(s)?s.indexOf(n[r])<0?e[r]=s.concat([n[r]]):e[r]=s:e[r]=[s,n[r]],e},{})}function Sa(n){const t=n==="ordered"?"ol":"ul";switch(n){case"checked":return[t,' data-list="checked"'];case"unchecked":return[t,' data-list="unchecked"'];default:return[t,""]}}function Vc(n){return n.reduce((t,e)=>{if(typeof e.insert=="string"){const r=e.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return t.insert(r,e.attributes)}return t.push(e)},new D)}function Wc(n,t){let{index:e,length:r}=n;return new Re(e+t,r)}function Ym(n){const t=[];return n.forEach(e=>{typeof e.insert=="string"?e.insert.split(`
`).forEach((s,i)=>{i&&t.push({insert:`
`,attributes:e.attributes}),s&&t.push({insert:s,attributes:e.attributes})}):t.push(e)}),t}class Gt{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=t,this.options=e}}k(Gt,"DEFAULTS",{});const Nn="\uFEFF";class vo extends qt{constructor(t,e){super(t,e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(Nn),this.rightGuard=document.createTextNode(Nn),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,e)}restore(t){let e=null,r;const s=t.data.split(Nn).join("");if(t===this.leftGuard)if(this.prev instanceof zt){const i=this.prev.length();this.prev.insertAt(i,s),e={startNode:this.prev.domNode,startOffset:i+s.length}}else r=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(r),this),e={startNode:r,startOffset:s.length};else t===this.rightGuard&&(this.next instanceof zt?(this.next.insertAt(0,s),e={startNode:this.next.domNode,startOffset:s.length}):(r=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(r),this.next),e={startNode:r,startOffset:s.length}));return t.data=Nn,e}update(t,e){t.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){const s=this.restore(r.target);s&&(e.range=s)}})}}class Qm{constructor(t,e){k(this,"isComposing",!1);this.scroll=t,this.emitter=e,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",t=>{this.isComposing||this.handleCompositionStart(t)}),this.scroll.domNode.addEventListener("compositionend",t=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(t)})})}handleCompositionStart(t){const e=t.target instanceof Node?this.scroll.find(t.target,!0):null;e&&!(e instanceof vo)&&(this.emitter.emit(P.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(P.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(P.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(P.events.COMPOSITION_END,t),this.isComposing=!1}}const jr=class jr{constructor(t,e){k(this,"modules",{});this.quill=t,this.options=e}init(){Object.keys(this.options.modules).forEach(t=>{this.modules[t]==null&&this.addModule(t)})}addModule(t){const e=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}};k(jr,"DEFAULTS",{modules:{}}),k(jr,"themes",{default:jr});let lr=jr;const Jm=n=>n.parentElement||n.getRootNode().host||null,t0=n=>{const t=n.getBoundingClientRect(),e="offsetWidth"in n&&Math.abs(t.width)/n.offsetWidth||1,r="offsetHeight"in n&&Math.abs(t.height)/n.offsetHeight||1;return{top:t.top,right:t.left+n.clientWidth*e,bottom:t.top+n.clientHeight*r,left:t.left}},qn=n=>{const t=parseInt(n,10);return Number.isNaN(t)?0:t},Zc=(n,t,e,r,s,i)=>n<e&&t>r?0:n<e?-(e-n+s):t>r?t-n>r-e?n+s-e:t-r+i:0,e0=(n,t)=>{var i,a,l;const e=n.ownerDocument;let r=t,s=n;for(;s;){const c=s===e.body,h=c?{top:0,right:((i=window.visualViewport)==null?void 0:i.width)??e.documentElement.clientWidth,bottom:((a=window.visualViewport)==null?void 0:a.height)??e.documentElement.clientHeight,left:0}:t0(s),g=getComputedStyle(s),_=Zc(r.left,r.right,h.left,h.right,qn(g.scrollPaddingLeft),qn(g.scrollPaddingRight)),f=Zc(r.top,r.bottom,h.top,h.bottom,qn(g.scrollPaddingTop),qn(g.scrollPaddingBottom));if(_||f)if(c)(l=e.defaultView)==null||l.scrollBy(_,f);else{const{scrollLeft:v,scrollTop:b}=s;f&&(s.scrollTop+=f),_&&(s.scrollLeft+=_);const m=s.scrollLeft-v,y=s.scrollTop-b;r={left:r.left-m,top:r.top-y,right:r.right-m,bottom:r.bottom-y}}s=c||g.position==="fixed"?null:Jm(s)}},r0=100,n0=["block","break","cursor","inline","scroll","text"],s0=(n,t,e)=>{const r=new ar;return n0.forEach(s=>{const i=t.query(s);i&&r.register(i)}),n.forEach(s=>{let i=t.query(s);i||e.error(`Cannot register "${s}" specified in "formats" config. Are you sure it was registered?`);let a=0;for(;i;)if(r.register(i),i="blotName"in i?i.requiredContainer??null:null,a+=1,a>r0){e.error(`Cycle detected in registering blot requiredContainer: "${s}"`);break}}),r},sr=de("quill"),Sn=new ar;Ut.uiClass="ql-ui";const jt=class jt{static debug(t){t===!0&&(t="log"),de.level(t)}static find(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Ga.get(t)||Sn.find(t,e)}static import(t){return this.imports[t]==null&&sr.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const t=arguments.length<=0?void 0:arguments[0],e=!!(!(arguments.length<=1)&&arguments[1]),r="attrName"in t?t.attrName:t.blotName;typeof r=="string"?this.register(`formats/${r}`,t,e):Object.keys(t).forEach(s=>{this.register(s,t[s],e)})}else{const t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],r=!!(!(arguments.length<=2)&&arguments[2]);this.imports[t]!=null&&!r&&sr.warn(`Overwriting ${t} with`,e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&e&&typeof e!="boolean"&&e.blotName!=="abstract"&&Sn.register(e),typeof e.register=="function"&&e.register(Sn)}}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=i0(t,e),this.container=this.options.container,this.container==null){sr.error("Invalid Quill container",t);return}this.options.debug&&jt.debug(this.options.debug);const r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Ga.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new P;const s=bo.blotName,i=this.options.registry.query(s);if(!i||!("blotName"in i))throw new Error(`Cannot initialize Quill without "${s}" blot`);if(this.scroll=new i(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Zm(this.scroll),this.selection=new Vm(this.scroll,this.emitter),this.composition=new Qm(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(P.events.EDITOR_CHANGE,a=>{a===P.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(P.events.SCROLL_UPDATE,(a,l)=>{const c=this.selection.lastRange,[h]=this.selection.getRange(),g=c&&h?{oldRange:c,newRange:h}:void 0;Pt.call(this,()=>this.editor.update(null,l,g),a)}),this.emitter.on(P.events.SCROLL_EMBED_UPDATE,(a,l)=>{const c=this.selection.lastRange,[h]=this.selection.getRange(),g=c&&h?{oldRange:c,newRange:h}:void 0;Pt.call(this,()=>{const _=new D().retain(a.offset(this)).retain({[a.statics.blotName]:l});return this.editor.update(_,[],g)},jt.sources.USER)}),r){const a=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(a)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof t=="string"){const r=t;t=document.createElement("div"),t.classList.add(r)}return this.container.insertBefore(t,e),t}blur(){this.selection.setRange(null)}deleteText(t,e,r){return[t,e,,r]=oe(t,e,r),Pt.call(this,()=>this.editor.deleteText(t,e),r,t,-1*e)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;const e=t();return this.allowReadOnlyEdits=!1,e}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:P.sources.API;return Pt.call(this,()=>{const s=this.getSelection(!0);let i=new D;if(s==null)return i;if(this.scroll.query(t,$.BLOCK))i=this.editor.formatLine(s.index,s.length,{[t]:e});else{if(s.length===0)return this.selection.format(t,e),i;i=this.editor.formatText(s.index,s.length,{[t]:e})}return this.setSelection(s,P.sources.SILENT),i},r)}formatLine(t,e,r,s,i){let a;return[t,e,a,i]=oe(t,e,r,s,i),Pt.call(this,()=>this.editor.formatLine(t,e,a),i,t,0)}formatText(t,e,r,s,i){let a;return[t,e,a,i]=oe(t,e,r,s,i),Pt.call(this,()=>this.editor.formatText(t,e,a),i,t,0)}getBounds(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof t=="number"?r=this.selection.getBounds(t,e):r=this.selection.getBounds(t.index,t.length),!r)return null;const s=this.container.getBoundingClientRect();return{bottom:r.bottom-s.top,height:r.height,left:r.left-s.left,right:r.right-s.left,top:r.top-s.top,width:r.width}}getContents(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-t;return[t,e]=oe(t,e),this.editor.getContents(t,e)}getFormat(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof t=="number"?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof t!="number"?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}getModule(t){return this.theme.modules[t]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(e=e??this.getLength()-t),[t,e]=oe(t,e),this.editor.getHTML(t,e)}getText(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(e=e??this.getLength()-t),[t,e]=oe(t,e),this.editor.getText(t,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,e,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:jt.sources.API;return Pt.call(this,()=>this.editor.insertEmbed(t,e,r),s,t)}insertText(t,e,r,s,i){let a;return[t,,a,i]=oe(t,0,r,s,i),Pt.call(this,()=>this.editor.insertText(t,e,a),i,t,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,e,r){return[t,e,,r]=oe(t,e,r),Pt.call(this,()=>this.editor.removeFormat(t,e),r,t)}scrollRectIntoView(t){e0(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const t=this.selection.lastRange,e=t&&this.selection.getBounds(t.index,t.length);e&&this.scrollRectIntoView(e)}setContents(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:P.sources.API;return Pt.call(this,()=>{t=new D(t);const r=this.getLength(),s=this.editor.deleteText(0,r),i=this.editor.insertContents(0,t),a=this.editor.deleteText(this.getLength()-1,1);return s.compose(i).compose(a)},e)}setSelection(t,e,r){t==null?this.selection.setRange(null,e||jt.sources.API):([t,e,,r]=oe(t,e,r),this.selection.setRange(new Re(Math.max(0,t),e),r),r!==P.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:P.sources.API;const r=new D().insert(t);return this.setContents(r,e)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:P.sources.USER;const e=this.scroll.update(t);return this.selection.update(t),e}updateContents(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:P.sources.API;return Pt.call(this,()=>(t=new D(t),this.editor.applyDelta(t)),e,!0)}};k(jt,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Sn,theme:"default"}),k(jt,"events",P.events),k(jt,"sources",P.sources),k(jt,"version","2.0.3"),k(jt,"imports",{delta:D,parchment:Pm,"core/module":Gt,"core/theme":lr});let x=jt;function Xc(n){return typeof n=="string"?document.querySelector(n):n}function Ca(n){return Object.entries(n??{}).reduce((t,e)=>{let[r,s]=e;return{...t,[r]:s===!0?{}:s}},{})}function Yc(n){return Object.fromEntries(Object.entries(n).filter(t=>t[1]!==void 0))}function i0(n,t){const e=Xc(n);if(!e)throw new Error("Invalid Quill container");const s=!t.theme||t.theme===x.DEFAULTS.theme?lr:x.import(`themes/${t.theme}`);if(!s)throw new Error(`Invalid theme ${t.theme}. Did you register it?`);const{modules:i,...a}=x.DEFAULTS,{modules:l,...c}=s.DEFAULTS;let h=Ca(t.modules);h!=null&&h.toolbar&&h.toolbar.constructor!==Object&&(h={...h,toolbar:{container:h.toolbar}});const g=ye({},Ca(i),Ca(l),h),_={...a,...Yc(c),...Yc(t)};let f=t.registry;return f?t.formats&&sr.warn('Ignoring "formats" option because "registry" is specified'):f=t.formats?s0(t.formats,_.registry,sr):_.registry,{..._,registry:f,container:e,theme:s,modules:Object.entries(g).reduce((v,b)=>{let[m,y]=b;if(!y)return v;const E=x.import(`modules/${m}`);return E==null?(sr.error(`Cannot load ${m} module. Are you sure you registered it?`),v):{...v,[m]:ye({},E.DEFAULTS||{},y)}},{}),bounds:Xc(_.bounds)}}function Pt(n,t,e,r){if(!this.isEnabled()&&t===P.sources.USER&&!this.allowReadOnlyEdits)return new D;let s=e==null?null:this.getSelection();const i=this.editor.delta,a=n();if(s!=null&&(e===!0&&(e=s.index),r==null?s=Qc(s,a,t):r!==0&&(s=Qc(s,e,r,t)),this.setSelection(s,P.sources.SILENT)),a.length()>0){const l=[P.events.TEXT_CHANGE,a,i,t];this.emitter.emit(P.events.EDITOR_CHANGE,...l),t!==P.sources.SILENT&&this.emitter.emit(...l)}return a}function oe(n,t,e,r,s){let i={};return typeof n.index=="number"&&typeof n.length=="number"?typeof t!="number"?(s=r,r=e,e=t,t=n.length,n=n.index):(t=n.length,n=n.index):typeof t!="number"&&(s=r,r=e,e=t,t=0),typeof e=="object"?(i=e,s=r):typeof e=="string"&&(r!=null?i[e]=r:s=e),s=s||P.sources.API,[n,t,i,s]}function Qc(n,t,e,r){const s=typeof e=="number"?e:0;if(n==null)return null;let i,a;return t&&typeof t.transformPosition=="function"?[i,a]=[n.index,n.index+n.length].map(l=>t.transformPosition(l,r!==P.sources.USER)):[i,a]=[n.index,n.index+n.length].map(l=>l<t||l===t&&r===P.sources.USER?l:s>=0?l+s:Math.max(t,l+s)),new Re(i,a-i)}class Be extends Zn{}function Jc(n){return n instanceof bt||n instanceof Rt}function tu(n){return typeof n.updateContent=="function"}class er extends bo{constructor(t,e,r){let{emitter:s}=r;super(t,e),this.emitter=s,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",i=>this.handleDragStart(i))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const t=this.batch;this.batch=!1,this.update(t)}emitMount(t){this.emitter.emit(P.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit(P.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,e){this.emitter.emit(P.events.SCROLL_EMBED_UPDATE,t,e)}deleteAt(t,e){const[r,s]=this.line(t),[i]=this.line(t+e);if(super.deleteAt(t,e),i!=null&&r!==i&&s>0){if(r instanceof Rt||i instanceof Rt){this.optimize();return}const a=i.children.head instanceof Ht?null:i.children.head;r.moveChildren(i,a),r.remove()}this.optimize()}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,e,r,s){super.formatAt(t,e,r,s),this.optimize()}insertAt(t,e,r){if(t>=this.length())if(r==null||this.scroll.query(e,$.BLOCK)==null){const s=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(s),r==null&&e.endsWith(`
`)?s.insertAt(0,e.slice(0,-1),r):s.insertAt(0,e,r)}else{const s=this.scroll.create(e,r);this.appendChild(s)}else super.insertAt(t,e,r);this.optimize()}insertBefore(t,e){if(t.statics.scope===$.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(t),super.insertBefore(r,e)}else super.insertBefore(t,e)}insertContents(t,e){const r=this.deltaToRenderBlocks(e.concat(new D().insert(`
`))),s=r.pop();if(s==null)return;this.batchStart();const i=r.shift();if(i){const c=i.type==="block"&&(i.delta.length()===0||!this.descendant(Rt,t)[0]&&t<this.length()),h=i.type==="block"?i.delta:new D().insert({[i.key]:i.value});La(this,t,h);const g=i.type==="block"?1:0,_=t+h.length()+g;c&&this.insertAt(_-1,`
`);const f=Lt(this.line(t)[0]),v=kt.AttributeMap.diff(f,i.attributes)||{};Object.keys(v).forEach(b=>{this.formatAt(_-1,1,b,v[b])}),t=_}let[a,l]=this.children.find(t);if(r.length&&(a&&(a=a.split(l),l=0),r.forEach(c=>{if(c.type==="block"){const h=this.createBlock(c.attributes,a||void 0);La(h,0,c.delta)}else{const h=this.create(c.key,c.value);this.insertBefore(h,a||void 0),Object.keys(c.attributes).forEach(g=>{h.format(g,c.attributes[g])})}})),s.type==="block"&&s.delta.length()){const c=a?a.offset(a.scroll)+l:this.length();La(this,c,s.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(t){const e=this.path(t).pop();if(!e)return[null,-1];const[r,s]=e;return r instanceof Et?[r,s]:[null,-1]}line(t){return t===this.length()?this.line(t-1):this.descendant(Jc,t)}lines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const r=(s,i,a)=>{let l=[],c=a;return s.children.forEachAt(i,a,(h,g,_)=>{Jc(h)?l.push(h):h instanceof Zn&&(l=l.concat(r(h,g,c))),c-=_}),l};return r(this,t,e)}optimize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(t,e),t.length>0&&this.emitter.emit(P.events.SCROLL_OPTIMIZE,t,e))}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch){Array.isArray(t)&&(this.batch=this.batch.concat(t));return}let e=P.sources.USER;typeof t=="string"&&(e=t),Array.isArray(t)||(t=this.observer.takeRecords()),t=t.filter(r=>{let{target:s}=r;const i=this.find(s,!0);return i&&!tu(i)}),t.length>0&&this.emitter.emit(P.events.SCROLL_BEFORE_UPDATE,e,t),super.update(t.concat([])),t.length>0&&this.emitter.emit(P.events.SCROLL_UPDATE,e,t)}updateEmbedAt(t,e,r){const[s]=this.descendant(i=>i instanceof Rt,t);s&&s.statics.blotName===e&&tu(s)&&s.updateContent(r)}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){const e=[];let r=new D;return t.forEach(s=>{const i=s==null?void 0:s.insert;if(i)if(typeof i=="string"){const a=i.split(`
`);a.slice(0,-1).forEach(c=>{r.insert(c,s.attributes),e.push({type:"block",delta:r,attributes:s.attributes??{}}),r=new D});const l=a[a.length-1];l&&r.insert(l,s.attributes)}else{const a=Object.keys(i)[0];if(!a)return;this.query(a,$.INLINE)?r.push(s):(r.length()&&e.push({type:"block",delta:r,attributes:{}}),r=new D,e.push({type:"blockEmbed",key:a,value:i[a],attributes:s.attributes??{}}))}}),r.length()&&e.push({type:"block",delta:r,attributes:{}}),e}createBlock(t,e){let r;const s={};Object.entries(t).forEach(l=>{let[c,h]=l;this.query(c,$.BLOCK&$.BLOT)!=null?r=c:s[c]=h});const i=this.create(r||this.statics.defaultChild.blotName,r?t[r]:void 0);this.insertBefore(i,e||void 0);const a=i.length();return Object.entries(s).forEach(l=>{let[c,h]=l;i.formatAt(0,a,c,h)}),i}}k(er,"blotName","scroll"),k(er,"className","ql-editor"),k(er,"tagName","DIV"),k(er,"defaultChild",bt),k(er,"allowedChildren",[bt,Rt,Be]);function La(n,t,e){e.reduce((r,s)=>{const i=kt.Op.length(s);let a=s.attributes||{};if(s.insert!=null){if(typeof s.insert=="string"){const l=s.insert;n.insertAt(r,l);const[c]=n.descendant(Et,r),h=Lt(c);a=kt.AttributeMap.diff(h,a)||{}}else if(typeof s.insert=="object"){const l=Object.keys(s.insert)[0];if(l==null)return r;if(n.insertAt(r,l,s.insert[l]),n.scroll.query(l,$.INLINE)!=null){const[h]=n.descendant(Et,r),g=Lt(h);a=kt.AttributeMap.diff(g,a)||{}}}}return Object.keys(a).forEach(l=>{n.formatAt(r,i,l,a[l])}),r+i},t)}const yo={scope:$.BLOCK,whitelist:["right","center","justify"]},a0=new te("align","align",yo),uh=new Ft("align","ql-align",yo),hh=new Ee("align","text-align",yo);class fh extends Ee{value(t){let e=super.value(t);return e.startsWith("rgb(")?(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${e.split(",").map(s=>`00${parseInt(s,10).toString(16)}`.slice(-2)).join("")}`):e}}const o0=new Ft("color","ql-color",{scope:$.INLINE}),_o=new fh("color","color",{scope:$.INLINE}),l0=new Ft("background","ql-bg",{scope:$.INLINE}),Ao=new fh("background","background-color",{scope:$.INLINE});class Pe extends Be{static create(t){const e=super.create(t);return e.setAttribute("spellcheck","false"),e}code(t,e){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(t,t+e)}html(t,e){return`<pre>
${Xn(this.code(t,e))}
</pre>`}}class Tt extends bt{static register(){x.register(Pe)}}k(Tt,"TAB","  ");class Eo extends ee{}Eo.blotName="code";Eo.tagName="CODE";Tt.blotName="code-block";Tt.className="ql-code-block";Tt.tagName="DIV";Pe.blotName="code-block-container";Pe.className="ql-code-block-container";Pe.tagName="DIV";Pe.allowedChildren=[Tt];Tt.allowedChildren=[zt,Ht,or];Tt.requiredContainer=Pe;const To={scope:$.BLOCK,whitelist:["rtl"]},dh=new te("direction","dir",To),ph=new Ft("direction","ql-direction",To),gh=new Ee("direction","direction",To),mh={scope:$.INLINE,whitelist:["serif","monospace"]},bh=new Ft("font","ql-font",mh);class c0 extends Ee{value(t){return super.value(t).replace(/["']/g,"")}}const vh=new c0("font","font-family",mh),yh=new Ft("size","ql-size",{scope:$.INLINE,whitelist:["small","large","huge"]}),_h=new Ee("size","font-size",{scope:$.INLINE,whitelist:["10px","18px","32px"]}),u0=de("quill:keyboard"),h0=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Yn extends Gt{static match(t,e){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!e[r]!==t[r]&&e[r]!==null)?!1:e.key===t.key||e.key===t.which}constructor(t,e){super(t,e),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=d0(t);if(s==null){u0.warn("Attempted to add invalid keyboard binding",s);return}typeof e=="function"&&(e={handler:e}),typeof r=="function"&&(r={handler:r}),(Array.isArray(s.key)?s.key:[s.key]).forEach(a=>{const l={...s,key:a,...e,...r};this.bindings[l.key]=this.bindings[l.key]||[],this.bindings[l.key].push(l)})}listen(){this.quill.root.addEventListener("keydown",t=>{if(t.defaultPrevented||t.isComposing||t.keyCode===229&&(t.key==="Enter"||t.key==="Backspace"))return;const s=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter(E=>Yn.match(t,E));if(s.length===0)return;const i=x.find(t.target,!0);if(i&&i.scroll!==this.quill.scroll)return;const a=this.quill.getSelection();if(a==null||!this.quill.hasFocus())return;const[l,c]=this.quill.getLine(a.index),[h,g]=this.quill.getLeaf(a.index),[_,f]=a.length===0?[h,g]:this.quill.getLeaf(a.index+a.length),v=h instanceof jn?h.value().slice(0,g):"",b=_ instanceof jn?_.value().slice(f):"",m={collapsed:a.length===0,empty:a.length===0&&l.length()<=1,format:this.quill.getFormat(a),line:l,offset:c,prefix:v,suffix:b,event:t};s.some(E=>{if(E.collapsed!=null&&E.collapsed!==m.collapsed||E.empty!=null&&E.empty!==m.empty||E.offset!=null&&E.offset!==m.offset)return!1;if(Array.isArray(E.format)){if(E.format.every(T=>m.format[T]==null))return!1}else if(typeof E.format=="object"&&!Object.keys(E.format).every(T=>E.format[T]===!0?m.format[T]!=null:E.format[T]===!1?m.format[T]==null:go(E.format[T],m.format[T])))return!1;return E.prefix!=null&&!E.prefix.test(m.prefix)||E.suffix!=null&&!E.suffix.test(m.suffix)?!1:E.handler.call(this,a,m,E)!==!0})&&t.preventDefault()})}handleBackspace(t,e){const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(t.index===0||this.quill.getLength()<=1)return;let s={};const[i]=this.quill.getLine(t.index);let a=new D().retain(t.index-r).delete(r);if(e.offset===0){const[l]=this.quill.getLine(t.index-1);if(l&&!(l.statics.blotName==="block"&&l.length()<=1)){const h=i.formats(),g=this.quill.getFormat(t.index-1,1);if(s=kt.AttributeMap.diff(h,g)||{},Object.keys(s).length>0){const _=new D().retain(t.index+i.length()-2).retain(1,s);a=a.compose(_)}}}this.quill.updateContents(a,x.sources.USER),this.quill.focus()}handleDelete(t,e){const r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(t.index>=this.quill.getLength()-r)return;let s={};const[i]=this.quill.getLine(t.index);let a=new D().retain(t.index).delete(r);if(e.offset>=i.length()-1){const[l]=this.quill.getLine(t.index+1);if(l){const c=i.formats(),h=this.quill.getFormat(t.index,1);s=kt.AttributeMap.diff(c,h)||{},Object.keys(s).length>0&&(a=a.retain(l.length()-1).retain(1,s))}}this.quill.updateContents(a,x.sources.USER),this.quill.focus()}handleDeleteRange(t){wo({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,e){const r=Object.keys(e.format).reduce((i,a)=>(this.quill.scroll.query(a,$.BLOCK)&&!Array.isArray(e.format[a])&&(i[a]=e.format[a]),i),{}),s=new D().retain(t.index).delete(t.length).insert(`
`,r);this.quill.updateContents(s,x.sources.USER),this.quill.setSelection(t.index+1,x.sources.SILENT),this.quill.focus()}}const f0={bindings:{bold:Oa("bold"),italic:Oa("italic"),underline:Oa("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(n,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","+1",x.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(n,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","-1",x.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(n,t){t.format.indent!=null?this.quill.format("indent","-1",x.sources.USER):t.format.list!=null&&this.quill.format("list",!1,x.sources.USER)}},"indent code-block":eu(!0),"outdent code-block":eu(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(n){this.quill.deleteText(n.index-1,1,x.sources.USER)}},tab:{key:"Tab",handler(n,t){if(t.format.table)return!0;this.quill.history.cutoff();const e=new D().retain(n.index).delete(n.length).insert("	");return this.quill.updateContents(e,x.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index+1,x.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,x.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(n,t){const e={list:!1};t.format.indent&&(e.indent=!1),this.quill.formatLine(n.index,n.length,e,x.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(n){const[t,e]=this.quill.getLine(n.index),r={...t.formats(),list:"checked"},s=new D().retain(n.index).insert(`
`,r).retain(t.length()-e-1).retain(1,{list:"unchecked"});this.quill.updateContents(s,x.sources.USER),this.quill.setSelection(n.index+1,x.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(n,t){const[e,r]=this.quill.getLine(n.index),s=new D().retain(n.index).insert(`
`,t.format).retain(e.length()-r-1).retain(1,{header:null});this.quill.updateContents(s,x.sources.USER),this.quill.setSelection(n.index+1,x.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(n){const t=this.quill.getModule("table");if(t){const[e,r,s,i]=t.getTable(n),a=p0(e,r,s,i);if(a==null)return;let l=e.offset();if(a<0){const c=new D().retain(l).insert(`
`);this.quill.updateContents(c,x.sources.USER),this.quill.setSelection(n.index+1,n.length,x.sources.SILENT)}else if(a>0){l+=e.length();const c=new D().retain(l).insert(`
`);this.quill.updateContents(c,x.sources.USER),this.quill.setSelection(l,x.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(n,t){const{event:e,line:r}=t,s=r.offset(this.quill.scroll);e.shiftKey?this.quill.setSelection(s-1,x.sources.USER):this.quill.setSelection(s+r.length(),x.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(n,t){if(this.quill.scroll.query("list")==null)return!0;const{length:e}=t.prefix,[r,s]=this.quill.getLine(n.index);if(s>e)return!0;let i;switch(t.prefix.trim()){case"[]":case"[ ]":i="unchecked";break;case"[x]":i="checked";break;case"-":case"*":i="bullet";break;default:i="ordered"}this.quill.insertText(n.index," ",x.sources.USER),this.quill.history.cutoff();const a=new D().retain(n.index-s).delete(e+1).retain(r.length()-2-s).retain(1,{list:i});return this.quill.updateContents(a,x.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index-e,x.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(n){const[t,e]=this.quill.getLine(n.index);let r=2,s=t;for(;s!=null&&s.length()<=1&&s.formats()["code-block"];)if(s=s.prev,r-=1,r<=0){const i=new D().retain(n.index+t.length()-e-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(i,x.sources.USER),this.quill.setSelection(n.index-1,x.sources.SILENT),!1}return!0}},"embed left":Cn("ArrowLeft",!1),"embed left shift":Cn("ArrowLeft",!0),"embed right":Cn("ArrowRight",!1),"embed right shift":Cn("ArrowRight",!0),"table down":ru(!1),"table up":ru(!0)}};Yn.DEFAULTS=f0;function eu(n){return{key:"Tab",shiftKey:!n,format:{"code-block":!0},handler(t,e){let{event:r}=e;const s=this.quill.scroll.query("code-block"),{TAB:i}=s;if(t.length===0&&!r.shiftKey){this.quill.insertText(t.index,i,x.sources.USER),this.quill.setSelection(t.index+i.length,x.sources.SILENT);return}const a=t.length===0?this.quill.getLines(t.index,1):this.quill.getLines(t);let{index:l,length:c}=t;a.forEach((h,g)=>{n?(h.insertAt(0,i),g===0?l+=i.length:c+=i.length):h.domNode.textContent.startsWith(i)&&(h.deleteAt(0,i.length),g===0?l-=i.length:c-=i.length)}),this.quill.update(x.sources.USER),this.quill.setSelection(l,c,x.sources.SILENT)}}}function Cn(n,t){return{key:n,shiftKey:t,altKey:null,[n==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:s}=r;n==="ArrowRight"&&(s+=r.length+1);const[i]=this.quill.getLeaf(s);return i instanceof qt?(n==="ArrowLeft"?t?this.quill.setSelection(r.index-1,r.length+1,x.sources.USER):this.quill.setSelection(r.index-1,x.sources.USER):t?this.quill.setSelection(r.index,r.length+1,x.sources.USER):this.quill.setSelection(r.index+r.length+1,x.sources.USER),!1):!0}}}function Oa(n){return{key:n[0],shortKey:!0,handler(t,e){this.quill.format(n,!e.format[n],x.sources.USER)}}}function ru(n){return{key:n?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(t,e){const r=n?"prev":"next",s=e.line,i=s.parent[r];if(i!=null){if(i.statics.blotName==="table-row"){let a=i.children.head,l=s;for(;l.prev!=null;)l=l.prev,a=a.next;const c=a.offset(this.quill.scroll)+Math.min(e.offset,a.length()-1);this.quill.setSelection(c,0,x.sources.USER)}}else{const a=s.table()[r];a!=null&&(n?this.quill.setSelection(a.offset(this.quill.scroll)+a.length()-1,0,x.sources.USER):this.quill.setSelection(a.offset(this.quill.scroll),0,x.sources.USER))}return!1}}}function d0(n){if(typeof n=="string"||typeof n=="number")n={key:n};else if(typeof n=="object")n=rr(n);else return null;return n.shortKey&&(n[h0]=n.shortKey,delete n.shortKey),n}function wo(n){let{quill:t,range:e}=n;const r=t.getLines(e);let s={};if(r.length>1){const i=r[0].formats(),a=r[r.length-1].formats();s=kt.AttributeMap.diff(a,i)||{}}t.deleteText(e,x.sources.USER),Object.keys(s).length>0&&t.formatLine(e.index,1,s,x.sources.USER),t.setSelection(e.index,x.sources.SILENT)}function p0(n,t,e,r){return t.prev==null&&t.next==null?e.prev==null&&e.next==null?r===0?-1:1:e.prev==null?-1:1:t.prev==null?-1:t.next==null?1:null}const g0=/font-weight:\s*normal/,m0=["P","OL","UL"],nu=n=>n&&m0.includes(n.tagName),b0=n=>{Array.from(n.querySelectorAll("br")).filter(t=>nu(t.previousElementSibling)&&nu(t.nextElementSibling)).forEach(t=>{var e;(e=t.parentNode)==null||e.removeChild(t)})},v0=n=>{Array.from(n.querySelectorAll('b[style*="font-weight"]')).filter(t=>{var e;return(e=t.getAttribute("style"))==null?void 0:e.match(g0)}).forEach(t=>{var r;const e=n.createDocumentFragment();e.append(...t.childNodes),(r=t.parentNode)==null||r.replaceChild(e,t)})};function y0(n){n.querySelector('[id^="docs-internal-guid-"]')&&(v0(n),b0(n))}const _0=/\bmso-list:[^;]*ignore/i,A0=/\bmso-list:[^;]*\bl(\d+)/i,E0=/\bmso-list:[^;]*\blevel(\d+)/i,T0=(n,t)=>{const e=n.getAttribute("style"),r=e==null?void 0:e.match(A0);if(!r)return null;const s=Number(r[1]),i=e==null?void 0:e.match(E0),a=i?Number(i[1]):1,l=new RegExp(`@list l${s}:level${a}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),c=t.match(l),h=c&&c[1]==="bullet"?"bullet":"ordered";return{id:s,indent:a,type:h,element:n}},w0=n=>{var a,l;const t=Array.from(n.querySelectorAll("[style*=mso-list]")),e=[],r=[];t.forEach(c=>{(c.getAttribute("style")||"").match(_0)?e.push(c):r.push(c)}),e.forEach(c=>{var h;return(h=c.parentNode)==null?void 0:h.removeChild(c)});const s=n.documentElement.innerHTML,i=r.map(c=>T0(c,s)).filter(c=>c);for(;i.length;){const c=[];let h=i.shift();for(;h;)c.push(h),h=i.length&&((a=i[0])==null?void 0:a.element)===h.element.nextElementSibling&&i[0].id===h.id?i.shift():null;const g=document.createElement("ul");c.forEach(v=>{const b=document.createElement("li");b.setAttribute("data-list",v.type),v.indent>1&&b.setAttribute("class",`ql-indent-${v.indent-1}`),b.innerHTML=v.element.innerHTML,g.appendChild(b)});const _=(l=c[0])==null?void 0:l.element,{parentNode:f}=_??{};_&&(f==null||f.replaceChild(g,_)),c.slice(1).forEach(v=>{let{element:b}=v;f==null||f.removeChild(b)})}};function x0(n){n.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&w0(n)}const N0=[x0,y0],q0=n=>{n.documentElement&&N0.forEach(t=>{t(n)})},S0=de("quill:clipboard"),C0=[[Node.TEXT_NODE,U0],[Node.TEXT_NODE,iu],["br",k0],[Node.ELEMENT_NODE,iu],[Node.ELEMENT_NODE,I0],[Node.ELEMENT_NODE,R0],[Node.ELEMENT_NODE,D0],["li",P0],["ol, ul",j0],["pre",M0],["tr",$0],["b",Ra("bold")],["i",Ra("italic")],["strike",Ra("strike")],["style",B0]],L0=[a0,dh].reduce((n,t)=>(n[t.keyName]=t,n),{}),su=[hh,Ao,_o,gh,vh,_h].reduce((n,t)=>(n[t.keyName]=t,n),{});class Ah extends Gt{constructor(t,e){super(t,e),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],C0.concat(this.options.matchers??[]).forEach(r=>{let[s,i]=r;this.addMatcher(s,i)})}addMatcher(t,e){this.matchers.push([t,e])}convert(t){let{html:e,text:r}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s[Tt.blotName])return new D().insert(r||"",{[Tt.blotName]:s[Tt.blotName]});if(!e)return new D().insert(r||"",s);const i=this.convertHTML(e);return Yr(i,`
`)&&(i.ops[i.ops.length-1].attributes==null||s.table)?i.compose(new D().retain(i.length()-1).delete(1)):i}normalizeHTML(t){q0(t)}convertHTML(t){const e=new DOMParser().parseFromString(t,"text/html");this.normalizeHTML(e);const r=e.body,s=new WeakMap,[i,a]=this.prepareMatching(r,s);return xo(this.quill.scroll,r,i,a,s)}dangerouslyPasteHTML(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x.sources.API;if(typeof t=="string"){const s=this.convert({html:t,text:""});this.quill.setContents(s,e),this.quill.setSelection(0,x.sources.SILENT)}else{const s=this.convert({html:e,text:""});this.quill.updateContents(new D().retain(t).concat(s),r),this.quill.setSelection(t+s.length(),x.sources.SILENT)}}onCaptureCopy(t){var a,l;let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t.defaultPrevented)return;t.preventDefault();const[r]=this.quill.selection.getRange();if(r==null)return;const{html:s,text:i}=this.onCopy(r,e);(a=t.clipboardData)==null||a.setData("text/plain",i),(l=t.clipboardData)==null||l.setData("text/html",s),e&&wo({range:r,quill:this.quill})}normalizeURIList(t){return t.split(/\r?\n/).filter(e=>e[0]!=="#").join(`
`)}onCapturePaste(t){var a,l,c,h,g;if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();const e=this.quill.getSelection(!0);if(e==null)return;const r=(a=t.clipboardData)==null?void 0:a.getData("text/html");let s=(l=t.clipboardData)==null?void 0:l.getData("text/plain");if(!r&&!s){const _=(c=t.clipboardData)==null?void 0:c.getData("text/uri-list");_&&(s=this.normalizeURIList(_))}const i=Array.from(((h=t.clipboardData)==null?void 0:h.files)||[]);if(!r&&i.length>0){this.quill.uploader.upload(e,i);return}if(r&&i.length>0){const _=new DOMParser().parseFromString(r,"text/html");if(_.body.childElementCount===1&&((g=_.body.firstElementChild)==null?void 0:g.tagName)==="IMG"){this.quill.uploader.upload(e,i);return}}this.onPaste(e,{html:r,text:s})}onCopy(t){const e=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:e}}onPaste(t,e){let{text:r,html:s}=e;const i=this.quill.getFormat(t.index),a=this.convert({text:r,html:s},i);S0.log("onPaste",a,{text:r,html:s});const l=new D().retain(t.index).delete(t.length).concat(a);this.quill.updateContents(l,x.sources.USER),this.quill.setSelection(l.length()-t.length,x.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(t,e){const r=[],s=[];return this.matchers.forEach(i=>{const[a,l]=i;switch(a){case Node.TEXT_NODE:s.push(l);break;case Node.ELEMENT_NODE:r.push(l);break;default:Array.from(t.querySelectorAll(a)).forEach(c=>{if(e.has(c)){const h=e.get(c);h==null||h.push(l)}else e.set(c,[l])});break}}),[r,s]}}k(Ah,"DEFAULTS",{matchers:[]});function je(n,t,e,r){return r.query(t)?n.reduce((s,i)=>{if(!i.insert)return s;if(i.attributes&&i.attributes[t])return s.push(i);const a=e?{[t]:e}:{};return s.insert(i.insert,{...a,...i.attributes})},new D):n}function Yr(n,t){let e="";for(let r=n.ops.length-1;r>=0&&e.length<t.length;--r){const s=n.ops[r];if(typeof s.insert!="string")break;e=s.insert+e}return e.slice(-1*t.length)===t}function be(n,t){if(!(n instanceof Element))return!1;const e=t.query(n);return e&&e.prototype instanceof qt?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(n.tagName.toLowerCase())}function O0(n,t){return n.previousElementSibling&&n.nextElementSibling&&!be(n.previousElementSibling,t)&&!be(n.nextElementSibling,t)}const Ln=new WeakMap;function Eh(n){return n==null?!1:(Ln.has(n)||(n.tagName==="PRE"?Ln.set(n,!0):Ln.set(n,Eh(n.parentNode))),Ln.get(n))}function xo(n,t,e,r,s){return t.nodeType===t.TEXT_NODE?r.reduce((i,a)=>a(t,i,n),new D):t.nodeType===t.ELEMENT_NODE?Array.from(t.childNodes||[]).reduce((i,a)=>{let l=xo(n,a,e,r,s);return a.nodeType===t.ELEMENT_NODE&&(l=e.reduce((c,h)=>h(a,c,n),l),l=(s.get(a)||[]).reduce((c,h)=>h(a,c,n),l)),i.concat(l)},new D):new D}function Ra(n){return(t,e,r)=>je(e,n,!0,r)}function R0(n,t,e){const r=te.keys(n),s=Ft.keys(n),i=Ee.keys(n),a={};return r.concat(s).concat(i).forEach(l=>{let c=e.query(l,$.ATTRIBUTE);c!=null&&(a[c.attrName]=c.value(n),a[c.attrName])||(c=L0[l],c!=null&&(c.attrName===l||c.keyName===l)&&(a[c.attrName]=c.value(n)||void 0),c=su[l],c!=null&&(c.attrName===l||c.keyName===l)&&(c=su[l],a[c.attrName]=c.value(n)||void 0))}),Object.entries(a).reduce((l,c)=>{let[h,g]=c;return je(l,h,g,e)},t)}function I0(n,t,e){const r=e.query(n);if(r==null)return t;if(r.prototype instanceof qt){const s={},i=r.value(n);if(i!=null)return s[r.blotName]=i,new D().insert(s,r.formats(n,e))}else if(r.prototype instanceof Fr&&!Yr(t,`
`)&&t.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return je(t,r.blotName,r.formats(n,e),e);return t}function k0(n,t){return Yr(t,`
`)||t.insert(`
`),t}function M0(n,t,e){const r=e.query("code-block"),s=r&&"formats"in r&&typeof r.formats=="function"?r.formats(n,e):!0;return je(t,"code-block",s,e)}function B0(){return new D}function P0(n,t,e){const r=e.query(n);if(r==null||r.blotName!=="list"||!Yr(t,`
`))return t;let s=-1,i=n.parentNode;for(;i!=null;)["OL","UL"].includes(i.tagName)&&(s+=1),i=i.parentNode;return s<=0?t:t.reduce((a,l)=>l.insert?l.attributes&&typeof l.attributes.indent=="number"?a.push(l):a.insert(l.insert,{indent:s,...l.attributes||{}}):a,new D)}function j0(n,t,e){const r=n;let s=r.tagName==="OL"?"ordered":"bullet";const i=r.getAttribute("data-checked");return i&&(s=i==="true"?"checked":"unchecked"),je(t,"list",s,e)}function iu(n,t,e){if(!Yr(t,`
`)){if(be(n,e)&&(n.childNodes.length>0||n instanceof HTMLParagraphElement))return t.insert(`
`);if(t.length()>0&&n.nextSibling){let r=n.nextSibling;for(;r!=null;){if(be(r,e))return t.insert(`
`);const s=e.query(r);if(s&&s.prototype instanceof Rt)return t.insert(`
`);r=r.firstChild}}}return t}function D0(n,t,e){var i;const r={},s=n.style||{};return s.fontStyle==="italic"&&(r.italic=!0),s.textDecoration==="underline"&&(r.underline=!0),s.textDecoration==="line-through"&&(r.strike=!0),((i=s.fontWeight)!=null&&i.startsWith("bold")||parseInt(s.fontWeight,10)>=700)&&(r.bold=!0),t=Object.entries(r).reduce((a,l)=>{let[c,h]=l;return je(a,c,h,e)},t),parseFloat(s.textIndent||0)>0?new D().insert("	").concat(t):t}function $0(n,t,e){var s,i;const r=((s=n.parentElement)==null?void 0:s.tagName)==="TABLE"?n.parentElement:(i=n.parentElement)==null?void 0:i.parentElement;if(r!=null){const l=Array.from(r.querySelectorAll("tr")).indexOf(n)+1;return je(t,"table",l,e)}return t}function U0(n,t,e){var s;let r=n.data;if(((s=n.parentElement)==null?void 0:s.tagName)==="O:P")return t.insert(r.trim());if(!Eh(n)){if(r.trim().length===0&&r.includes(`
`)&&!O0(n,e))return t;r=r.replace(/[^\S\u00a0]/g," "),r=r.replace(/ {2,}/g," "),(n.previousSibling==null&&n.parentElement!=null&&be(n.parentElement,e)||n.previousSibling instanceof Element&&be(n.previousSibling,e))&&(r=r.replace(/^ /,"")),(n.nextSibling==null&&n.parentElement!=null&&be(n.parentElement,e)||n.nextSibling instanceof Element&&be(n.nextSibling,e))&&(r=r.replace(/ $/,"")),r=r.replaceAll(" "," ")}return t.insert(r)}class Th extends Gt{constructor(e,r){super(e,r);k(this,"lastRecorded",0);k(this,"ignoreChange",!1);k(this,"stack",{undo:[],redo:[]});k(this,"currentRange",null);this.quill.on(x.events.EDITOR_CHANGE,(s,i,a,l)=>{s===x.events.SELECTION_CHANGE?i&&l!==x.sources.SILENT&&(this.currentRange=i):s===x.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||l===x.sources.USER?this.record(i,a):this.transform(i)),this.currentRange=Wa(this.currentRange,i))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",s=>{s.inputType==="historyUndo"?(this.undo(),s.preventDefault()):s.inputType==="historyRedo"&&(this.redo(),s.preventDefault())})}change(e,r){if(this.stack[e].length===0)return;const s=this.stack[e].pop();if(!s)return;const i=this.quill.getContents(),a=s.delta.invert(i);this.stack[r].push({delta:a,range:Wa(s.range,a)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(s.delta,x.sources.USER),this.ignoreChange=!1,this.restoreSelection(s)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,r){if(e.ops.length===0)return;this.stack.redo=[];let s=e.invert(r),i=this.currentRange;const a=Date.now();if(this.lastRecorded+this.options.delay>a&&this.stack.undo.length>0){const l=this.stack.undo.pop();l&&(s=s.compose(l.delta),i=l.range)}else this.lastRecorded=a;s.length()!==0&&(this.stack.undo.push({delta:s,range:i}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){au(this.stack.undo,e),au(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,x.sources.USER);else{const r=F0(this.quill.scroll,e.delta);this.quill.setSelection(r,x.sources.USER)}}}k(Th,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function au(n,t){let e=t;for(let r=n.length-1;r>=0;r-=1){const s=n[r];n[r]={delta:e.transform(s.delta,!0),range:s.range&&Wa(s.range,e)},e=s.delta.transform(e),n[r].delta.length()===0&&n.splice(r,1)}}function z0(n,t){const e=t.ops[t.ops.length-1];return e==null?!1:e.insert!=null?typeof e.insert=="string"&&e.insert.endsWith(`
`):e.attributes!=null?Object.keys(e.attributes).some(r=>n.query(r,$.BLOCK)!=null):!1}function F0(n,t){const e=t.reduce((s,i)=>s+(i.delete||0),0);let r=t.length()-e;return z0(n,t)&&(r-=1),r}function Wa(n,t){if(!n)return n;const e=t.transformPosition(n.index),r=t.transformPosition(n.index+n.length);return{index:e,length:r-e}}class wh extends Gt{constructor(t,e){super(t,e),t.root.addEventListener("drop",r=>{var a;r.preventDefault();let s=null;if(document.caretRangeFromPoint)s=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const l=document.caretPositionFromPoint(r.clientX,r.clientY);s=document.createRange(),s.setStart(l.offsetNode,l.offset),s.setEnd(l.offsetNode,l.offset)}const i=s&&t.selection.normalizeNative(s);if(i){const l=t.selection.normalizedToRange(i);(a=r.dataTransfer)!=null&&a.files&&this.upload(l,r.dataTransfer.files)}})}upload(t,e){const r=[];Array.from(e).forEach(s=>{var i;s&&((i=this.options.mimetypes)!=null&&i.includes(s.type))&&r.push(s)}),r.length>0&&this.options.handler.call(this,t,r)}}wh.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(n,t){if(!this.quill.scroll.query("image"))return;const e=t.map(r=>new Promise(s=>{const i=new FileReader;i.onload=()=>{s(i.result)},i.readAsDataURL(r)}));Promise.all(e).then(r=>{const s=r.reduce((i,a)=>i.insert({image:a}),new D().retain(n.index).delete(n.length));this.quill.updateContents(s,P.sources.USER),this.quill.setSelection(n.index+r.length,P.sources.SILENT)})}};const H0=["insertText","insertReplacementText"];class G0 extends Gt{constructor(t,e){super(t,e),t.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||t.on(x.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(t){wo({range:t,quill:this.quill})}replaceText(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t.length===0)return!1;if(e){const r=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents(new D().retain(t.index).insert(e,r),x.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+e.length,0,x.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!H0.includes(t.inputType))return;const e=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!e||e.collapsed===!0)return;const r=K0(t);if(r==null)return;const s=this.quill.selection.normalizeNative(e),i=s?this.quill.selection.normalizedToRange(s):null;i&&this.replaceText(i,r)&&t.preventDefault()}handleCompositionStart(){const t=this.quill.getSelection();t&&this.replaceText(t)}}function K0(n){var t;return typeof n.data=="string"?n.data:(t=n.dataTransfer)!=null&&t.types.includes("text/plain")?n.dataTransfer.getData("text/plain"):null}const V0=/Mac/i.test(navigator.platform),W0=100,Z0=n=>!!(n.key==="ArrowLeft"||n.key==="ArrowRight"||n.key==="ArrowUp"||n.key==="ArrowDown"||n.key==="Home"||V0&&n.key==="a"&&n.ctrlKey===!0);class X0 extends Gt{constructor(e,r){super(e,r);k(this,"isListening",!1);k(this,"selectionChangeDeadline",0);this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,r){let{line:s,event:i}=r;if(!(s instanceof Ut)||!s.uiNode)return!0;const a=getComputedStyle(s.domNode).direction==="rtl";return a&&i.key!=="ArrowRight"||!a&&i.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(i.shiftKey?1:0),x.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&Z0(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+W0,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const r=e.getRangeAt(0);if(r.collapsed!==!0||r.startOffset!==0)return;const s=this.quill.scroll.find(r.startContainer);if(!(s instanceof Ut)||!s.uiNode)return;const i=document.createRange();i.setStartAfter(s.uiNode),i.setEndAfter(s.uiNode),e.removeAllRanges(),e.addRange(i)}}x.register({"blots/block":bt,"blots/block/embed":Rt,"blots/break":Ht,"blots/container":Be,"blots/cursor":or,"blots/embed":vo,"blots/inline":ee,"blots/scroll":er,"blots/text":zt,"modules/clipboard":Ah,"modules/history":Th,"modules/keyboard":Yn,"modules/uploader":wh,"modules/input":G0,"modules/uiNode":X0});class Y0 extends Ft{add(t,e){let r=0;if(e==="+1"||e==="-1"){const s=this.value(t)||0;r=e==="+1"?s+1:s-1}else typeof e=="number"&&(r=e);return r===0?(this.remove(t),!0):super.add(t,r.toString())}canAdd(t,e){return super.canAdd(t,e)||super.canAdd(t,parseInt(e,10))}value(t){return parseInt(super.value(t),10)||void 0}}const Q0=new Y0("indent","ql-indent",{scope:$.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class Za extends bt{}k(Za,"blotName","blockquote"),k(Za,"tagName","blockquote");class Xa extends bt{static formats(t){return this.tagName.indexOf(t.tagName)+1}}k(Xa,"blotName","header"),k(Xa,"tagName",["H1","H2","H3","H4","H5","H6"]);class Qr extends Be{}Qr.blotName="list-container";Qr.tagName="OL";class Jr extends bt{static create(t){const e=super.create();return e.setAttribute("data-list",t),e}static formats(t){return t.getAttribute("data-list")||void 0}static register(){x.register(Qr)}constructor(t,e){super(t,e);const r=e.ownerDocument.createElement("span"),s=i=>{if(!t.isEnabled())return;const a=this.statics.formats(e,t);a==="checked"?(this.format("list","unchecked"),i.preventDefault()):a==="unchecked"&&(this.format("list","checked"),i.preventDefault())};r.addEventListener("mousedown",s),r.addEventListener("touchstart",s),this.attachUI(r)}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-list",e):super.format(t,e)}}Jr.blotName="list";Jr.tagName="LI";Qr.allowedChildren=[Jr];Jr.requiredContainer=Qr;class Gr extends ee{static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}k(Gr,"blotName","bold"),k(Gr,"tagName",["STRONG","B"]);class Ya extends Gr{}k(Ya,"blotName","italic"),k(Ya,"tagName",["EM","I"]);class ve extends ee{static create(t){const e=super.create(t);return e.setAttribute("href",this.sanitize(t)),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}static formats(t){return t.getAttribute("href")}static sanitize(t){return xh(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,e){t!==this.statics.blotName||!e?super.format(t,e):this.domNode.setAttribute("href",this.constructor.sanitize(e))}}k(ve,"blotName","link"),k(ve,"tagName","A"),k(ve,"SANITIZED_URL","about:blank"),k(ve,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function xh(n,t){const e=document.createElement("a");e.href=n;const r=e.href.slice(0,e.href.indexOf(":"));return t.indexOf(r)>-1}class Qa extends ee{static create(t){return t==="super"?document.createElement("sup"):t==="sub"?document.createElement("sub"):super.create(t)}static formats(t){if(t.tagName==="SUB")return"sub";if(t.tagName==="SUP")return"super"}}k(Qa,"blotName","script"),k(Qa,"tagName",["SUB","SUP"]);class Ja extends Gr{}k(Ja,"blotName","strike"),k(Ja,"tagName",["S","STRIKE"]);class to extends ee{}k(to,"blotName","underline"),k(to,"tagName","U");class Rn extends vo{static create(t){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const e=super.create(t);return typeof t=="string"&&(window.katex.render(t,e,{throwOnError:!1,errorColor:"#f00"}),e.setAttribute("data-value",t)),e}static value(t){return t.getAttribute("data-value")}html(){const{formula:t}=this.value();return`<span>${t}</span>`}}k(Rn,"blotName","formula"),k(Rn,"className","ql-formula"),k(Rn,"tagName","SPAN");const ou=["alt","height","width"];class eo extends qt{static create(t){const e=super.create(t);return typeof t=="string"&&e.setAttribute("src",this.sanitize(t)),e}static formats(t){return ou.reduce((e,r)=>(t.hasAttribute(r)&&(e[r]=t.getAttribute(r)),e),{})}static match(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}static sanitize(t){return xh(t,["http","https","data"])?t:"//:0"}static value(t){return t.getAttribute("src")}format(t,e){ou.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}}k(eo,"blotName","image"),k(eo,"tagName","IMG");const lu=["height","width"];class In extends Rt{static create(t){const e=super.create(t);return e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen","true"),e.setAttribute("src",this.sanitize(t)),e}static formats(t){return lu.reduce((e,r)=>(t.hasAttribute(r)&&(e[r]=t.getAttribute(r)),e),{})}static sanitize(t){return ve.sanitize(t)}static value(t){return t.getAttribute("src")}format(t,e){lu.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}html(){const{video:t}=this.value();return`<a href="${t}">${t}</a>`}}k(In,"blotName","video"),k(In,"className","ql-video"),k(In,"tagName","IFRAME");const Mr=new Ft("code-token","hljs",{scope:$.INLINE});class ce extends ee{static formats(t,e){for(;t!=null&&t!==e.domNode;){if(t.classList&&t.classList.contains(Tt.className))return super.formats(t,e);t=t.parentNode}}constructor(t,e,r){super(t,e,r),Mr.add(this.domNode,r)}format(t,e){t!==ce.blotName?super.format(t,e):e?Mr.add(this.domNode,e):(Mr.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Mr.value(this.domNode)||this.unwrap()}}ce.blotName="code-token";ce.className="ql-token";class Ot extends Tt{static create(t){const e=super.create(t);return typeof t=="string"&&e.setAttribute("data-language",t),e}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):super.format(t,e)}replaceWith(t,e){return this.formatAt(0,this.length(),ce.blotName,!1),super.replaceWith(t,e)}}class Pr extends Pe{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(t,e){t===Ot.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(t,e)}))}formatAt(t,e,r,s){r===Ot.blotName&&(this.forceNext=!0),super.formatAt(t,e,r,s)}highlight(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const s=`${Array.from(this.domNode.childNodes).filter(a=>a!==this.uiNode).map(a=>a.textContent).join(`
`)}
`,i=Ot.formats(this.children.head.domNode);if(e||this.forceNext||this.cachedText!==s){if(s.trim().length>0||this.cachedText==null){const a=this.children.reduce((c,h)=>c.concat(lh(h,!1)),new D),l=t(s,i);a.diff(l).reduce((c,h)=>{let{retain:g,attributes:_}=h;return g?(_&&Object.keys(_).forEach(f=>{[Ot.blotName,ce.blotName].includes(f)&&this.formatAt(c,g,f,_[f])}),c+g):c},0)}this.cachedText=s,this.forceNext=!1}}html(t,e){const[r]=this.children.find(t);return`<pre data-language="${r?Ot.formats(r.domNode):"plain"}">
${Xn(this.code(t,e))}
</pre>`}optimize(t){if(super.optimize(t),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const e=Ot.formats(this.children.head.domNode);e!==this.uiNode.value&&(this.uiNode.value=e)}}}Pr.allowedChildren=[Ot];Ot.requiredContainer=Pr;Ot.allowedChildren=[ce,or,zt,Ht];const J0=(n,t,e)=>{if(typeof n.versionString=="string"){const r=n.versionString.split(".")[0];if(parseInt(r,10)>=11)return n.highlight(e,{language:t}).value}return n.highlight(t,e).value};class Nh extends Gt{static register(){x.register(ce,!0),x.register(Ot,!0),x.register(Pr,!0)}constructor(t,e){if(super(t,e),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,s)=>{let{key:i}=s;return r[i]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(x.events.SCROLL_BLOT_MOUNT,t=>{if(!(t instanceof Pr))return;const e=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:s,label:i}=r;const a=e.ownerDocument.createElement("option");a.textContent=i,a.setAttribute("value",s),e.appendChild(a)}),e.addEventListener("change",()=>{t.format(Ot.blotName,e.value),this.quill.root.focus(),this.highlight(t,!0)}),t.uiNode==null&&(t.attachUI(e),t.children.head&&(e.value=Ot.formats(t.children.head.domNode)))})}initTimer(){let t=null;this.quill.on(x.events.SCROLL_OPTIMIZE,()=>{t&&clearTimeout(t),t=setTimeout(()=>{this.highlight(),t=null},this.options.interval)})}highlight(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(x.sources.USER);const r=this.quill.getSelection();(t==null?this.quill.scroll.descendants(Pr):[t]).forEach(i=>{i.highlight(this.highlightBlot,e)}),this.quill.update(x.sources.SILENT),r!=null&&this.quill.setSelection(r,x.sources.SILENT)}highlightBlot(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(e=this.languages[e]?e:"plain",e==="plain")return Xn(t).split(`
`).reduce((s,i,a)=>(a!==0&&s.insert(`
`,{[Tt.blotName]:e}),s.insert(i)),new D);const r=this.quill.root.ownerDocument.createElement("div");return r.classList.add(Tt.className),r.innerHTML=J0(this.options.hljs,e,t),xo(this.quill.scroll,r,[(s,i)=>{const a=Mr.value(s);return a?i.compose(new D().retain(i.length(),{[ce.blotName]:a})):i}],[(s,i)=>s.data.split(`
`).reduce((a,l,c)=>(c!==0&&a.insert(`
`,{[Tt.blotName]:e}),a.insert(l)),i)],new WeakMap)}}Nh.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const Dr=class Dr extends bt{static create(t){const e=super.create();return t?e.setAttribute("data-row",t):e.setAttribute("data-row",No()),e}static formats(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(t,e){t===Dr.blotName&&e?this.domNode.setAttribute("data-row",e):super.format(t,e)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};k(Dr,"blotName","table"),k(Dr,"tagName","TD");let $t=Dr;class ue extends Be{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const t=this.children.head.formats(),e=this.children.tail.formats(),r=this.next.children.head.formats(),s=this.next.children.tail.formats();return t.table===e.table&&t.table===r.table&&t.table===s.table}return!1}optimize(t){super.optimize(t),this.children.forEach(e=>{if(e.next==null)return;const r=e.formats(),s=e.next.formats();if(r.table!==s.table){const i=this.splitAfter(e);i&&i.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}k(ue,"blotName","table-row"),k(ue,"tagName","TR");class Jt extends Be{}k(Jt,"blotName","table-body"),k(Jt,"tagName","TBODY");class cr extends Be{balanceCells(){const t=this.descendants(ue),e=t.reduce((r,s)=>Math.max(s.children.length,r),0);t.forEach(r=>{new Array(e-r.children.length).fill(0).forEach(()=>{let s;r.children.head!=null&&(s=$t.formats(r.children.head.domNode));const i=this.scroll.create($t.blotName,s);r.appendChild(i),i.optimize()})})}cells(t){return this.rows().map(e=>e.children.at(t))}deleteColumn(t){const[e]=this.descendant(Jt);e==null||e.children.head==null||e.children.forEach(r=>{const s=r.children.at(t);s!=null&&s.remove()})}insertColumn(t){const[e]=this.descendant(Jt);e==null||e.children.head==null||e.children.forEach(r=>{const s=r.children.at(t),i=$t.formats(r.children.head.domNode),a=this.scroll.create($t.blotName,i);r.insertBefore(a,s)})}insertRow(t){const[e]=this.descendant(Jt);if(e==null||e.children.head==null)return;const r=No(),s=this.scroll.create(ue.blotName);e.children.head.children.forEach(()=>{const a=this.scroll.create($t.blotName,r);s.appendChild(a)});const i=e.children.at(t);e.insertBefore(s,i)}rows(){const t=this.children.head;return t==null?[]:t.children.map(e=>e)}}k(cr,"blotName","table-container"),k(cr,"tagName","TABLE");cr.allowedChildren=[Jt];Jt.requiredContainer=cr;Jt.allowedChildren=[ue];ue.requiredContainer=Jt;ue.allowedChildren=[$t];$t.requiredContainer=ue;function No(){return`row-${Math.random().toString(36).slice(2,6)}`}class tb extends Gt{static register(){x.register($t),x.register(ue),x.register(Jt),x.register(cr)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(cr).forEach(t=>{t.balanceCells()})}deleteColumn(){const[t,,e]=this.getTable();e!=null&&(t.deleteColumn(e.cellOffset()),this.quill.update(x.sources.USER))}deleteRow(){const[,t]=this.getTable();t!=null&&(t.remove(),this.quill.update(x.sources.USER))}deleteTable(){const[t]=this.getTable();if(t==null)return;const e=t.offset();t.remove(),this.quill.update(x.sources.USER),this.quill.setSelection(e,x.sources.SILENT)}getTable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(t==null)return[null,null,null,-1];const[e,r]=this.quill.getLine(t.index);if(e==null||e.statics.blotName!==$t.blotName)return[null,null,null,-1];const s=e.parent;return[s.parent.parent,s,e,r]}insertColumn(t){const e=this.quill.getSelection();if(!e)return;const[r,s,i]=this.getTable(e);if(i==null)return;const a=i.cellOffset();r.insertColumn(a+t),this.quill.update(x.sources.USER);let l=s.rowOffset();t===0&&(l+=1),this.quill.setSelection(e.index+l,e.length,x.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){const e=this.quill.getSelection();if(!e)return;const[r,s,i]=this.getTable(e);if(i==null)return;const a=s.rowOffset();r.insertRow(a+t),this.quill.update(x.sources.USER),t>0?this.quill.setSelection(e,x.sources.SILENT):this.quill.setSelection(e.index+s.children.length,e.length,x.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,e){const r=this.quill.getSelection();if(r==null)return;const s=new Array(t).fill(0).reduce(i=>{const a=new Array(e).fill(`
`).join("");return i.insert(a,{table:No()})},new D().retain(r.index));this.quill.updateContents(s,x.sources.USER),this.quill.setSelection(r.index,x.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(x.events.SCROLL_OPTIMIZE,t=>{t.some(e=>["TD","TR","TBODY","TABLE"].includes(e.target.tagName)?(this.quill.once(x.events.TEXT_CHANGE,(r,s,i)=>{i===x.sources.USER&&this.balanceTables()}),!0):!1)})}}const cu=de("quill:toolbar");class qo extends Gt{constructor(t,e){var r,s;if(super(t,e),Array.isArray(this.options.container)){const i=document.createElement("div");i.setAttribute("role","toolbar"),eb(i,this.options.container),(s=(r=t.container)==null?void 0:r.parentNode)==null||s.insertBefore(i,t.container),this.container=i}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){cu.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(i=>{var l;const a=(l=this.options.handlers)==null?void 0:l[i];a&&this.addHandler(i,a)}),Array.from(this.container.querySelectorAll("button, select")).forEach(i=>{this.attach(i)}),this.quill.on(x.events.EDITOR_CHANGE,()=>{const[i]=this.quill.selection.getRange();this.update(i)})}addHandler(t,e){this.handlers[t]=e}attach(t){let e=Array.from(t.classList).find(s=>s.indexOf("ql-")===0);if(!e)return;if(e=e.slice(3),t.tagName==="BUTTON"&&t.setAttribute("type","button"),this.handlers[e]==null&&this.quill.scroll.query(e)==null){cu.warn("ignoring attaching to nonexistent format",e,t);return}const r=t.tagName==="SELECT"?"change":"click";t.addEventListener(r,s=>{let i;if(t.tagName==="SELECT"){if(t.selectedIndex<0)return;const l=t.options[t.selectedIndex];l.hasAttribute("selected")?i=!1:i=l.value||!1}else t.classList.contains("ql-active")?i=!1:i=t.value||!t.hasAttribute("value"),s.preventDefault();this.quill.focus();const[a]=this.quill.selection.getRange();if(this.handlers[e]!=null)this.handlers[e].call(this,i);else if(this.quill.scroll.query(e).prototype instanceof qt){if(i=prompt(`Enter ${e}`),!i)return;this.quill.updateContents(new D().retain(a.index).delete(a.length).insert({[e]:i}),x.sources.USER)}else this.quill.format(e,i,x.sources.USER);this.update(a)}),this.controls.push([e,t])}update(t){const e=t==null?{}:this.quill.getFormat(t);this.controls.forEach(r=>{const[s,i]=r;if(i.tagName==="SELECT"){let a=null;if(t==null)a=null;else if(e[s]==null)a=i.querySelector("option[selected]");else if(!Array.isArray(e[s])){let l=e[s];typeof l=="string"&&(l=l.replace(/"/g,'\\"')),a=i.querySelector(`option[value="${l}"]`)}a==null?(i.value="",i.selectedIndex=-1):a.selected=!0}else if(t==null)i.classList.remove("ql-active"),i.setAttribute("aria-pressed","false");else if(i.hasAttribute("value")){const a=e[s],l=a===i.getAttribute("value")||a!=null&&a.toString()===i.getAttribute("value")||a==null&&!i.getAttribute("value");i.classList.toggle("ql-active",l),i.setAttribute("aria-pressed",l.toString())}else{const a=e[s]!=null;i.classList.toggle("ql-active",a),i.setAttribute("aria-pressed",a.toString())}})}}qo.DEFAULTS={};function uu(n,t,e){const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${t}`),r.setAttribute("aria-pressed","false"),e!=null?(r.value=e,r.setAttribute("aria-label",`${t}: ${e}`)):r.setAttribute("aria-label",t),n.appendChild(r)}function eb(n,t){Array.isArray(t[0])||(t=[t]),t.forEach(e=>{const r=document.createElement("span");r.classList.add("ql-formats"),e.forEach(s=>{if(typeof s=="string")uu(r,s);else{const i=Object.keys(s)[0],a=s[i];Array.isArray(a)?rb(r,i,a):uu(r,i,a)}}),n.appendChild(r)})}function rb(n,t,e){const r=document.createElement("select");r.classList.add(`ql-${t}`),e.forEach(s=>{const i=document.createElement("option");s!==!1?i.setAttribute("value",String(s)):i.setAttribute("selected","selected"),r.appendChild(i)}),n.appendChild(r)}qo.DEFAULTS={container:null,handlers:{clean(){const n=this.quill.getSelection();if(n!=null)if(n.length===0){const t=this.quill.getFormat();Object.keys(t).forEach(e=>{this.quill.scroll.query(e,$.INLINE)!=null&&this.quill.format(e,!1,x.sources.USER)})}else this.quill.removeFormat(n.index,n.length,x.sources.USER)},direction(n){const{align:t}=this.quill.getFormat();n==="rtl"&&t==null?this.quill.format("align","right",x.sources.USER):!n&&t==="right"&&this.quill.format("align",!1,x.sources.USER),this.quill.format("direction",n,x.sources.USER)},indent(n){const t=this.quill.getSelection(),e=this.quill.getFormat(t),r=parseInt(e.indent||0,10);if(n==="+1"||n==="-1"){let s=n==="+1"?1:-1;e.direction==="rtl"&&(s*=-1),this.quill.format("indent",r+s,x.sources.USER)}},link(n){n===!0&&(n=prompt("Enter link URL:")),this.quill.format("link",n,x.sources.USER)},list(n){const t=this.quill.getSelection(),e=this.quill.getFormat(t);n==="check"?e.list==="checked"||e.list==="unchecked"?this.quill.format("list",!1,x.sources.USER):this.quill.format("list","unchecked",x.sources.USER):this.quill.format("list",n,x.sources.USER)}}};const nb='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',sb='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',ib='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',ab='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',ob='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',lb='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',cb='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',ub='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',hu='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',hb='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',fb='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',db='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',pb='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',gb='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',mb='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',bb='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',vb='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',yb='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',_b='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',Ab='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',Eb='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',Tb='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',wb='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',xb='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',Nb='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',qb='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',Sb='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',Cb='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',Lb='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',Ob='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',Rb='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',Ib='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',kb='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',Kr={align:{"":nb,center:sb,right:ib,justify:ab},background:ob,blockquote:lb,bold:cb,clean:ub,code:hu,"code-block":hu,color:hb,direction:{"":fb,rtl:db},formula:pb,header:{1:gb,2:mb,3:bb,4:vb,5:yb,6:_b},italic:Ab,image:Eb,indent:{"+1":Tb,"-1":wb},link:xb,list:{bullet:Nb,check:qb,ordered:Sb},script:{sub:Cb,super:Lb},strike:Ob,table:Rb,underline:Ib,video:kb},Mb='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let fu=0;function du(n,t){n.setAttribute(t,`${n.getAttribute(t)!=="true"}`)}class Qn{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",e=>{switch(e.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),e.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),du(this.label,"aria-expanded"),du(this.options,"aria-hidden")}buildItem(t){const e=document.createElement("span");e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item");const r=t.getAttribute("value");return r&&e.setAttribute("data-value",r),t.textContent&&e.setAttribute("data-label",t.textContent),e.addEventListener("click",()=>{this.selectItem(e,!0)}),e.addEventListener("keydown",s=>{switch(s.key){case"Enter":this.selectItem(e,!0),s.preventDefault();break;case"Escape":this.escape(),s.preventDefault();break}}),e}buildLabel(){const t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=Mb,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){const t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${fu}`,fu+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach(e=>{const r=this.buildItem(e);t.appendChild(r),e.selected===!0&&this.selectItem(r)}),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach(t=>{this.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.container.querySelector(".ql-selected");t!==r&&(r!=null&&r.classList.remove("ql-selected"),t!=null&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){const r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);const e=t!=null&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}}class qh extends Qn{constructor(t,e){super(t),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(t){const e=super.buildItem(t);return e.style.backgroundColor=t.getAttribute("value")||"",e}selectItem(t,e){super.selectItem(t,e);const r=this.label.querySelector(".ql-color-label"),s=t&&t.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=s:r.style.fill=s)}}class Sh extends Qn{constructor(t,e){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=e[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,e){super.selectItem(t,e);const r=t||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}}const Bb=n=>{const{overflowY:t}=getComputedStyle(n,null);return t!=="visible"&&t!=="clip"};class Ch{constructor(t,e){this.quill=t,this.boundsContainer=e||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,Bb(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){const e=t.left+t.width/2-this.root.offsetWidth/2,r=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");const s=this.boundsContainer.getBoundingClientRect(),i=this.root.getBoundingClientRect();let a=0;if(i.right>s.right&&(a=s.right-i.right,this.root.style.left=`${e+a}px`),i.left<s.left&&(a=s.left-i.left,this.root.style.left=`${e+a}px`),i.bottom>s.bottom){const l=i.bottom-i.top,c=t.bottom-t.top+l;this.root.style.top=`${r-c}px`,this.root.classList.add("ql-flip")}return a}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const Pb=[!1,"center","right","justify"],jb=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Db=[!1,"serif","monospace"],$b=["1","2","3",!1],Ub=["small",!1,"large","huge"];class tn extends lr{constructor(t,e){super(t,e);const r=s=>{if(!document.body.contains(t.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(s.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(i=>{i.container.contains(s.target)||i.close()})};t.emitter.listenDOM("click",document.body,r)}addModule(t){const e=super.addModule(t);return t==="toolbar"&&this.extendToolbar(e),e}buildButtons(t,e){Array.from(t).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(i=>{if(i.startsWith("ql-")&&(i=i.slice(3),e[i]!=null))if(i==="direction")r.innerHTML=e[i][""]+e[i].rtl;else if(typeof e[i]=="string")r.innerHTML=e[i];else{const a=r.value||"";a!=null&&e[i][a]&&(r.innerHTML=e[i][a])}})})}buildPickers(t,e){this.pickers=Array.from(t).map(s=>{if(s.classList.contains("ql-align")&&(s.querySelector("option")==null&&Lr(s,Pb),typeof e.align=="object"))return new Sh(s,e.align);if(s.classList.contains("ql-background")||s.classList.contains("ql-color")){const i=s.classList.contains("ql-background")?"background":"color";return s.querySelector("option")==null&&Lr(s,jb,i==="background"?"#ffffff":"#000000"),new qh(s,e[i])}return s.querySelector("option")==null&&(s.classList.contains("ql-font")?Lr(s,Db):s.classList.contains("ql-header")?Lr(s,$b):s.classList.contains("ql-size")&&Lr(s,Ub)),new Qn(s)});const r=()=>{this.pickers.forEach(s=>{s.update()})};this.quill.on(P.events.EDITOR_CHANGE,r)}}tn.DEFAULTS=ye({},lr.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let n=this.container.querySelector("input.ql-image[type=file]");n==null&&(n=document.createElement("input"),n.setAttribute("type","file"),n.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),n.classList.add("ql-image"),n.addEventListener("change",()=>{const t=this.quill.getSelection(!0);this.quill.uploader.upload(t,n.files),n.value=""}),this.container.appendChild(n)),n.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class Lh extends Ch{constructor(t,e){super(t,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",t=>{t.key==="Enter"?(this.save(),t.preventDefault()):t.key==="Escape"&&(this.cancel(),t.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;e!=null?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,P.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,P.sources.USER)),this.quill.root.scrollTop=e;break}case"video":t=zb(t);case"formula":{if(!t)break;const e=this.quill.getSelection(!0);if(e!=null){const r=e.index+e.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),t,P.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",P.sources.USER),this.quill.setSelection(r+2,P.sources.USER)}break}}this.textbox.value="",this.hide()}}function zb(n){let t=n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?`${t[1]||"https"}://www.youtube.com/embed/${t[2]}?showinfo=0`:(t=n.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${t[1]||"https"}://player.vimeo.com/video/${t[2]}/`:n}function Lr(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;t.forEach(r=>{const s=document.createElement("option");r===e?s.setAttribute("selected","selected"):s.setAttribute("value",String(r)),n.appendChild(s)})}const Fb=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class Oh extends Lh{constructor(t,e){super(t,e),this.quill.on(P.events.EDITOR_CHANGE,(r,s,i,a)=>{if(r===P.events.SELECTION_CHANGE)if(s!=null&&s.length>0&&a===P.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const l=this.quill.getLines(s.index,s.length);if(l.length===1){const c=this.quill.getBounds(s);c!=null&&this.position(c)}else{const c=l[l.length-1],h=this.quill.getIndex(c),g=Math.min(c.length()-1,s.index+s.length-h),_=this.quill.getBounds(new Re(h,g));_!=null&&this.position(_)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(P.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const t=this.quill.getSelection();if(t!=null){const e=this.quill.getBounds(t);e!=null&&this.position(e)}},1)})}cancel(){this.show()}position(t){const e=super.position(t),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",e!==0&&(r.style.marginLeft=`${-1*e-r.offsetWidth/2}px`),e}}k(Oh,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class Rh extends tn{constructor(t,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=Fb),super(t,e),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new Oh(this.quill,this.options.bounds),t.container!=null&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),Kr),this.buildPickers(t.container.querySelectorAll("select"),Kr))}}Rh.DEFAULTS=ye({},tn.DEFAULTS,{modules:{toolbar:{handlers:{link(n){n?this.quill.theme.tooltip.edit():this.quill.format("link",!1,x.sources.USER)}}}}});const Hb=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class Ih extends Lh{constructor(){super(...arguments);k(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const r=this.linkRange;this.restoreFocus(),this.quill.formatText(r,"link",!1,P.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(P.events.SELECTION_CHANGE,(e,r,s)=>{if(e!=null){if(e.length===0&&s===P.sources.USER){const[i,a]=this.quill.scroll.descendant(ve,e.index);if(i!=null){this.linkRange=new Re(e.index-a,i.length());const l=ve.formats(i.domNode);this.preview.textContent=l,this.preview.setAttribute("href",l),this.show();const c=this.quill.getBounds(this.linkRange);c!=null&&this.position(c);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}k(Ih,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class kh extends tn{constructor(t,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=Hb),super(t,e),this.quill.container.classList.add("ql-snow")}extendToolbar(t){t.container!=null&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),Kr),this.buildPickers(t.container.querySelectorAll("select"),Kr),this.tooltip=new Ih(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(e,r)=>{t.handlers.link.call(t,!r.format.link)}))}}kh.DEFAULTS=ye({},tn.DEFAULTS,{modules:{toolbar:{handlers:{link(n){if(n){const t=this.quill.getSelection();if(t==null||t.length===0)return;let e=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(e)&&e.indexOf("mailto:")!==0&&(e=`mailto:${e}`);const{tooltip:r}=this.quill.theme;r.edit("link",e)}else this.quill.format("link",!1,x.sources.USER)}}}}});x.register({"attributors/attribute/direction":dh,"attributors/class/align":uh,"attributors/class/background":l0,"attributors/class/color":o0,"attributors/class/direction":ph,"attributors/class/font":bh,"attributors/class/size":yh,"attributors/style/align":hh,"attributors/style/background":Ao,"attributors/style/color":_o,"attributors/style/direction":gh,"attributors/style/font":vh,"attributors/style/size":_h},!0);x.register({"formats/align":uh,"formats/direction":ph,"formats/indent":Q0,"formats/background":Ao,"formats/color":_o,"formats/font":bh,"formats/size":yh,"formats/blockquote":Za,"formats/code-block":Tt,"formats/header":Xa,"formats/list":Jr,"formats/bold":Gr,"formats/code":Eo,"formats/italic":Ya,"formats/link":ve,"formats/script":Qa,"formats/strike":Ja,"formats/underline":to,"formats/formula":Rn,"formats/image":eo,"formats/video":In,"modules/syntax":Nh,"modules/table":tb,"modules/toolbar":qo,"themes/bubble":Rh,"themes/snow":kh,"ui/icons":Kr,"ui/picker":Qn,"ui/icon-picker":Sh,"ui/color-picker":qh,"ui/tooltip":Ch},!0);class So extends Xt.Component{constructor(t){super(t),this.editingAreaRef=Ph.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(r,s,i,a)=>{var l,c;r==="text-change"?(l=this.onEditorChangeText)==null||l.call(this,this.editor.root.innerHTML,s,a,this.unprivilegedEditor):r==="selection-change"&&((c=this.onEditorChangeSelection)==null||c.call(this,s,a,this.unprivilegedEditor))};const e=this.isControlled()?t.value:t.defaultValue;this.value=e??""}validateProps(t){if(Xt.Children.count(t.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Xt.Children.count(t.children)){const e=Xt.Children.only(t.children);if((e==null?void 0:e.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&t.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(t,e){if(this.validateProps(t),!this.editor||this.state.generation!==e.generation)return!0;if("value"in t){const r=this.getEditorContents(),s=t.value??"";this.isEqualValue(s,r)||this.setEditorContents(this.editor,s)}return t.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,t.readOnly),[...this.cleanProps,...this.dirtyProps].some(r=>!Sr(t[r],this.props[r]))}shouldComponentRegenerate(t){return this.dirtyProps.some(e=>!Sr(t[e],this.props[e]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(t,e){if(this.editor&&this.shouldComponentRegenerate(t)){const r=this.editor.getContents(),s=this.editor.getSelection();this.regenerationSnapshot={delta:r,selection:s},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==e.generation){const{delta:r,selection:s}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const i=this.editor;i.setContents(r),pu(()=>this.setEditorSelection(i,s))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){this.editor&&this.unhookEditor(this.editor)}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(t,e){const r=new x(t,e);return e.tabIndex!=null&&this.setEditorTabIndex(r,e.tabIndex),this.hookEditor(r),r}hookEditor(t){this.unprivilegedEditor=this.makeUnprivilegedEditor(t),t.on("editor-change",this.onEditorChange)}unhookEditor(t){t.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(t){return t&&t.ops}isEqualValue(t,e){return this.isDelta(t)&&this.isDelta(e)?Sr(t.ops,e.ops):Sr(t,e)}setEditorContents(t,e){this.value=e;const r=this.getEditorSelection();typeof e=="string"?t.setContents(t.clipboard.convert({html:e})):t.setContents(e),pu(()=>this.setEditorSelection(t,r))}setEditorSelection(t,e){if(this.selection=e,e){const r=t.getLength();e.index=Math.max(0,Math.min(e.index,r-1)),e.length=Math.max(0,Math.min(e.length,r-1-e.index)),t.setSelection(e)}}setEditorTabIndex(t,e){var r;(r=t==null?void 0:t.scroll)!=null&&r.domNode&&(t.scroll.domNode.tabIndex=e)}setEditorReadOnly(t,e){e?t.disable():t.enable()}makeUnprivilegedEditor(t){const e=t;return{getHTML:()=>e.root.innerHTML,getSemanticHTML:e.getSemanticHTML.bind(e),getLength:e.getLength.bind(e),getText:e.getText.bind(e),getContents:e.getContents.bind(e),getSelection:e.getSelection.bind(e),getBounds:e.getBounds.bind(e)}}getEditingArea(){const t=this.editingAreaRef.current;if(!t)throw new Error("Cannot find element for editing area");if(t.nodeType===3)throw new Error("Editing area cannot be a text node");return t}renderEditingArea(){const{children:t,preserveWhitespace:e}=this.props,{generation:r}=this.state,s={key:r,ref:this.editingAreaRef};return Xt.Children.count(t)?Xt.cloneElement(Xt.Children.only(t),s):e?Xt.createElement("pre",{...s}):Xt.createElement("div",{...s})}render(){return Xt.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(t,e,r,s){var a,l;if(!this.editor)return;const i=this.isDelta(this.value)?s.getContents():s.getHTML();i!==this.getEditorContents()&&(this.lastDeltaChangeSet=e,this.value=i,(l=(a=this.props).onChange)==null||l.call(a,t,e,r,s))}onEditorChangeSelection(t,e,r){var l,c,h,g,_,f;if(!this.editor)return;const s=this.getEditorSelection(),i=!s&&t,a=s&&!t;Sr(t,s)||(this.selection=t,(c=(l=this.props).onChangeSelection)==null||c.call(l,t,e,r),i?(g=(h=this.props).onFocus)==null||g.call(h,t,e,r):a&&((f=(_=this.props).onBlur)==null||f.call(_,s,e,r)))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}So.displayName="React Quill";So.Quill=x;So.defaultProps={theme:"snow",modules:{},readOnly:!1};function pu(n){Promise.resolve().then(n)}var kn={exports:{}},Gb=kn.exports,gu;function Kb(){return gu||(gu=1,function(n,t){(function(e,r){n.exports=r()})(Gb,function(){function e(b){if(!(typeof window>"u")){var m=document.createElement("style");return m.setAttribute("media","screen"),m.innerHTML=b,document.head.appendChild(m),b}}/*! *****************************************************************************
		    Copyright (c) Microsoft Corporation.

		    Permission to use, copy, modify, and/or distribute this software for any
		    purpose with or without fee is hereby granted.

		    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		    PERFORMANCE OF THIS SOFTWARE.
		    ***************************************************************************** */var r=function(b,m){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,E){y.__proto__=E}||function(y,E){for(var T in E)E.hasOwnProperty(T)&&(y[T]=E[T])},r(b,m)};function s(b,m){r(b,m);function y(){this.constructor=b}b.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}var i=function(){return i=Object.assign||function(m){for(var y,E=1,T=arguments.length;E<T;E++){y=arguments[E];for(var S in y)Object.prototype.hasOwnProperty.call(y,S)&&(m[S]=y[S])}return m},i.apply(this,arguments)};e(`#editor-resizer {
  position: absolute;
  border: 1px dashed #fff;
  background-color: rgba(0, 0, 0, 0.5);
}
#editor-resizer .handler {
  position: absolute;
  right: -5px;
  bottom: -5px;
  width: 10px;
  height: 10px;
  border: 1px solid #333;
  background-color: rgba(255, 255, 255, 0.8);
  cursor: nwse-resize;
  user-select: none;
}
#editor-resizer .toolbar {
  position: absolute;
  top: -5em;
  left: 50%;
  padding: 0.5em;
  border: 1px solid #fff;
  border-radius: 3px;
  background-color: #fff;
  box-shadow: 0 0 3px rgba(0, 0, 0, 0.5);
  transform: translateX(-50%);
  width: 20em;
}
#editor-resizer .toolbar .group {
  display: flex;
  border: 1px solid #aaa;
  border-radius: 6px;
  white-space: nowrap;
  text-align: center;
  line-height: 2;
  color: rgba(0, 0, 0, 0.65);
}
#editor-resizer .toolbar .group:not(:first-child) {
  margin-top: 0.5em;
}
#editor-resizer .toolbar .group .btn {
  flex: 1 0 0;
  text-align: center;
  width: 25%;
  padding: 0 0.5rem;
  display: inline-block;
  vertical-align: top;
  user-select: none;
  color: inherit;
}
#editor-resizer .toolbar .group .btn:not(:last-child) {
  border-right: 1px solid #bbb;
}
#editor-resizer .toolbar .group .btn:not(.btn-group):active {
  background-color: rgba(0, 0, 0, 0.1);
}
#editor-resizer .toolbar .group .input-wrapper {
  width: 25%;
  border: 1px solid #eee;
  position: relative;
  border-right: 1px solid #bbb;
  min-width: 4em;
}
#editor-resizer .toolbar .group .input-wrapper::after {
  content: " ";
  position: absolute;
  height: 1px;
  background-color: #333;
  left: 0.5em;
  right: 1em;
  bottom: 0.2em;
}
#editor-resizer .toolbar .group .input-wrapper input {
  color: inherit;
  text-align: center;
  width: 100%;
  border: none;
  outline: none;
  padding: 0 0.5em;
  padding-right: 1.5em;
}
#editor-resizer .toolbar .group .input-wrapper input:focus ~ .tooltip {
  display: block;
}
#editor-resizer .toolbar .group .input-wrapper .suffix {
  position: absolute;
  right: 0.5em;
}
#editor-resizer .toolbar .group .input-wrapper .tooltip {
  display: none;
  position: absolute;
  top: 100%;
  left: 0;
  font-size: small;
  background-color: #fff;
  box-shadow: 0 0 3px #a7a7a7;
  padding: 0 0.6em;
  border-radius: 5px;
  zoom: 0.85;
}
`);var a=function(){function b(m){this.config=i(i({},l),m)}return b.prototype.findLabel=function(m){return this.config?Reflect.get(this.config,m):null},b}(),l={floatLeft:"left",floatRight:"right",center:"center",restore:"restore",altTip:"Press and hold alt to lock ratio!",inputTip:"Press enter key to apply change!"};function c(b){for(var m=[],y=1;y<arguments.length;y++)m[y-1]=arguments[y];return b.replace(/\{(\d+)\}/g,function(E,T){return m.length>T?m[T]:""})}(function(b){s(m,b);function m(){var y=b!==null&&b.apply(this,arguments)||this;return y.originSize=null,y}return m})(HTMLElement);var h=`
<div class="handler" title="{0}"></div>
<div class="toolbar">
  <div class="group">
    <a class="btn" data-type="width" data-styles="width:100%">100%</a>
    <a class="btn" data-type="width" data-styles="width:50%">50%</a>
    <span class="input-wrapper"><input data-type="width" maxlength="3" /><span class="suffix">%</span><span class="tooltip">{5}</span></span>
    <a class="btn" data-type="width" data-styles="width:auto">{4}</a>
  </div>
  <div class="group">
    <a class="btn" data-type="align" data-styles="float:left">{1}</a>
    <a class="btn" data-type="align" data-styles="display:block;margin:auto;">{2}</a>
    <a class="btn" data-type="align" data-styles="float:right;">{3}</a>
    <a class="btn" data-type="align" data-styles="">{4}</a>
  </div>
</div>
`,g=function(){function b(m,y,E,T){this.resizer=null,this.startResizePosition=null,this.i18n=new a((T==null?void 0:T.locale)||l),this.options=T,this.resizeTarget=m,m.originSize||(m.originSize={width:m.clientWidth,height:m.clientHeight}),this.editor=E,this.container=y,this.initResizer(),this.positionResizerToTarget(m),this.resizing=this.resizing.bind(this),this.endResize=this.endResize.bind(this),this.startResize=this.startResize.bind(this),this.toolbarClick=this.toolbarClick.bind(this),this.toolbarInputChange=this.toolbarInputChange.bind(this),this.onScroll=this.onScroll.bind(this),this.bindEvents()}return b.prototype.initResizer=function(){var m=this.container.querySelector("#editor-resizer");m||(m=document.createElement("div"),m.setAttribute("id","editor-resizer"),m.innerHTML=c(h,this.i18n.findLabel("altTip"),this.i18n.findLabel("floatLeft"),this.i18n.findLabel("center"),this.i18n.findLabel("floatRight"),this.i18n.findLabel("restore"),this.i18n.findLabel("inputTip")),this.container.appendChild(m)),this.resizer=m},b.prototype.positionResizerToTarget=function(m){this.resizer!==null&&(this.resizer.style.setProperty("left",m.offsetLeft+"px"),this.resizer.style.setProperty("top",m.offsetTop-this.editor.scrollTop+"px"),this.resizer.style.setProperty("width",m.clientWidth+"px"),this.resizer.style.setProperty("height",m.clientHeight+"px"))},b.prototype.bindEvents=function(){this.resizer!==null&&(this.resizer.addEventListener("mousedown",this.startResize),this.resizer.addEventListener("click",this.toolbarClick),this.resizer.addEventListener("change",this.toolbarInputChange)),window.addEventListener("mouseup",this.endResize),window.addEventListener("mousemove",this.resizing),this.editor.addEventListener("scroll",this.onScroll)},b.prototype.onScroll=function(){this.positionResizerToTarget(this.resizeTarget)},b.prototype._setStylesForToolbar=function(m,y){var E,T="_styles_"+m,S=this.resizeTarget.style,C=this.resizeTarget[T];S.cssText=S.cssText.replaceAll(" ","").replace(C,"")+(";"+y),this.resizeTarget[T]=y,this.positionResizerToTarget(this.resizeTarget),(E=this.options)===null||E===void 0||E.onChange(this.resizeTarget)},b.prototype.toolbarInputChange=function(m){var y,E=m.target,T=(y=E==null?void 0:E.dataset)===null||y===void 0?void 0:y.type,S=E.value;T&&Number(S)&&this._setStylesForToolbar(T,"width: "+Number(S)+"%;")},b.prototype.toolbarClick=function(m){var y,E,T=m.target,S=(y=T==null?void 0:T.dataset)===null||y===void 0?void 0:y.type;S&&T.classList.contains("btn")&&this._setStylesForToolbar(S,(E=T==null?void 0:T.dataset)===null||E===void 0?void 0:E.styles)},b.prototype.startResize=function(m){var y=m.target;y.classList.contains("handler")&&m.which===1&&(this.startResizePosition={left:m.clientX,top:m.clientY,width:this.resizeTarget.clientWidth,height:this.resizeTarget.clientHeight})},b.prototype.endResize=function(){var m;this.startResizePosition=null,(m=this.options)===null||m===void 0||m.onChange(this.resizeTarget)},b.prototype.resizing=function(m){if(this.startResizePosition){var y=m.clientX-this.startResizePosition.left,E=m.clientY-this.startResizePosition.top,T=this.startResizePosition.width,S=this.startResizePosition.height;if(T+=y,S+=E,m.altKey){var C=this.resizeTarget.originSize,O=C.height/C.width;S=O*T}this.resizeTarget.style.setProperty("width",Math.max(T,30)+"px"),this.resizeTarget.style.setProperty("height",Math.max(S,30)+"px"),this.positionResizerToTarget(this.resizeTarget)}},b.prototype.destory=function(){this.container.removeChild(this.resizer),window.removeEventListener("mouseup",this.endResize),window.removeEventListener("mousemove",this.resizing),this.editor.removeEventListener("scroll",this.onScroll),this.resizer=null},b}(),_=function(){function b(m,y){this.element=m,this.cb=y,this.hasTracked=!1}return b}(),f=function(){function b(){}return b.track=function(m,y){this.iframes.push(new _(m,y)),this.interval||(this.interval=setInterval(function(){b.checkClick()},this.resolution))},b.checkClick=function(){if(document.activeElement){var m=document.activeElement;for(var y in this.iframes)m===this.iframes[y].element?this.iframes[y].hasTracked==!1&&(this.iframes[y].cb.apply(window,[]),this.iframes[y].hasTracked=!0):this.iframes[y].hasTracked=!1}},b.resolution=200,b.iframes=[],b.interval=null,b}();function v(b,m){var y=b.root,E,T;function S(){var C=b.getContents().constructor,O=new C().retain(1);b.updateContents(O)}y.addEventListener("click",function(C){var O=C.target;C.target&&["img","video"].includes(O.tagName.toLowerCase())&&(E=O,T=new g(O,y.parentElement,y,i(i({},m),{onChange:S})))}),b.on("text-change",function(C,O){y.querySelectorAll("iframe").forEach(function(B){f.track(B,function(){E=B,T=new g(B,y.parentElement,y,i(i({},m),{onChange:S}))})})}),document.addEventListener("mousedown",function(C){var O,B,U,X=C.target;X!==E&&!(!((B=(O=T==null?void 0:T.resizer)===null||O===void 0?void 0:O.contains)===null||B===void 0)&&B.call(O,X))&&((U=T==null?void 0:T.destory)===null||U===void 0||U.call(T),T=null,E=null)},{capture:!0})}return v})}(kn)),kn.exports}var Vb=Kb();const nv=Vr(Vb);export{Yb as P,x as Q,So as R,nv as a};
