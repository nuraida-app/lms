var u=Object.defineProperty;var m=(s,t,e)=>t in s?u(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var l=(s,t,e)=>m(s,typeof t!="symbol"?t+"":t,e);import{r as p,j as d}from"./index-BmFd-R0Z.js";import{Q as g,a as f,P as o,R as b}from"./quill.snow-D1MbZPFh.js";g.register("modules/resize",f);class i extends p.Component{constructor(e){super(e);l(this,"handleChange",e=>{this.setState({editorHtml:e}),this.props.onChange(e)});l(this,"handleImageUpload",()=>{const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","image/*"),e.click(),e.onchange=async()=>{const a=e.files[0];if(a){const n=new FormData;n.append("file",a);try{const c=await(await fetch("https://api.nibs.sch.id/upload/images",{method:"POST",body:n})).json(),h=this.reactQuillRef.getEditor().getSelection();this.reactQuillRef.getEditor().insertEmbed(h.index,"image",c.url)}catch(r){console.error("Error uploading image:",r),alert(r.message)}}}});this.state={editorHtml:e.value||""},this.reactQuillRef=null}componentDidUpdate(e){e.value!==this.props.value&&this.setState({editorHtml:this.props.value})}render(){const{placeholder:e}=this.props;return d.jsx("div",{className:"d-flex mb-2",style:{height:300},children:d.jsx(b,{ref:a=>{this.reactQuillRef=a},theme:"snow",value:this.state.editorHtml,onChange:this.handleChange,modules:i.modules(this.handleImageUpload),formats:i.formats,placeholder:e,style:{width:"100%"},className:"react-quill border border-2 rounded shadow"})})}}i.modules=s=>({toolbar:{container:[[{header:"1"},{header:"2"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],["clean"]],handlers:{image:s}},clipboard:{matchVisual:!1},resize:{modules:["Resize"]}});i.formats=["header","font","size","bold","italic","underline","strike","blockquote","list","indent","link","image","video"];i.propTypes={placeholder:o.string,value:o.string,onChange:o.func.isRequired};export{i as E};
