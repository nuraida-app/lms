import{r as t,a as E,$ as L,y as j,j as e,B as k,a0 as D,a1 as T}from"./index-SXBgl-Na.js";import{L as q}from"./Layout-Cj6escvc.js";import{T as H}from"./TabelContainer-YSWDuOy7.js";import"./index-CzZiVV_3.js";const P=({admin:n,remove:u})=>{const[i,d]=t.useState(""),[c,r]=t.useState(""),[h,l]=t.useState(""),[m,a]=t.useState(""),[o,x]=t.useState(""),[f,p]=t.useState(""),{data:b}=E(),[y,{data:v,isSuccess:N,isLoading:C,error:g,reset:A}]=L(),S=s=>{s.preventDefault(),y({id:i,name:c,email:h,password:m,role:o,homebase_id:f||null})},w=()=>{d(""),r(""),l(""),x(""),p(""),a(""),u()};return t.useEffect(()=>{N&&(j.success(v.message),d(""),r(""),l(""),x("default"),p("default"),a(""),A()),g&&(j.error(g.data.message),A())},[v,N,g]),t.useEffect(()=>{n&&(d(n.id),r(n.name),l(n.email),x(n.role),p(n.homebase_id))},[n]),e.jsxs("div",{className:"mt-2 p-2 shadow rounded d-flex flex-column gap-2 bg-white border border-2",children:[e.jsx("p",{className:"h5",children:"Tambahkan Administrator"}),e.jsxs("form",{action:"",className:"d-flex flex-column gap-2",onSubmit:S,children:[e.jsx("input",{type:"text",name:"name",id:"1",placeholder:"Nama Admin",className:"form-control",value:c||"",onChange:s=>r(s.target.value),required:!0}),e.jsx("input",{type:"email",name:"email",id:"2",placeholder:"Email",className:"form-control",value:h||"",onChange:s=>l(s.target.value),required:!0}),e.jsxs("select",{name:"role",id:"3",value:o||"",onChange:s=>x(s.target.value),className:"form-select",required:!0,children:[e.jsx("option",{value:"default",hidden:!0,children:"Pilih Level"}),e.jsx("option",{value:"super-admin",children:"Center"}),e.jsx("option",{value:"admin",children:"Admin Satuan"}),e.jsx("option",{value:"tahfiz",children:"Tahfiz"})]}),o==="admin"&&e.jsxs("select",{name:"role",id:"4",value:f||"",onChange:s=>p(s.target.value),className:"form-select",required:!0,children:[e.jsx("option",{value:"default",hidden:!0,children:"Pilih Satuan"}),b==null?void 0:b.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx("input",{type:"password",name:"password",id:"5",placeholder:"Masukan Password",className:"form-control",value:m||"",onChange:s=>a(s.target.value)}),e.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-danger",onClick:w,children:"Batal"}),C?e.jsx(k,{}):e.jsx("button",{type:"submit",className:"btn btn-success",children:"+ Tambahkan"})]})]})]})},B=[{label:"No"},{label:"Nama Admin"},{label:"Level"},{label:"Aksi"}],R=()=>{const[n,u]=t.useState({}),{data:i}=D(),[d,{data:c,isSuccess:r,isLoading:h,error:l,reset:m}]=T();return t.useEffect(()=>{r&&(j.success(c.message),m()),l&&(j.error(l.data.message),m())},[c,r,l]),e.jsx(q,{title:"Daftar Administrator",children:e.jsxs("div",{className:"containter-fluid row",style:{height:"100%"},children:[e.jsx("div",{className:"col-lg-3 col-12",children:e.jsx(P,{admin:n,remove:()=>u({})})}),e.jsx("div",{className:"col-lg-9 col-12",children:e.jsx(H,{children:e.jsxs("table",{className:"table table-striped table-hover mt-2",children:[e.jsx("thead",{children:e.jsx("tr",{children:B.map((a,o)=>e.jsx("th",{scope:"col",className:"text-center",children:a.label},o))})}),e.jsx("tbody",{children:i==null?void 0:i.map((a,o)=>e.jsxs("tr",{children:[e.jsx("th",{scope:"row",className:"text-center",children:o+1}),e.jsx("td",{children:a.name}),e.jsx("td",{className:"text-center",children:a.role}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[e.jsx("button",{className:"btn btn-warning",onClick:()=>u(a),children:"Edit"}),e.jsx("button",{className:"btn btn-danger",onClick:()=>d(a.id),children:h?"Loading...":"Hapus"})]})})]},a.id))})]})})})]})})};export{R as default};
