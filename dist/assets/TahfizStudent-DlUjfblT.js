import{i as T,r as m,as as _,ac as C,j as e,ah as D}from"./index-DMvCZNdX.js";import{T as $}from"./TabelContainer-Df-0NVOq.js";import"./index-mJC8lMn1.js";const M=()=>{const p=T(),[h,u]=m.useState(1),[f,y]=m.useState(10),[t,x]=m.useState({}),{name:v,nis:j}=p,b=v.replace(/-/g," "),{data:w={},isLoading:A}=_(j,{skip:!j}),{report:r=[],totalPages:P}=w,{data:c}=C();return e.jsxs(D,{title:`Laporan Tahfiz ${b}`,children:[e.jsx("p",{className:"m-0 h5 p-2 rounded border shadow bg-white",children:b}),e.jsx($,{page:h,setPage:a=>u(a),setLimit:a=>y(a),totalPages:P,children:e.jsxs("table",{className:"table table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"align-middle text-center",children:"No"}),e.jsx("th",{className:"align-middle text-center",children:"Tanggal"}),e.jsx("th",{className:"align-middle text-center",children:"Penguji"}),e.jsx("th",{className:"align-middle text-center",children:"Jenis Penilaian"}),e.jsx("th",{className:"align-middle text-center",children:"Surah"}),e.jsx("th",{className:"align-middle text-center",children:"Nilai"}),e.jsx("th",{className:"align-middle text-center",children:"Aksi"})]})}),e.jsx("tbody",{children:r==null?void 0:r.map((a,i)=>{var d;return e.jsxs("tr",{children:[e.jsx("td",{className:"align-middle text-center",children:(h-1)*f+i+1}),e.jsx("td",{className:"align-middle text-center",children:new Date(a.date).toLocaleDateString()}),e.jsx("td",{className:"align-middle",children:a.examiner}),e.jsx("td",{className:"align-middle",children:a.type}),e.jsx("td",{className:"align-middle",children:(d=a.surahs)==null?void 0:d.map(l=>e.jsx("p",{className:"m-0",children:`${l.name} (${l.from_ayat} -  ${l.to_ayat})`},l.id))}),e.jsx("td",{className:"align-middle text-center",children:a.totalPoints}),e.jsx("td",{className:"align-middle text-center",children:e.jsx("button",{className:"btn btn-info","data-bs-toggle":"modal","data-bs-target":"#detail",onClick:()=>x(a),children:"Detail"})})]},i)})})]})}),e.jsx("div",{className:"modal fade",id:"detail",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog modal-lg modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"exampleModalLabel",children:t==null?void 0:t.name}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"table-responsive border border-2 p-1 rounded bg-white shadow",children:e.jsxs("table",{className:"table table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Kategori"}),e.jsx("th",{children:"Indikator"}),e.jsx("th",{children:"Poin"})]})}),e.jsx("tbody",{children:c==null?void 0:c.map((a,i)=>{var d,l;return e.jsxs("tr",{children:[e.jsx("td",{className:"align-middle",children:a.category}),e.jsx("td",{className:"align-middle",children:e.jsx("div",{className:"d-flex flex-column gap-2",children:Array.isArray(a.indicators)&&a.indicators.filter(s=>s!==null).length>0?a.indicators.filter(s=>s!==null).map((s,k)=>{var N,g;const o=(N=t==null?void 0:t.scores)==null?void 0:N.find(n=>n.category_id===a.id&&n.indicators.some(S=>S.indicator_id===s.id)),L=(g=o==null?void 0:o.indicators.find(n=>n.indicator_id===s.id))==null?void 0:g.poin;return e.jsxs("div",{className:"d-flex align-items-center justify-content-between p-2 rounded border border-2 bg-white",children:[e.jsx("p",{className:"m-0",children:s.name}),e.jsx("input",{style:{width:200},type:"text",className:"form-control",placeholder:"Penilaian",value:L||"",readOnly:!0,"data-indicator-id":s.id,"data-category-id":a.id})]},k)}):e.jsx("p",{className:"m-0 text-muted",children:"Tidak ada indikator untuk kategori ini"})})}),e.jsx("td",{className:"align-middle",children:e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx("input",{type:"text",name:"category-score",className:"form-control",placeholder:"Nilai",style:{width:80},value:((l=(d=t==null?void 0:t.scores)==null?void 0:d.find(s=>s.category_id===a.id))==null?void 0:l.poin)||"",readOnly:!0,"data-category-id":a.id})})})]},i)})})]})})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:()=>x({}),children:"Tutup"})})]})})})]})};export{M as default};
