import{r as s,am as C,y as g,j as e,ai as w,an as L,al as T}from"./index-DnLSs86n.js";import{T as E}from"./TabelContainer-0T-vlQNa.js";import"./index-DESm-F1K.js";const k=({surah:t,clear:f})=>{const[o,i]=s.useState(),[m,r]=s.useState(""),[u,n]=s.useState(""),[N,{data:c,isSuccess:h,isLoading:S,error:d,reset:x}]=C(),j=l=>{l.preventDefault(),N({id:o,name:m,count:u})},b=()=>{i(""),r(""),n(""),f()};return s.useEffect(()=>{h&&(g.success(c.message),i(""),r(""),n(""),x()),d&&(console.log(d),g.error(d.data.message),x())},[c,h,d]),s.useEffect(()=>{t&&(i(t.id),r(t.name),n(t.ayat))},[t]),e.jsxs("form",{className:"p-2 rounded border border-2 shadow d-flex flex-column gap-2 mt-2 bg-white",onSubmit:j,children:[e.jsx("p",{className:"m-0 h6",children:"Tambah Surah"}),e.jsx("input",{type:"text",name:"surah",id:"1",className:"form-control",value:m||"",onChange:l=>r(l.target.value),required:!0,placeholder:"Nama Surah"}),e.jsx("input",{type:"number",name:"surah",id:"2",className:"form-control",value:u||"",onChange:l=>n(l.target.value),required:!0,placeholder:"Jumlah Ayat"}),e.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-warning",onClick:b,children:"Batal"}),e.jsx("button",{type:"submit",className:"btn btn-success",children:S?"Loading...":"+ Tambahkan"})]})]})},y=[{label:"No"},{label:"Nama Surat"},{label:"Jumlah Ayat"},{label:"Aksi"}],P=()=>{const[t,f]=s.useState(1),[o,i]=s.useState(10),[m,r]=s.useState(""),[u,n]=s.useState({}),{data:N={}}=w({page:t,limit:o,search:m}),{surah:c=[],totalPages:h,totalSurah:S,totalAyat:d}=N,[x,{data:j,isSuccess:b,isLoading:l,error:p,reset:v}]=L();return s.useEffect(()=>{b&&(g.success(j.message),v()),p&&(g.error(p.data.message),v())},[j,b,p]),e.jsx(T,{title:"Index Al Qur`an",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-3 col-12",children:e.jsx(k,{surah:u,clear:()=>n({})})}),e.jsx("div",{className:"col-md-9 col-12",children:e.jsxs(E,{page:t,setPage:a=>f(a),setLimit:a=>i(a),onValue:a=>r(a),totalPages:h,children:[e.jsxs("div",{className:"d-flex justify-content-between mx-2",children:[e.jsxs("p",{className:"m-0 h6",children:["Total Surah ",e.jsx("span",{children:S})]}),e.jsxs("p",{className:"m-0 h6",children:["Total Ayat ",e.jsx("span",{children:d})]})]}),e.jsxs("table",{className:"table table-striped table-hover mt-2",children:[e.jsx("thead",{children:e.jsx("tr",{children:y==null?void 0:y.map(a=>e.jsx("th",{scope:"col",className:"text-center",children:a.label},a.label))})}),e.jsx("tbody",{children:c==null?void 0:c.map((a,A)=>e.jsxs("tr",{children:[e.jsx("td",{className:"align-middle text-center",children:(t-1)*o+A+1}),e.jsx("td",{className:"align-middle",children:a.name}),e.jsx("td",{className:"align-middle text-center",children:a.ayat}),e.jsx("td",{className:"align-middle",children:e.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[e.jsx("button",{className:"btn btn-warning",onClick:()=>n(a),children:"Edit"}),e.jsx("button",{className:"btn btn-danger",onClick:()=>x(a.id),children:l?"Loading...":"Hapus"})]})})]},A))})]})]})})]})})};export{P as default};
